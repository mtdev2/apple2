!function(){function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}return t}()({1:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function N(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:N(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},l=t("./utils/vector3FromLatLon"),c=t("@marcom/ac-raf-emitter/update"),h=t("@marcom/ac-raf-emitter/cancelUpdate"),f=t("./controls/PointerControls"),d=t("./controls/OrientationControls"),p=t("@marcom/ac-event-emitter-micro/EventEmitterMicro"),m=t("@marcom/ac-easing/src/ac-easing/createBezier"),y=t("@marcom/ac-useragent"),_=t("./utils/simpleTimer"),v=t("./utils/inverseLongitude"),g=t("./controls/ArrowControls"),b=t("./utils/map"),w=t("@marcom/ac-feature/webGLAvailable")(),x=t("./utils/loadScript"),E=y.os.ios,k=80,S=1.25,C=y.browser.safari&&y.os.osx?"high-performance":"default",T={slow:80,fast:120},A=m(.25,.1,0,1),M=m(.1,.15,0,1),P=.001,O=.999,I=1600,D=1600,L=12,R="/ac/libs/three/92/three.min.js",F=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));n.el=t.el,w||setTimeout(function(){n.trigger("error")}),n._textureSrc=t.src,t.video?n._videoElement=t.video:t.src instanceof HTMLVideoElement?n._videoElement=t.src:n._textureSrc&&(n._textureSrc.endsWith(".mp4")||n._textureSrc.endsWith(".m3u8")||n._textureSrc.endsWith(".webm"))&&(n._videoElement=document.createElement("video")),n._maxLat=t.maxLat||k,n._pointerControls=new f({el:t.mouseTarget||n.el}),n.arrowControls=new g,n._easing=t.easing||A,n._sineEasing=t.sineEasing||M,n._mapMinValue=void 0!==t.mapMinValue?t.mapMinValue:P,n._mapMaxValue=t.mapMaxValue||O,n._rotationDuration=t.rotationDuration||I,E&&(n._orientationControls=new d),n._panVelocity=Object.assign({},t.panVelocity||T),n._overshootMultiplier=t.overshootMultiplier||S,n._oscillationDuration=t.ocillationDuration||D,n._oscillationDistance=t.ocillationDistance||L,n._bindMethods();var o=window.THREE?Promise.resolve():x(t.threeUrl||R);return n._cachedPos={lat:0,lon:0},o.then(function(){n._attach(),n.refreshSize()}),n}return o(e,t),a(e,[{key:"_bindMethods",value:function(){this._onPlaying=this._onPlaying.bind(this)}},{key:"_attach",value:function(){this._distance=50;var t={lat:0,lon:0};this._cachedPos=t,this._pointerControls.position=t,this._orientationControls&&(this._orientationControls.position=t);var e=this.el.clientWidth,n=this.el.clientHeight,i=e/n;this._camera=new THREE.PerspectiveCamera(75,i,1,1100),this._camera.target=new THREE.Vector3(0,0,0),this._scene=new THREE.Scene,this._geometry=new THREE.SphereBufferGeometry(500,60,40),this._geometry.scale(-1,1,1),this._texture=this._createTexture(this._textureSrc),this._material=new THREE.MeshBasicMaterial({map:this._texture}),this._mesh=new THREE.Mesh(this._geometry,this._material),this._scene.add(this._mesh),this._renderer=new THREE.WebGLRenderer({antialias:!1,powerPreference:C}),this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.setSize(e,n),this._renderer.domElement.classList.add("threesixty-renderer"),this.el.appendChild(this._renderer.domElement),this._animate=this._animate.bind(this),this._animateRAF=c(this._animate)}},{key:"_animate",value:function(){this._update(),this._animateRAF=c(this._animate)}},{key:"_update",value:function(t){if(window.THREE){var n=t;n||(n=this.arrowControls.isActive?this.arrowControls.position:this._pointerControls.isActive?this._pointerControls.position:this._orientationControls?this._orientationControls.position:this._cachedPos);var i=!1;if(this._cachedPos.lat!==n.lat||this._cachedPos.lon!==n.lon)i=!0;else if(!this._videoElement||this._videoElement.paused)return;var r=Math.max(-this._maxLat,Math.min(this._maxLat,n.lat)),o=THREE.Math.degToRad(90-r),s=THREE.Math.degToRad(n.lon),a=this._distance*Math.sin(o)*Math.cos(s),u=this._distance*Math.cos(o),l=this._distance*Math.sin(o)*Math.sin(s);this._camera.zoom=this._pointerControls.scale,this._camera.position.x=a,this._camera.position.y=u,this._camera.position.z=l,this._camera.lookAt(this._camera.target),this._camera.updateProjectionMatrix(),this._renderer.render(this._scene,this._camera);var c={lat:r,lon:n.lon,x:a,y:u,z:l};this._cachedPos={lat:c.lat,lon:c.lon,x:c.x,y:c.y,z:c.z},this._pointerControls.position=c,this.arrowControls.position=c,this._orientationControls&&(this._orientationControls.position=c),this._originQuaternion||(this._originQuaternion=(new THREE.Quaternion).copy(this._camera.quaternion)),i&&this.trigger(e.POSITION_CHANGE)}}},{key:"_createTexture",value:function(t){if(t instanceof HTMLVideoElement){this._videoElement=t,this._videoElement.setAttribute("playsinline","playsinline"),this._videoElement.setAttribute("webkit-playsinline","webkit-playsinline"),this._videoElement.addEventListener("playing",this._onPlaying);var e=new THREE.VideoTexture(this._videoElement);return e.minFilter=THREE.LinearFilter,e.format=THREE.RGBFormat,e}if(t.endsWith(".mp4")||t.endsWith(".m3u8")||t.endsWith(".webm")){this._videoElement||(this._videoElement=document.createElement("video")),this._videoElement.src=t,this._videoElement.loop=!0,this._videoElement.muted=!0,this._videoElement.crossOrigin="anonymous",this._videoElement.setAttribute("webkit-playsinline","webkit-playsinline"),this._videoElement.setAttribute("playsinline","playsinline"),this._videoElement=this._videoElement,this._videoElement.addEventListener("playing",this._onPlaying);var n=new THREE.VideoTexture(this._videoElement);return n.minFilter=THREE.LinearFilter,n.format=THREE.RGBFormat,n}return this._orientationControls.enable(),(new THREE.TextureLoader).load(t)}},{key:"refreshSize",value:function(){this._onResize()}},{key:"setPos",value:function(t,e){this._pointerControls&&(this._pointerControls.position={lat:t,lon:e}),this._orientationControls&&(this._orientationControls.position={lat:t,lon:e}),this._update({lat:t,lon:e})}},{key:"_onResize",value:function(){if(window.THREE&&this._camera&&this._renderer){var t=void 0,e=void 0;this._videoElement.parentElement?(t=this._videoElement.clientWidth,e=this._videoElement.clientHeight):(t=this.el.clientWidth,e=this.el.clientHeight),h(this._animateRAF),this._pointerControls.setViewerSize(t,e),this._camera.aspect=t/e,this._camera.updateProjectionMatrix(),this._renderer.setSize(t,e),this._renderer.render(this._scene,this._camera),this._animate()}}},{key:"_onPlaying",value:function(){this._videoElement.removeEventListener("playing",this._onPlaying),this._orientationControls&&this._orientationControls.enable()}},{key:"play",value:function(){this._videoElement&&this._videoElement.play()}},{key:"pause",value:function(){this._videoElement&&!this._videoElement.paused&&this._videoElement.pause()}},{key:"sendMouseDown",value:function(t){this._pointerControls.sendMouseDown(t)}},{key:"destroy",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"oscillateLongitude",value:function(){var t=this;this._pointerControls.cancelInertia(),this.arrowControls.cancelInertia();var n=new THREE.Vector2(this.position.lon,this.position.lat),i=this._oscillationDuration,r={time:i,startPosition:Object.assign({},this.position),targetPosition:Object.assign({},this.position)};return this.trigger(e.ROTATION_START,r),new Promise(function(o){_(i,function(i){var o=Math.sin(Math.PI*t._sineEasing.getValue(i)),s=(new THREE.Vector2).copy(n);s.x=n.x-o*t._oscillationDistance;var a=l(s.y,s.x,t._distance);t.trigger(e.ROTATION_UPDATE,{t:i,easedVal:o,startPosition:r.startPosition,currentPosition:{lat:s.y,lon:s.x},targetPosition:r.targetPosition}),t._camera.position.copy(a),t._camera.lookAt(t._camera.target),t._camera.updateProjectionMatrix(),t._renderer.render(t._scene,t._camera)}).then(function(){t.trigger(e.ROTATION_COMPLETE,r),t.setPos(n.y,n.x),t._animate(),o()})})}},{key:"panToPosition",value:function(t){return this._respositionCameraToPosition(t)}},{key:"_respositionCameraToPosition",value:function(t){var n=this;if(this._pointerControls.cancelInertia(),this.arrowControls.cancelInertia(),t.lat===this.position.lat&&t.lon===this.position.lon)return this.trigger(e.ROTATION_START,{time:0,startPosition:Object.assign({},this.position),targetPosition:Object.assign({},this.position)}),this.trigger(e.ROTATION_COMPLETE,{time:1,startPosition:Object.assign({},this.position),targetPosition:Object.assign({},this.position)}),Promise.resolve();var i=new THREE.Vector2(this.position.lon,this.position.lat),r=new THREE.Vector2(v(t.lon),t.lat),o=new THREE.Vector2(t.lon,t.lat),s=i.distanceTo(o),a=i.distanceTo(r);a<s&&(s=a,o=r);var u=(new THREE.Vector2).copy(i);h(this._animateRAF);var c=this._rotationDuration,f={time:c,startPosition:Object.assign({},this._cachedPos),targetPosition:Object.assign({},t)};return this.trigger(e.ROTATION_START,f),new Promise(function(r){_(c,function(t){var r=void 0;r=1===t?1:b(n._easing.getValue(t),0,1,n._mapMinValue,n._mapMaxValue);var s=u.lerpVectors(i,o,r),a=l(s.y,s.x,n._distance);n._camera.position.copy(a),n._camera.lookAt(n._camera.target),n._camera.updateProjectionMatrix(),n._renderer.render(n._scene,n._camera),n.trigger(e.ROTATION_UPDATE,{t:t,easedVal:r,startPosition:f.startPosition,currentPosition:{lat:s.y,lon:s.x},targetPosition:{lat:o.x,lon:o.y}})}).then(function(){n.trigger(e.ROTATION_COMPLETE,f),n.setPos(t.lat,t.lon),n._animate(),r()})})}},{key:"position",get:function(){return Object.assign({},this._cachedPos)}},{key:"isAtOrigin",get:function(){return Math.abs(this.position.lat)<=.5&&Math.abs(this.position.lon)<=.5}},{key:"mediaElement",get:function(){return this._videoElement}}]),e}(p);F.ROTATION_START="RotationStart",F.ROTATION_UPDATE="RotationUpdate",F.ROTATION_COMPLETE="RotationComplete",F.POSITION_CHANGE="360PositionChange",e.exports=F},{"./controls/ArrowControls":3,"./controls/OrientationControls":5,"./controls/PointerControls":6,"./utils/inverseLongitude":7,"./utils/loadScript":8,"./utils/map":9,"./utils/simpleTimer":11,"./utils/vector3FromLatLon":12,"@marcom/ac-easing/src/ac-easing/createBezier":64,"@marcom/ac-event-emitter-micro/EventEmitterMicro":67,"@marcom/ac-feature/webGLAvailable":74,"@marcom/ac-raf-emitter/cancelUpdate":120,"@marcom/ac-raf-emitter/update":125,"@marcom/ac-useragent":159}],2:[function(t,e,n){"use strict";e.exports=t("./AC360")},{"./AC360":1}],3:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function m(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:m(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},l=t("./InertialControls"),c=t("../utils/normalizeLongitude"),h=t("@marcom/ac-raf-emitter/update"),f=t("@marcom/ac-raf-emitter/cancelUpdate"),d={acceleration:{x:.6,y:.6},friction:{x:.95,y:.95},minVelocity:.1,maxVelocity:20},p=function(t){function e(t){i(this,e),t=Object.assign({},d,t);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._bindMethods(),n}return o(e,t),a(e,[{key:"_bindMethods",value:function(){this.leftArrowDown=this.leftArrowDown.bind(this),this.rightArrowDown=this.rightArrowDown.bind(this),this.downArrowDown=this.downArrowDown.bind(this),this.upArrowDown=this.upArrowDown.bind(this),this.leftArrowUp=this.leftArrowUp.bind(this),this.rightArrowUp=this.rightArrowUp.bind(this),this.downArrowUp=this.downArrowUp.bind(this),this.upArrowUp=this.upArrowUp.bind(this),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_bindMethods",this).call(this)}},{key:"leftArrowDown",value:function(){Math.abs(this._velocity.x-this._horizontalIncrement)<this._maxVelocity?this._velocity.x-=this._horizontalIncrement:this._velocity.x=-this._maxVelocity,this._lon=c(this._lon+this._velocity.x),this._triggerInertia()}},{key:"rightArrowDown",value:function(){Math.abs(this._velocity.x+this._horizontalIncrement)<this._maxVelocity?this._velocity.x+=this._horizontalIncrement:this._velocity.x=this._maxVelocity,this._velocity.x+=this._horizontalIncrement,this._lon=c(this._lon+this._velocity.x),this._triggerInertia()}},{key:"upArrowDown",value:function(t){Math.abs(this._velocity.y-this._verticalIncrement)<this._maxVelocity?this._velocity.y-=this._verticalIncrement:this._velocity.y=-this._maxVelocity,this._lat=this._lat+this._velocity.y,this._triggerInertia()}},{key:"downArrowDown",value:function(){Math.abs(this._velocity.y+this._verticalIncrement)<this._maxVelocity?this._velocity.y+=this._verticalIncrement:this._velocity.y=this._maxVelocity,this._lat=this._lat+this._velocity.y,this._triggerInertia()}},{key:"leftArrowUp",value:function(){this._triggerInertia()}},{key:"rightArrowUp",value:function(){this._triggerInertia()}},{key:"upArrowUp",value:function(){this._triggerInertia()}},{key:"downArrowUp",value:function(){this._triggerInertia()}},{key:"_triggerInertia",value:function(){f(this._inertiaRaf),h(this._updateInertia)}},{key:"isActive",get:function(){return Math.abs(this._velocity.x)>this._minVelocity||Math.abs(this._velocity.y)>this._minVelocity}}]),e}(l);e.exports=p},{"../utils/normalizeLongitude":10,"./InertialControls":4,"@marcom/ac-raf-emitter/cancelUpdate":120,"@marcom/ac-raf-emitter/update":125}],4:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("@marcom/ac-raf-emitter/update"),s=t("@marcom/ac-raf-emitter/cancelUpdate"),a=t("../utils/normalizeLongitude"),u=.5,l=.1,c=5,h=20,f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this._horizontalFriction=e.friction&&e.friction.x||u,this._verticalFriction=e.friction&&e.friction.x||u,this._horizontalIncrement=e.acceleration&&e.acceleration.x||l,this._verticalIncrement=e.acceleration&&e.acceleration.y||l,this._minVelocity=e.minVelocity||c,this._maxVelocity=e.maxVelocity||h,this._velocity={x:0,y:0},this._bindMethods()}return r(t,[{key:"_bindMethods",value:function(){this._updateInertia=this._updateInertia.bind(this)}},{key:"_updateInertia",value:function(){Math.abs(this._velocity.x)>this._minVelocity||Math.abs(this._velocity.y)>this._minVelocity?(this._velocity.x*=this._horizontalFriction,this._velocity.y*=this._verticalFriction,this._lon+=this._velocity.x*this._horizontalIncrement,this._lat+=this._velocity.y*this._verticalIncrement,this._inertiaRaf=o(this._updateInertia)):(this._velocity={x:0,y:0},s(this._inertiaRaf),this._inertiaComplete())}},{key:"cancelInertia",value:function(){this._velocity={x:0,y:0},s(this._inertiaRaf)}},{key:"_inertiaComplete",value:function(){}},{key:"position",set:function(t){this._lat=t.lat,this._lon=a(t.lon)},get:function(){return{lat:this._lat,lon:this._lon}}}]),t}();e.exports=f},{"../utils/normalizeLongitude":10,"@marcom/ac-raf-emitter/cancelUpdate":120,"@marcom/ac-raf-emitter/update":125}],5:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("../utils/normalizeLongitude"),s=.02,a=function(){function t(e){i(this,t),this._bindMethods()}return r(t,[{key:"_bindMethods",value:function(){this._onOrientation=this._onOrientation.bind(this)}},{key:"_addEventListeners",value:function(){window.addEventListener("devicemotion",this._onOrientation,!0)}},{key:"_removeEventListeners",value:function(){window.removeEventListener("devicemotion",this._onOrientation,!0)}},{key:"_onOrientation",value:function(t){window.matchMedia("(orientation: portrait)").matches?(this._lon=o(this._lon-t.rotationRate.beta*s),this._lat=this._lat-t.rotationRate.alpha*s):t.orientation||window.orientation===-90?(this._lon=o(this._lon+t.rotationRate.alpha*s),this._lat=this._lat-t.rotationRate.beta*s):(this._lon=o(this._lon-t.rotationRate.alpha*s),this._lat=this._lat+t.rotationRate.beta*s)}},{key:"disable",value:function(){this._removeEventListeners()}},{key:"enable",value:function(){this._addEventListeners()}},{key:"destroy",value:function(){this._removeEventListeners()}},{key:"position",set:function(t){this._lat=t.lat,this._lon=o(t.lon)},get:function(){return{lat:this._lat,lon:this._lon}}}]),t}();e.exports=a},{"../utils/normalizeLongitude":10}],6:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function v(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:v(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},l=t("../utils/normalizeLongitude"),c=t("./InertialControls"),h=.1,f=.95,d=.5,p=135,m=90,y={acceleration:{x:h,y:h},friction:{x:f,y:f},minVelocity:d,maxVelocity:20},_=function(t){function e(t){i(this,e),t=Object.assign({},y,t);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.el=t.el,n._mouseDown=!1,n._scale=1,n._hasInertia=t.inertia!==!1||t.inertia,n._bindMethods(),n._addEventListeners(),n}return o(e,t),a(e,[{key:"_bindMethods",value:function(){this._onMouseMove=this._onMouseMove.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onClick=this._onClick.bind(this),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_bindMethods",this).call(this)}},{key:"_addEventListeners",value:function(){this.el.addEventListener("mousedown",this._onMouseDown),this.el.addEventListener("touchstart",this._onMouseDown,{passive:!1}),this.el.addEventListener("click",this._onClick),this.el.addEventListener("touchmove",this._onTouchMove,{passive:!1})}},{key:"_removeEventListeners",value:function(){this.el.removeEventListener("mousedown",this._onMouseDown),this.el.removeEventListener("touchstart",this._onMouseDown),window.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("mouseup",this._onMouseUp),this.el.removeEventListener("touchmove",this._onTouchMove),document.body.removeEventListener("touchmove",this._onTouchMove),document.body.removeEventListener("touchend",this._onMouseUp)}},{key:"_onMouseUp",value:function(t){var e=this;window.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("mouseup",this._onMouseUp),document.body.removeEventListener("touchmove",this._onTouchMove),document.body.removeEventListener("touchend",this._onMouseUp),this._mouseDown&&this._hasInertia&&Date.now()-this._mouseMoveTime<300&&this._updateInertia(),setTimeout(function(){e._mouseDown||(e._dragging=!1)},350),this._mouseDown=!1}},{key:"sendMouseDown",value:function(t){this._onMouseDown(t)}},{key:"_onClick",value:function(t){this._dragging||(this._velocity={x:0,y:0},this._mouseDown=!1,this._cachedPosition=t,document.removeEventListener("mousemove",this._onMouseMove),document.removeEventListener("mouseup",this._onMouseUp),document.body.removeEventListener("touchmove",this._onTouchMove),document.body.removeEventListener("touchend",this._onMouseUp))}},{key:"_onMouseDown",value:function(t){this._mouseDownTime=Date.now();var e=t;if(t.touches){if(1!==t.touches.length)return;e=t.touches[0]}this._cachedPosition=t,window.addEventListener("mousemove",this._onMouseMove),window.addEventListener("mouseup",this._onMouseUp),document.body.addEventListener("touchmove",this._onTouchMove,{passive:!1}),document.body.addEventListener("touchend",this._onMouseUp),this._mouseDown=!0,this._lastMouseX=e.clientX,this._lastMouseY=e.clientY,this._lastMouseDownLon=l(this._lon),this._lastMouseDownLat=this._lat}},{key:"_onTouchMove",value:function(t){t.cancelable&&t.preventDefault(),this._onMouseMove(t)}},{key:"_onMouseMove",value:function(t){if(this._mouseDown){this._dragging=!0;var e=t;if(t.touches&&(e=t.touches[0]),this._cachedPosition.clientX!==e.clientX||this._cachedPosition.clientY!==e.clientY){var n=this._lastMouseX-e.clientX,i=this._lastMouseY-e.clientY,r=n/this._viewerWidth,o=i/this._viewerHeight;if(this._cachedPosition){var s=this._cachedPosition.clientX-e.clientX,a=this._cachedPosition.clientY-e.clientY;this._velocity.x=Math.max(Math.min(s,this._maxVelocity),-this._maxVelocity),this._velocity.y=Math.max(Math.min(a,this._maxVelocity),-this._maxVelocity)}this._lon=l(r*p+this._lastMouseDownLon),this._lat=o*m+this._lastMouseDownLat,this._cachedPosition=e,this._mouseMoveTime=Date.now()}}}},{key:"setViewerSize",value:function(t,e){this._viewerWidth=t,this._viewerHeight=e}},{key:"destroy",value:function(){this._removeEventListeners()}},{key:"isActive",get:function(){return this._mouseDown||this._hasInertia&&(Math.abs(this._velocity.x)>this._minVelocity||Math.abs(this._velocity.y)>this._minVelocity)}},{key:"scale",get:function(){return this._scale}}]),e}(c);e.exports=_},{"../utils/normalizeLongitude":10,"./InertialControls":4}],7:[function(t,e,n){"use strict";var i=t("./normalizeLongitude");e.exports=function(t){var e=t;return Math.abs(e)>180?i(e):e>0?-360+e:360+e}},{"./normalizeLongitude":10}],8:[function(t,e,n){"use strict";e.exports=function(t){return new Promise(function(e,n){var i=document.createElement("script");i.type="text/javascript",i.src=t,i.onload=e,i.onerror=n;try{document.body.appendChild(i)}catch(r){n(r)}})}},{}],9:[function(t,e,n){"use strict";e.exports=function(t,e,n,i,r){return i+(r-i)*(t-e)/(n-e)}},{}],10:[function(t,e,n){"use strict";e.exports=function(t){var e=t;return e>180?e=e%180-180:e<=-180&&(e=e%180+180),e}},{}],11:[function(t,e,n){"use strict";var i=t("@marcom/ac-raf-emitter/update");e.exports=function(t,e){var n=0;return new Promise(function(r){var o=performance.now(),s=function a(){var s=performance.now()-o,u=s/t;u>=1?(e(1),r()):(n=u,e(u),i(a))};i(s)})}},{"@marcom/ac-raf-emitter/update":125}],12:[function(t,e,n){"use strict";function i(t,e,n){var i=THREE.Math.degToRad(90-t),r=THREE.Math.degToRad(e),o=n*Math.sin(i)*Math.cos(r),s=n*Math.cos(i),a=n*Math.sin(i)*Math.sin(r);return new THREE.Vector3(o,s,a)}e.exports=i},{}],13:[function(t,e,n){"use strict";var i=t("./../maps/focusableElement"),r=function(){this.focusableSelectors=i.join(",")},o=r.prototype;o.isFocusableElement=function(t,e,n){if(e&&!this._isDisplayed(t))return!1;var r=t.nodeName.toLowerCase(),o=i.indexOf(r)>-1;return"a"===r||(o?!t.disabled:!t.contentEditable||(n=n||parseFloat(t.getAttribute("tabindex")),!isNaN(n)))},o.isTabbableElement=function(t,e){if(e&&!this._isDisplayed(t))return!1;var n=t.getAttribute("tabindex");return n=parseFloat(n),isNaN(n)?this.isFocusableElement(t,e,n):n>=0},o._isDisplayed=function(t){var e=t.getBoundingClientRect();return(0!==e.top||0!==e.left||0!==e.width||0!==e.height)&&"hidden"!==window.getComputedStyle(t).visibility},o.getTabbableElements=function(t,e){for(var n=t.querySelectorAll(this.focusableSelectors),i=n.length,r=[],o=0;o<i;o++)this.isTabbableElement(n[o],e)&&r.push(n[o]);return r},o.getFocusableElements=function(t,e){for(var n=t.querySelectorAll(this.focusableSelectors),i=n.length,r=[],o=0;o<i;o++)this.isFocusableElement(n[o],e)&&r.push(n[o]);return r},e.exports=new r},{"./../maps/focusableElement":19}],14:[function(t,e,n){"use strict";var i=t("./setAttributes"),r=t("./../maps/ariaMap"),o=t("./TabManager"),s="data-original-",a="tabindex",u=function(t,e){var n=t.getAttribute(s+e);n||(n=t.getAttribute(e)||"",i(t,s+e,n))};e.exports=function(t,e){if(o.isFocusableElement(t,e))u(t,a),i(t,a,-1);else for(var n=o.getTabbableElements(t,e),s=n.length;s--;)u(n[s],a),i(n[s],a,-1);u(t,r.HIDDEN),i(t,r.HIDDEN,!0)}},{"./../maps/ariaMap":18,"./TabManager":13,"./setAttributes":16}],15:[function(t,e,n){"use strict";var i=function(t,e){if("string"==typeof e)for(var n=e.split(/\s+/),i=0;i<n.length;i++)t.getAttribute(n[i])&&t.removeAttribute(n[i])},r=function(t,e){if(t.length)for(var n=0;n<t.length;n++)i(t[n],e);else i(t,e)};e.exports=r},{}],16:[function(t,e,n){"use strict";var i=function(t,e,n){t&&1===t.nodeType&&t.setAttribute(e,n)},r=function(t,e,n){if("string"!=typeof n&&(n=n.toString()),t)if(t.length)for(var r=0;r<t.length;r++)i(t[r],e,n);else i(t,e,n)};e.exports=r},{}],17:[function(t,e,n){"use strict";var i=t("./removeAttributes"),r=t("./setAttributes"),o=t("./../maps/ariaMap"),s="data-original-",a="tabindex",u=function(t,e){var n=t.getAttribute(s+e);"string"==typeof n&&(n.length?r(t,e,n):i(t,e),i(t,s+e))};e.exports=function(t){i(t,a+" "+o.HIDDEN),u(t,a),u(t,o.HIDDEN);for(var e=t.querySelectorAll("["+s+a+"]"),n=e.length;n--;)u(e[n],a)}},{"./../maps/ariaMap":18,"./removeAttributes":15,"./setAttributes":16}],18:[function(t,e,n){"use strict";e.exports={AUTOCOMPLETE:"aria-autocomplete",CHECKED:"aria-checked",DISABLED:"aria-disabled",EXPANDED:"aria-expanded",HASPOPUP:"aria-haspopup",HIDDEN:"aria-hidden",INVALID:"aria-invalid",LABEL:"aria-label",LEVEL:"aria-level",MULTILINE:"aria-multiline",MULTISELECTABLE:"aria-multiselectable",ORIENTATION:"aria-orientation",PRESSED:"aria-pressed",READONLY:"aria-readonly",REQUIRED:"aria-required",SELECTED:"aria-selected",SORT:"aria-sort",VALUEMAX:"aria-valuemax",VALUEMIN:"aria-valuemin",VALUENOW:"aria-valuenow",VALUETEXT:"aria-valuetext",ATOMIC:"aria-atomic",BUSY:"aria-busy",LIVE:"aria-live",RELEVANT:"aria-relevant",DROPEFFECT:"aria-dropeffect",GRABBED:"aria-grabbed",ACTIVEDESCENDANT:"aria-activedescendant",CONTROLS:"aria-controls",DESCRIBEDBY:"aria-describedby",FLOWTO:"aria-flowto",LABELLEDBY:"aria-labelledby",OWNS:"aria-owns",POSINSET:"aria-posinset",SETSIZE:"aria-setsize"}},{}],19:[function(t,e,n){"use strict";e.exports=["input","select","textarea","button","optgroup","option","menuitem","fieldset","object","a[href]","*[tabindex]","*[contenteditable]"]},{}],20:[function(t,e,n){"use strict";var i=t("./request/factory"),r={complete:function(t,e){},error:function(t,e){},method:"GET",headers:{},success:function(t,e,n){},timeout:5e3},o=function(){for(var t=1;t<arguments.length;t++)for(var e in arguments[t])arguments[t].hasOwnProperty(e)&&(arguments[0][e]=arguments[t][e]);return arguments[0]},s={ajax:function(t,e){e=o({},r,e),"//"===t.substr(0,2)&&(t=window.location.protocol+t);var n=i(t);return n.open(e.method,t),n.setTransportHeaders(e.headers),n.setReadyStateChangeHandlers(e.complete,e.error,e.success),n.setTimeout(e.timeout,e.error,e.complete),n.send(e.data),n},get:function(t,e){return e.method="GET",s.ajax(t,e)},head:function(t,e){return e.method="HEAD",s.ajax(t,e)},post:function(t,e){return e.method="POST",s.ajax(t,e)}};e.exports=s},{"./request/factory":21}],21:[function(t,e,n){"use strict";var i=t("./xmlhttprequest"),r=t("./xdomainrequest"),o=/.*(?=:\/\/)/,s=/^.*:\/\/|\/.+$/g,a=window.XDomainRequest&&document.documentMode<10,u=function(t){if(!t.match(o))return!1;var e=t.replace(s,"");return e!==window.location.hostname};e.exports=function(t,e){var n=a&&u(t)?r:i;return new n}},{"./xdomainrequest":23,"./xmlhttprequest":24}],22:[function(t,e,n){"use strict";var i=function(){};i.create=function(){var t=function(){};return t.prototype=i.prototype,new t},i.prototype.open=function(t,e){t=t.toUpperCase(),this.xhr.open(t,e)},i.prototype.send=function(t){this.xhr.send(t)},i.prototype.setTimeout=function(t,e,n){this.xhr.ontimeout=function(){e(this.xhr,this.status),n(this.xhr,this.status)}.bind(this)},i.prototype.setTransportHeaders=function(t){for(var e in t)this.xhr.setRequestHeader(e,t[e])},e.exports=i},{}],23:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=t("./request"),o=t("@marcom/ac-object/toQueryParameters"),s=function(){this.xhr=new XDomainRequest};s.prototype=r.create(),s.prototype.setReadyStateChangeHandlers=function(t,e,n){this.xhr.onerror=function(){e(this.xhr,this.status),t(this.xhr,this.status)}.bind(this),this.xhr.onload=function(){n(this.xhr.responseText,this.xhr.status,this.xhr),t(this.xhr,this.status)}.bind(this)},s.prototype.send=function(t){t&&"object"===("undefined"==typeof t?"undefined":i(t))&&(t=o(t)),this.xhr.send(t)},s.prototype.setTransportHeaders=function(t){},e.exports=s},{"./request":22,
"@marcom/ac-object/toQueryParameters":96}],24:[function(t,e,n){"use strict";var i=t("./request"),r=function(){this.xhr=new XMLHttpRequest};r.prototype=i.create(),r.prototype.setReadyStateChangeHandlers=function(t,e,n){this.xhr.onreadystatechange=function(i){4===this.xhr.readyState&&(clearTimeout(this.timeout),this.xhr.status>=200&&this.xhr.status<300?(n(this.xhr.responseText,this.xhr.status,this.xhr),t(this.xhr,this.status)):(e(this.xhr,this.status),t(this.xhr,this.status)))}.bind(this)},e.exports=r},{"./request":22}],25:[function(t,e,n){"use strict";e.exports={log:t("./ac-console/log")}},{"./ac-console/log":26}],26:[function(t,e,n){"use strict";var i="f7c9180f-5c45-47b4-8de4-428015f096c0",r=!!function(){try{return window.localStorage.getItem(i)}catch(t){}}();e.exports=function(){window.console&&"undefined"!=typeof console.log&&r&&console.log.apply(console,Array.prototype.slice.call(arguments,0))}},{}],27:[function(t,e,n){"use strict";var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=t("@marcom/ac-object/extend"),s=t("@marcom/ac-object/create"),a=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,u=t("@marcom/ac-dom-traversal/querySelectorAll"),l=t("@marcom/ac-dom-events/addEventListener"),c=t("@marcom/ac-dom-events/removeEventListener"),h=t("@marcom/ac-console");try{i=t("@marcom/ac-analytics")}catch(f){h.log(f.message)}var d={dataAttribute:"analytics-share",interactionEvents:["click"],autoEnable:!0},p=function(t){t=t||{},this.options=o(d,t),a.call(this),this.elements=[],this.eventObserver=null,this.publishShareClick=this.publishShareClick.bind(this),this.options.autoEnable&&this.enable()},m=a.prototype,y=p.prototype=s(m);y.enable=function(){return!!i&&(this._createObserver(),void this.bindEventListener())},y.disable=function(){return!!i&&void this.unbindEventListener()},y.bindEventListener=function(){var t=0;this.elements=this.populateElements(),t=this.elements.length;for(var e=0;e<t;e++)l(this.elements[e],"click",this.publishShareClick)},y.unbindEventListener=function(){for(var t=this.elements&&this.elements.length?this.elements.length:0,e=0;e<t;e++)c(this.elements[e],"click",this.publishShareClick)},y.populateElements=function(){return u("[data-"+this.options.dataAttribute+"]",this.options.context||document)},y.publishShareClick=function(t){var e=t.currentTarget,n=this.parseDataAttribute(e.getAttribute("data-"+this.options.dataAttribute));if("object"===("undefined"==typeof n?"undefined":r(n))){if(!n.title)return console.log("data-"+this.options.dataAttribute+" attribute must have a `title` property"),!1;this.trigger("click",n)}},y.parseDataAttribute=function(t){var e={};try{e=JSON.parse(t)}catch(n){console.log("data-"+this.options.dataAttribute+" must be a valid JSON string")}return e},y.destroy=function(){this.disable(),this.elements=[],this.eventObserver=null,this.publishShareClick=null,this.options=null},y._createObserver=function(){return!!(i&&i.observer&&i.observer.Event)&&void(this.eventObserver=new i.observer.Event(this,this.options))},e.exports=p},{"@marcom/ac-analytics":void 0,"@marcom/ac-console":25,"@marcom/ac-dom-events/addEventListener":32,"@marcom/ac-dom-events/removeEventListener":33,"@marcom/ac-dom-traversal/querySelectorAll":61,"@marcom/ac-event-emitter-micro":66,"@marcom/ac-object/create":93,"@marcom/ac-object/extend":95}],28:[function(t,e,n){"use strict";var i=t("./../AnalyticsShare");e.exports=function(t){return new i(t)}},{"./../AnalyticsShare":27}],29:[function(t,e,n){"use strict";e.exports=function(t){if("function"==typeof t.select){var e=!1;e=t.select(),e||t.setSelectionRange(0,t.value.length)}else{var n=document.createRange();n.selectNodeContents(t);var i=window.getSelection();i.removeAllRanges(),i.addRange(n)}}},{}],30:[function(t,e,n){"use strict";var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o="f7c9180f-5c45-47b4-8de4-428015f096c0",s=window||self;try{i=!!s.localStorage.getItem(o)}catch(a){}e.exports=function(t){return function(){if(i&&"object"===r(window.console))return console[t].apply(console,Array.prototype.slice.call(arguments,0))}}},{}],31:[function(t,e,n){"use strict";e.exports=t("./internal/expose")("log")},{"./internal/expose":30}],32:[function(t,e,n){"use strict";var i=t("./utils/addEventListener"),r=t("./shared/getEventType");e.exports=function(t,e,n,o){return e=r(t,e),i(t,e,n,o)}},{"./shared/getEventType":34,"./utils/addEventListener":35}],33:[function(t,e,n){"use strict";var i=t("./utils/removeEventListener"),r=t("./shared/getEventType");e.exports=function(t,e,n,o){return e=r(t,e),i(t,e,n,o)}},{"./shared/getEventType":34,"./utils/removeEventListener":36}],34:[function(t,e,n){"use strict";var i=t("@marcom/ac-prefixer/getEventType");e.exports=function(t,e){var n,r;return n="tagName"in t?t.tagName:t===window?"window":"document",r=i(e,n),r?r:e}},{"@marcom/ac-prefixer/getEventType":97}],35:[function(t,e,n){"use strict";e.exports=function(t,e,n,i){return t.addEventListener?t.addEventListener(e,n,!!i):t.attachEvent("on"+e,n),t}},{}],36:[function(t,e,n){"use strict";e.exports=function(t,e,n,i){return t.removeEventListener?t.removeEventListener(e,n,!!i):t.detachEvent("on"+e,n),t}},{}],37:[function(t,e,n){"use strict";e.exports={getContentDimensions:t("./getContentDimensions"),getDimensions:t("./getDimensions"),getPagePosition:t("./getPagePosition"),getPercentInViewport:t("./getPercentInViewport"),getPixelsInViewport:t("./getPixelsInViewport"),getPosition:t("./getPosition"),getScrollX:t("./getScrollX"),getScrollY:t("./getScrollY"),getViewportPosition:t("./getViewportPosition"),isInViewport:t("./isInViewport")}},{"./getContentDimensions":38,"./getDimensions":39,"./getPagePosition":40,"./getPercentInViewport":41,"./getPixelsInViewport":42,"./getPosition":43,"./getScrollX":44,"./getScrollY":45,"./getViewportPosition":46,"./isInViewport":47}],38:[function(t,e,n){"use strict";var i=t("./utils/getBoundingClientRect");e.exports=function(t,e){var n=1;return e&&(n=i(t).width/t.offsetWidth),{width:t.scrollWidth*n,height:t.scrollHeight*n}}},{"./utils/getBoundingClientRect":48}],39:[function(t,e,n){"use strict";var i=t("./utils/getBoundingClientRect");e.exports=function(t,e){var n;return e?(n=i(t),{width:n.width,height:n.height}):{width:t.offsetWidth,height:t.offsetHeight}}},{"./utils/getBoundingClientRect":48}],40:[function(t,e,n){"use strict";var i=t("./getDimensions"),r=t("./utils/getBoundingClientRect"),o=t("./getScrollX"),s=t("./getScrollY");e.exports=function(t,e){var n,a,u,l;if(e)return n=r(t),a=o(),u=s(),{top:n.top+u,right:n.right+a,bottom:n.bottom+u,left:n.left+a};for(l=i(t,e),n={top:t.offsetTop,left:t.offsetLeft,width:l.width,height:l.height};t=t.offsetParent;)n.top+=t.offsetTop,n.left+=t.offsetLeft;return{top:n.top,right:n.left+n.width,bottom:n.top+n.height,left:n.left}}},{"./getDimensions":39,"./getScrollX":44,"./getScrollY":45,"./utils/getBoundingClientRect":48}],41:[function(t,e,n){"use strict";var i=t("./getDimensions"),r=t("./getPixelsInViewport");e.exports=function(t,e){var n=r(t,e),o=i(t,e).height;return n/o}},{"./getDimensions":39,"./getPixelsInViewport":42}],42:[function(t,e,n){"use strict";var i=t("./getViewportPosition");e.exports=function(t,e){var n,r=document.documentElement.clientHeight,o=i(t,e);return o.top>=r||o.bottom<=0?0:(n=o.bottom-o.top,o.top<0&&(n+=o.top),o.bottom>r&&(n-=o.bottom-r),n)}},{"./getViewportPosition":46}],43:[function(t,e,n){"use strict";var i=t("./getDimensions"),r=t("./utils/getBoundingClientRect");e.exports=function(t,e){var n,o,s;return e?(n=r(t),t.offsetParent&&(o=r(t.offsetParent),n.top-=o.top,n.left-=o.left)):(s=i(t,e),n={top:t.offsetTop,left:t.offsetLeft,width:s.width,height:s.height}),{top:n.top,right:n.left+n.width,bottom:n.top+n.height,left:n.left}}},{"./getDimensions":39,"./utils/getBoundingClientRect":48}],44:[function(t,e,n){"use strict";e.exports=function(t){var e;if(t=t||window,t===window){if(e=window.pageXOffset)return e;t=document.documentElement||document.body.parentNode||document.body}return t.scrollLeft}},{}],45:[function(t,e,n){"use strict";e.exports=function(t){var e;if(t=t||window,t===window){if(e=window.pageYOffset)return e;t=document.documentElement||document.body.parentNode||document.body}return t.scrollTop}},{}],46:[function(t,e,n){"use strict";var i=t("./getPagePosition"),r=t("./utils/getBoundingClientRect"),o=t("./getScrollX"),s=t("./getScrollY");e.exports=function(t,e){var n,a,u;return e?(n=r(t),{top:n.top,right:n.right,bottom:n.bottom,left:n.left}):(n=i(t),a=o(),u=s(),{top:n.top-u,right:n.right-a,bottom:n.bottom-u,left:n.left-a})}},{"./getPagePosition":40,"./getScrollX":44,"./getScrollY":45,"./utils/getBoundingClientRect":48}],47:[function(t,e,n){"use strict";var i=t("./getPixelsInViewport"),r=t("./getPercentInViewport");e.exports=function(t,e,n){var o;return n=n||0,"string"==typeof n&&"px"===n.slice(-2)?(n=parseInt(n,10),o=i(t,e)):o=r(t,e),o>0&&o>=n}},{"./getPercentInViewport":41,"./getPixelsInViewport":42}],48:[function(t,e,n){"use strict";e.exports=function(t){var e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width||e.right-e.left,height:e.height||e.bottom-e.top}}},{}],49:[function(t,e,n){"use strict";e.exports=8},{}],50:[function(t,e,n){"use strict";e.exports=11},{}],51:[function(t,e,n){"use strict";e.exports=9},{}],52:[function(t,e,n){"use strict";e.exports=1},{}],53:[function(t,e,n){"use strict";e.exports=3},{}],54:[function(t,e,n){"use strict";var i=t("../isNode");e.exports=function(t,e){return!!i(t)&&("number"==typeof e?t.nodeType===e:e.indexOf(t.nodeType)!==-1)}},{"../isNode":58}],55:[function(t,e,n){"use strict";var i=t("./isNodeType"),r=t("../COMMENT_NODE"),o=t("../DOCUMENT_FRAGMENT_NODE"),s=t("../ELEMENT_NODE"),a=t("../TEXT_NODE"),u=[s,a,r,o],l=" must be an Element, TextNode, Comment, or Document Fragment",c=[s,a,r],h=" must be an Element, TextNode, or Comment",f=[s,o],d=" must be an Element, or Document Fragment",p=" must have a parentNode";e.exports={parentNode:function(t,e,n,r){if(r=r||"target",(t||e)&&!i(t,f))throw new TypeError(n+": "+r+d)},childNode:function(t,e,n,r){if(r=r||"target",(t||e)&&!i(t,c))throw new TypeError(n+": "+r+h)},insertNode:function(t,e,n,r){if(r=r||"node",(t||e)&&!i(t,u))throw new TypeError(n+": "+r+l)},hasParentNode:function(t,e,n){if(n=n||"target",!t.parentNode)throw new TypeError(e+": "+n+p)}}},{"../COMMENT_NODE":49,"../DOCUMENT_FRAGMENT_NODE":50,"../ELEMENT_NODE":52,"../TEXT_NODE":53,"./isNodeType":54}],56:[function(t,e,n){"use strict";var i=t("./internal/isNodeType"),r=t("./DOCUMENT_FRAGMENT_NODE");e.exports=function(t){return i(t,r)}},{"./DOCUMENT_FRAGMENT_NODE":50,"./internal/isNodeType":54}],57:[function(t,e,n){"use strict";var i=t("./internal/isNodeType"),r=t("./ELEMENT_NODE");e.exports=function(t){return i(t,r)}},{"./ELEMENT_NODE":52,"./internal/isNodeType":54}],58:[function(t,e,n){"use strict";e.exports=function(t){return!(!t||!t.nodeType)}},{}],59:[function(t,e,n){"use strict";var i=t("./internal/validate");e.exports=function(t){return i.childNode(t,!0,"remove"),t.parentNode?t.parentNode.removeChild(t):t}},{"./internal/validate":55}],60:[function(t,e,n){"use strict";t("@marcom/ac-polyfills/Array/prototype.indexOf");var i=t("@marcom/ac-dom-nodes/isNode"),r=t("@marcom/ac-dom-nodes/COMMENT_NODE"),o=t("@marcom/ac-dom-nodes/DOCUMENT_FRAGMENT_NODE"),s=t("@marcom/ac-dom-nodes/DOCUMENT_NODE"),a=t("@marcom/ac-dom-nodes/ELEMENT_NODE"),u=t("@marcom/ac-dom-nodes/TEXT_NODE"),l=function(t,e){return!!i(t)&&("number"==typeof e?t.nodeType===e:e.indexOf(t.nodeType)!==-1)},c=[a,s,o],h=" must be an Element, Document, or Document Fragment",f=[a,u,r],d=" must be an Element, TextNode, or Comment",p=" must be a string";e.exports={parentNode:function(t,e,n,i){if(i=i||"node",(t||e)&&!l(t,c))throw new TypeError(n+": "+i+h)},childNode:function(t,e,n,i){if(i=i||"node",(t||e)&&!l(t,f))throw new TypeError(n+": "+i+d)},selector:function(t,e,n,i){if(i=i||"selector",(t||e)&&"string"!=typeof t)throw new TypeError(n+": "+i+p)}}},{"@marcom/ac-dom-nodes/COMMENT_NODE":49,"@marcom/ac-dom-nodes/DOCUMENT_FRAGMENT_NODE":50,"@marcom/ac-dom-nodes/DOCUMENT_NODE":51,"@marcom/ac-dom-nodes/ELEMENT_NODE":52,"@marcom/ac-dom-nodes/TEXT_NODE":53,"@marcom/ac-dom-nodes/isNode":58,"@marcom/ac-polyfills/Array/prototype.indexOf":void 0}],61:[function(t,e,n){"use strict";t("@marcom/ac-polyfills/Array/prototype.slice");var i=t("./internal/validate"),r=t("./shims/querySelectorAll"),o="querySelectorAll"in document;e.exports=function(t,e){return e=e||document,i.parentNode(e,!0,"querySelectorAll","context"),i.selector(t,!0,"querySelectorAll"),o?Array.prototype.slice.call(e.querySelectorAll(t)):r(t,e)}},{"./internal/validate":60,"./shims/querySelectorAll":62,"@marcom/ac-polyfills/Array/prototype.slice":void 0}],62:[function(t,e,n){"use strict";t("@marcom/ac-polyfills/Array/prototype.indexOf");var i=t("@marcom/ac-dom-nodes/isElement"),r=t("@marcom/ac-dom-nodes/isDocumentFragment"),o=t("@marcom/ac-dom-nodes/remove"),s="_ac_qsa_",a=function(t,e){var n;if(e===document)return!0;for(n=t;(n=n.parentNode)&&i(n);)if(n===e)return!0;return!1},u=function(t){"recalc"in t?t.recalc(!1):document.recalc(!1),window.scrollBy(0,0)};e.exports=function(t,e){var n,i=document.createElement("style"),l=s+(Math.random()+"").slice(-6),c=[];for(e=e||document,document[l]=[],r(e)?e.appendChild(i):document.documentElement.firstChild.appendChild(i),i.styleSheet.cssText="*{display:recalc;}"+t+'{ac-qsa:expression(document["'+l+'"] && document["'+l+'"].push(this));}',u(e);document[l].length;)n=document[l].shift(),n.style.removeAttribute("ac-qsa"),c.indexOf(n)===-1&&a(n,e)&&c.push(n);return document[l]=null,o(i),u(e),c}},{"@marcom/ac-dom-nodes/isDocumentFragment":56,"@marcom/ac-dom-nodes/isElement":57,"@marcom/ac-dom-nodes/remove":59,"@marcom/ac-polyfills/Array/prototype.indexOf":void 0}],63:[function(t,e,n){"use strict";function i(t,e){if("function"!=typeof t)throw new TypeError(r);this.easingFunction=t,this.cssString=e||null}var r="Ease expects an easing function.",o=i.prototype;o.getValue=function(t){return this.easingFunction(t,0,1,1)},e.exports=i},{}],64:[function(t,e,n){"use strict";t("@marcom/ac-polyfills/Array/prototype.every");var i=t("./Ease"),r=t("./helpers/KeySpline"),o="Bezier curve expects exactly four (4) numbers. Given: ";e.exports=function(t,e,n,s){var a=Array.prototype.slice.call(arguments),u=a.every(function(t){return"number"==typeof t});if(4!==a.length||!u)throw new TypeError(o+a);var l=new r(t,e,n,s),c=function(t,e,n,i){return l.get(t/i)*n+e},h="cubic-bezier("+a.join(", ")+")";return new i(c,h)}},{"./Ease":63,"./helpers/KeySpline":65,"@marcom/ac-polyfills/Array/prototype.every":void 0}],65:[function(t,e,n){"use strict";function i(t,e,n,i){function r(t,e){return 1-3*e+3*t}function o(t,e){return 3*e-6*t}function s(t){return 3*t}function a(t,e,n){return((r(e,n)*t+o(e,n))*t+s(e))*t}function u(t,e,n){return 3*r(e,n)*t*t+2*o(e,n)*t+s(e)}function l(e){for(var i=e,r=0;r<4;++r){var o=u(i,t,n);if(0===o)return i;var s=a(i,t,n)-e;i-=s/o}return i}this.get=function(r){return t===e&&n===i?r:a(l(r),e,i)}}e.exports=i},{}],66:[function(t,e,n){"use strict";e.exports={EventEmitterMicro:t("./ac-event-emitter-micro/EventEmitterMicro")}},{"./ac-event-emitter-micro/EventEmitterMicro":67}],67:[function(t,e,n){"use strict";function i(){this._events={}}var r=i.prototype;r.on=function(t,e){this._events[t]=this._events[t]||[],this._events[t].unshift(e)},r.once=function(t,e){function n(r){i.off(t,n),void 0!==r?e(r):e()}var i=this;this.on(t,n)},r.off=function(t,e){if(this.has(t)){if(1===arguments.length)return this._events[t]=null,void delete this._events[t];var n=this._events[t].indexOf(e);n!==-1&&this._events[t].splice(n,1)}},r.trigger=function(t,e){if(this.has(t))for(var n=this._events[t].length-1;n>=0;n--)void 0!==e?this._events[t][n](e):this._events[t][n]()},r.has=function(t){return t in this._events!=!1&&0!==this._events[t].length},r.destroy=function(){for(var t in this._events)this._events[t]=null;this._events=null},e.exports=i},{}],68:[function(t,e,n){"use strict";e.exports={getWindow:function(){return window},getDocument:function(){return document},getNavigator:function(){return navigator}}},{}],69:[function(t,e,n){"use strict";function i(){var t=s.getWindow();return!o()&&!t.orientation||r.windows}var r=t("@marcom/useragent-detect").os,o=t("./touchAvailable").original,s=t("./helpers/globals"),a=t("@marcom/ac-function/once");e.exports=a(i),e.exports.original=i},{"./helpers/globals":68,"./touchAvailable":73,"@marcom/ac-function/once":82,"@marcom/useragent-detect":284}],70:[function(t,e,n){"use strict";function i(){return!r()&&!o()}var r=t("./isDesktop").original,o=t("./isTablet").original,s=t("@marcom/ac-function/once");e.exports=s(i),e.exports.original=i},{"./isDesktop":69,"./isTablet":72,"@marcom/ac-function/once":82}],71:[function(t,e,n){"use strict";var i=t("./helpers/globals");e.exports=function(){var t=i.getWindow();return"devicePixelRatio"in t&&t.devicePixelRatio>=1.5}},{"./helpers/globals":68}],72:[function(t,e,n){"use strict";function i(){var t=o.getWindow(),e=t.screen.width;return t.orientation&&t.screen.height<e&&(e=t.screen.height),!r()&&e>=a}var r=t("./isDesktop").original,o=t("./helpers/globals"),s=t("@marcom/ac-function/once"),a=600;e.exports=s(i),e.exports.original=i},{"./helpers/globals":68,"./isDesktop":69,"@marcom/ac-function/once":82}],73:[function(t,e,n){"use strict";function i(){var t=r.getWindow(),e=r.getDocument(),n=r.getNavigator();return!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch||n.maxTouchPoints>0||n.msMaxTouchPoints>0)}var r=t("./helpers/globals"),o=t("@marcom/ac-function/once");e.exports=o(i),e.exports.original=i},{"./helpers/globals":68,"@marcom/ac-function/once":82}],74:[function(t,e,n){"use strict";function i(){var t=r.getDocument(),e=t.createElement("canvas");return"function"==typeof e.getContext&&!(!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}var r=t("./helpers/globals"),o=t("@marcom/ac-function/once");e.exports=o(i),e.exports.original=i},{"./helpers/globals":68,"@marcom/ac-function/once":82}],75:[function(t,e,n){"use strict";e.exports=t("./fullscreen")},{"./fullscreen":81}],76:[function(t,e,n){"use strict";e.exports={STANDARD:"standard",IOS:"ios"}},{}],77:[function(t,e,n){"use strict";function i(t){h.trigger(l.ENTERFULLSCREEN,t)}function r(t){h.trigger(l.EXITFULLSCREEN,t)}function o(t){h.fullscreenElement()?i(t):r(t)}function s(){a(document,"fullscreenchange",o)}var a=t("@marcom/ac-dom-events/addEventListener"),u=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,l=t("./../events/types"),c=t("./../consts/modes"),h=new u;s(),h.fullscreenEnabled=function(t){var e=document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled;return!!e},h.fullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement},h.exitFullscreen=function(t){var e;"function"==typeof document.exitFullscreen?e="exitFullscreen":"function"==typeof document.webkitExitFullscreen?e="webkitExitFullscreen":"function"==typeof document.webkitCancelFullScreen?e="webkitCancelFullScreen":"function"==typeof document.mozCancelFullScreen?e="mozCancelFullScreen":"function"==typeof document.msExitFullscreen&&(e="msExitFullscreen"),"function"==typeof document[e]&&document[e].call(document)},h.requestFullscreen=function(t){var e;"function"==typeof t.requestFullscreen?e="requestFullscreen":"function"==typeof t.webkitRequestFullscreen?e="webkitRequestFullscreen":"function"==typeof t.webkitRequestFullScreen?e="webkitRequestFullScreen":"function"==typeof t.mozRequestFullScreen?e="mozRequestFullScreen":"function"==typeof t.msRequestFullscreen&&(e="msRequestFullscreen"),"function"==typeof t[e]&&t[e].call(t)},h.mode=c.STANDARD,e.exports=h},{"./../consts/modes":76,"./../events/types":80,"@marcom/ac-dom-events/addEventListener":32,"@marcom/ac-event-emitter-micro":66}],78:[function(t,e,n){"use strict";var i=t("./ios"),r=t("./desktop");e.exports={create:function(){var t=r;return"webkitEnterFullscreen"in document.createElement("video")&&!("webkitRequestFullScreen"in document.createElement("div"))&&(t=i),t}}},{"./desktop":77,"./ios":79}],79:[function(t,e,n){"use strict";function i(){a(document,"webkitbeginfullscreen",r,!0),a(document,"webkitendfullscreen",o,!0)}function r(t){h.trigger(l.ENTERFULLSCREEN,t)}function o(t){s=void 0,h.trigger(l.EXITFULLSCREEN,t)}var s,a=t("@marcom/ac-dom-events/addEventListener"),u=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,l=t("./../events/types"),c=t("./../consts/modes");i();var h=new u;h.fullscreenEnabled=function(t){return!!t.webkitSupportsFullscreen},h.fullscreenElement=function(){return s},h.exitFullscreen=function(t){t&&"function"==typeof t.webkitExitFullscreen&&t.webkitExitFullscreen()},h.requestFullscreen=function(t){"function"==typeof t.webkitEnterFullscreen&&t.webkitEnterFullscreen()},h.mode=c.IOS,e.exports=h},{"./../consts/modes":76,"./../events/types":80,"@marcom/ac-dom-events/addEventListener":32,"@marcom/ac-event-emitter-micro":66}],80:[function(t,e,n){"use strict";e.exports={ENTERFULLSCREEN:"enterfullscreen",EXITFULLSCREEN:"exitfullscreen"}},{}],81:[function(t,e,n){"use strict";function i(){throw new Error(o)}var r=(t("@marcom/ac-event-emitter-micro").EventEmitterMicro,t("./delegate/factory")),o="Error: Element missing. ac-fullscreen requires an element to be specified",s=r.create(),a={};a.requestFullscreen=function(t){return t||i(),s.requestFullscreen(t)},a.fullscreenEnabled=function(t){return t||i(),s.fullscreenEnabled(t)},a.fullscreenElement=function(){return s.fullscreenElement()},a.exitFullscreen=function(t){return t||i(),s.exitFullscreen(t)},a.getMode=function(){return s.mode},a.on=function(){return s.on.apply(s,arguments)},a.off=function(){return s.off.apply(s,arguments)},a.once=function(){return s.once.apply(s,arguments)},e.exports=a},{"./delegate/factory":78,"@marcom/ac-event-emitter-micro":66}],82:[function(t,e,n){"use strict";e.exports=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}}},{}],83:[function(t,e,n){"use strict";e.exports=function(t,e){var n=null;return function(){null===n&&(t.apply(this,arguments),n=setTimeout(function(){n=null},e))}}},{}],84:[function(t,e,n){"use strict";var i={};e.exports=function(t,e,n){if(t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),n||!i.hasOwnProperty(t)){var r=new RegExp("[\\?&]"+t+"=([^&#]*)"),o=r.exec(location.search),s=null===o?e:decodeURIComponent(o[1].replace(/\+/g," "));"true"!==s&&"false"!==s||(s="true"===s),isNaN(parseFloat(s))||(s=parseFloat(s)),i[t]=s}return i[t]}},{}],85:[function(t,e,n){"use strict";function i(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function r(t){return 3*t.length/4-i(t)}function o(t){var e,n,r,o,s,a=t.length;o=i(t),s=new h(3*a/4-o),n=o>0?a-4:a;var u=0;for(e=0;e<n;e+=4)r=c[t.charCodeAt(e)]<<18|c[t.charCodeAt(e+1)]<<12|c[t.charCodeAt(e+2)]<<6|c[t.charCodeAt(e+3)],s[u++]=r>>16&255,s[u++]=r>>8&255,s[u++]=255&r;return 2===o?(r=c[t.charCodeAt(e)]<<2|c[t.charCodeAt(e+1)]>>4,s[u++]=255&r):1===o&&(r=c[t.charCodeAt(e)]<<10|c[t.charCodeAt(e+1)]<<4|c[t.charCodeAt(e+2)]>>2,s[u++]=r>>8&255,s[u++]=255&r),s}function s(t){return l[t>>18&63]+l[t>>12&63]+l[t>>6&63]+l[63&t]}function a(t,e,n){for(var i,r=[],o=e;o<n;o+=3)i=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),r.push(s(i));return r.join("")}function u(t){for(var e,n=t.length,i=n%3,r="",o=[],s=16383,u=0,c=n-i;u<c;u+=s)o.push(a(t,u,u+s>c?c:u+s));return 1===i?(e=t[n-1],r+=l[e>>2],r+=l[e<<4&63],r+="=="):2===i&&(e=(t[n-2]<<8)+t[n-1],r+=l[e>>10],r+=l[e>>4&63],r+=l[e<<2&63],r+="="),o.push(r),o.join("")}n.byteLength=r,n.toByteArray=o,n.fromByteArray=u;for(var l=[],c=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,p=f.length;d<p;++d)l[d]=f[d],c[f.charCodeAt(d)]=d;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},{}],86:[function(t,e,n){(function(e){"use strict";function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function r(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=s.prototype):(null===t&&(t=new s(e)),t.length=e),t}function s(t,e,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return a(this,t,e,n)}function a(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?d(t,e,n,i):"string"==typeof e?h(t,e,n):p(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e,n,i){return u(e),e<=0?o(t,e):void 0!==n?"string"==typeof i?o(t,e).fill(n,i):o(t,e).fill(n):o(t,e)}function c(t,e){if(u(e),t=o(t,e<0?0:0|m(e)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|_(e,n);t=o(t,i);var r=t.write(e,n);return r!==i&&(t=t.slice(0,r)),t}function f(t,e){var n=e.length<0?0:0|m(e.length);t=o(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function d(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),s.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=s.prototype):t=f(t,e),t}function p(t,e){if(s.isBuffer(e)){var n=0|m(e.length);return t=o(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||Z(e.length)?o(t,0):f(t,e);if("Buffer"===e.type&&$(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function y(t){return+t!=t&&(t=0),s.alloc(+t)}function _(t,e){if(s.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return K(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(t).length;default:if(i)return K(t).length;e=(""+e).toLowerCase(),i=!0}}function v(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return D(this,e,n);case"utf8":case"utf-8":return M(this,e,n);case"ascii":return O(this,e,n);case"latin1":case"binary":return I(this,e,n);case"base64":return A(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function g(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function b(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=s.from(e,i)),s.isBuffer(e))return 0===e.length?-1:w(t,e,n,i,r);if("number"==typeof e)return e=255&e,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):w(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function w(t,e,n,i,r){function o(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var s=1,a=t.length,u=e.length;if(void 0!==i&&(i=String(i).toLowerCase(),"ucs2"===i||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}var l;if(r){var c=-1;for(l=n;l<a;l++)if(o(t,l)===o(e,c===-1?0:l-c)){if(c===-1&&(c=l),l-c+1===u)return c*s}else c!==-1&&(l-=l-c),c=-1}else for(n+u>a&&(n=a-u),l=n;l>=0;l--){for(var h=!0,f=0;f<u;f++)if(o(t,l+f)!==o(e,f)){h=!1;break}if(h)return l}return-1}function x(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function E(t,e,n,i){return X(K(e,t.length-n),t,n,i)}function k(t,e,n,i){return X(Y(e),t,n,i)}function S(t,e,n,i){return k(t,e,n,i)}function C(t,e,n,i){return X(G(e),t,n,i)}function T(t,e,n,i){return X(W(e,t.length-n),t,n,i)}function A(t,e,n){return 0===e&&n===t.length?Q.fromByteArray(t):Q.fromByteArray(t.slice(e,n))}function M(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o=t[r],s=null,a=o>239?4:o>223?3:o>191?2:1;if(r+a<=n){var u,l,c,h;switch(a){case 1:o<128&&(s=o);break;case 2:u=t[r+1],128===(192&u)&&(h=(31&o)<<6|63&u,h>127&&(s=h));break;case 3:u=t[r+1],l=t[r+2],128===(192&u)&&128===(192&l)&&(h=(15&o)<<12|(63&u)<<6|63&l,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:u=t[r+1],l=t[r+2],c=t[r+3],128===(192&u)&&128===(192&l)&&128===(192&c)&&(h=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c,h>65535&&h<1114112&&(s=h))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s),r+=a}return P(i)}function P(t){var e=t.length;if(e<=tt)return String.fromCharCode.apply(String,t);for(var n="",i=0;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=tt));return n}function O(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function I(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function D(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=e;o<n;++o)r+=H(t[o]);return r}function L(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function R(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function F(t,e,n,i,r,o){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function N(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function U(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function V(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(t,e,n,i,r){return r||V(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(t,e,n,i,23,4),n+4}function B(t,e,n,i,r){return r||V(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),
J.write(t,e,n,i,52,8),n+8}function z(t){if(t=q(t).replace(et,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function q(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function H(t){return t<16?"0"+t.toString(16):t.toString(16)}function K(t,e){e=e||1/0;for(var n,i=t.length,r=null,o=[],s=0;s<i;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Y(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function W(t,e){for(var n,i,r,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),i=n>>8,r=n%256,o.push(r),o.push(i);return o}function G(t){return Q.toByteArray(z(t))}function X(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}function Z(t){return t!==t}var Q=t("base64-js"),J=t("ieee754"),$=t("isarray");n.Buffer=s,n.SlowBuffer=y,n.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:i(),n.kMaxLength=r(),s.poolSize=8192,s._augment=function(t){return t.__proto__=s.prototype,t},s.from=function(t,e,n){return a(null,t,e,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(t,e,n){return l(null,t,e,n)},s.allocUnsafe=function(t){return c(null,t)},s.allocUnsafeSlow=function(t){return c(null,t)},s.isBuffer=function(t){return!(null==t||!t._isBuffer)},s.compare=function(t,e){if(!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!$(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=s.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var o=t[n];if(!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},s.byteLength=_,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},s.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?M(this,0,t):v.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},s.prototype.compare=function(t,e,n,i,r){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,r>>>=0,this===t)return 0;for(var o=r-i,a=n-e,u=Math.min(o,a),l=this.slice(i,r),c=t.slice(e,n),h=0;h<u;++h)if(l[h]!==c[h]){o=l[h],a=c[h];break}return o<a?-1:a<o?1:0},s.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},s.prototype.indexOf=function(t,e,n){return b(this,t,e,n,!0)},s.prototype.lastIndexOf=function(t,e,n){return b(this,t,e,n,!1)},s.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e=0|e,isFinite(n)?(n=0|n,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return x(this,t,e,n);case"utf8":case"utf-8":return E(this,t,e,n);case"ascii":return k(this,t,e,n);case"latin1":case"binary":return S(this,t,e,n);case"base64":return C(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;s.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);var i;if(s.TYPED_ARRAY_SUPPORT)i=this.subarray(t,e),i.__proto__=s.prototype;else{var r=e-t;i=new s(r,(void 0));for(var o=0;o<r;++o)i[o]=this[o+t]}return i},s.prototype.readUIntLE=function(t,e,n){t=0|t,e=0|e,n||R(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},s.prototype.readUIntBE=function(t,e,n){t=0|t,e=0|e,n||R(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},s.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,n){t=0|t,e=0|e,n||R(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*e)),i},s.prototype.readIntBE=function(t,e,n){t=0|t,e=0|e,n||R(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*e)),o},s.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},s.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),J.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),J.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),J.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),J.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,n,i){if(t=+t,e=0|e,n=0|n,!i){var r=Math.pow(2,8*n)-1;F(this,t,e,n,r,0)}var o=1,s=0;for(this[e]=255&t;++s<n&&(o*=256);)this[e+s]=t/o&255;return e+n},s.prototype.writeUIntBE=function(t,e,n,i){if(t=+t,e=0|e,n=0|n,!i){var r=Math.pow(2,8*n)-1;F(this,t,e,n,r,0)}var o=n-1,s=1;for(this[e+o]=255&t;--o>=0&&(s*=256);)this[e+o]=t/s&255;return e+n},s.prototype.writeUInt8=function(t,e,n){return t=+t,e=0|e,n||F(this,t,e,1,255,0),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=0|e,n||F(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=0|e,n||F(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=0|e,n||F(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):U(this,t,e,!0),e+4},s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=0|e,n||F(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):U(this,t,e,!1),e+4},s.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e=0|e,!i){var r=Math.pow(2,8*n-1);F(this,t,e,n,r-1,-r)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},s.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e=0|e,!i){var r=Math.pow(2,8*n-1);F(this,t,e,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e=0|e,n||F(this,t,e,1,127,-128),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e=0|e,n||F(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e=0|e,n||F(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e=0|e,n||F(this,t,e,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):U(this,t,e,!0),e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e=0|e,n||F(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):U(this,t,e,!1),e+4},s.prototype.writeFloatLE=function(t,e,n){return j(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return j(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return B(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return B(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;r>=0;--r)t[r+e]=this[r+n];else if(o<1e3||!s.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},s.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!s.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t=255&t);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var o;if("number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=s.isBuffer(t)?t:K(new s(t,i).toString()),u=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%u]}return this};var et=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":85,ieee754:87,isarray:88}],87:[function(t,e,n){"use strict";n.read=function(t,e,n,i,r){var o,s,a=8*r-i-1,u=(1<<a)-1,l=u>>1,c=-7,h=n?r-1:0,f=n?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-c)-1,d>>=-c,c+=a;c>0;o=256*o+t[e+h],h+=f,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;c>0;s=256*s+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:(d?-1:1)*(1/0);s+=Math.pow(2,i),o-=l}return(d?-1:1)*s*Math.pow(2,o-i)},n.write=function(t,e,n,i,r,o){var s,a,u,l=8*o-r-1,c=(1<<l)-1,h=c>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,p=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+h>=1?f/u:f*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*u-1)*Math.pow(2,r),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),s=0));r>=8;t[n+d]=255&a,d+=p,a/=256,r-=8);for(s=s<<r|a,l+=r;l>0;t[n+d]=255&s,d+=p,s/=256,l-=8);t[n+d-p]|=128*m}},{}],88:[function(t,e,n){"use strict";var i={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},{}],89:[function(t,e,n){"use strict";function i(t){this._keysDown={},this._DOMKeyDown=this._DOMKeyDown.bind(this),this._DOMKeyUp=this._DOMKeyUp.bind(this),this._context=t||document,o(this._context,l,this._DOMKeyDown,!0),o(this._context,c,this._DOMKeyUp,!0),r.call(this)}var r=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,o=t("@marcom/ac-dom-events/utils/addEventListener"),s=t("@marcom/ac-dom-events/utils/removeEventListener"),a=t("@marcom/ac-object/create"),u=t("./internal/KeyEvent"),l="keydown",c="keyup",h=i.prototype=a(r.prototype);h.onDown=function(t,e){return this.on(l+":"+t,e)},h.onceDown=function(t,e){return this.once(l+":"+t,e)},h.offDown=function(t,e){return this.off(l+":"+t,e)},h.onUp=function(t,e){return this.on(c+":"+t,e)},h.onceUp=function(t,e){return this.once(c+":"+t,e)},h.offUp=function(t,e){return this.off(c+":"+t,e)},h.isDown=function(t){return t+="",this._keysDown[t]||!1},h.isUp=function(t){return!this.isDown(t)},h.destroy=function(){return s(this._context,l,this._DOMKeyDown,!0),s(this._context,c,this._DOMKeyUp,!0),this._keysDown=null,this._context=null,r.prototype.destroy.call(this),this},h._DOMKeyDown=function(t){var e=this._normalizeKeyboardEvent(t),n=e.keyCode+="";this._trackKeyDown(n),this.trigger(l+":"+n,e)},h._DOMKeyUp=function(t){var e=this._normalizeKeyboardEvent(t),n=e.keyCode+="";this._trackKeyUp(n),this.trigger(c+":"+n,e)},h._normalizeKeyboardEvent=function(t){return new u(t)},h._trackKeyUp=function(t){this._keysDown[t]&&(this._keysDown[t]=!1)},h._trackKeyDown=function(t){this._keysDown[t]||(this._keysDown[t]=!0)},e.exports=i},{"./internal/KeyEvent":90,"@marcom/ac-dom-events/utils/addEventListener":35,"@marcom/ac-dom-events/utils/removeEventListener":36,"@marcom/ac-event-emitter-micro":66,"@marcom/ac-object/create":93}],90:[function(t,e,n){"use strict";function i(t){this.originalEvent=t;var e;for(e in t)r.indexOf(e)===-1&&"function"!=typeof t[e]&&(this[e]=t[e]);this.location=void 0!==this.originalEvent.location?this.originalEvent.location:this.originalEvent.keyLocation}var r=["keyLocation"];i.prototype={preventDefault:function(){return"function"!=typeof this.originalEvent.preventDefault?void(this.originalEvent.returnValue=!1):this.originalEvent.preventDefault()},stopPropagation:function(){return this.originalEvent.stopPropagation()}},e.exports=i},{}],91:[function(t,e,n){"use strict";e.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,COMMAND:91,CAPSLOCK:20,ESCAPE:27,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ASTERISK:106,NUMPAD_PLUS:107,NUMPAD_DASH:109,NUMPAD_DOT:110,NUMPAD_SLASH:111,NUMPAD_EQUALS:187,TICK:192,LEFT_BRACKET:219,RIGHT_BRACKET:221,BACKSLASH:220,SEMICOLON:186,APOSTRAPHE:222,APOSTROPHE:222,SPACEBAR:32,CLEAR:12,COMMA:188,DOT:190,SLASH:191}},{}],92:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t("@marcom/ac-polyfills/Array/isArray");var r=t("./extend"),o=Object.prototype.hasOwnProperty,s=function a(t,e){var n;for(n in e)o.call(e,n)&&(null===e[n]?t[n]=null:"object"===i(e[n])?(t[n]=Array.isArray(e[n])?[]:{},a(t[n],e[n])):t[n]=e[n]);return t};e.exports=function(t,e){return e?s({},t):r({},t)}},{"./extend":95,"@marcom/ac-polyfills/Array/isArray":void 0}],93:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){};e.exports=function(t){if(arguments.length>1)throw new Error("Second argument not supported");if(null===t||"object"!==("undefined"==typeof t?"undefined":i(t)))throw new TypeError("Object prototype may only be an Object.");return"function"==typeof Object.create?Object.create(t):(r.prototype=t,new r)}},{}],94:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=t("./extend");e.exports=function(t,e){if("object"!==("undefined"==typeof t?"undefined":i(t)))throw new TypeError("defaults: must provide a defaults object");if(e=e||{},"object"!==("undefined"==typeof e?"undefined":i(e)))throw new TypeError("defaults: options must be a typeof object");return r({},t,e)}},{"./extend":95}],95:[function(t,e,n){"use strict";t("@marcom/ac-polyfills/Array/prototype.forEach");var i=Object.prototype.hasOwnProperty;e.exports=function(){var t,e;return t=arguments.length<2?[{},arguments[0]]:[].slice.call(arguments),e=t.shift(),t.forEach(function(t){if(null!=t)for(var n in t)i.call(t,n)&&(e[n]=t[n])}),e}},{"@marcom/ac-polyfills/Array/prototype.forEach":void 0}],96:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=t("@marcom/ac-url/joinSearchParams");e.exports=function(t){if("object"!==("undefined"==typeof t?"undefined":i(t)))throw new TypeError("toQueryParameters error: argument is not an object");return r(t,!1)}},{"@marcom/ac-url/joinSearchParams":158}],97:[function(t,e,n){"use strict";var i=t("./utils/eventTypeAvailable"),r=t("./shared/camelCasedEventTypes"),o=t("./shared/windowFallbackEventTypes"),s=t("./shared/prefixHelper"),a={};e.exports=function u(t,e){var n,l,c;if(e=e||"div",t=t.toLowerCase(),e in a||(a[e]={}),l=a[e],t in l)return l[t];if(i(t,e))return l[t]=t;if(t in r)for(c=0;c<r[t].length;c++)if(n=r[t][c],i(n.toLowerCase(),e))return l[t]=n;for(c=0;c<s.evt.length;c++)if(n=s.evt[c]+t,i(n,e))return s.reduce(c),l[t]=n;return"window"!==e&&o.indexOf(t)?l[t]=u(t,"window"):l[t]=!1}},{"./shared/camelCasedEventTypes":98,"./shared/prefixHelper":99,"./shared/windowFallbackEventTypes":100,"./utils/eventTypeAvailable":101}],98:[function(t,e,n){"use strict";e.exports={transitionend:["webkitTransitionEnd","MSTransitionEnd"],animationstart:["webkitAnimationStart","MSAnimationStart"],animationend:["webkitAnimationEnd","MSAnimationEnd"],animationiteration:["webkitAnimationIteration","MSAnimationIteration"],fullscreenchange:["MSFullscreenChange"],fullscreenerror:["MSFullscreenError"]}},{}],99:[function(t,e,n){"use strict";var i=["-webkit-","-moz-","-ms-"],r=["Webkit","Moz","ms"],o=["webkit","moz","ms"],s=function(){this.initialize()},a=s.prototype;a.initialize=function(){this.reduced=!1,this.css=i,this.dom=r,this.evt=o},a.reduce=function(t){this.reduced||(this.reduced=!0,this.css=[this.css[t]],this.dom=[this.dom[t]],this.evt=[this.evt[t]])},e.exports=new s},{}],100:[function(t,e,n){"use strict";e.exports=["transitionend","animationstart","animationend","animationiteration"]},{}],101:[function(t,e,n){"use strict";var i={window:window,document:document};e.exports=function(t,e){var n;return t="on"+t,e in i||(i[e]=document.createElement(e)),n=i[e],t in n||"setAttribute"in n&&(n.setAttribute(t,"return;"),"function"==typeof n[t])}},{}],102:[function(t,e,n){"use strict";function i(t){t=t||{},o.call(this),this.id=a.getNewID(),this.executor=t.executor||s,this._reset(),this._willRun=!1,this._didDestroy=!1}var r,o=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,s=t("@marcom/ac-raf-executor/sharedRAFExecutorInstance"),a=t("@marcom/ac-raf-emitter-id-generator/sharedRAFEmitterIDGeneratorInstance");r=i.prototype=Object.create(o.prototype),r.run=function(){return this._willRun||(this._willRun=!0),this._subscribe()},r.cancel=function(){this._unsubscribe(),this._willRun&&(this._willRun=!1),this._reset()},r.destroy=function(){var t=this.willRun();return this.cancel(),this.executor=null,o.prototype.destroy.call(this),this._didDestroy=!0,t},r.willRun=function(){return this._willRun},r.isRunning=function(){return this._isRunning},r._subscribe=function(){return this.executor.subscribe(this)},r._unsubscribe=function(){return this.executor.unsubscribe(this)},r._onAnimationFrameStart=function(t){this._isRunning=!0,this._willRun=!1,this._didEmitFrameData||(this._didEmitFrameData=!0,this.trigger("start",t))},r._onAnimationFrameEnd=function(t){this._willRun||(this.trigger("stop",t),this._reset())},r._reset=function(){this._didEmitFrameData=!1,this._isRunning=!1},e.exports=i},{"@marcom/ac-event-emitter-micro":66,"@marcom/ac-raf-emitter-id-generator/sharedRAFEmitterIDGeneratorInstance":113,"@marcom/ac-raf-executor/sharedRAFExecutorInstance":127}],103:[function(t,e,n){"use strict";var i=t("./SingleCallRAFEmitter"),r=function(t){this.rafEmitter=new i,this.rafEmitter.on(t,this._onRAFExecuted.bind(this)),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.cancelAnimationFrame=this.cancelAnimationFrame.bind(this),this._frameCallbacks=[],this._nextFrameCallbacks=[],this._currentFrameID=-1,this._cancelFrameIdx=-1,this._frameCallbackLength=0,this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0},o=r.prototype;o.requestAnimationFrame=function(t){return this._currentFrameID=this.rafEmitter.run(),this._nextFrameCallbacks.push(this._currentFrameID,t),this._nextFrameCallbacksLength+=2,this._currentFrameID},o.cancelAnimationFrame=function(t){this._cancelFrameIdx=this._nextFrameCallbacks.indexOf(t),this._cancelFrameIdx!==-1&&(this._nextFrameCallbacks.splice(this._cancelFrameIdx,2),this._nextFrameCallbacksLength-=2,0===this._nextFrameCallbacksLength&&this.rafEmitter.cancel())},o._onRAFExecuted=function(t){for(this._frameCallbacks=this._nextFrameCallbacks,this._frameCallbackLength=this._nextFrameCallbacksLength,this._nextFrameCallbacks=[],this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0;this._frameCallbackIteration<this._frameCallbackLength;this._frameCallbackIteration+=2)this._frameCallbacks[this._frameCallbackIteration+1](t.time,t)},e.exports=r},{"./SingleCallRAFEmitter":105}],104:[function(t,e,n){"use strict";var i=t("./RAFInterface"),r=function(){this.events={}},o=r.prototype;o.requestAnimationFrame=function(t){return this.events[t]||(this.events[t]=new i(t)),this.events[t].requestAnimationFrame},o.cancelAnimationFrame=function(t){return this.events[t]||(this.events[t]=new i(t)),this.events[t].cancelAnimationFrame},e.exports=new r},{"./RAFInterface":103}],105:[function(t,e,n){"use strict";var i=t("./RAFEmitter"),r=function(t){i.call(this,t)},o=r.prototype=Object.create(i.prototype);o._subscribe=function(){return this.executor.subscribe(this,!0)},e.exports=r},{"./RAFEmitter":102}],106:[function(t,e,n){"use strict";var i=t("./RAFInterfaceController");e.exports=i.requestAnimationFrame("draw")},{"./RAFInterfaceController":104}],107:[function(t,e,n){"use strict";var i=t("./RAFInterfaceController");e.exports=i.requestAnimationFrame("update")},{"./RAFInterfaceController":104}],108:[function(t,e,n){"use strict";function i(t){s.call(this),this.options=r(l,t),this.loadingOptions=null,this.els=[],this.loadingQueue=null,this._queueItems=[],this._queueItemsObj={},this._loadOrder=[],this._timeout=null,this._didCallLoad=!1}var r=t("@marcom/ac-object/defaults"),o=t("@marcom/ac-queue").LiveQueue,s=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,a=t("@marcom/ac-raf-emitter/update"),u=t("@marcom/ac-raf-emitter/draw"),l={container:document.body,includeContainer:!1},c={loadingPoolSize:8,timeout:null,imageDataAttribute:"data-progressive-image",imageAnimate:!0,imageAnimateClass:"progressive-image-animated"};i.Events={ImageLoad:"image-load",Complete:"complete"};var h=i.prototype=Object.create(s.prototype);h.load=function(t){this._didCallLoad||(this._didCallLoad=!0,this.loadingOptions=r(c,t),this.loadingQueue=new o(this.loadingOptions.loadingPoolSize),this.els=Array.from(this._getProgressiveImageElements()),this.options.includeContainer&&this.options.container.hasAttribute(this._getProgressiveImageDataAttribute())&&this.els.unshift(this.options.container),u(function(){var t,e,n=this.els.length;for(t=0;t<n;t++)e={queueItem:this.loadingQueue.enqueue(this._loadNextItem.bind(this,t),t),el:this.els[t],id:t},this._queueItems.push(e),this._queueItemsObj[t]=e,this.loadingOptions.imageAnimate&&this.els[t].classList.add(this.loadingOptions.imageAnimateClass);a(function(){this.loadingQueue.start(),"number"==typeof this.loadingOptions.timeout&&(this._timeout=setTimeout(this.cancel.bind(this),this.loadingOptions.timeout))}.bind(this))}.bind(this)))},h.setVisible=function(t){return new Promise(function(e,n){u(function(){t.removeAttribute(this._getProgressiveImageDataAttribute()),e(),t=null}.bind(this))}.bind(this))},h.cancel=function(){if(this.els){var t,e=this.els.length;for(t=0;t<e;t++)this.setVisible(this.els[t]),this.loadingOptions.imageAnimate&&u(function(){this.els[t].setAttribute("data-progressive-image-loaded","")}.bind(this,t))}this._handleLoadingComplete()},h.destroy=function(){this.cancel(),this.off(),s.prototype.destroy.call(this)},h._loadNextItem=function(t){return new Promise(function(t,e,n){var i=this._queueItemsObj[t];this._loadAndSetVisible(i.el).then(function(){var t=this._queueItems.indexOf(i);this._queueItems.splice(t,1),this._queueItemsObj[i.id]=null,e(),this._handleImageLoad(i.el),i=e=null,1===this.loadingQueue.count()&&this._handleLoadingComplete()}.bind(this))}.bind(this,t))},h._loadAndSetVisible=function(t){return new Promise(function(e,n){this.setVisible(t).then(function(){this._getBackgroundImageSrc(t).then(function(n){this._loadImage(n).then(e),t=null}.bind(this))}.bind(this))}.bind(this))},h._getBackgroundImageSrc=function(t){return new Promise(function(e,n){a(function(){var n=t.currentStyle;return n||(n=window.getComputedStyle(t,!1)),t=null,0===n.backgroundImage.indexOf("url(")?void e(n.backgroundImage.slice(4,-1).replace(/"/g,"")):void e(null)}.bind(this))}.bind(this))},h._getProgressiveImageDataAttribute=function(){return this.loadingOptions.imageDataAttribute},h._getProgressiveImageCSSQuery=function(){return"["+this._getProgressiveImageDataAttribute()+"]"},h._getProgressiveImageElements=function(){return this.options.container.querySelectorAll(this._getProgressiveImageCSSQuery())||[]},h._loadImage=function(t){return new Promise(this._loadImagePromiseFunc.bind(this,t))},h._loadImagePromiseFunc=function(t,e,n){function i(){this.removeEventListener("load",i),e(this),e=null}if(!t)return void e(null);var r=new Image;r.addEventListener("load",i),r.src=t},h._clearTimeout=function(){this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null)},h._handleImageLoad=function(t){u(function(){this.trigger(i.Events.ImageLoad,t),this.loadingOptions.imageAnimate&&t.setAttribute("data-progressive-image-loaded",""),t=null}.bind(this))},h._handleLoadingComplete=function(){this.loadingQueue.stop(),this._clearTimeout(),this.trigger(i.Events.Complete)},e.exports=i},{"@marcom/ac-event-emitter-micro":66,"@marcom/ac-object/defaults":94,"@marcom/ac-queue":109,"@marcom/ac-raf-emitter/draw":106,"@marcom/ac-raf-emitter/update":107}],109:[function(t,e,n){"use strict";e.exports={Queue:t("./ac-queue/Queue"),QueueItem:t("./ac-queue/QueueItem"),LiveQueue:t("./ac-queue/LiveQueue")}},{"./ac-queue/LiveQueue":110,"./ac-queue/Queue":111,"./ac-queue/QueueItem":112}],110:[function(t,e,n){"use strict";function i(t){this._queue=new r,this._maxProcesses=t||1,this._availableSlots=this._maxProcesses,this._rafId=0,this._isRunning=!1,this._boundFunctions={_run:this._run.bind(this),_releaseSlot:this._releaseSlot.bind(this)}}t("@marcom/ac-polyfills/Promise"),t("@marcom/ac-polyfills/requestAnimationFrame"),t("@marcom/ac-polyfills/Function/prototype.bind");var r=t("./Queue"),o=t("./QueueItem"),s=i.prototype;s.start=function(){this._isRunning&&cancelAnimationFrame(this._rafId),this._rafId=requestAnimationFrame(this._boundFunctions._run),this._isRunning=!0},s.pause=function(){this._isRunning&&(cancelAnimationFrame(this._rafId),this._rafId=0),this._isRunning=!1},s.stop=function(){this.pause(),this.clear()},s.enqueue=function(t,e){if("function"!=typeof t)throw new Error("LiveQueue can only enqueue functions");void 0===e&&(e=r.PRIORITY_DEFAULT);var n=new o(t,e);return this.enqueueQueueItem(n)},s.enqueueQueueItem=function(t){return this._queue.enqueueQueueItem(t),this._isRunning&&0===this._rafId&&this.start(),t},s.dequeueQueueItem=function(t){return this._queue.dequeueQueueItem(t)},s.clear=function(){this._queue=new r},s.destroy=function(){this.pause(),this._isRunning=!1,this._queue=null,this._boundFunctions=null},s.count=function(){return this._queue.count()+this.pending()},s.pending=function(){return this._maxProcesses-this._availableSlots},s.isEmpty=function(){return 0===this.count()},s._run=function(){if(this._isRunning&&(this._rafId=requestAnimationFrame(this._boundFunctions._run),!this._queue.isEmpty()&&0!==this._availableSlots)){var t=this._queue.dequeue(),e=t.data();this._isPromise(e)&&(this._retainSlot(),e.then(this._boundFunctions._releaseSlot,this._boundFunctions._releaseSlot)),this._stopRunningIfDone()}},s._retainSlot=function(){this._availableSlots--},s._releaseSlot=function(){this._availableSlots++,this._stopRunningIfDone()},s._stopRunningIfDone=function(){0!=this._rafId&&0===this._queue.count()&&this._availableSlots==this._maxProcesses&&(cancelAnimationFrame(this._rafId),this._rafId=0)},s._isPromise=function(t){return!(!t||"function"!=typeof t.then)},e.exports=i},{"./Queue":111,"./QueueItem":112,"@marcom/ac-polyfills/Function/prototype.bind":void 0,"@marcom/ac-polyfills/Promise":void 0,"@marcom/ac-polyfills/requestAnimationFrame":void 0}],111:[function(t,e,n){"use strict";function i(){this._items=[]}var r=t("./QueueItem"),o=i.prototype;o.enqueue=function(t,e){void 0===e&&(e=i.PRIORITY_DEFAULT);var n=new r(t,e);return this.enqueueQueueItem(n)},o.enqueueQueueItem=function(t){return this._items.indexOf(t)===-1&&this._items.push(t),t},o.dequeue=function(){this._heapSort();var t=this._items.length-1,e=this._items[0];return this._items[0]=this._items[t],this._items.pop(),e},o.dequeueQueueItem=function(t){var e=this._items.indexOf(t);return e>-1&&this._items.splice(e,1),t},o.peek=function(){return 0==this.count()?null:(this._heapSort(),
this._items[0])},o.isEmpty=function(){return 0===this._items.length},o.count=function(){return this._items.length},o.toString=function(){for(var t=["Queue total items: "+this.count()+"\n"],e=0;e<this.count();++e)t.push(this._items[e].toString()+"\n");return t.join("")},o._heapSort=function(){for(var t=0,e=this._items.length-1;e>=0;e--)for(var n=e;n>0;){t++;var i=Math.floor((n-1)/2);if(this._items[n].compareTo(this._items[i])>=0)break;var r=this._items[n];this._items[n]=this._items[i],this._items[i]=r,n=i}},i.PRIORITY_LOW=10,i.PRIORITY_DEFAULT=5,i.PRIORITY_HIGH=1,e.exports=i},{"./QueueItem":112}],112:[function(t,e,n){"use strict";function i(t,e){this.priority=e,this.data=t,this.insertionOrder=r++}var r=0,o=i.prototype;o.compareTo=function(t){return this.priority<t.priority?-1:this.priority>t.priority?1:this.insertionOrder<t.insertionOrder?-1:1},o.toString=function(){return"QueueItem {priority:"+this.priority+",\tdata:"+this.data+"\tinsertionOrder:"+this.insertionOrder+"}"},e.exports=i},{}],113:[function(t,e,n){"use strict";var i=t("@marcom/ac-shared-instance").SharedInstance,r="ac-raf-emitter-id-generator:sharedRAFEmitterIDGeneratorInstance",o="1.0.3",s=function(){this._currentID=0};s.prototype.getNewID=function(){return this._currentID++,"raf:"+this._currentID},e.exports=i.share(r,o,s)},{"@marcom/ac-shared-instance":128}],114:[function(t,e,n){"use strict";e.exports={majorVersionNumber:"3.x"}},{}],115:[function(t,e,n){"use strict";function i(t){t=t||{},o.call(this),this.id=a.getNewID(),this.executor=t.executor||s,this._reset(),this._willRun=!1,this._didDestroy=!1}var r,o=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,s=t("./sharedRAFExecutorInstance"),a=t("./sharedRAFEmitterIDGeneratorInstance");r=i.prototype=Object.create(o.prototype),r.run=function(){return this._willRun||(this._willRun=!0),this._subscribe()},r.cancel=function(){this._unsubscribe(),this._willRun&&(this._willRun=!1),this._reset()},r.destroy=function(){var t=this.willRun();return this.cancel(),this.executor=null,o.prototype.destroy.call(this),this._didDestroy=!0,t},r.willRun=function(){return this._willRun},r.isRunning=function(){return this._isRunning},r._subscribe=function(){return this.executor.subscribe(this)},r._unsubscribe=function(){return this.executor.unsubscribe(this)},r._onAnimationFrameStart=function(t){this._isRunning=!0,this._willRun=!1,this._didEmitFrameData||(this._didEmitFrameData=!0,this.trigger("start",t))},r._onAnimationFrameEnd=function(t){this._willRun||(this.trigger("stop",t),this._reset())},r._reset=function(){this._didEmitFrameData=!1,this._isRunning=!1},e.exports=i},{"./sharedRAFEmitterIDGeneratorInstance":123,"./sharedRAFExecutorInstance":124,"@marcom/ac-event-emitter-micro":66}],116:[function(t,e,n){"use strict";function i(t){t=t||{},this._reset(),this.updatePhases(),this.eventEmitter=new o,this._willRun=!1,this._totalSubscribeCount=-1,this._requestAnimationFrame=window.requestAnimationFrame,this._cancelAnimationFrame=window.cancelAnimationFrame,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._boundOnExternalAnimationFrame=this._onExternalAnimationFrame.bind(this)}t("@marcom/ac-polyfills/performance/now");var r,o=t("@marcom/ac-event-emitter-micro/EventEmitterMicro");r=i.prototype,r.frameRequestedPhase="requested",r.startPhase="start",r.runPhases=["update","external","draw"],r.endPhase="end",r.disabledPhase="disabled",r.beforePhaseEventPrefix="before:",r.afterPhaseEventPrefix="after:",r.subscribe=function(t,e){return this._totalSubscribeCount++,this._nextFrameSubscribers[t.id]||(e?this._nextFrameSubscribersOrder.unshift(t.id):this._nextFrameSubscribersOrder.push(t.id),this._nextFrameSubscribers[t.id]=t,this._nextFrameSubscriberArrayLength++,this._nextFrameSubscriberCount++,this._run()),this._totalSubscribeCount},r.subscribeImmediate=function(t,e){return this._totalSubscribeCount++,this._subscribers[t.id]||(e?this._subscribersOrder.splice(this._currentSubscriberIndex+1,0,t.id):this._subscribersOrder.unshift(t.id),this._subscribers[t.id]=t,this._subscriberArrayLength++,this._subscriberCount++),this._totalSubscribeCount},r.unsubscribe=function(t){return!!this._nextFrameSubscribers[t.id]&&(this._nextFrameSubscribers[t.id]=null,this._nextFrameSubscriberCount--,0===this._nextFrameSubscriberCount&&this._cancel(),!0)},r.getSubscribeID=function(){return this._totalSubscribeCount+=1},r.destroy=function(){var t=this._cancel();return this.eventEmitter.destroy(),this.eventEmitter=null,this.phases=null,this._subscribers=null,this._subscribersOrder=null,this._nextFrameSubscribers=null,this._nextFrameSubscribersOrder=null,this._rafData=null,this._boundOnAnimationFrame=null,this._onExternalAnimationFrame=null,t},r.useExternalAnimationFrame=function(t){if("boolean"==typeof t){var e=this._isUsingExternalAnimationFrame;return t&&this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),!this._willRun||t||this._animationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this._isUsingExternalAnimationFrame=t,t?this._boundOnExternalAnimationFrame:e||!1}},r.updatePhases=function(){this.phases||(this.phases=[]),this.phases.length=0,this.phases.push(this.frameRequestedPhase),this.phases.push(this.startPhase),Array.prototype.push.apply(this.phases,this.runPhases),this.phases.push(this.endPhase),this._runPhasesLength=this.runPhases.length,this._phasesLength=this.phases.length},r._run=function(){if(!this._willRun)return this._willRun=!0,0===this.lastFrameTime&&(this.lastFrameTime=performance.now()),this._animationFrameActive=!0,this._isUsingExternalAnimationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this.phase===this.disabledPhase&&(this.phaseIndex=0,this.phase=this.phases[this.phaseIndex]),!0},r._cancel=function(){var t=!1;return this._animationFrameActive&&(this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),this._animationFrameActive=!1,this._willRun=!1,t=!0),this._isRunning||this._reset(),t},r._onAnimationFrame=function(t){for(this._subscribers=this._nextFrameSubscribers,this._subscribersOrder=this._nextFrameSubscribersOrder,this._subscriberArrayLength=this._nextFrameSubscriberArrayLength,this._subscriberCount=this._nextFrameSubscriberCount,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this.phaseIndex=0,this.phase=this.phases[this.phaseIndex],this._isRunning=!0,this._willRun=!1,this._didRequestNextRAF=!1,this._rafData.delta=t-this.lastFrameTime,this.lastFrameTime=t,this._rafData.fps=0,this._rafData.delta>=1e3&&(this._rafData.delta=0),0!==this._rafData.delta&&(this._rafData.fps=1e3/this._rafData.delta),this._rafData.time=t,this._rafData.naturalFps=this._rafData.fps,this._rafData.timeNow=Date.now(),this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameStart(this._rafData);for(this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._runPhaseIndex=0;this._runPhaseIndex<this._runPhasesLength;this._runPhaseIndex++){for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]].trigger(this.phase,this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase)}for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameEnd(this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._willRun?(this.phaseIndex=0,this.phaseIndex=this.phases[this.phaseIndex]):this._reset()},r._onExternalAnimationFrame=function(t){this._isUsingExternalAnimationFrame&&this._onAnimationFrame(t)},r._reset=function(){this._rafData||(this._rafData={}),this._rafData.time=0,this._rafData.delta=0,this._rafData.fps=0,this._rafData.naturalFps=0,this._rafData.timeNow=0,this._subscribers={},this._subscribersOrder=[],this._currentSubscriberIndex=-1,this._subscriberArrayLength=0,this._subscriberCount=0,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._didEmitFrameData=!1,this._animationFrame=null,this._animationFrameActive=!1,this._isRunning=!1,this._shouldReset=!1,this.lastFrameTime=0,this._runPhaseIndex=-1,this.phaseIndex=-1,this.phase=this.disabledPhase},e.exports=i},{"@marcom/ac-event-emitter-micro/EventEmitterMicro":67,"@marcom/ac-polyfills/performance/now":void 0}],117:[function(t,e,n){"use strict";var i=t("./SingleCallRAFEmitter"),r=function(t){this.phase=t,this.rafEmitter=new i,this._cachePhaseIndex(),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.cancelAnimationFrame=this.cancelAnimationFrame.bind(this),this._onBeforeRAFExecutorStart=this._onBeforeRAFExecutorStart.bind(this),this._onBeforeRAFExecutorPhase=this._onBeforeRAFExecutorPhase.bind(this),this._onAfterRAFExecutorPhase=this._onAfterRAFExecutorPhase.bind(this),this.rafEmitter.on(this.phase,this._onRAFExecuted.bind(this)),this.rafEmitter.executor.eventEmitter.on("before:start",this._onBeforeRAFExecutorStart),this.rafEmitter.executor.eventEmitter.on("before:"+this.phase,this._onBeforeRAFExecutorPhase),this.rafEmitter.executor.eventEmitter.on("after:"+this.phase,this._onAfterRAFExecutorPhase),this._frameCallbacks=[],this._currentFrameCallbacks=[],this._nextFrameCallbacks=[],this._phaseActive=!1,this._currentFrameID=-1,this._cancelFrameIdx=-1,this._frameCallbackLength=0,this._currentFrameCallbacksLength=0,this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0},o=r.prototype;o.requestAnimationFrame=function(t,e){return e===!0&&this.rafEmitter.executor.phaseIndex>0&&this.rafEmitter.executor.phaseIndex<=this.phaseIndex?this._phaseActive?(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!0),this._frameCallbacks.push(this._currentFrameID,t),this._frameCallbackLength+=2):(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!1),this._currentFrameCallbacks.push(this._currentFrameID,t),this._currentFrameCallbacksLength+=2):(this._currentFrameID=this.rafEmitter.run(),this._nextFrameCallbacks.push(this._currentFrameID,t),this._nextFrameCallbacksLength+=2),this._currentFrameID},o.cancelAnimationFrame=function(t){this._cancelFrameIdx=this._nextFrameCallbacks.indexOf(t),this._cancelFrameIdx>-1?this._cancelNextAnimationFrame():(this._cancelFrameIdx=this._currentFrameCallbacks.indexOf(t),this._cancelFrameIdx>-1?this._cancelCurrentAnimationFrame():(this._cancelFrameIdx=this._frameCallbacks.indexOf(t),this._cancelFrameIdx>-1&&this._cancelRunningAnimationFrame()))},o._onRAFExecuted=function(t){for(this._frameCallbackIteration=0;this._frameCallbackIteration<this._frameCallbackLength;this._frameCallbackIteration+=2)this._frameCallbacks[this._frameCallbackIteration+1](t.time,t);this._frameCallbacks.length=0,this._frameCallbackLength=0},o._onBeforeRAFExecutorStart=function(){Array.prototype.push.apply(this._currentFrameCallbacks,this._nextFrameCallbacks.splice(0,this._nextFrameCallbacksLength)),this._currentFrameCallbacksLength=this._nextFrameCallbacksLength,this._nextFrameCallbacks.length=0,this._nextFrameCallbacksLength=0},o._onBeforeRAFExecutorPhase=function(){this._phaseActive=!0,Array.prototype.push.apply(this._frameCallbacks,this._currentFrameCallbacks.splice(0,this._currentFrameCallbacksLength)),this._frameCallbackLength=this._currentFrameCallbacksLength,this._currentFrameCallbacks.length=0,this._currentFrameCallbacksLength=0},o._onAfterRAFExecutorPhase=function(){this._phaseActive=!1},o._cachePhaseIndex=function(){this.phaseIndex=this.rafEmitter.executor.phases.indexOf(this.phase)},o._cancelRunningAnimationFrame=function(){this._frameCallbacks.splice(this._cancelFrameIdx,2),this._frameCallbackLength-=2},o._cancelCurrentAnimationFrame=function(){this._currentFrameCallbacks.splice(this._cancelFrameIdx,2),this._currentFrameCallbacksLength-=2},o._cancelNextAnimationFrame=function(){this._nextFrameCallbacks.splice(this._cancelFrameIdx,2),this._nextFrameCallbacksLength-=2,0===this._nextFrameCallbacksLength&&this.rafEmitter.cancel()},e.exports=r},{"./SingleCallRAFEmitter":119}],118:[function(t,e,n){"use strict";var i=t("./RAFInterface"),r=function(){this.events={}},o=r.prototype;o.requestAnimationFrame=function(t){return this.events[t]||(this.events[t]=new i(t)),this.events[t].requestAnimationFrame},o.cancelAnimationFrame=function(t){return this.events[t]||(this.events[t]=new i(t)),this.events[t].cancelAnimationFrame},e.exports=new r},{"./RAFInterface":117}],119:[function(t,e,n){"use strict";var i=t("./RAFEmitter"),r=function(t){i.call(this,t)},o=r.prototype=Object.create(i.prototype);o._subscribe=function(){return this.executor.subscribe(this,!0)},e.exports=r},{"./RAFEmitter":115}],120:[function(t,e,n){"use strict";var i=t("./RAFInterfaceController");e.exports=i.cancelAnimationFrame("update")},{"./RAFInterfaceController":118}],121:[function(t,e,n){"use strict";var i=t("./RAFInterfaceController");e.exports=i.requestAnimationFrame("draw")},{"./RAFInterfaceController":118}],122:[function(t,e,n){"use strict";var i=t("./RAFInterfaceController");e.exports=i.requestAnimationFrame("external")},{"./RAFInterfaceController":118}],123:[function(t,e,n){"use strict";var i=t("@marcom/ac-shared-instance").SharedInstance,r=t("../.release-info.js").majorVersionNumber,o=function(){this._currentID=0};o.prototype.getNewID=function(){return this._currentID++,"raf:"+this._currentID},e.exports=i.share("@marcom/ac-raf-emitter/sharedRAFEmitterIDGeneratorInstance",r,o)},{"../.release-info.js":114,"@marcom/ac-shared-instance":128}],124:[function(t,e,n){"use strict";var i=t("@marcom/ac-shared-instance").SharedInstance,r=t("../.release-info.js").majorVersionNumber,o=t("./RAFExecutor");e.exports=i.share("@marcom/ac-raf-emitter/sharedRAFExecutorInstance",r,o)},{"../.release-info.js":114,"./RAFExecutor":116,"@marcom/ac-shared-instance":128}],125:[function(t,e,n){"use strict";var i=t("./RAFInterfaceController");e.exports=i.requestAnimationFrame("update")},{"./RAFInterfaceController":118}],126:[function(t,e,n){"use strict";function i(t){t=t||{},this._reset(),this._willRun=!1,this._totalSubscribeCount=-1,this._requestAnimationFrame=window.requestAnimationFrame,this._cancelAnimationFrame=window.cancelAnimationFrame,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._boundOnExternalAnimationFrame=this._onExternalAnimationFrame.bind(this)}t("@marcom/ac-polyfills/performance/now");var r;r=i.prototype,r.subscribe=function(t,e){return this._totalSubscribeCount++,this._nextFrameSubscribers[t.id]||(e?this._nextFrameSubscribersOrder.unshift(t.id):this._nextFrameSubscribersOrder.push(t.id),this._nextFrameSubscribers[t.id]=t,this._nextFrameSubscriberArrayLength++,this._nextFrameSubscriberCount++,this._run()),this._totalSubscribeCount},r.unsubscribe=function(t){return!!this._nextFrameSubscribers[t.id]&&(this._nextFrameSubscribers[t.id]=null,this._nextFrameSubscriberCount--,0===this._nextFrameSubscriberCount&&this._cancel(),!0)},r.trigger=function(t,e){var n;for(n=0;n<this._subscriberArrayLength;n++)null!==this._subscribers[this._subscribersOrder[n]]&&this._subscribers[this._subscribersOrder[n]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[n]].trigger(t,e)},r.destroy=function(){var t=this._cancel();return this._subscribers=null,this._subscribersOrder=null,this._nextFrameSubscribers=null,this._nextFrameSubscribersOrder=null,this._rafData=null,this._boundOnAnimationFrame=null,this._onExternalAnimationFrame=null,t},r.useExternalAnimationFrame=function(t){if("boolean"==typeof t){var e=this._isUsingExternalAnimationFrame;return t&&this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),!this._willRun||t||this._animationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this._isUsingExternalAnimationFrame=t,t?this._boundOnExternalAnimationFrame:e||!1}},r._run=function(){if(!this._willRun)return this._willRun=!0,0===this.lastFrameTime&&(this.lastFrameTime=performance.now()),this._animationFrameActive=!0,this._isUsingExternalAnimationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),!0},r._cancel=function(){var t=!1;return this._animationFrameActive&&(this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),this._animationFrameActive=!1,this._willRun=!1,t=!0),this._isRunning||this._reset(),t},r._onSubscribersAnimationFrameStart=function(t){var e;for(e=0;e<this._subscriberArrayLength;e++)null!==this._subscribers[this._subscribersOrder[e]]&&this._subscribers[this._subscribersOrder[e]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[e]]._onAnimationFrameStart(t)},r._onSubscribersAnimationFrameEnd=function(t){var e;for(e=0;e<this._subscriberArrayLength;e++)null!==this._subscribers[this._subscribersOrder[e]]&&this._subscribers[this._subscribersOrder[e]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[e]]._onAnimationFrameEnd(t)},r._onAnimationFrame=function(t){this._subscribers=this._nextFrameSubscribers,this._subscribersOrder=this._nextFrameSubscribersOrder,this._subscriberArrayLength=this._nextFrameSubscriberArrayLength,this._subscriberCount=this._nextFrameSubscriberCount,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._isRunning=!0,this._willRun=!1,this._didRequestNextRAF=!1,this._rafData.delta=t-this.lastFrameTime,this.lastFrameTime=t,this._rafData.fps=0,this._rafData.delta>=1e3&&(this._rafData.delta=0),0!==this._rafData.delta&&(this._rafData.fps=1e3/this._rafData.delta),this._rafData.time=t,this._rafData.naturalFps=this._rafData.fps,this._rafData.timeNow=Date.now(),this._onSubscribersAnimationFrameStart(this._rafData),this.trigger("update",this._rafData),this.trigger("external",this._rafData),this.trigger("draw",this._rafData),this._onSubscribersAnimationFrameEnd(this._rafData),this._willRun||this._reset()},r._onExternalAnimationFrame=function(t){this._isUsingExternalAnimationFrame&&this._onAnimationFrame(t)},r._reset=function(){this._rafData={time:0,delta:0,fps:0,naturalFps:0,timeNow:0},this._subscribers={},this._subscribersOrder=[],this._subscriberArrayLength=0,this._subscriberCount=0,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._didEmitFrameData=!1,this._animationFrame=null,this._animationFrameActive=!1,this._isRunning=!1,this._shouldReset=!1,this.lastFrameTime=0},e.exports=i},{"@marcom/ac-polyfills/performance/now":void 0}],127:[function(t,e,n){"use strict";var i=t("@marcom/ac-shared-instance").SharedInstance,r="ac-raf-executor:sharedRAFExecutorInstance",o="2.0.1",s=t("./RAFExecutor");e.exports=i.share(r,o,s)},{"./RAFExecutor":126,"@marcom/ac-shared-instance":128}],128:[function(t,e,n){"use strict";e.exports={SharedInstance:t("./ac-shared-instance/SharedInstance")}},{"./ac-shared-instance/SharedInstance":129}],129:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=window,o="AC",s="SharedInstance",a=r[o],u=function(){var t={};return{get:function(e,n){var i=null;return t[e]&&t[e][n]&&(i=t[e][n]),i},set:function(e,n,i){return t[e]||(t[e]={}),"function"==typeof i?t[e][n]=new i:t[e][n]=i,t[e][n]},share:function(t,e,n){var i=this.get(t,e);return i||(i=this.set(t,e,n)),i},remove:function(e,n){var r="undefined"==typeof n?"undefined":i(n);if("string"===r||"number"===r){if(!t[e]||!t[e][n])return;return void(t[e][n]=null)}t[e]&&(t[e]=null)}}}();a||(a=r[o]={}),a[s]||(a[s]=u),e.exports=a[s]},{}],130:[function(t,e,n){"use strict";var i=t("@marcom/ac-event-emitter-micro"),r=t("@marcom/ac-dom-metrics"),o=t("@marcom/ac-keyboard/Keyboard"),s={num:37,string:"ArrowLeft"},a={num:38,string:"ArrowUp"},u={num:39,string:"ArrowRight"},l={num:40,string:"ArrowDown"},c=[s,u,l,u],h=function(t){if(t.which)return t.which;for(var e=t.key?t.key:t.code,n=0,i=c.length;n<i;n++)if(c[n].string===e)return c[n].num;return-1},f={min:0,max:1,step:1,value:0,orientation:"horizontal",renderedPosition:!1,template:'<div class="ac-slider-runnable-track">\n\t<div class="ac-slider-thumb"></div>\n</div>',keyboardMaxStepPercentage:.05,keyboardStepMultiplier:1.25,containerClass:"ac-slider-container",grabbedClass:"ac-slider-grabbed"},d=Object.keys(f),p=function(t,e){this.options=Object.assign({},f,e),this.model=Object.create(this.options),this.el=t;var n=void 0!==this.options.keyboardContext?this.options.keyboardContext:this.el;null!==n&&(this._keyboard=new o(n),this._keyDown={}),t.classList.add(this.model.containerClass),t.innerHTML=this.model.template,i.EventEmitterMicro.call(this),this._initialize()};p.prototype=Object.create(i.EventEmitterMicro.prototype);var m=p.prototype;m._addGrabClass=function(){this.el.classList.add(this.model.grabbedClass)},m._removeGrabClass=function(){this.el.classList.remove(this.model.grabbedClass)},m._addEventListeners=function(){this._addEventListener(this.el,"mousedown",this._onMouseDown),this._addEventListener(this.el,"touchstart",this._onTouchStart),this._addEventListener(this.el,"mouseover",this._onMouseOver),this._addEventListener(this.el,"mouseleave",this._onMouseLeave),this._keyboard&&("horizontal"===this.model.orientation?(this._keyboard.onDown(u.num,this.stepUp),this._keyboard.onDown(s.num,this.stepDown)):(this._keyboard.onDown(l.num,this.stepDown),this._keyboard.onDown(a.num,this.stepUp)))},m._addEventListener=function(t,e,n){t.addEventListener(e,n)},m._bindMethods=function(){this._addGrabClass=this._addGrabClass.bind(this),this._removeGrabClass=this._removeGrabClass.bind(this),this.stepDown=this.stepDown.bind(this),this.stepUp=this.stepUp.bind(this),this._triggerRelease=this._triggerRelease.bind(this),this._preventDefault=this._preventDefault.bind(this),this._onMouseDown=this._bindMethod(this._onMouseDown,this),this._onTouchStart=this._bindMethod(this._onTouchStart,this),this._onMouseOver=this._bindMethod(this._onMouseOver,this),this._onMouseLeave=this._bindMethod(this._onMouseLeave,this),this._onTouchEnd=this._bindMethod(this._onTouchEnd,this),this._onMouseUp=this._bindMethod(this._onMouseUp,this),this._onMouseMove=this._bindMethod(this._onMouseMove,this),this._onTouchMove=this._bindMethod(this._onTouchMove,this)},m._bindMethod=function(t,e){return t.bind(e)},m._correctValueMinMax=function(t,e,n){return t>n&&(t=n),t<e&&(t=e),t},m._calculateStepsToValue=function(t,e){return Math.abs(t-e)},m._calculateMaxSteps=function(t,e){return Math.abs(e-t)},m._calculateStepsEqualToPercentage=function(t,e){return t/100*e},m._calculateNextStepInRange=function(t,e,n,i){var r=this._calculateMaxSteps(e,n),o=this._calculateStepsToValue(t,e),s=e+Math.floor(r/i)*i;return t=Math.min(s,e+Math.round(o/i)*i)},m._dispatchEvent=function(t,e){t.dispatchEvent(new CustomEvent(e))},m.disableUserControls=function(){this._removeEventListeners()},m.enableUserControls=function(){this._addEventListeners()},m._getNextValue=function(t,e,n,i){return t=this._correctValueMinMax(t,e,n),"auto"!==i&&(t=this._calculateNextStepInRange(t,e,n,i)),t},m.getOrientation=function(){return this.model.orientation},m.getValue=function(){return this.model.value},m.getMin=function(){return this.model.min},m.getMax=function(){return this.model.max},m.getStep=function(){return this.model.step},m.getClientXValue=function(t,e){var n=this._getClientXFromEvent(t),i=null!==e?r.getDimensions(e||this.thumbElement):{width:0,height:0},o=r.getDimensions(this.runnableTrackElement),s=n-this.runnableTrackElement.getBoundingClientRect().left-Math.round(i.width/2),a=o.width-i.width,u=s/a*100,l=this._calculateMaxSteps(this.getMin(),this.getMax()),c=this._calculateStepsEqualToPercentage(u,l);return this.getMin()+c},m.getClientYValue=function(t){var e=this._getClientYFromEvent(t),n=r.getDimensions(this.thumbElement),i=r.getDimensions(this.runnableTrackElement),o=r.getViewportPosition(this.runnableTrackElement,this.model.renderedPosition),s=i.height-n.height,a=s-(e-o.top-n.height/2),u=a/(i.height-n.height)*100,l=this._calculateMaxSteps(this.model.min,this.model.max),c=this._calculateStepsEqualToPercentage(u,l);return this.model.min+c},m.getClientValue=function(t){t=t.originalEvent||t;var e;return e="horizontal"===this.model.orientation?this.getClientXValue(t):this.getClientYValue(t)},m._getClientXFromEvent=function(t){return t.touches?t.touches[0].clientX:t.clientX},m._getClientYFromEvent=function(t){return t.touches?t.touches[0].clientY:t.clientY},m._initialize=function(){this._setNodeReferences(),this.setValue(this.model.value),this._bindMethods(),this._addEventListeners()},m._onMouseLeave=function(){this._preventDocumentMouseUpDispatch=!1},m._onMouseDown=function(t){this._addGrabClass(),this._addEventListener(document,"mouseup",this._onMouseUp),this._addEventListener(document,"mousemove",this._onMouseMove);var e=this.getClientValue(t);this.trigger("grab",this.getValue()),this.setValue(e)},m._onMouseUp=function(){this._removeGrabClass(),this._removeEventListener(document,"mouseup",this._onMouseUp),this._removeEventListener(document,"mousemove",this._onMouseMove),this.trigger("release",this.getValue()),this._preventDocumentMouseUpDispatch||this._dispatchEvent(this.el,"mouseup")},m._onMouseOver=function(){this._preventDocumentMouseUpDispatch=!0},m._onTouchEnd=function(){this._removeGrabClass(),this._removeEventListener(document,"touchend",this._onTouchEnd),this._removeEventListener(document,"touchmove",this._onTouchMove),this.trigger("release",this.getValue()),this._preventDocumentMouseUpDispatch||this._dispatchEvent(this.el,"touchend")},m._onTouchStart=function(t){this._addGrabClass();var e=this.getClientValue(t);this._addEventListener(document,"touchend",this._onTouchEnd),this._addEventListener(document,"touchmove",this._onTouchMove),this.trigger("grab",this.getValue()),this.setValue(e)},m._onMouseMove=function(t){var e=this.getClientValue(t);this.setValue(e)},m._onTouchMove=function(t){t.preventDefault&&t.preventDefault();var e=this.getClientValue(t);this.setValue(e)},m._getElementOrientationOffsetValue=function(t,e){return"horizontal"===e?r.getDimensions(t).width:r.getDimensions(t).height},m._getAvailableRunnableTrack=function(t,e){var n=this._getElementOrientationOffsetValue(this.thumbElement,e);return t-n},m._getPercentageByValue=function(t,e){return t=this._calculateStepsToValue(t,this.getMin()),e=this._calculateMaxSteps(this.getMin(),this.getMax()),t/e*100},m._getPercentageOfRunnableTrack=function(t){var e=this.getOrientation(),n=this._getElementOrientationOffsetValue(this.runnableTrackElement,e),i=this._getAvailableRunnableTrack(n,e),r=this._getPercentageByValue(t,this.getMax()),o=r/100*i;return o/n*100},m._onChange=function(t){var e=this._getPercentageOfRunnableTrack(t);isNaN(e)||("horizontal"===this.getOrientation()?this.thumbElement.style.left=e+"%":this.thumbElement.style.bottom=e+"%",this.trigger("change",this.getValue()))},m._removeEventListeners=function(){this._removeEventListener(this.el,"mousedown",this._onMouseDown),this._removeEventListener(this.el,"touchstart",this._onTouchStart),this._removeEventListener(this.el,"mouseover",this._onMouseOver),this._removeEventListener(this.el,"mouseleave",this._onMouseLeave),this._removeEventListener(document,"touchend",this._onMouseUp)},m._removeEventListener=function(t,e,n){t.removeEventListener(e,n)},m._setNodeReferences=function(){this.runnableTrackElement=this.el.querySelector(".ac-slider-runnable-track"),this.thumbElement=this.el.querySelector(".ac-slider-thumb")},m.setOrientation=function(t){this._set("orientation",t)},m._triggerRelease=function(t){this._preventDefault(t),this.trigger("release",this.getValue()),this._keyDown[h(t)]=0},m._preventDefault=function(t){t.preventDefault(),t.stopPropagation()},m._step=function(t,e){this._preventDefault(t),this.el.focus();var n=this._keyDown[h(t)]||0;n?Math.abs(this._keyDown[h(t)])<Math.abs(this.model.max*this.model.keyboardMaxStepPercentage)&&(n*=this.model.keyboardStepMultiplier):(this.trigger("grab",this.getValue()),n=this.getStep(),n="auto"!==n?n:this._cachedMaxStep,e||(n*=-1),this._keyboard.onceUp(h(t),this._triggerRelease)),this._keyDown[h(t)]=n,this.setValue(this.getValue()+n)},m.stepUp=function(t){this._step(t,!0)},m.stepDown=function(t){this._step(t,!1)},m.setValue=function(t){t=this._getNextValue(t,this.getMin(),this.getMax(),this.getStep()),this._set("value",t),this.el.setAttribute("aria-valuenow",t),this._onChange(t)},m.setMin=function(t){this._set("min",t),this.el.setAttribute("aria-valuemin",t)},m.setMax=function(t){this._set("max",t),this.el.setAttribute("aria-valuemax",t),this._cachedMaxStep=t/100},m.setStep=function(t){this._set("step",t)},m._set=function(t,e){if(d.indexOf(t)>-1&&this.model[t]!==e){var n=this.model[t];this.model[t]=e,this.trigger("change:model:"+t,{previous:n,current:e})}},m._removeEventListeners=function(){this._removeEventListener(this.el,"mousedown",this._onMouseDown),this._removeEventListener(this.el,"touchstart",this._onTouchStart),this._removeEventListener(this.el,"mouseover",this._onMouseOver),this._removeEventListener(this.el,"mouseleave",this._onMouseLeave),this._removeEventListener(this.el,"touchend",this._onTouchEnd),this._removeEventListener(document,"touchend",this._onMouseUp),"horizontal"===this.model.orientation?(this._keyboard.offDown(u.num,this.stepUp),this._keyboard.offDown(s.num,this.stepDown),this._keyboard.offUp(s.num,this._triggerRelease),this._keyboard.offUp(u.num,this._triggerRelease)):(this._keyboard.offDown(l.num,this.stepDown),this._keyboard.offDown(a.num,this.stepUp),this._keyboard.offUp(l.num,this._triggerRelease),this._keyboard.offUp(a.num,this._triggerRelease))},m.destroy=function(){this._removeEventListeners(),this._keyboard&&this._keyboard.destroy(),i.EventEmitterMicro.prototype.destroy.call(this)},e.exports=p},{"@marcom/ac-dom-metrics":37,"@marcom/ac-event-emitter-micro":66,"@marcom/ac-keyboard/Keyboard":89}],131:[function(t,e,n){"use strict";e.exports.Slider=t("./Slider")},{"./Slider":130}],132:[function(t,e,n){"use strict";e.exports=t("./lib/")},{"./lib/":133}],133:[function(t,e,n){"use strict";var i=t("./stringify"),r=t("./parse");e.exports={stringify:i,parse:r}},{"./parse":134,"./stringify":135}],134:[function(t,e,n){"use strict";var i=t("./utils"),r={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3};r.parseValues=function(t,e){for(var n={},r=t.split(e.delimiter,e.parameterLimit===1/0?void 0:e.parameterLimit),o=0,s=r.length;o<s;++o){
var a=r[o],u=a.indexOf("]=")===-1?a.indexOf("="):a.indexOf("]=")+1;if(u===-1)n[i.decode(a)]="";else{var l=i.decode(a.slice(0,u)),c=i.decode(a.slice(u+1));n.hasOwnProperty(l)?n[l]=[].concat(n[l]).concat(c):n[l]=c}}return n},r.parseObject=function(t,e,n){if(!t.length)return e;var i=t.shift(),o={};if("[]"===i)o=[],o=o.concat(r.parseObject(t,e,n));else{var s="["===i[0]&&"]"===i[i.length-1]?i.slice(1,i.length-1):i,a=parseInt(s,10),u=""+a;!isNaN(a)&&i!==s&&u===s&&a>=0&&a<=n.arrayLimit?(o=[],o[a]=r.parseObject(t,e,n)):o[s]=r.parseObject(t,e,n)}return o},r.parseKeys=function(t,e,n){if(t){var i=/^([^\[\]]*)/,o=/(\[[^\[\]]*\])/g,s=i.exec(t);if(!Object.prototype.hasOwnProperty(s[1])){var a=[];s[1]&&a.push(s[1]);for(var u=0;null!==(s=o.exec(t))&&u<n.depth;)++u,Object.prototype.hasOwnProperty(s[1].replace(/\[|\]/g,""))||a.push(s[1]);return s&&a.push("["+t.slice(s.index)+"]"),r.parseObject(a,e,n)}}},e.exports=function(t,e){if(""===t||null===t||"undefined"==typeof t)return{};e=e||{},e.delimiter="string"==typeof e.delimiter||i.isRegExp(e.delimiter)?e.delimiter:r.delimiter,e.depth="number"==typeof e.depth?e.depth:r.depth,e.arrayLimit="number"==typeof e.arrayLimit?e.arrayLimit:r.arrayLimit,e.parameterLimit="number"==typeof e.parameterLimit?e.parameterLimit:r.parameterLimit;for(var n="string"==typeof t?r.parseValues(t,e):t,o={},s=Object.keys(n),a=0,u=s.length;a<u;++a){var l=s[a],c=r.parseKeys(l,n[l],e);o=i.merge(o,c)}return i.compact(o)}},{"./utils":136}],135:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=t("./utils"),o={delimiter:"&",indices:!0};o.stringify=function(t,e,n){if(r.isBuffer(t)?t=t.toString():t instanceof Date?t=t.toISOString():null===t&&(t=""),"string"==typeof t||"number"==typeof t||"boolean"==typeof t)return[encodeURIComponent(e)+"="+encodeURIComponent(t)];var i=[];if("undefined"==typeof t)return i;for(var s=Object.keys(t),a=0,u=s.length;a<u;++a){var l=s[a];i=!n.indices&&Array.isArray(t)?i.concat(o.stringify(t[l],e,n)):i.concat(o.stringify(t[l],e+"["+l+"]",n))}return i},e.exports=function(t,e){e=e||{};var n="undefined"==typeof e.delimiter?o.delimiter:e.delimiter;e.indices="boolean"==typeof e.indices?e.indices:o.indices;var r=[];if("object"!==("undefined"==typeof t?"undefined":i(t))||null===t)return"";for(var s=Object.keys(t),a=0,u=s.length;a<u;++a){var l=s[a];r=r.concat(o.stringify(t[l],l,e))}return r.join(n)}},{"./utils":136}],136:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n.arrayToObject=function(t){for(var e={},n=0,i=t.length;n<i;++n)"undefined"!=typeof t[n]&&(e[n]=t[n]);return e},n.merge=function(t,e){if(!e)return t;if("object"!==("undefined"==typeof e?"undefined":i(e)))return Array.isArray(t)?t.push(e):t[e]=!0,t;if("object"!==("undefined"==typeof t?"undefined":i(t)))return t=[t].concat(e);Array.isArray(t)&&!Array.isArray(e)&&(t=n.arrayToObject(t));for(var r=Object.keys(e),o=0,s=r.length;o<s;++o){var a=r[o],u=e[a];t[a]?t[a]=n.merge(t[a],u):t[a]=u}return t},n.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},n.compact=function(t,e){if("object"!==("undefined"==typeof t?"undefined":i(t))||null===t)return t;e=e||[];var r=e.indexOf(t);if(r!==-1)return e[r];if(e.push(t),Array.isArray(t)){for(var o=[],s=0,a=t.length;s<a;++s)"undefined"!=typeof t[s]&&o.push(t[s]);return o}var u=Object.keys(t);for(s=0,a=u.length;s<a;++s){var l=u[s];t[l]=n.compact(t[l],e)}return t},n.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},n.isBuffer=function(t){return null!==t&&"undefined"!=typeof t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}},{}],137:[function(t,e,n){"use strict";e.exports={Link:t("./ac-social/Link"),Dialog:t("./ac-social/Dialog"),Focus:t("./ac-social/Focus"),Debug:t("./ac-social/Debug")}},{"./ac-social/Debug":138,"./ac-social/Dialog":139,"./ac-social/Focus":140,"./ac-social/Link":141}],138:[function(t,e,n){"use strict";function i(){this.types={};var t;for(t in r)r.hasOwnProperty(t)&&(o[t]=t,this.addType(t,r[t].getDialogDebugData.bind(r[t])))}var r=t("./NetworkActions"),o=i.prototype;o.create=function(t,e){e=e||{};var n=this.types[t];if(n)return n(e)},o.addType=function(t,e){return this.types[t]=e,this},o.removeType=function(){return this.types[name]=null,this},e.exports=new i},{"./NetworkActions":142}],139:[function(t,e,n){"use strict";function i(){this.types={};var t;for(t in r)r.hasOwnProperty(t)&&(o[t]=t,this.addType(t,r[t].generateDialog.bind(r[t])))}var r=t("./NetworkActions"),o=i.prototype;o.create=function(t,e){e=e||{};var n=this.types[t];if(n)return n(e)},o.addType=function(t,e){return this.types[t]=e,this},o.removeType=function(){return this.types[name]=null,this},e.exports=new i},{"./NetworkActions":142}],140:[function(t,e,n){"use strict";e.exports=function(t){if(window.getSelection){var e=window.getSelection(),n=document.createRange();n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n)}else if(t.setSelectionRange)t.setSelectionRange(0,t.value.length);else if(document.body.createTextRange){var n=document.body.createTextRange();n.moveToElementText(t),n.select()}}},{}],141:[function(t,e,n){"use strict";function i(){this.types={};var t;for(t in r)r.hasOwnProperty(t)&&(s[t]=t,this.addType(t,r[t].generateLink.bind(r[t])))}var r=t("./NetworkActions"),o=t("./network-actions/DefaultNetworkAction"),s=i.prototype;s.create=function(t,e,n){e=e||{};var i=this.types[t];if(i)return i(e,n)},s.createFromAnchor=function(t){var e,n=t.getAttribute("data-network-action");for(e in r)if(r.hasOwnProperty(e)&&n===r[e].id)return void r[e].enhanceLinkEngagement(t);o.enhanceLinkEngagement(t)},s.addType=function(t,e){return this.types[t]=e,this},s.removeType=function(){return this.types[name]=null,this},e.exports=new i},{"./NetworkActions":142,"./network-actions/DefaultNetworkAction":143}],142:[function(t,e,n){"use strict";var i=t("./network-actions/FacebookShare"),r=t("./network-actions/PinterestShare"),o=t("./network-actions/TumblrShare"),s=t("./network-actions/TwitterFavorite"),a=t("./network-actions/TwitterReply"),u=t("./network-actions/TwitterRetweet"),l=t("./network-actions/TwitterTweet"),c=t("./network-actions/WeiboShare"),h=t("./network-actions/QQWeiboShare"),f=t("./network-actions/QZoneShare"),d=t("./network-actions/RenrenShare"),p=t("./network-actions/EMailShare");e.exports={FACEBOOK_SHARE:i,PINTEREST_SHARE:r,TUMBLR_SHARE:o,TWITTER_FAVORITE:s,TWITTER_REPLY:a,TWITTER_RETWEET:u,TWITTER_TWEET:l,WEIBO_SHARE:c,QQWEIBO_SHARE:h,QZONE_SHARE:f,RENREN_SHARE:d,EMAIL_SHARE:p}},{"./network-actions/EMailShare":144,"./network-actions/FacebookShare":145,"./network-actions/PinterestShare":147,"./network-actions/QQWeiboShare":148,"./network-actions/QZoneShare":149,"./network-actions/RenrenShare":150,"./network-actions/TumblrShare":151,"./network-actions/TwitterFavorite":152,"./network-actions/TwitterReply":153,"./network-actions/TwitterRetweet":154,"./network-actions/TwitterTweet":155,"./network-actions/WeiboShare":156}],143:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){return t};e.exports=new i(r,{baseLinkPath:""})},{"./NetworkAction":146}],144:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){var e={url:t.url};return t.title&&(e.subject=t.title),t.description?e.body=t.description+"\r\n\r\n"+t.url:e.body=t.url,e};e.exports=new i(r,{id:"email-share",baseLinkPath:"mailto:",preventDialog:!0})},{"./NetworkAction":146}],145:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){return{u:t.url}};e.exports=new i(r,{id:"facebook-share",baseLinkPath:"https://www.facebook.com/sharer/sharer.php",dialogDimensions:{width:555,height:368}})},{"./NetworkAction":146}],146:[function(t,e,n){"use strict";var i,r=t("qs"),o=function(t,e){e=e||{},this.baseLinkPath=e.baseLinkPath,e.dialogDimensions&&(this.dialogDimensions=e.dialogDimensions),e.id&&(this.id=e.id),e.preventDialog&&(this.preventDialog=e.preventDialog),this.normalizeData=t};i=o.prototype,i.dataAttributeName="network-action",i.id="network-action",i.normalizeData=function(t){return t},i.dialogDimensions={width:500,height:500},i.generateLinkURL=function(t){var e=this.normalizeData(t),n=r.stringify(e),i=this.baseLinkPath;return n.length>0&&(i=i+"?"+n),i},i.generateLink=function(t,e){var n=this.generateLinkURL(t);return e=e||document.createElement("A"),e.setAttribute("href",n),e.setAttribute("target","_blank"),e.setAttribute("data-"+this.dataAttributeName,this.id),this.enhanceLinkEngagement(e,n),e},i.generateDialog=function(t){var e=this.generateLinkURL(t);this._triggerDialog(e)},i.enhanceLinkEngagement=function(t,e){e=e||t.getAttribute("href"),t.addEventListener("click",this._onLinkEngaged.bind(this,e))},i.getDialogOptions=function(){var t,e="status=1",n={width:this.dialogDimensions.width,height:this.dialogDimensions.height};n.top=(window.screen.availHeight-n.height)/2,n.left=(window.screen.availWidth-n.width)/2;for(t in n)n.hasOwnProperty(t)&&(e+=", "+t+"="+n[t]);return e},i.getDialogDebugData=function(t){return{data:this.normalizeData(t),dialogUrl:this.generateLinkURL(t)}},i._triggerDialog=function(t){return this.preventDialog?void(window.location.href=t):void window.open(t,"_blank",this.getDialogOptions())},i._onLinkEngaged=function(t,e){e.preventDefault(),this._triggerDialog(t)},e.exports=o},{qs:132}],147:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){var e={url:t.url,description:t.description};return t.media&&(e.media=t.media),e};e.exports=new i(r,{id:"pinterest-share",baseLinkPath:"http://www.pinterest.com/pin/create/button",dialogDimensions:{width:750,height:450}})},{"./NetworkAction":146}],148:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){return{url:t.url,title:t.title,pic:t.media}};e.exports=new i(r,{id:"qq-weibo-share",baseLinkPath:"http://v.t.qq.com/share/share.php",dialogDimensions:{width:658,height:506}})},{"./NetworkAction":146}],149:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){return{url:t.url,title:t.title,pics:t.media,summary:t.description}};e.exports=new i(r,{id:"qzone-share",baseLinkPath:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey",dialogDimensions:{width:620,height:645}})},{"./NetworkAction":146}],150:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){return{url:t.url,title:t.title}};e.exports=new i(r,{id:"renren-share",baseLinkPath:"http://www.connect.renren.com/share/sharer",dialogDimensions:{width:500,height:315}})},{"./NetworkAction":146}],151:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){var e={clickthru:t.url,caption:t.description};return t.media&&(e.source=t.media),e};e.exports=new i(r,{id:"tumblr-share",baseLinkPath:"http://www.tumblr.com/share/photo",dialogDimensions:{width:450,height:432}})},{"./NetworkAction":146}],152:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){var e={tweet_id:t.messageId};return e};e.exports=new i(r,{id:"twitter-favorite",baseLinkPath:"https://twitter.com/intent/favorite",dialogDimensions:{width:550,height:420}})},{"./NetworkAction":146}],153:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){var e={in_reply_to:t.messageId};return t.hashtags&&(e.hashtags=t.hashtags),e};e.exports=new i(r,{id:"twitter-reply",baseLinkPath:"https://twitter.com/intent/tweet",dialogDimensions:{width:550,height:420}})},{"./NetworkAction":146}],154:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){var e={tweet_id:t.messageId};return e};e.exports=new i(r,{id:"twitter-retweet",baseLinkPath:"https://twitter.com/intent/retweet",dialogDimensions:{width:550,height:420}})},{"./NetworkAction":146}],155:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){var e={url:t.url,text:t.description};return t.hashtags&&(e.hashtags=t.hashtags),e};e.exports=new i(r,{id:"twitter-tweet",baseLinkPath:"https://twitter.com/intent/tweet",dialogDimensions:{width:550,height:420}})},{"./NetworkAction":146}],156:[function(t,e,n){"use strict";var i=t("./NetworkAction"),r=function(t){return{url:t.url,title:t.title,pic:t.media}};e.exports=new i(r,{id:"weibo-share",baseLinkPath:"http://service.weibo.com/share/share.php",dialogDimensions:{width:650,height:426}})},{"./NetworkAction":146}],157:[function(t,e,n){"use strict";e.exports=function(t,e,n){return e?(n=n||/{([^{}]*)}/g,t.replace(n,function(t,n){var i=e[n];return"string"==typeof i||"number"==typeof i||"boolean"==typeof i?i:t})):t}},{}],158:[function(t,e,n){"use strict";e.exports=function(t,e){var n="&",i="";if(t){var r=Object.keys(t),o=r.length-1;r.forEach(function(e,r){var s=t[e];e=e.trim(),s=s&&"string"==typeof s?s.trim():s,s=null===s?"":"="+s;var a=e+s+(r===o?"":n);i=i?i.concat(a):a})}return i&&e!==!1?"?"+i:i}},{}],159:[function(t,e,n){"use strict";var i={ua:window.navigator.userAgent,platform:window.navigator.platform,vendor:window.navigator.vendor};e.exports=t("./parseUserAgent")(i)},{"./parseUserAgent":162}],160:[function(t,e,n){"use strict";e.exports={browser:{safari:!1,chrome:!1,firefox:!1,ie:!1,opera:!1,android:!1,edge:!1,version:{name:"",major:0,minor:0,patch:0,documentMode:!1}},os:{osx:!1,ios:!1,android:!1,windows:!1,linux:!1,fireos:!1,chromeos:!1,version:{name:"",major:0,minor:0,patch:0}}}},{}],161:[function(t,e,n){"use strict";e.exports={browser:[{name:"edge",userAgent:"Edge",version:["rv","Edge"],test:function(t){return t.ua.indexOf("Edge")>-1||"Mozilla/5.0 (Windows NT 10.0; Win64; x64)"===t.ua}},{name:"chrome",userAgent:"Chrome"},{name:"firefox",test:function(t){return t.ua.indexOf("Firefox")>-1&&t.ua.indexOf("Opera")===-1},version:"Firefox"},{name:"android",userAgent:"Android"},{name:"safari",test:function(t){return t.ua.indexOf("Safari")>-1&&t.vendor.indexOf("Apple")>-1},version:"Version"},{name:"ie",test:function(t){return t.ua.indexOf("IE")>-1||t.ua.indexOf("Trident")>-1},version:["MSIE","rv"],parseDocumentMode:function(){var t=!1;return document.documentMode&&(t=parseInt(document.documentMode,10)),t}},{name:"opera",userAgent:"Opera",version:["Version","Opera"]}],os:[{name:"windows",test:function(t){return t.platform.indexOf("Win")>-1},version:"Windows NT"},{name:"osx",userAgent:"Mac",test:function(t){return t.platform.indexOf("Mac")>-1}},{name:"ios",test:function(t){return t.ua.indexOf("iPhone")>-1||t.ua.indexOf("iPad")>-1},version:["iPhone OS","CPU OS"]},{name:"linux",userAgent:"Linux",test:function(t){return t.platform.indexOf("Linux")>-1&&t.ua.indexOf("Android")===-1}},{name:"fireos",test:function(t){return t.ua.indexOf("Firefox")>-1&&t.ua.indexOf("Mobile")>-1},version:"rv"},{name:"android",userAgent:"Android"},{name:"chromeos",userAgent:"CrOS"}]}},{}],162:[function(t,e,n){"use strict";function i(t){return new RegExp(t+"[a-zA-Z\\s/:]+([0-9_.]+)","i")}function r(t,e){if("function"==typeof t.parseVersion)return t.parseVersion(e);var n=t.version||t.userAgent;"string"==typeof n&&(n=[n]);for(var r,o=n.length,s=0;s<o;s++)if(r=e.match(i(n[s])),r&&r.length>1)return r[1].replace(/_/g,".")}function o(t,e,n){for(var i,o,s=t.length,a=0;a<s;a++)if("function"==typeof t[a].test?t[a].test(n)===!0&&(i=t[a].name):n.ua.indexOf(t[a].userAgent)>-1&&(i=t[a].name),i){if(e[i]=!0,o=r(t[a],n.ua),"string"==typeof o){var u=o.split(".");e.version.name=o,u&&u.length>0&&(e.version.major=parseInt(u[0]||0),e.version.minor=parseInt(u[1]||0),e.version.patch=parseInt(u[2]||0))}else"edge"===i&&(e.version.name="12.0.0",e.version.major="12",e.version.minor="0",e.version.patch="0");return"function"==typeof t[a].parseDocumentMode&&(e.version.documentMode=t[a].parseDocumentMode()),e}return e}function s(t){var e={};return e.browser=o(u.browser,a.browser,t),e.os=o(u.os,a.os,t),e}var a=t("./defaults"),u=t("./dictionary");e.exports=s},{"./defaults":160,"./dictionary":161}],163:[function(t,e,n){e.exports={major:4,minor:0,patch:0,prerelease:0,toString:function(){return"4.0.0-0 (7596393)"},toArray:function(){return[4,0,0]}}},{}],164:[function(t,e,n){arguments[4][102][0].apply(n,arguments)},{"@marcom/ac-event-emitter-micro":66,"@marcom/ac-raf-emitter-id-generator/sharedRAFEmitterIDGeneratorInstance":113,"@marcom/ac-raf-executor/sharedRAFExecutorInstance":127,dup:102}],165:[function(t,e,n){arguments[4][103][0].apply(n,arguments)},{"./SingleCallRAFEmitter":167,dup:103}],166:[function(t,e,n){arguments[4][104][0].apply(n,arguments)},{"./RAFInterface":165,dup:104}],167:[function(t,e,n){arguments[4][105][0].apply(n,arguments)},{"./RAFEmitter":164,dup:105}],168:[function(t,e,n){"use strict";var i=t("./RAFInterfaceController");e.exports=i.cancelAnimationFrame("draw")},{"./RAFInterfaceController":166}],169:[function(t,e,n){"use strict";var i=t("./RAFInterfaceController");e.exports=i.cancelAnimationFrame("update")},{"./RAFInterfaceController":166}],170:[function(t,e,n){arguments[4][106][0].apply(n,arguments)},{"./RAFInterfaceController":166,dup:106}],171:[function(t,e,n){arguments[4][107][0].apply(n,arguments)},{"./RAFInterfaceController":166,dup:107}],172:[function(t,e,n){"use strict";var i=t("./player/Player");i.create=t("./player/factory/createPlayer"),e.exports={Player:i,VERSION:t("./utils/getVersion")}},{"./player/Player":176,"./player/factory/createPlayer":180,"./utils/getVersion":237}],173:[function(t,e,n){"use strict";var i=function(t){this._listeners={},this.el=t},r=i.prototype;r.on=function(t,e){this._listeners[t]||(this._listeners[t]=[]);var n={originalCb:e,args:[t,function(t){e(t)}].concat(Array.from(arguments).slice(2))};this._listeners[t].push(n),this.el.addEventListener.apply(this.el,n.args)},r.off=function(t,e){var n=this._listeners[t],i=-1,r=n.find(function(t){return i++,t.originalCb===e});if(r){var o=n[i];this.el.removeEventListener.apply(this.el,o.args),n.splice(i,1)}},r.replaceElement=function(t){var e=this,n=Object.keys(this._listeners);n.forEach(function(n){var i=e._listeners[n];i.forEach(function(n){e.el.removeEventListener.apply(e.el,n.args),t.addEventListener.apply(t,n.args)})}),this.el=t},r.once=function(t,e){var n=function(){e(),this.off(t,n)}.bind(this);this.on(t,n)},r.trigger=function(t,e){var n=new CustomEvent(t,{detail:e});this.el.dispatchEvent(n)},e.exports=i},{}],174:[function(t,e,n){"use strict";var i=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,r=function(){i.call(this)},o=i.prototype;r.prototype=Object.create(o);var s=r.prototype;s.constructor=r,s.once=function(t,e,n){if(n){var i=function(){e.apply(n,arguments)};o.once.apply(this,[t,i])}else o.once.apply(this,arguments)},s.on=function(t,e,n){if(arguments.length>2){this._boundListeners||(this._boundListeners={}),this._boundListeners[t]||(this._boundListeners[t]=[]);var i=e.bind(n);return this._boundListeners[t].push([e,n,i]),o.on.call(this,t,i)}return o.on.apply(this,arguments)},s.off=function(t,e,n){if(arguments.length>2)try{for(var i=this._boundListeners[t],r=0,s=i.length;r<s;r++)if(i[r][0]===e&&i[r][1]===n){var a=i.splice(r,1)[0];return o.off.call(this,t,a[2])}}catch(u){}return o.off.apply(this,arguments)},s.destroy=function(){this._boundListeners=void 0,o.destroy.call(this)},e.exports=r},{"@marcom/ac-event-emitter-micro":66}],175:[function(t,e,n){"use strict";e.exports=t("./utils/urlOptimizer/OptimizeVideoUrl")},{"./utils/urlOptimizer/OptimizeVideoUrl":243}],176:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":i(t)},o=t("../event-emitter-shim/EventEmitterShim"),s=t("../dom-emitter/DOMEmitterMicro"),a=t("../video/VideoFactory").create,u=t("@marcom/useragent-detect"),l=t("@marcom/ac-fullscreen"),c=t("../posterframe/PosterFrameFactory"),h=t("../ui/localization/Localization"),f=t("../ui/error/ErrorView"),d=t("@marcom/ac-raf-emitter/update"),p=t("@marcom/ac-raf-emitter/cancelUpdate"),m=t("@marcom/ac-feature/isRetina")(),y=t("@marcom/ac-feature/isDesktop")()&&!t("@marcom/ac-feature/touchAvailable")(),_=t("@marcom/ac-feature/isHandheld")(),v=u.browser.safari&&u.os.osx,g=u.browser.safari&&u.os.ios,b=u.browser.chrome,w="user-hover",x="mouse-leave",E="mobile",k="initial-play",S="ac-video-live",C="longform",T=t("../ui/DefaultBreakpoints"),A=t("@marcom/ac-console/log"),M=t("./event/EventsToForward"),P=t("./event/ReadyStateChangeEvents"),O=t("../utils/BreakpointDetect"),I=t("../ui/keyboard-control/createKeyboardControl"),D=t("../ui/controls-interaction/createControlsInteraction"),L=t("@marcom/ac-accessibility/helpers/hide"),R=t("@marcom/ac-accessibility/helpers/show"),F=t("../utils/getVersion"),N=function(t){t=t||{},this.el=t.el||document.createElement("div"),this._elementEmitter=new s(this.el),this.VERSION=F,this.options=t,o.call(this),this._controlsFactory=t.controlsFactory,this._urlOptimizer=t.urlOptimizer;try{var e=window.top;this._maxWidth=t.maxWidth||Math.min(window.innerWidth,1280)||Math.min(e.innerWidth,1280)}catch(n){this._maxWidth=t.maxWidth||Math.min(window.innerWidth,1280)}this._lastResize=0,this._lastMouseCoords={},this.el.classList.add("ac-video-player"),this.el.classList.add("idle-state"),this._isLive=t.live,this._isLive&&this._useLiveMode(),this._videoImpl=a(t,this.el),this._isResponsive=t.responsive,this._isResponsive&&(this._breakpointDetect=new O({el:this.el,player:this,breakpoints:T,addClass:!0})),this._isLive&&this._useLiveMode(),this._videoImpl=a(t,this.el),this._supportsInlineVideo=y||!(_&&g),this._cachedPiPMode=this.isPictureInPicture(),this._cachedReadyState=this.getReadyState(),this._cachedVisibleTracksLength=0,this.el.appendChild(this._videoImpl.getRenderElement()),(t.poster||"undefined"==typeof t.poster)&&this._initPoster(t.poster),this._bindMethods(),this._addEventListeners(),y&&(this._keyboardControl=I({player:this,threesixty:t.threesixty,keyboardTarget:t.keyboardTarget})),t.controls&&this._initUIComponents(),this._initErrorView(),t.parentElement&&t.parentElement.appendChild(this.el),this.refreshSize=this.refreshSize.bind(this),this._refreshSizeTimeout=setTimeout(this.refreshSize,0),window.addEventListener("DOMContentLoaded",this.refreshSize)};N.LOADEDMETADATA=1,N.LOADEDDATA=2,N.CANPLAY=3,N.CANPLAYTHROUGH=4;var U=o.prototype;N.prototype=Object.create(U);var V=N.prototype;V.constructor=N,V._bindMethods=function(){this._onStart=this._onStart.bind(this),this._onEnded=this._onEnded.bind(this),this._onTimeUpdate=this._onTimeUpdate.bind(this),this._onCaptionsChanged=this._onCaptionsChanged.bind(this),this._onPlay=this._onPlay.bind(this),this._onFullscreenChange=this._onFullscreenChange.bind(this),this._onError=this._onError.bind(this),this._forwardEvent=this._forwardEvent.bind(this),this._onPresentationModeChanged=this._onPresentationModeChanged.bind(this),this._forwardFullScreenChangeEvent=this._forwardNamedEvent.bind(this,"fullscreen:change"),this._forwardEnterFullScreenEvent=this._forwardNamedEvent.bind(this,"enterfullscreen"),this._forwardExitFullScreenEvent=this._forwardNamedEvent.bind(this,"exitfullscreen"),this._onDurationChange=this._onDurationChange.bind(this),this._forwardReadyStateChange=this._forwardReadyStateChange.bind(this),this._showControls=this._showControls.bind(this),this._hideControls=this._hideControls.bind(this),this._raiseControls=this._raiseControls.bind(this),this._lowerControls=this._lowerControls.bind(this),this._onPlayPromiseError=this._onPlayPromiseError.bind(this),this._onPlayPromiseResolved=this._onPlayPromiseResolved.bind(this),this.refreshSize=this.refreshSize.bind(this)},V._addEventListeners=function(){for(var t=0,e=M.length;t<e;t++)this._videoImpl.on(M[t],this._forwardEvent);for(t=0,e=P.length;t<e;t++)this._videoImpl.on(P[t],this._forwardReadyStateChange);this._videoImpl.on("timeupdate",this._onTimeUpdate),this._videoImpl.on("webkitpresentationmodechanged",this._onPresentationModeChanged),this._videoImpl.on("durationchange",this._onDurationChange),this._videoImpl.on("addtrack",this._forwardEvent),this._videoImpl.on("change",this._forwardEvent),this._videoImpl.on("change",this._onCaptionsChanged),this._videoImpl.on("removetrack",this._forwardEvent),this._videoImpl.on("loadedmetadata",this.refreshSize),this._videoImpl.on("loadeddata",this.refreshSize),y?(l.on("enterfullscreen",this._forwardEnterFullScreenEvent),l.on("exitfullscreen",this._forwardExitFullScreenEvent),l.on("enterfullscreen",this._forwardFullScreenChangeEvent),l.on("exitfullscreen",this._forwardFullScreenChangeEvent),this.on("fullscreen:change",this._onFullscreenChange)):g&&(this._videoImpl.on("webkitbeginfullscreen",this._forwardEnterFullScreenEvent),this._videoImpl.on("webkitendfullscreen",this._forwardExitFullScreenEvent),this._videoImpl.on("webkitbeginfullscreen",this._forwardFullScreenChangeEvent),this._videoImpl.on("webkitendfullscreen",this._forwardFullScreenChangeEvent),_&&this.on("fullscreen:change",this._onFullscreenChange)),this._videoImpl.on("PlayPromiseError",this._onPlayPromiseError),this._videoImpl.on("PlayPromiseResolved",this._onPlayPromiseResolved),this._videoImpl.on("error",this._onError)},V._onPlayPromiseResolved=function(){this.trigger("PlayPromiseResolved")},V._removeEventListeners=function(){for(var t=0,e=M.length;t<e;t++)this._videoImpl.off(M[t],this._forwardEvent);for(t=0,e=P.length;t<e;t++)this._videoImpl.off(P[t],this._forwardReadyStateChange);this._videoImpl.off("timeupdate",this._onTimeUpdate),this._videoImpl.off("webkitpresentationmodechanged",this._onPresentationModeChanged),this._videoImpl.off("durationchange",this._onDurationChange),y?(l.off("enterfullscreen",this._forwardEnterFullScreenEvent),l.off("exitfullscreen",this._forwardExitFullScreenEvent),l.off("enterfullscreen",this._forwardFullScreenChangeEvent),l.off("exitfullscreen",this._forwardFullScreenChangeEvent)):u.os.ios&&(this._videoImpl.off("webkitbeginfullscreen",this._forwardEnterFullScreenEvent),this._videoImpl.off("webkitendfullscreen",this._forwardExitFullScreenEvent),this._videoImpl.off("webkitbeginfullscreen",this._forwardFullScreenChangeEvent),this._videoImpl.off("webkitendfullscreen",this._forwardFullScreenChangeEvent)),this._videoImpl.off("PlayPromiseError",this._onPlayPromiseError)},V._forwardReadyStateChange=function(){var t=this.getReadyState();(t>this._cachedReadyState||0===t)&&(this._cachedReadyState=t,this.trigger("readystatechange",{readyState:t}))},V._forwardEvent=function(t){A(t.type+" time:"+this.getCurrentTime()),this.trigger(t.type)},V._forwardNamedEvent=function(t){A(t+" time:"+this.getCurrentTime()),this.trigger(t)},V._onPlayPromiseError=function(){A("play() Promise rejected, probably because the browser is blocking autoplay"),this.el.classList.add(k),this._showStartState(),this.once("play",this._onPlay)},V._onCaptionsChanged=function(t){var e=this.getVisibleTextTracks().length;e>0&&0===this._cachedVisibleTracksLength?this.trigger("texttrackshow"):0===e&&this._cachedVisibleTracksLength>0&&this.trigger("texttrackhide"),this._cachedVisibleTracksLength=e},V._onTimeUpdate=function(){this.trigger("timeupdate",{currentTime:this.getCurrentTime()})},V.load=function(t,e,n,i){if(this._setError(!1),this.refreshSize(),Array.isArray(t)||(t=[t]),e&&!Array.isArray(e)&&(e=[{src:e}]),this._cachedReadyState=0,i||(i=this.options),this._urlOptimizer){e||(e=t.map(this._urlOptimizer.getCaptionsSource).filter(function(t){return!!t}));var r=this.getVisibleTextTracks();r&&r.length&&e&&e.length&&(e[0].mode="showing");var o=i.maxWidth||this._calcMaxWidth();t=t.map(function(t){return this._urlOptimizer.getVideoSource(t,o,null,{maxWidth:this._maxWidth})}.bind(this))}var s=i&&i.thumbnails||this._urlOptimizer&&this._urlOptimizer.getThumbnailImageSource(t[0]);this.once("play",this._onPlay),this._poster&&this._poster.show(),(this.options.autoplay&&y||this.getEnded())&&this.once("loadstart",function(){this.play()}.bind(this)),i||(i=this.options),i&&this.setPoster(i.poster),this._poster&&this._poster.show(),this.controls&&this.controls.sharingModule&&(i.sharing?this.controls.sharingModule.setData(i.sharing):this.controls.sharingModule.setData(null)),void 0!==i.live&&(this._isLive=i.live,this._useLiveMode()),this._hideEndState(),this._videoImpl.load(t,e,n),this.controls&&this.controls.overlays?this.controls.overlays.setData(s):this.controls&&this.once("controlsready",function(){this.controls.overlays&&this.controls.overlays.setData(s)}.bind(this)),this.controls&&this.controls.endState?this.controls.endState.setData(i.endState):this.controls&&this.once("controlsready",function(){this.controls.endState&&this.controls.endState.setData(i.endState)}.bind(this))},V._calcMaxWidth=function(){return this.el.parentElement?this.el.parentElement.clientWidth:this._maxWidth},V._isActiveArea=function(t){for(;t!==this.el;){if(t.hasAttribute("data-acv-active-area"))return!0;t=t.parentNode}return!1},V._onPresentationModeChanged=function(t){this._forwardEvent(t);var e=this.isPictureInPicture();this._cachedPiPMode!==e&&(this._cachedPiPMode=e,A("pictureinpicture:change to "+e),this.trigger("pictureinpicture:change"))},V._onDurationChange=function(t){this.getDuration()>3600&&this.el.classList.add(C),this.refreshSize()},V.appendTo=function(t){t.appendChild(this.el),this.refreshSize()},V.getTextTracks=function(){return Array.prototype.slice.call(this._videoImpl.getTextTracks())},V.getVisibleTextTracks=function(){var t=Array.prototype.slice.call(this._videoImpl.getTextTracks());return t&&t.length&&(t=t.filter(function(t){return"showing"===t.mode})),t},V.getFullScreenElement=function(){return y?this.el:this.getMediaElement()},V.getFullScreenEnabled=function(){return l.fullscreenEnabled(this.getFullScreenElement())},V.isFullscreen=function(){return y?l.fullscreenElement()===this.getFullScreenElement():this._videoImpl.isFullscreen()},V.requestFullscreen=function(){if(!this.isFullscreen()){this.controls&&(this.controls.el.display="none",this._hideControls()),this.trigger("fullscreen:willenter",{type:"enter"}),this._lastResize=Date.now(),p(this._updateFullscreenId);var t=this,e=function n(){t.refreshSize(),t._updateFullscreenId=d(n)};this._updateFullscreenId=d(e),b?setTimeout(function(){this._lastResize=Date.now(),l.requestFullscreen(this.getFullScreenElement())}.bind(this),300):l.requestFullscreen(this.getFullScreenElement())}},V.exitFullscreen=function(){this.isFullscreen()&&(this.controls&&(this.controls.el.display="none",this._hideControls()),this.trigger("fullscreen:willexit",{type:"exit"}),b?setTimeout(function(){l.exitFullscreen(this.getFullScreenElement())}.bind(this),300):l.exitFullscreen(this.getFullScreenElement()))},V._onFullscreenChange=function(){this._lastResize=Date.now(),this.controls&&(this.controls.el.display="",this._hideControls()),this._preventUserInteraction=!0,setTimeout(function(){p(this._updateFullscreenId),this._preventUserInteraction=!1,this.refreshSize()}.bind(this),750),this.refreshSize()},V.toggleFullscreen=function(){this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()},V._initUIComponents=function(){this._controlsFactory?(this._instantiateDefaultCustomUIControls(),y?this.el.appendChild(this._blockade.el):(this.controls.el.classList.add(E),this.setControls(!0))):this.setControls(!0)},V._showControls=function(){this._controlsVisible=!0,this.el.classList.remove(k),this.el.classList.add(w)},V._hideControls=function(){this._controlsVisible=!1,this.el.classList.remove(w),this.hideCaptionsSelector()},V._raiseControls=function(){this._controlsVisible=!0,this.el.classList.remove(x)},V._lowerControls=function(){this._controlsVisible=!1,this.el.classList.add(x),this.hideCaptionsSelector();
},V._onControlsReady=function(){this.options.autoplay&&y||this._showStartState()},V._showStartState=function(){this.controls&&this.controls.el.classList.add("start-state"),this._poster&&this._poster.show(),y||L(this.getMediaElement())},V._hideStartState=function(){this.controls&&this.controls.el.classList.remove("start-state"),this._poster&&this._poster.hide(),y||R(this.getMediaElement())},V._showEndState=function(){this.controls&&(this.controls.mainControlsElement?this.controls.mainControlsElement.contains(document.activeElement)&&setTimeout(function(){this.controls.playButtonElement.focus()}.bind(this)):this.el.contains(document.activeElement)&&!this.controls.sharingModule.el.contains(document.activeElement)&&setTimeout(function(){this.controls.playButtonElement.focus()}.bind(this)),this.controls.el.classList.add("end-state")),this._poster&&this._poster.show(),L(this.getMediaElement())},V._hideEndState=function(){this.controls&&this.controls.el.classList.remove("end-state"),y||R(this.getMediaElement())},V._createBlockade=function(){this._blockade=new s(document.createElement("div")),this._blockade.el.classList.add("ac-video-blockade")},V._instantiateDefaultCustomUIControls=function(){return this.controls=this._controlsFactory.create({player:this,endState:this.options.endState,enableMainControls:y,basePath:this.options.localizationBasePath,template:this.options.template,readyCallback:function(){this._onControlsReady(),this.trigger("controlsready")}.bind(this)}),this.controls.el.parentNode!==this.el&&this.el.appendChild(this.controls.el),this._videoImpl.setControls(!1),this._createBlockade(),this._controlsInteraction=D({player:this,keyboardControl:this._keyboardControl,controlsTimeoutDuration:this.options.controlsTimeoutDuration,showControls:this._showControls,hideControls:this._hideControls,raiseControls:this._raiseControls,lowerControls:this._lowerControls,controlsVisible:function(){return this._controlsVisible}.bind(this),sendMouseDown:this._videoImpl.sendMouseDown,elementEmitter:this._elementEmitter}),this.controls},V._onPlay=function(){this.el.classList.remove("idle-state"),v?this.once("timeupdate",this._onStart,function(){return this.getCurrentTime()>0}.bind(this)):this.once("timeupdate",this._onStart)},V.isCaptionsSelectorShowing=function(){return this.controls.el.classList.contains("captions-selector-showing")},V.showCaptionsSelector=function(){this.controls.el.classList.add("captions-selector-showing")},V.hideCaptionsSelector=function(){this.controls.el.classList.remove("captions-selector-showing")},V._onStart=function(){this.el.classList.add(k),this._poster&&this._poster.hide(),this.controls&&(this._hideStartState(),this._hideEndState()),this.once("ended",this._onEnded)},V._onEnded=function(){this.isFullscreen()&&this.exitFullscreen(),this.controls&&(this._hideStartState(),this._showEndState()),setTimeout(function(){this.once("timeupdate",function(){this.getEnded()?this._onEnded():this._onStart()}.bind(this))}.bind(this),300),this._poster&&this._poster.show()},V._initPoster=function(t){this._poster=c({player:this,video:this._videoImpl,useNativePoster:this.options.controls===!1,is2x:m,src:t}),this._poster.el&&this.el.appendChild(this._poster.el),this.options.autoplay||this._poster.show()},V._initErrorView=function(){this._errorView=new f,this.el.appendChild(this._errorView.el)},V._useLiveMode=function(){this._isLive?this.el.classList.add(S):this.el.classList.remove(S)},V.once=function(t,e,n){if(arguments.length<3||"object"===("undefined"==typeof n?"undefined":r(n)))U.once.apply(this,arguments);else{var i=arguments,o=Array.prototype.slice.call(arguments,2),s=function(){o.every(function(t){return!!t()})&&(i[1].apply(this,i),this.off(i[0],s))}.bind(this);this.on(i[0],s)}},V.getMediaElement=function(){return this._videoImpl.getMediaElement()},V.play=function(){var t=this;this.el.classList.remove("idle-state"),A("play called"),this._videoImpl.getError()?setTimeout(function(){t._errorView.focus()},1e3):this._videoImpl.play()},V.pause=function(){this._videoImpl.pause()},V.seek=function(t){this.setCurrentTime.apply(this,arguments)},V.addTextTrack=function(t){this._videoImpl.addTextTrack(t)},V.getReadyState=function(){return this._videoImpl.getMediaElement().readyState},V.getPreload=function(){return this._videoImpl.getPreload()},V.setPoster=function(t){this._poster.setSrc(t)},V.getPoster=function(){this._poster.getSrc()},V.getVolume=function(){return this._videoImpl.getVolume()},V.getMuted=function(){return this._videoImpl.getMuted()},V.getCurrentTime=function(){return this._videoImpl.getCurrentTime()},V.getDuration=function(){return this._videoImpl.getDuration()},V.getPaused=function(){return this._videoImpl.getPaused()},V.getEnded=function(){return this._videoImpl.getEnded()},V.setCurrentTime=function(t){return this._videoImpl.setCurrentTime(t)},V.setVolume=function(t){return this.trigger("uservolumechange"),this._videoImpl.setVolume(t)},V.setMuted=function(t){this.trigger("uservolumechange"),this._videoImpl.setMuted(t)},V.setSrc=function(t){this._videoImpl.setSrc(t)},V.getCurrentSrc=function(){return this._videoImpl.getCurrentSrc()},V.setControls=function(t){return this._videoImpl.setControls(t)},V.getMediaHeight=function(){return this._videoImpl.getMediaElement().videoHeight},V.getMediaWidth=function(){return this._videoImpl.getMediaElement().videoWidth},V.supportsPictureInPicture=function(){return this._videoImpl.supportsPictureInPicture()},V.isPictureInPicture=function(){return this._videoImpl.isPictureInPicture()},V.setPictureInPicture=function(t){return this._videoImpl.setPictureInPicture(t)},V.supportsAirPlay=function(){return this._videoImpl.supportsAirPlay()},V.isLive=function(){return this._isLive},V.refreshSize=function(){this._breakpointDetect?this._breakpointDetect.refresh():(this._currentBreakpoint&&this.el.classList.remove(this._currentBreakpoint.name),this._currentBreakpoint=O.getBreakpointFromElement(this.el,T),this.el.classList.add(this._currentBreakpoint.name)),this._videoImpl.refreshSize()},V._setError=function(t){t?this.el.classList.add("media-error"):this.el.classList.remove("media-error")},V._onError=function(t){if(this._setError(!0),this.controls){var e;if(t.message)e=t.message;else{if(!h.translationReady())return void h.getTranslation({callback:this._onError.bind(this,t)});e=h.getTranslation().error}this._poster.show(),this._errorView.setText(e)}},V.destroy=function(){this._removeEventListeners(),this.controls&&(this.controls.destroy(),this.controls=null),this.el.innerHTML="",this._breakpointDetect&&this._breakpointDetect.destroy(),this._videoImpl.destroy(),this._videoImpl=null,clearTimeout(this._refreshSizeTimeout),o.prototype.destroy.call(this)},e.exports=N},{"../dom-emitter/DOMEmitterMicro":173,"../event-emitter-shim/EventEmitterShim":174,"../posterframe/PosterFrameFactory":182,"../ui/DefaultBreakpoints":191,"../ui/controls-interaction/createControlsInteraction":210,"../ui/error/ErrorView":221,"../ui/keyboard-control/createKeyboardControl":227,"../ui/localization/Localization":229,"../utils/BreakpointDetect":235,"../utils/getVersion":237,"../video/VideoFactory":247,"./event/EventsToForward":178,"./event/ReadyStateChangeEvents":179,"@marcom/ac-accessibility/helpers/hide":14,"@marcom/ac-accessibility/helpers/show":17,"@marcom/ac-console/log":31,"@marcom/ac-feature/isDesktop":69,"@marcom/ac-feature/isHandheld":70,"@marcom/ac-feature/isRetina":71,"@marcom/ac-feature/touchAvailable":73,"@marcom/ac-fullscreen":75,"@marcom/ac-raf-emitter/cancelUpdate":169,"@marcom/ac-raf-emitter/update":171,"@marcom/useragent-detect":284}],177:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function m(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:m(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},l=t("./Player"),c=t("../ui/controls-interaction/createControlsInteraction"),h=t("@marcom/useragent-detect").os,f=h.ios||h.android||!t("@marcom/ac-feature/isDesktop")(),d="threesixty-ui",p=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return t.threesixty&&n.el.classList.add("threesixty-video"),n}return o(e,t),a(e,[{key:"_bindMethods",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_bindMethods",this).call(this),this._showCompass=this._showCompass.bind(this),this._hideCompass=this._hideCompass.bind(this),this.panToOrigin=this.panToOrigin.bind(this)}},{key:"_addEventListeners",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_addEventListeners",this).call(this)}},{key:"_removeEventListeners",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_removeEventListeners",this).call(this),this.controls.compass.removeEventListener("click",this.panToOrigin)}},{key:"_showCompass",value:function(){this.el.classList.add(d)}},{key:"_hideCompass",value:function(){this.el.classList.remove(d)}},{key:"_instantiateDefaultCustomUIControls",value:function(){return this.controls=this._controlsFactory.create({player:this,endState:this.options.endState,threesixty:!0,enableMainControls:!0,basePath:this.options.localizationBasePath,template:this.options.template,readyCallback:function(){this.options.autoplay&&!f||this._showStartState(),this.trigger("controlsready")}.bind(this)}),this.controls.el.parentNode!==this.el&&this.el.appendChild(this.controls.el),this._videoImpl.setControls(!1),this._createBlockade(),this._controlsInteraction=c({player:this,keyboardControl:this._keyboardControl,threesixty:!0,controlsTimeoutDuration:this.options.controlsTimeoutDuration,threesixtyElementsTimeoutDuration:this.options.threesixtyElementsTimeoutDuration,showControls:this._showControls,hideControls:this._hideControls,raiseControls:this._raiseControls,lowerControls:this._lowerControls,showCompass:this._showCompass,hideCompass:this._hideCompass,controlsVisible:function(){return this._controlsVisible}.bind(this),sendMouseDown:this._videoImpl.sendMouseDown,elementEmitter:this._elementEmitter}),this.controls}},{key:"panToOrigin",value:function(){this.get360().panToPosition({lat:0,lon:0})}},{key:"get360",value:function(){return this._videoImpl.get360()}},{key:"getFullScreenElement",value:function(){return this.el}},{key:"getFullScreenEnabled",value:function(){return!f&&u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getFullScreenEnabled",this).call(this)}}]),e}(l);e.exports=p},{"../ui/controls-interaction/createControlsInteraction":210,"./Player":176,"@marcom/ac-feature/isDesktop":69,"@marcom/useragent-detect":284}],178:[function(t,e,n){"use strict";e.exports=["loadstart","progress","suspend","abort","error","emptied","stalled","play","pause","loadedmetadata","loadeddata","waiting","playing","canplay","canplaythrough","seeking","seeked","ended","ratechange","durationchange","volumechange","addtrack","change","removetrack"]},{}],179:[function(t,e,n){"use strict";e.exports=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","waiting","canplay","canplaythrough"]},{}],180:[function(t,e,n){"use strict";var i=t("@marcom/ac-feature/isDesktop")();e.exports=function(e){e?arguments.length>1&&(e=Object.assign.apply(null,Array.prototype.slice.apply(arguments))):e={},e.components||(e.components=t("../../ui/DefaultComponents")),"undefined"==typeof e.controls&&(e.controls=!0),e.controlsImplementation||(e.controlsImplementation=t("../../ui/ControlBar")),e.controlsFactory||(e.controlsFactory=t("../../ui/ControlsFactory")({controlsImplementation:e.controlsImplementation,components:e.components,template:e.controlsTemplate})),("undefined"!=typeof e.urlOptimizer&&e.urlOptimizer===!0||"true"===e.urlOptimizer)&&(e.urlOptimizer=t("../../optimizeVideoUrl")),e.sources||e.src?e.sources||(e.sources=e.src?[e.src]:[]):e.sources=[],e.autoplay=void 0!==e.autoplay?e.autoplay:i,e.controlsTimeoutDuration||(e.controlsTimeoutDuration=3e3);var n;if(e.threesixty){e.threesixtyElementsTimeoutDuration||(e.threesixtyElementsTimeoutDuration=3e3);var r=t("../ThreeSixtyPlayer");n=new r(e)}else{var o=t("../Player");n=new o(e)}var s={};return e.sharing&&(s.sharing=Object.assign({},e.sharing)),e.thumbnails&&(s.thumbnails=Object.assign({},e.thumbnails)),e.endState&&(s.endState=Object.assign({},e.endState)),e.sources&&e.sources.length&&n.load(e.sources,e.textTracks,e.startTime,s),n}},{"../../optimizeVideoUrl":175,"../../ui/ControlBar":189,"../../ui/ControlsFactory":190,"../../ui/DefaultComponents":192,"../Player":176,"../ThreeSixtyPlayer":177,"@marcom/ac-feature/isDesktop":69}],181:[function(t,e,n){"use strict";var i="ac-video-poster",r="ac-video-poster-hide",o=function(t){this._defaultSrc=t.src,this._initialize(t)},s=o.prototype;s._initialize=function(t){var e=t.src;this.el=t.el||document.createElement("div"),this._imgElement=document.createElement("img"),this._imgElement.src=e,this._currentSrc=e,this._imgElement.alt="",this._imgElement.addEventListener("load",this._onLoad.bind(this)),this.el.appendChild(this._imgElement),this.hide(),this.el.classList.add(i)},s.hide=function(){this.el.classList.add(r)},s.show=function(){this.el.classList.remove(r)},s.setSrc=function(t){var e=t||this._defaultSrc;e!==this._currentSrc&&(this._imgElement.style.display="none",this._imgElement.src=e,this._currentSrc=e)},s._onLoad=function(){this._imgElement.style.display=""},s.getSrc=function(){return this._imgElement.src},e.exports=o},{}],182:[function(t,e,n){"use strict";var i=t("./PosterFrame"),r={"1x":"/ac/ac-video-posterframe/1.0/images/ac-video-poster_848x480.jpg","2x":"/ac/ac-video-posterframe/1.0/images/ac-video-poster_848x480_2x.jpg"};e.exports=function(t){if(t.src=t.src||(t.is2x?r["2x"]:r["1x"]),t.useNativePoster){t.video.setPoster(t.src);var e,n=!1;return{show:function(){n=!0,e&&(t.video.setPoster(e),e=null)},hide:function(){n=!1},setSrc:function(i){n?i?t.video.setPoster(i):t.video.setPoster(t.src):e=i}}}return new i(t)}},{"./PosterFrame":181}],183:[function(t,e,n){"use strict";var i=t("@marcom/ac-ajax-xhr"),r=t("@marcom/ac-function/throttle"),o=t("./parseVTT"),s=function(t,e){this._view=t,this._video=e.video,this._refreshTracks=this._refreshTracks.bind(this),this._throttledRefreshCurrentCaption=r(this._refreshCurrentCaption.bind(this),300),this._addTrackListeners()},a=s.prototype;a._addTrackListeners=function(){this._video.on("addtrack",this._refreshTracks),this._video.on("removetrack",this._refreshTracks),this._video.on("change",this._refreshTracks)},a._addVideoListeners=function(t){if(!t.cues){this._view.setText("");try{i.get(t.src,{complete:function(e){t.cues=o(e.responseText),this._addVideoListeners(t),this._refreshCurrentCaption()}.bind(this),error:function(t){}.bind(this)})}catch(e){}}this._video.on("loadstart",this._refreshTracks),this._video.on("timeupdate",this._throttledRefreshCurrentCaption)},a._removeVideoListeners=function(){this._video.off("loadstart",this._refreshTracks),this._video.off("timeupdate",this._throttledRefreshCurrentCaption)},a._refreshTracks=function(){var t=this._video.getTextTracks();t&&t.length&&(t=t.filter(function(t){return"showing"===t.mode})),t.length?(this._activeTrack=t[0],this._addVideoListeners(this._activeTrack)):(this._activeTrack=null,this._removeVideoListeners()),this._refreshCurrentCaption()},a._getCurrentCaptionText=function(t){var e=this._activeTrack?this._activeTrack.cues:null;if(!e)return"";if(this._currentCaption&&this._currentCaption.startTime>=t&&this._currentCaption<=t)return this._currentCaption.text;for(var n,i=0,r=e.length;i<r;){if(e[i].startTime<=t&&e[i].endTime>=t)n=e[i];else if(e[i].startTime>=t)break;i++}return this._currentCaption=n,n?n.text:""},a._refreshCurrentCaption=function(){this._view.setText(this._getCurrentCaptionText(this._video.getCurrentTime()))},a.destroy=function(){this._removeVideoListeners()},e.exports=s},{"./parseVTT":188,"@marcom/ac-ajax-xhr":20,"@marcom/ac-function/throttle":83}],184:[function(t,e,n){"use strict";var i=t("../ui/factory/createComponents"),r=t("./TextTracksBehavior"),o=t("../ui/elements/Label"),s=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,a='<div class="ac-video-player-text-track"></div>',u="is-visible",l="ac-video-player-text-track-container",c={textTracksPolyfill:{className:"ac-video-player-text-track",view:{classDef:o,options:{}},behavior:{classDef:r}}},h=function(t){s.call(this),this.container=t.container,this._video=t.video,this._initialize(t)},f=h.prototype=Object.create(s.prototype);f._initialize=function(t){this._onTrackChange=this._onTrackChange.bind(this),this.el=document.createElement("div"),this.el.innerHTML=t.template||a,this.el.classList.add(l),this._tracks=t.tracks||[],this._textTrackComponent=i(this.el,c,{video:this._video})},f._onTrackChange=function(){this.trigger("change"),this.el.parentElement||(this._video.getRenderElement().parentElement.appendChild(this.el),this.el.firstElementChild.classList.add(u))},f.addTrack=function(t){this._tracks||(this._tracks=[]);var e=t.mode||"hidden",n=this._onTrackChange;Object.defineProperty(t,"mode",{get:function(){return e},set:function(t){e=t,n()},enumerable:!0,configurable:!0}),this._tracks.push(t),this.trigger("addtrack")},f.clearTracks=function(){this._tracks=[],this.trigger("removetrack"),this.trigger("change")},f.getTextTracks=function(){return this._tracks},f.trigger=function(t,e){return s.prototype.trigger.call(this,t,Object.assign({type:t},e||{}))},f.destroy=function(){this._textTrackComponent.destroy(),s.prototype.destroy.call(this)},e.exports=h},{"../ui/elements/Label":213,"../ui/factory/createComponents":223,"./TextTracksBehavior":183,"@marcom/ac-event-emitter-micro":66}],185:[function(t,e,n){"use strict";var i,r=t("@marcom/useragent-detect");i=r.browser.safari?function(t,e){t.track.mode=e}:function(t,e){t.mode=e};var o=function(t){var e;if(t instanceof HTMLElement)return void this.el.appendChild(t);var n=document.createElement("track");n.src=t.src,n.kind="captions",n.srclang=t.srclang,"en"===n.srclang?n.label=t.label||"English":n.label=t.label||t.srclang&&t.srclang.toUpperCase()||"Unknown CC",r.browser.firefox?(e=this.el.textTracks.length,setTimeout(function(){this.el.appendChild(n),i(this.el.textTracks[e],t.mode||"hidden")}.bind(this),0)):r.os.android?(e=this.el.textTracks.length,this.el.appendChild(n),i(this.el.textTracks[e],t.mode||"hidden")):(this.el.appendChild(n),i(n,t.mode||"hidden"))},s=function(){return this.el.textTracks},a=function(){if(!this._textTracksEmitter){var e=t("../dom-emitter/DOMEmitterMicro");this._textTracksEmitter=new e(this.getTextTracks())}return this._textTracksEmitter},u=function(t){for(var e=0,n=t?t.length:0;e<n;e++){var i=t[e];o.call(this,i)}},l=function(){};e.exports={create:u,add:o,get:s,getEmitter:a,destroy:l}},{"../dom-emitter/DOMEmitterMicro":173,"@marcom/useragent-detect":284}],186:[function(t,e,n){"use strict";var i=t("./TextTracksDOM"),r=function(t){if(t)if(this._textTracksPolyfill){this._textTracksPolyfill.clearTracks();for(var e=0,n=t.length;e<n;e++)this._textTracksPolyfill.addTrack(t[e])}else this._textTracksPolyfill=new i({video:this,tracks:t,container:this._parentElement})},o=function(t){return this._textTracksPolyfill.addTrack(t)},s=function(){return this._textTracksPolyfill||this._createTextTrackTags([]),this._textTracksPolyfill.getTextTracks()},a=function(){return this._textTracksPolyfill||this._createTextTrackTags([]),this._textTracksPolyfill},u=function(){this._textTracksPolyfill.destroy(),this._textTracksPolyfill=null};e.exports={create:r,add:o,get:s,getEmitter:a,destroy:u}},{"./TextTracksDOM":184}],187:[function(t,e,n){"use strict";var i=t("@marcom/useragent-detect"),r=!i.browser.ie&&!i.browser.edge;e.exports=function(e){e=e||{};var n;return n=!!e.hls||!e.threesixty&&("undefined"==typeof e.useNativeCaptions?r:e.useNativeCaptions),t(n?"./TextTracksNative":"./TextTracksPolyfill")}},{"./TextTracksNative":185,"./TextTracksPolyfill":186,"@marcom/useragent-detect":284}],188:[function(t,e,n){"use strict";var i=t("../utils/Time");e.exports=function(t){var e,n,r=t.split(/\n/),o=/([\d]{2}:)?[\d]{2}:[\d]{2}.[\d]{3}( --> ){1}([\d]{2}:)?[\d]{2}:[\d]{2}.[\d]{3}/,s=[],a=0,u=r.length;for(a;a<u;a++)if(n="",o.test(r[a])){for(e=r[a].split(" --> "),e[0]=e[0].split(":").length<3?"00:"+e[0]:e[0],e[1]=e[1].split(":").length<3?"00:"+e[1]:e[1];++a&&a<u&&!o.test(r[a]);)""!==r[a]&&(n+=r[a]+"<br />");n=n.substr(0,n.length-6),a<u&&a--,s.push({startTime:i.stringToNumber(e[0].split(" ")[0]),endTime:i.stringToNumber(e[1].split(" ")[0]),text:n})}return s}},{"../utils/Time":236}],189:[function(t,e,n){"use strict";var i=t("@marcom/ac-string/supplant"),r=t("../utils/Time"),o=t("./localization/Localization"),s=t("./factory/createComponents"),a="ac-video-controls",u="control-bar-skin-default",l=t("@marcom/ac-feature/isDesktop")(),c=t("./overlays/OverlayContainer"),h=t("./end-state/EndStateItemContainer"),f=t("./compass/Compass"),d=t("../utils/merge"),p=function(t){this._initialize(t)},m=p.prototype;m._initialize=function(t){this.el=t.element||document.createElement("div"),this._basePath=t.basePath,this.el.style.display="none",this._template=t.template||'<div class="controls-container" >\n\n\t<div class="{elementClassPrefix}-social-tray hidden"></div>\n\n\t<div class="center-button-container {elementClassPrefix}-play-pause-button-container">\n\t\t<div class="button-wrapper">\n\t\t\t<button type="button" class="ac-video-icon centered-button {elementClassPrefix}-play-pause-button {elementClassPrefix}-button no-autoplay" value="{playpause}" aria-label="{playpause}" role="button" tabindex="0" data-acv-active-area data-acv-draggable-area></button>\n\t\t</div>\n\t</div>\n\n\t<div class="main-controls-container">\n\t\t<div class="ac-video-overlay-container"></div>\n\t\t<div class="main-controls">\n\t\t\t<div class="button-wrapper">\n\t\t\t\t<div class="main-controls-item controls-volume">\n\t\t\t\t\t<button type="button" class="ac-video-icon {elementClassPrefix}-toggle-mute-volume-button {elementClassPrefix}-button" value="{togglemutevolume}" aria-label="{togglemutevolume}" role="button" tabindex="0" data-acv-active-area></button>\n\t\t\t\t\t<div class="{elementClassPrefix}-volume-level-indicator" tabindex="0" aria-valuemin="0" aria-valuemax="100" min="0" max="100" aria-label="{adjustvolume}" role="slider" aria-orientation="vertical" step="0.05" data-acv-active-area></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="button-wrapper">\n\t\t\t\t<button type="button" class="ac-video-icon main-controls-item {elementClassPrefix}-text-tracks-toggle-button {elementClassPrefix}-button no-text-tracks" value="{captionscontrol}" aria-label="{captionscontrol}" role="button" tabindex="0" data-acv-active-area></button>\n\t\t\t\t<div class="ac-video-captions-selector-container">\n\t\t\t\t\t<span class="ac-video-captions-selector-title">{subtitlescontrol}</span>\n\t\t\t\t\t<ul class="{elementClassPrefix}-captions-selector" role="radiogroup" aria-label="{subtitlescontrol}" data-acv-active-area></ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="main-controls-item controls-progress">\n\t\t\t\t<div class="controls-progress-time controls-progress-time-1">\n\t\t\t\t\t<div class="{elementClassPrefix}-elapsed-time-indicator" role="text" tabindex="-1">\n\t\t\t\t\t\t<span class="label">{elapsed}</span>\n\t\t\t\t\t\t<span class="{elementClassPrefix}-elapsed-time">00:00</span>\n\t\t\t\t\t\t<span class="{elementClassPrefix}-time-maxwidth" aria-hidden="true">44:44</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="controls-progress-bar">\n\t\t\t\t\t<div class="{elementClassPrefix}-buffered-indicator"></div>\n\t\t\t\t\t<div class="{elementClassPrefix}-progress-indicator ac-slider-inactive" aria-label="progress-indicator" role="slider" precision="float" min="0" max="{max}" step="0.0005" value="0" tabindex="0" aria-valuemax="{max}" aria-valuemin="{min}" aria-valuenow="{value}" data-acv-active-area></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="controls-progress-time controls-progress-time-2">\n\t\t\t\t\t<div class="{elementClassPrefix}-remaining-time-indicator" role="text" tabindex="-1">\n\t\t\t\t\t\t<span class="label">{remaining}</span>\n\t\t\t\t\t\t<span class="{elementClassPrefix}-remaining-time">-00:00</span>\n\t\t\t\t\t\t<span class="{elementClassPrefix}-time-maxwidth" aria-hidden="true">-44:44</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="main-controls-item live-stream">\n\t\t\t\t<span class="live-stream-text">{livestream}</span>\n\t\t\t</div>\n\n\t\t\t<div class="button-wrapper">\n\t\t\t\t<button type="button" class="ac-video-icon main-controls-item {elementClassPrefix}-airplay-button {elementClassPrefix}-button airplay-unsupported" value="{airplay}" aria-label="{airplay}" role="button" tabindex="0" data-acv-active-area></button>\n\t\t\t</div>\n\n\t\t\t<div class="button-wrapper">\n\t\t\t\t<button type="button" class="ac-video-icon main-controls-item {elementClassPrefix}-picture-in-picture-button {elementClassPrefix}-button picture-in-picture-unsupported" value="{pictureinpicture}" aria-label="{pictureinpicture}" role="button" tabindex="0" data-acv-active-area></button>\n\t\t\t</div>\n\n\t\t\t<div class="button-wrapper">\n\t\t\t\t<button type="button" class="ac-video-icon main-controls-item {elementClassPrefix}-full-screen-button {elementClassPrefix}-button fullscreen-unsupported" value="{fullscreen}" aria-label="{fullscreen}" role="button" tabindex="0" data-acv-active-area></button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class="end-state-wrapper">\n\t\t<div class="end-state-container"></div>\n\t</div>\n\n\n</div>\n\n<div class="compass-wrapper" data-acv-active-area>\n\t<div class="compass-background ac-video-icon"></div>\n\t<div class="compass-arrows">\n\t\t<button class="compass-arrow-top ac-video-icon" aria-label="{threesixtyup}" role="button" tabindex="0"></button>\n\t\t<button class="compass-arrow-right ac-video-icon" aria-label="{threesixtyright}" role="button" tabindex="0"></button>\n\t\t<button class="compass-arrow-bottom ac-video-icon" aria-label="{threesixtydown}" role="button" tabindex="0"></button>\n\t\t<button class="compass-arrow-left ac-video-icon" aria-label="{threesixtyleft}" role="button" tabindex="0"></button>\n\t</div>\n\t<div class="compass-field ac-video-icon"></div>\n\t<div class="compass-ring ac-video-icon"></div>\n\t<button class="compass" aria-label="{threesixtyicon}" role="button" tabindex="0"></button>\n</div>\n',this._templateData=t.templateData||Object.assign({elementClassPrefix:"controls"}),this._destroyed=!1,this._localize().then(function(){this._destroyed||(this._initUIComponents(t),this.el.style.display=""),"function"==typeof t.readyCallback&&t.readyCallback()}.bind(this))},m._localize=function(){return new Promise(function(t){o.getTranslation({callback:function(e){t(e)}.bind(this),basePath:this._basePath})}.bind(this)).then(function(t){this._templateData=Object.assign(this._templateData,t)}.bind(this))},m._renderTemplateMarkup=function(){var t=i(this._template,this._templateData);this.el.innerHTML=t},m._initDesktopControls=function(t,e){this._componentCollection=s(t,d(e,{elementClassPrefix:this._templateData.elementClassPrefix,elapsedTimeIndicator:{behavior:{observe:{source:this._player,events:["timeupdate","seeking","seeked","durationchange"],update:function(t){t.setText(r.formatTime(this._player.getCurrentTime(),this._player.getDuration()))}.bind(this)}}},remainingTimeIndicator:{behavior:{observe:{source:this._player,events:["timeupdate","seeking","seeked","durationchange"],update:function(t){t.setText(r.formatTime(this._player.getCurrentTime()-this._player.getDuration(),this._player.getDuration()))}.bind(this)}}},volumeLevel:{view:{options:{value:this._player.getMuted()?0:100*this._player.getVolume()}}},playPauseContainer:{view:{options:{labels:{playing:this._templateData.pause,paused:this._templateData.play,ended:this._templateData.replay}}}},fullScreen:{view:{options:{labels:{initial:this._templateData.fullscreen,on:this._templateData.exitfullscreen,off:this._templateData.fullscreen}}}},pictureInPictureToggle:{view:{options:{labels:{initial:this._templateData.pictureinpicture,on:this._templateData.exitpictureinpicture,off:this._templateData.pictureinpicture}}}}}),{player:this._player,localization:this._templateData})},m._initUIComponents=function(t){this._player=t.player;var e=this.el,n=t.components;e.classList.add(t.className||a),this._renderTemplateMarkup();var i=e.querySelector(".main-controls-container");i&&(t.enableMainControls?(i.classList.add(u),this.mainControlsElement=i):i.parentElement.removeChild(i));var r=e.querySelector(".end-state-container");r&&(this.endState=new h(Object.assign({},{el:r,player:this._player},t.endState))),t.threesixty&&(this.compass=new f({rootElement:e,player:this._player})),this._initDesktopControls(e,n);var o=this._componentCollection.components.socialShare;this.sharingModule=o&&o.length?o[0].behavior.sharingModule:null,this._componentCollection.components.progressBar.length&&(this.scrubberView=this._componentCollection.components.progressBar[0].view),this.playButtonElement=this.el.querySelector(".controls-play-pause-button"),l&&t.enableMainControls&&(this.overlays=new c({el:this.el.querySelector(".ac-video-overlay-container"),player:this._player}))},m.destroy=function(){this._componentCollection&&(this._componentCollection.destroy(),this._componentCollection=null),this._destroyed=!0,this._player=null,this._templateData=null},e.exports=p},{"../utils/Time":236,"../utils/merge":238,"./compass/Compass":206,"./end-state/EndStateItemContainer":220,"./factory/createComponents":223,"./localization/Localization":229,"./overlays/OverlayContainer":231,"@marcom/ac-feature/isDesktop":69,"@marcom/ac-string/supplant":157}],190:[function(t,e,n){"use strict";var i={components:t("./DefaultComponents"),controlsImplementation:t("./ControlBar")},r=function(t){t=t||{};var e=Object.assign({},i,t);return{create:function(n){var r=Object.assign({},e,n);return r.components=t.components||i.components,new r.controlsImplementation(r)}}};e.exports=r},{"./ControlBar":189,"./DefaultComponents":192}],191:[function(t,e,n){"use strict";e.exports=[{name:"small",minWidth:0,maxWidth:479},{name:"medium",minWidth:480,maxWidth:779},{name:"large",minWidth:780,maxWidth:1/0}]},{}],192:[function(t,e,n){"use strict";var i=t("./elements/Button"),r=t("./elements/StatefulButton"),o=t("./elements/ToggleButton"),s=t("./elements/Label"),a=t("./elements/ListSelector"),u=t("./elements/Slider"),l=t("./elements/Container"),c=t("./behaviors/MuteButtonBehavior"),h=t("./behaviors/PlayPauseButtonBehavior"),f=t("./behaviors/PictureInPictureButtonBehavior"),d=t("./behaviors/CaptionsButtonBehavior"),p=t("./behaviors/CaptionsSelectorBehavior"),m=t("./behaviors/FullScreenButtonBehavior"),y=t("./behaviors/ProgressBarSliderBehavior"),_=t("./behaviors/VolumeSliderBehavior"),v=t("./behaviors/SharingButtonBehavior"),g=t("./behaviors/SocialContainerBehavior"),b=t("./behaviors/AirPlayButtonBehavior"),w=t("./elements/mixins/CursorPointer");
e.exports={back30Seconds:{className:"back-30-seconds-button",view:{classDef:i}},fullScreen:{className:"full-screen-button",view:{classDef:o,options:{states:{initial:"fullscreen-unsupported",on:"is-fullscreen",off:""},labels:{initial:"fullscreen",on:"exitfullscreen",off:"fullscreen"}}},behavior:{classDef:m}},toggleMuteVolume:{className:"toggle-mute-volume-button",view:{classDef:o,options:{states:{initial:[],on:["is-muted"],off:[]}}},behavior:{classDef:c}},playPauseContainer:{className:"play-pause-button-container",view:{classDef:r,options:{states:{playing:["is-playing"],paused:[],ended:["is-ended"]}}},behavior:{classDef:h}},pictureInPictureToggle:{className:"picture-in-picture-button",view:{classDef:o,options:{states:{initial:["picture-in-picture-unsupported"],on:["is-picture-in-picture"],off:[]},labels:{initial:"pictureinpicture",on:"exitpictureinpicture",off:"pictureinpicture"}}},behavior:{classDef:f}},captionsToggle:{className:"text-tracks-toggle-button",view:{classDef:o,options:{states:{initial:["no-text-tracks"],on:["text-tracks-visible"],off:[]}}},behavior:{classDef:d}},captionsSelector:{className:"captions-selector",view:{classDef:a},behavior:{classDef:p}},airplayToggle:{className:"airplay-button",view:{classDef:o,options:{states:{initial:["airplay-unsupported"],on:["airplay-active"],off:[]}}},behavior:{classDef:b}},elapsedTimeIndicator:{className:"elapsed-time",view:{classDef:s}},remainingTimeIndicator:{className:"remaining-time",view:{classDef:s}},progressBar:{className:"progress-indicator",view:{classDef:u,options:{template:'<div class="ac-slider-runnable-track">\n\t<div class="ac-slider-hover-track">\n\t\t<div class="ac-slider-hover-notch"></div>\n\t</div>\n\t<div class="ac-slider-thumb">\n\t\t<div class="ac-slider-thumb-background-wrapper">\n\t\t\t<div class="ac-slider-thumb-background"></div>\n\t\t</div>\n\t</div>\n\t<div class="ac-slider-inner-track">\n\t\t<div class="ac-slider-scrubbed"></div>\n\t</div>\n</div>',min:0,max:1,mixins:[w],orientation:"horizontal"}},behavior:{classDef:y}},volumeLevel:{className:"volume-level-indicator",view:{classDef:u,options:{template:'<div class="ac-slider-runnable-track">\n\t<div class="ac-slider-background"></div>\n\t<div class="ac-slider-thumb-wrapper">\n\t\t<div class="ac-slider-thumb">\n\t\t\t<div class="ac-slider-thumb-background-wrapper">\n\t\t\t\t<div class="ac-slider-thumb-background"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="ac-slider-inner-track">\n\t\t<div class="ac-slider-scrubbed"></div>\n\t</div>\n</div>',min:0,max:100,mixins:[w],orientation:"vertical"}},behavior:{classDef:_}},sharing:{className:"sharing-button",view:{classDef:r,options:{states:{initial:["sharing-unsupported"],on:["is-sharing"],off:[]}}},behavior:{classDef:v}},socialShare:{className:"social-tray",view:{classDef:l,options:{}},behavior:{classDef:g}}}},{"./behaviors/AirPlayButtonBehavior":193,"./behaviors/CaptionsButtonBehavior":196,"./behaviors/CaptionsSelectorBehavior":197,"./behaviors/FullScreenButtonBehavior":198,"./behaviors/MuteButtonBehavior":199,"./behaviors/PictureInPictureButtonBehavior":200,"./behaviors/PlayPauseButtonBehavior":201,"./behaviors/ProgressBarSliderBehavior":202,"./behaviors/SharingButtonBehavior":203,"./behaviors/SocialContainerBehavior":204,"./behaviors/VolumeSliderBehavior":205,"./elements/Button":211,"./elements/Container":212,"./elements/Label":213,"./elements/ListSelector":214,"./elements/Slider":215,"./elements/StatefulButton":216,"./elements/ToggleButton":217,"./elements/mixins/CursorPointer":218}],193:[function(t,e,n){"use strict";var i=t("./ButtonBehavior"),r=function(t,e){i.apply(this,arguments),this._player.supportsAirPlay()&&(this._airplayStateChange=this._airplayStateChange.bind(this),this._player.getMediaElement().addEventListener("webkitplaybacktargetavailabilitychanged",this._airplayStateChange),this._updateState=this._updateState.bind(this),this._player.getMediaElement().addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this._updateState))},o=i.prototype,s=r.prototype=Object.create(o);s._airplayStateChange=function(t){"available"===t.availability?this._airplayAvailable=!0:this._airplayAvailable=!1,this._updateState()},s._updateState=function(){this._player.getMediaElement().webkitCurrentPlaybackTargetIsWireless?this._view.setState("on"):this._airplayAvailable?this._view.setState("off"):this._view.setState("initial")},s._onClick=function(){this._player.getMediaElement().webkitShowPlaybackTargetPicker()},s.destroy=function(){this._player.getMediaElement().removeEventListener("webkitplaybacktargetavailabilitychanged",this._airplayStateChange),this._player.getMediaElement().removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this._updateState)},e.exports=r},{"./ButtonBehavior":195}],194:[function(t,e,n){"use strict";var i=function(t,e){this._player=e.player,this._view=t,this._addViewListeners&&this._addViewListeners(),this._addPlayerListeners&&this._addPlayerListeners()};e.exports=i},{}],195:[function(t,e,n){"use strict";var i=t("./BaseBehavior"),r=function(t,e){this._onClick=this._onClick.bind(this),i.apply(this,arguments)},o=r.prototype=Object.create(i.prototype);o._addViewListeners=function(){this._view.on("click",this._onClick)},o._onClick=function(t){},o.destroy=function(){this._view.off("click",this._onClick)},e.exports=r},{"./BaseBehavior":194}],196:[function(t,e,n){"use strict";var i=t("./ButtonBehavior"),r=function(t,e){i.apply(this,arguments),this._updateState(),this._allowMultiLanguageCaptions=!this._player.options.disableMultiLanguageCaptions},o=i.prototype,s=r.prototype=Object.create(o);s._updateState=function(){var t=this._player.getVisibleTextTracks(),e=this._player.getTextTracks().filter(function(t){return"subtitles"===t.kind||"captions"===t.kind||!t.kind});t.length?this._view.setState("on"):e.length?this._view.setState("off"):this._view.setState("initial")},s._addPlayerListeners=function(){this._updateState=this._updateState.bind(this),this._player.on("addtrack",this._updateState),this._player.on("change",this._updateState),this._player.on("removetrack",this._updateState)},s._onClick=function(){var t=this._player.getVisibleTextTracks(),e=this._player.getTextTracks().filter(function(t){return"metadata"!==t.kind});e.length>1&&this._allowMultiLanguageCaptions?this._player.isCaptionsSelectorShowing()?this._player.hideCaptionsSelector():this._player.showCaptionsSelector():1===t.length?e[0].mode="hidden":e[0].mode="showing",setTimeout(this._updateState)},s.destroy=function(){this._player.off("addtrack",this._updateState),this._player.off("change",this._updateState),this._player.off("removetrack",this._updateState),o.destroy.call(this)},e.exports=r},{"./ButtonBehavior":195}],197:[function(t,e,n){"use strict";var i="__CC_DISABLE",r=t("./BaseBehavior"),o=t("@marcom/useragent-detect").browser,s=o.edge||o.ie,a=function(t,e){r.apply(this,arguments),this._updateState()},u=a.prototype=Object.create(r.prototype);u._addViewListeners=function(){this._onSelected=this._onSelected.bind(this),this._view.on("ItemSelected",this._onSelected)},u._updateState=function(){var t="showing",e=this._player.getTextTracks().filter(function(t){return"subtitles"===t.kind||"captions"===t.kind||!t.kind}),n=e.map(function(e){"showing"===e.mode&&(t="hidden");var n={label:e.label||e.language||e.srclang&&("en"===e.srclang.toLowerCase()?"English":e.srclang)||"Unknown CC",language:e.language};return Object.defineProperty(n,"mode",{get:function(){return e.mode},set:function(t){e.mode=t}}),n});this._view.setItems([{label:"Off",language:i,mode:t}].concat(n))},u._addPlayerListeners=function(){this._updateState=this._updateState.bind(this),this._player.on("addtrack",this._updateState),this._player.on("change",this._updateState),this._player.on("removetrack",this._updateState)},u._onSelected=function(t){var e=t.detail;this._player.getVisibleTextTracks().forEach(function(t){t.mode="hidden"}),e.language!==i&&(e.mode="showing"),s&&this._player.getMediaElement().textTracks.dispatchEvent(new CustomEvent("change")),setTimeout(this._updateState)},u.destroy=function(){this._player.off("addtrack",this._updateState),this._player.off("change",this._updateState),this._player.off("removetrack",this._updateState),this._view.off("ItemSelected",this._onSelected)},e.exports=a},{"./BaseBehavior":194,"@marcom/useragent-detect":284}],198:[function(t,e,n){"use strict";var i=t("./ButtonBehavior"),r=function(t,e){i.apply(this,arguments),this._player.getFullScreenEnabled()&&this._updateState()},o=i.prototype,s=r.prototype=Object.create(o);s._addPlayerListeners=function(){this._updateState=this._updateState.bind(this),this._player.on("fullscreen:change",this._updateState)},s._updateState=function(){this._view.setState(this._player.isFullscreen()?"on":"off")},s._onClick=function(){this._player.toggleFullscreen(!this._player.isFullscreen())},s.destroy=function(){this._player.off("fullscreen:change",this._updateState),o.destroy.call(this)},e.exports=r},{"./ButtonBehavior":195}],199:[function(t,e,n){"use strict";var i=t("./ButtonBehavior"),r=function(t,e){i.apply(this,arguments),this._updateState()},o=i.prototype,s=r.prototype=Object.create(o);s._updateState=function(){this._view.setState(this._player.getMuted()?"on":"off")},s._addPlayerListeners=function(){this._updateState=this._updateState.bind(this),this._player.on("volumechange",this._updateState)},s._onClick=function(){this._player.getMuted()?(this._player.setMuted(!1),0===this._player.getVolume()&&this._player.setVolume(.1)):this._player.setMuted(!0)},s.destroy=function(){this._player.off("volumechange",this._updateState),o.destroy.call(this)},e.exports=r},{"./ButtonBehavior":195}],200:[function(t,e,n){"use strict";var i=t("./ButtonBehavior"),r=function(t,e){i.apply(this,arguments),this._initialize()},o=i.prototype,s=r.prototype=Object.create(o);s._initialize=function(){this._updateButtonState=this._updateButtonState.bind(this),this._player.supportsPictureInPicture()&&(this._updateButtonState(),this._player.on("webkitpresentationmodechanged",this._updateButtonState))},s._onClick=function(){this._player.setPictureInPicture(!this._player.isPictureInPicture())},s._updateButtonState=function(){this._view.setState(this._player.isPictureInPicture()?"on":"off")},s.destroy=function(){this._player.off("webkitpresentationmodechanged",this._updateButtonState),o.destroy.call(this)},e.exports=r},{"./ButtonBehavior":195}],201:[function(t,e,n){"use strict";var i=t("./ButtonBehavior"),r=function(t,e){i.apply(this,arguments),this._setPlayingState()},o=i.prototype,s=r.prototype=Object.create(o);s._addPlayerListeners=function(){this._setPlayingState=this._setPlayingState.bind(this),this._player.on("play",this._setPlayingState),this._player.on("playing",this._setPlayingState),this._player.on("pause",this._setPlayingState),this._player.on("ended",this._setPlayingState)},s._onClick=function(){this._togglePlay()},s._setPlayingState=function(){this._player.getEnded()?this._view.setState("ended"):this._view.setState(this._player.getPaused()?"paused":"playing")},s._togglePlay=function(){this._player.getPaused()||this._player.getEnded()?this._player.play():this._player.pause()},s.destroy=function(){this._player.off("play",this._setPlayingState),this._player.off("pause",this._setPlayingState),this._player.off("playing",this._setPlayingState),this._player.off("ended",this._setPlayingState),o.destroy.call(this)},e.exports=r},{"./ButtonBehavior":195}],202:[function(t,e,n){"use strict";var i=t("./BaseBehavior"),r=t("@marcom/ac-string/supplant"),o="is-playing",s=t("@marcom/ac-raf-emitter/draw"),a=t("@marcom/ac-raf-emitter/cancelDraw"),u=function(t,e){i.apply(this,arguments),this._visible=!1,this._ariaTextTemplate=e.localization.currenttimetext,this._onDurationChange()},l=u.prototype=Object.create(i.prototype);l._addViewListeners=function(){this._onSliderGrab=this._onSliderGrab.bind(this),this._onSliderChange=this._onSliderChange.bind(this),this._onSliderRelease=this._onSliderRelease.bind(this),this._view.on("grab",this._onSliderGrab)},l._addPlayerListeners=function(){this._onTimeUpdate=this._onTimeUpdate.bind(this),this._onPlay=this._onPlay.bind(this),this._onPause=this._onPause.bind(this),this._onEnded=this._onEnded.bind(this),this._onDurationChange=this._onDurationChange.bind(this),this._onRAF=this._onRAF.bind(this),this._player.on("durationchange",this._onDurationChange),this._player.on("loadstart",this._onEnded),this._player.on("ended",this._onEnded),this._player.on("timeupdate",this._onTimeUpdate),this._player.on("play",this._onPlay),this._player.on("pause",this._onPause),this._player.on("ended",this._onEnded)},l._setIsPlaying=function(t){t?this._view.setState(o):this._view.clearState(o)},l._onPlay=function(){this._setIsPlaying(!0),this._player.isLive()||(a(this._timeUpdateInterval),s(this._onRAF))},l._onRAF=function(){this._onTimeUpdate(),this._timeUpdateInterval=s(this._onRAF)},l._onPause=function(){this._setIsPlaying(!1),a(this._timeUpdateInterval),this._onTimeUpdate()},l._onEnded=function(){this._onPause(),this._updateSliderPosition(0)},l._onSliderGrab=function(){this._player.off("timeupdate",this._onTimeUpdate),a(this._timeUpdateInterval),this._view.off("grab",this._onSliderGrab),this._view.on("change",this._onSliderChange),this._view.on("release",this._onSliderRelease),this._onPause()},l._onSliderRelease=function(){this._view.off("change",this._onSliderChange),this._view.off("release",this._onSliderRelease),this._view.on("grab",this._onSliderGrab),this._player.on("timeupdate",this._onTimeUpdate),this._player.getPaused()||this._onPlay()},l._getTimeAsPercent=function(){return this._player.getCurrentTime()/this._cachedDuration},l._onDurationChange=function(){this._cachedDuration=this._player.getDuration(),this._updateSliderPosition(this._getTimeAsPercent()),this._player.getPaused()||this._onPlay()},l._onSliderChange=function(){var t=this._view.getValue();this._setPlayerCurrentTime(t*this._cachedDuration),this._setAriaValueText(t*this._cachedDuration),this._updateScrubbedValue()},l._onTimeUpdate=function(){this._player.getPaused()?this._updateSliderPosition(this._getTimeAsPercent()):this._updateSliderPosition(this._getTimeAsPercent())},l._updateSliderPosition=function(t){this._view.setValue(t),this._setAriaValueText(t*this._cachedDuration),this._updateScrubbedValue(),this._visible||isNaN(this._cachedDuration)||(this._view.show(),this._visible=!0)},l._setAriaValueText=function(t){var e=Math.floor(t/60),n=Math.ceil(t%60);this._view.setAriaValueText(r(this._ariaTextTemplate,{minutes:e,seconds:n}))},l._updateScrubbedValue=function(){this._view.setScrubbedValue()},l._setPlayerCurrentTime=function(t){this._player.setCurrentTime(t)},l._removeEventListeners=function(){this._player.off("durationchange",this._onDurationChange),this._player.off("loadstart",this._onEnded),this._player.off("ended",this._onEnded),this._player.off("timeupdate",this._onTimeUpdate),this._view.off("change",this._onSliderChange),this._view.off("release",this._onSliderRelease),this._view.off("grab",this._onSliderGrab),this._player.off("play",this._onPlay),this._player.off("pause",this._onPause),this._player.off("ended",this._onPause)},l.destroy=function(){this._removeEventListeners(),a(this._timeUpdateInterval)},e.exports=u},{"./BaseBehavior":194,"@marcom/ac-raf-emitter/cancelDraw":168,"@marcom/ac-raf-emitter/draw":170,"@marcom/ac-string/supplant":157}],203:[function(t,e,n){"use strict";var i=t("./ButtonBehavior"),r=function(t,e){i.apply(this,arguments),this._player.states&&this._updateState()},o=i.prototype,s=r.prototype=Object.create(o);s._addPlayerListeners=function(){this._updateState=this._updateState.bind(this),this._player.states&&this._player.states.on("statechange",this._updateState)},s._updateState=function(){this._stateChanging=!1,this._view.setState("sharing"===this._player.states.getCurrentState()?"on":"off")},s._onClick=function(){this._stateChanging||("sharing"===this._player.states.getCurrentState()?(this._view.setState("off"),this._player.states.setState("none")):(this._view.setState("on"),this._player.states.setState("sharing")),this._stateChanging=!0)},s.destroy=function(){this._player.states&&this._player.states.off("statechange",this._updateState),o.destroy.call(this)},e.exports=r},{"./ButtonBehavior":195}],204:[function(t,e,n){"use strict";var i=t("./BaseBehavior"),r=t("../sharing/SharingModule"),o=function(t,e){i.apply(this,arguments),this._updateState()},s=i.prototype,a=o.prototype=Object.create(s);a._updateState=function(){this.sharingModule=new r(Object.assign({},{player:this._player,parentView:this._view})),this.sharingModule.setData(this._player.options.sharing),this._view.el.innerHTML="",this._view.el.appendChild(this.sharingModule.el)},e.exports=o},{"../sharing/SharingModule":234,"./BaseBehavior":194}],205:[function(t,e,n){"use strict";var i=t("./BaseBehavior"),r=function(t,e){i.apply(this,arguments),this._hideVolume(),this._updateSliderVolumeValue()},o=r.prototype=Object.create(i.prototype);o._addViewListeners=function(){this._showVolume=this._showVolume.bind(this),this._hideVolume=this._hideVolume.bind(this),this._onSliderGrab=this._onSliderGrab.bind(this),this._onSliderChange=this._onSliderChange.bind(this),this._onSliderRelease=this._onSliderRelease.bind(this),this._onFocusChange=this._onFocusChange.bind(this),this._view.on("grab",this._onSliderGrab),this._view.on("focuschange",this._onFocusChange)},o._addPlayerListeners=function(){this._updateSliderVolumeValue=this._updateSliderVolumeValue.bind(this),this._onUserVolumeChange=this._onUserVolumeChange.bind(this),this._player.once("durationchange",this._updateSliderVolumeValue),this._player.on("volumechange",this._updateSliderVolumeValue),this._player.on("uservolumechange",this._onUserVolumeChange)},o._onSliderGrab=function(){this._cachedVolume=this._player.getVolume(),this._player.off("volumechange",this._updateSliderVolumeValue),this._view.off("grab",this._onSliderGrab),this._view.on("change",this._onSliderChange),this._view.on("release",this._onSliderRelease)},o._onSliderRelease=function(){this._setPlayerVolume(this._view.getValue()),this._view.off("change",this._onSliderChange),this._view.off("release",this._onSliderRelease),this._view.on("grab",this._onSliderGrab),this._player.on("volumechange",this._updateSliderVolumeValue)},o._onSliderChange=function(){var t=this._view.getValue();this._setPlayerVolume(t),this._view.setScrubbedValue()},o._setPlayerVolume=function(t){t?(this._player.setMuted(!1),this._player.setVolume(t/100)):(this._player.setMuted(!0),this._player.setVolume(this._cachedVolume))},o._showVolume=function(){this._view.show()},o._hideVolume=function(){this._view.hide()},o._onUserVolumeChange=function(){this._showVolume(),clearTimeout(this._hideVolumeTimer),this._view.isFocused()||(this._hideVolumeTimer=setTimeout(this._hideVolume,1e3))},o._onFocusChange=function(){this._view.isFocused()?this._showVolume():this._hideVolume()},o._updateSliderVolumeValue=function(){if(this._player.getMuted())this._view.setValue(0),this._view.setScrubbedValue();else{var t=this._player.getVolume();this._view.setValue(100*t),this._view.setScrubbedValue()}},o._removeEventListeners=function(){this._player.off("durationchange",this._updateSliderVolumeValue),this._player.off("volumechange",this._updateSliderVolumeValue),this._player.off("uservolumechange",this._onUserVolumeChange),this._view.off("change",this._onSliderChange),this._view.off("release",this._onSliderRelease),this._view.off("grab",this._onSliderGrab)},o.destroy=function(){this._removeEventListeners()},e.exports=r},{"./BaseBehavior":194}],206:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("@marcom/ac-keyboard/Keyboard"),s=t("@marcom/useragent-detect"),a=s.os.ios||s.os.android,u=t("@marcom/ac-360"),l=360,c=180,h=function(){function t(e){i(this,t),this._rootElement=e.rootElement,this._player=e.player,this._360=this._player.get360(),this.el=this._rootElement.querySelector(".compass-wrapper"),this.compassRing=this.el.querySelector(".compass-ring"),this.compassField=this.el.querySelector(".compass-field"),this.compass=this.el.querySelector(".compass"),this.compassArrows=this.el.querySelector(".compass-arrows"),this.compassArrowLeft=this.el.querySelector(".compass-arrow-left"),this.compassArrowRight=this.el.querySelector(".compass-arrow-right"),this.compassArrowTop=this.el.querySelector(".compass-arrow-top"),this.compassArrowBottom=this.el.querySelector(".compass-arrow-bottom"),this._keyboard=new o(this.el),this._arrowControls=this._player.get360().arrowControls,this._bindMethods(),this._addEventListeners()}return r(t,[{key:"_bindMethods",value:function(){this._onFocusIn=this._onFocusIn.bind(this),this._onFocusOut=this._onFocusOut.bind(this),this._onCompassClick=this._onCompassClick.bind(this),this._onCompassMouseEnter=this._onCompassMouseEnter.bind(this),this._onCompassMouseLeave=this._onCompassMouseLeave.bind(this),this._onCompassFocusIn=this._onCompassFocusIn.bind(this),this._onCompassFocusOut=this._onCompassFocusOut.bind(this),this._onRotationTransitionEnd=this._onRotationTransitionEnd.bind(this),this._onCompassArrowsClick=this._onCompassArrowsClick.bind(this),this._on360PositionChange=this._on360PositionChange.bind(this),this._on360IconUpdate=this._on360IconUpdate.bind(this),this._transitionTiming=this._transitionTiming.bind(this)}},{key:"_addEventListeners",value:function(){this._player.once("controlsready",function(){a||(this.compass.addEventListener("mouseenter",this._onCompassMouseEnter),this.compass.addEventListener("mouseleave",this._onCompassMouseLeave)),this.el.addEventListener("focusin",this._onFocusIn),this.el.addEventListener("focusout",this._onFocusOut),this.compass.addEventListener("click",this._onCompassClick),this.compass.addEventListener("focusin",this._onCompassFocusIn),this.compass.addEventListener("focusout",this._onCompassFocusOut),this.compassArrows.addEventListener("click",this._onCompassArrowsClick),this._360.on(u.POSITION_CHANGE,this._on360PositionChange),this._360.on(u.ROTATION_START,this._transitionTiming),this._360.on(u.ROTATION_COMPLETE,this._onRotationTransitionEnd)}.bind(this))}},{key:"_removeEventListeners",value:function(){this.el.removeEventListener("focusin",this._onFocusIn),this.el.removeEventListener("focusout",this._onFocusOut),this.compass.removeEventListener("click",this._onCompassClick),this.compass.removeEventListener("focusin",this._onCompassFocusIn),this.compass.removeEventListener("focusout",this._onCompassFocusOut),this.compass.removeEventListener("mouseenter",this._onCompassMouseEnter),this.compass.removeEventListener("mouseleave",this._onCompassMouseLeave),this.compassArrows.removeEventListener("click",this._onCompassArrowsClick),this._360.off(u.POSITION_CHANGE,this._on360PositionChange),this._360.off(u.ROTATION_START,this._transitionTiming),this._360.off(u.ROTATION_COMPLETE,this._onRotationTransitionEnd)}},{key:"_showCompassArrows",value:function(){this.el.classList.add("show-arrows")}},{key:"_hideCompassArrows",value:function(){this.el.classList.remove("show-arrows")}},{key:"_onRotationTransitionEnd",value:function(){this._compassIsRotating=!1,this._360.off(u.ROTATION_UPDATE,this._on360IconUpdate)}},{key:"_transitionTiming",value:function(t){var e=t.time,n=this._get360HorizontalAngle();this._compassIsRotating=!0,this.compassRing.style.transition="transform "+e+"ms cubic-bezier(0.25,0.1,0,1)",this.compassField.style.transition="transform "+e+"ms cubic-bezier(0.25,0.1,0,1)";var i="rotate("+l+"deg)";n>c?(this.compassRing.style.transform=i,this.compassField.style.transform=i):n<-c?(this.compassRing.style.transform=i,this.compassField.style.transform=i):(this.compassRing.style.transform="rotate(0deg)",this.compassField.style.transform="rotate(0deg)")}},{key:"_on360IconUpdate",value:function(t){this.compassRing.style.transition="transform 0.1s ease",this.compassRing.style.transform="rotate("+t.currentPosition.lon+"deg)",this.compassField.style.transition="transform 0.1s ease",this.compassField.style.transform="rotate("+t.currentPosition.lon+"deg)"}},{key:"_onCompassClick",value:function(t){this._compassIsRotating||(this._player.get360().isAtOrigin?(this._360.on(u.ROTATION_UPDATE,this._on360IconUpdate),this._player.get360().oscillateLongitude()):this._player.panToOrigin())}},{key:"_onCompassArrowsClick",value:function(t){switch(t.target){case this.compassArrowLeft:this._arrowControls.leftArrowDown(t),this._arrowControls.leftArrowUp(t);break;case this.compassArrowRight:this._arrowControls.rightArrowDown(t),this._arrowControls.rightArrowUp(t);break;case this.compassArrowTop:this._arrowControls.upArrowDown(t),this._arrowControls.upArrowUp(t);break;case this.compassArrowBottom:this._arrowControls.downArrowDown(t),this._arrowControls.downArrowUp(t)}}},{key:"_onFocusIn",value:function(t){t.target!==this.compass&&this._showCompassArrows()}},{key:"_onFocusOut",value:function(t){this._hideCompassArrows()}},{key:"_onCompassFocusIn",value:function(t){this._rotateFieldOfViewToOrigin()}},{key:"_onCompassFocusOut",value:function(t){var e=this._get360HorizontalAngle();this.compassField.style.transform="rotate("+e+"deg)"}},{key:"_rotateFieldOfViewToOrigin",value:function(){var t=this._get360HorizontalAngle();this.compassField.style.transition="transform 0.3s ease",t>c?this.compassField.style.transform="rotate("+l+"deg)":t<-c?this.compassField.style.transform="rotate(-"+l+"deg)":this.compassField.style.transform="rotate(0deg)"}},{key:"_onCompassMouseEnter",value:function(t){this._hovering=!0,this._compassIsRotating||this._rotateFieldOfViewToOrigin()}},{key:"_onCompassMouseLeave",value:function(t){if(this._hovering=!1,!this._compassIsRotating){var e=this._get360HorizontalAngle();this.compassField.style.transition="transform 0.3s ease",this.compassField.style.transform="rotate("+e+"deg)"}}},{key:"_on360PositionChange",value:function(){var t=this._get360HorizontalAngle();this.compassRing.style.transition="none",this.compassRing.style.transform="rotate("+t+"deg)",this._hovering||(this.compassField.style.transition="none",this.compassField.style.transform="rotate("+t+"deg)")}},{key:"_get360HorizontalAngle",value:function(){var t=this._player.get360().position,e=t.lon%l;return e}},{key:"destroy",value:function(){this._removeEventListeners()}}]),t}();e.exports=h},{"@marcom/ac-360":2,"@marcom/ac-keyboard/Keyboard":89,"@marcom/useragent-detect":284}],207:[function(t,e,n){"use strict";var i=function(t){this._player=t.player,this.el=this._player.el,this._showControls=t.showControls,this._hideControls=t.hideControls,this._raiseControls=t.raiseControls,this._lowerControls=t.lowerControls,this._sendMouseDown=t.sendMouseDown,this._controls=this._player.controls,this._controlsVisible=t.controlsVisible,this._controlsTimeoutDuration=t.controlsTimeoutDuration,this._keyboardControl=t.keyboardControl,this._lastMouseCoords={},this._elementEmitter=t.elementEmitter,this._bindMethods(),this._addEventListeners()},r=i.prototype;r._bindMethods=function(){this._onUserInteraction=this._onUserInteraction.bind(this),this._onFullscreenChange=this._onFullscreenChange.bind(this),this._onFullscreenWillExit=this._onFullscreenWillExit.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseLeave=this._onMouseLeave.bind(this),this._onClick=this._onClick.bind(this),this._onFocusIn=this._onFocusIn.bind(this),this._onFocusOut=this._onFocusOut.bind(this),this._onUserInteractionTimeout=this._onUserInteractionTimeout.bind(this)},r._addEventListeners=function(){this._controls.el.addEventListener("mousemove",this._onUserInteraction,!0),this._controls.el.addEventListener("click",this._onClick,!0),this._player.on("fullscreen:change",this._onFullscreenChange),this._player.on("fullscreen:willexit",this._onFullscreenWillExit),"onmouseleave"in this.el?this._controls.el.addEventListener("mouseleave",this._onMouseLeave):this._controls.el.addEventListener("mouseout",this._onMouseOut,!0),this._keyboardControl&&this._keyboardControl.on("keyboardinteraction",this._onUserInteraction),this._elementEmitter.on("focusin",this._onFocusIn),this._elementEmitter.on("focusout",this._onFocusOut)},r._removeEventListeners=function(){this._controls.el.removeEventListener("mousemove",this._onUserInteraction,!0),this._controls.el.removeEventListener("click",this._onClick,!0),this._player.off("fullscreen:change",this._onFullscreenChange),this._player.off("fullscreen:willexit",this._onFullscreenWillExit),"onmouseleave"in this.el?this._controls.el.removeEventListener("mouseleave",this._onMouseLeave):this._controls.el.removeEventListener("mouseout",this._onMouseOut,!0),this._keyboardControl&&this._keyboardControl.on("keyboardinteraction",this._onUserInteraction)},r._shouldIgnoreUserInteraction=function(t){return!!(t&&"focusin"!==t.type&&t.target&&this._isActiveArea(t.target))},r._onUserInteraction=function(t,e){!t||"click"!==t.type&&"focusin"!==t.type||this._player.isCaptionsSelectorShowing()&&!t.target.classList.contains("controls-text-tracks-toggle-button")&&"radio"!==t.target.getAttribute("role")&&"radiogroup"!==t.target.getAttribute("role")&&this._player.hideCaptionsSelector(),!this._player.getCurrentSrc()||this._preventUserInteraction||!e&&t&&"mousemove"===t.type&&this._lastMouseCoords.x===t.screenX&&this._lastMouseCoords.y===t.screenY||(t&&t.pageX&&(this._lastMouseCoords={x:t.screenX,y:t.screenY}),this._showControls(),this._raiseControls(),clearTimeout(this._userInteractionTimeout),this._shouldIgnoreUserInteraction(t)||(this._userInteractionTimeout=window.setTimeout(this._onUserInteractionTimeout,this._controlsTimeoutDuration)))},r._onUserInteractionTimeout=function(){this._hideControls()},r._onMouseLeave=function(t){window.clearTimeout(this._userInteractionTimeout),this._hideControls(),this._lowerControls(),this._lastMouseCoords={}},r._onMouseOut=function(t){this._controls.el.contains(t.target)||t.target===this._controls.el||this._onMouseLeave()},r._isActiveArea=function(t){for(;t!==this.el;){if(t.hasAttribute("data-acv-active-area"))return!0;t=t.parentNode}return!1},r._onClick=function(t){this._hasFocus=!1,this._onUserInteraction(t)},r._onFullscreenWillExit=function(){this.controls&&(this.controls.el.display="none")},r._onFullscreenChange=function(){this.controls&&(this.controls.el.display=""),this._hideControls(),this._lowerControls(),this._preventUserInteraction=!0,setTimeout(function(){this._preventUserInteraction=!1,this._player.refreshSize()}.bind(this),750),this._player.refreshSize()},r._onFocusIn=function(t){clearTimeout(this._focusOutTimer),this._focusOutTimer=null,this._hasFocus=!0,this._onUserInteraction(t)},r._onFocusOut=function(t){this._focusOutTimer=setTimeout(function(){this._hasFocus&&!this.el.contains(document.activeElement)&&(this._hasFocus=!1,this._hideControls(),this._lowerControls())}.bind(this),100)},r.destroy=function(){this._removeEventListeners()},e.exports=i},{}],208:[function(t,e,n){"use strict";var i=t("./DefaultControlsInteraction"),r=30,o=500,s=3e3,a=function(t){i.call(this,t),this._showCompass=t.showCompass,this._hideCompass=t.hideCompass,this._threesixtyElementsTimeoutDuration=t.threesixtyElementsTimeoutDuration||s,this._dragEndThreshold=o,this._mouseDownPosition=null},u=i.prototype,l=a.prototype=Object.create(u);l._bindMethods=function(){u._bindMethods.apply(this,arguments),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onDragging=this._onDragging.bind(this),this._onClick=this._onClick.bind(this)},l._addEventListeners=function(){u._addEventListeners.apply(this,arguments),this._controls.el.addEventListener("mousedown",this._onMouseDown),this._controls.el.addEventListener("click",this._onClick)},l._removeEventListeners=function(){u._removeEventListeners.apply(this,arguments),
this._controls.el.removeEventListener("mousedown",this._onMouseDown)},l._onUserInteraction=function(t){this._userWasRecentlyDragging||t&&"mousemove"===t.type&&this._lastMouseCoords.x===t.screenX&&this._lastMouseCoords.y===t.screenY||this._dragging||(this._showCompass(),clearTimeout(this._userHideMouse),u._onUserInteraction.apply(this,arguments))},l._onUserInteractionTimeout=function(){u._onUserInteractionTimeout.apply(this,arguments),clearTimeout(this._userHideMouse),this._userHideMouse=setTimeout(function(){this._hideCompass()}.bind(this),this._threesixtyElementsTimeoutDuration)},l._onDragging=function(t){!this._dragging&&this._isActiveArea(t.target)||(this._dragging=!0,this._player.el.classList.add("dragging"),this._player.el.classList.add("recently-dragging"),this._recentDragTimeout=setTimeout(function(){this._dragging&&(this._hideControls(),this._userWasRecentlyDragging=!0,clearTimeout(this._dragTimer),this._dragTimer=setTimeout(function(){this._userWasRecentlyDragging=!1,this._player.el.classList.remove("recently-dragging")}.bind(this),this._dragEndThreshold))}.bind(this),r),clearTimeout(this._userInteractionTimeout),clearTimeout(this._userHideMouse))},l._isDraggable=function(t){var e=[this._player.controls.compass.el,this._player.controls.playButtonElement];return e.indexOf(t)!==-1||this._player.controls.compass.el.contains(t)},l._onMouseDown=function(t){this._isActiveArea(t.target)&&this._controlsVisible()&&!this._isDraggable(t.target)||!this._isPlayingState()||(this._showControls(),clearTimeout(this._userHideMouse),clearTimeout(this._recentDragTimeout),this._player.el.classList.remove("dragging"),this._player.el.classList.remove("recently-dragging"),this._mouseDownPosition={x:t.x,y:t.y},window.addEventListener("mouseup",this._onMouseUp),window.addEventListener("mousemove",this._onDragging),this._sendMouseDown(t))},l._onMouseUp=function(t){window.removeEventListener("mousemove",this._onDragging),window.removeEventListener("mouseup",this._onMouseUp),this._dragging&&this._onUserInteractionTimeout(),this._player.el.contains(t.target)||this._hideCompass(),this._player.el.classList.remove("dragging"),this._dragging=!1},l._onMouseLeave=function(t){u._onMouseLeave.apply(this,arguments),this._userWasRecentlyDragging=!1,this._dragging||(clearTimeout(this._userHideMouse),this._hideCompass())},l._onClick=function(t){this._player.controls.compass.el.contains(t.target)&&this._userWasRecentlyDragging&&t.stopPropagation(),t.target!==this._player.controls.playButtonElement.parentElement&&t.target!==this._controls.el.firstElementChild||null===this._mouseDownPosition||this._mouseDownPosition.x!==t.x||this._mouseDownPosition.y!==t.y||(this._mouseDownPosition=null,this._mouseDownTime=1/0,this._dragging=!1,this._userWasRecentlyDragging=!1,clearTimeout(this._dragTimer),clearTimeout(this._recentDragTimeout))},l._isPlayingState=function(){return!this._player.controls.el.classList.contains("start-state")&&!this._player.controls.el.classList.contains("end-state")},e.exports=a},{"./DefaultControlsInteraction":207}],209:[function(t,e,n){"use strict";var i=t("./ThreeSixtyControlsInteraction"),r=function(t){i.call(this,t),this._controlsVisible=t.controlsVisible},o=i.prototype,s=r.prototype=Object.create(o);s._bindMethods=function(){o._bindMethods.apply(this,arguments),this._onTouchStart=this._onTouchStart.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onClick=this._onClick.bind(this)},s._addEventListeners=function(){this._controls.el.addEventListener("touchstart",this._onTouchStart,{passive:!1}),this._controls.el.addEventListener("click",this._onClick),this._controls.el.addEventListener("focusin",this._onFocusIn),this._controls.el.addEventListener("focusout",this._onFocusOut)},s._removeEventListeners=function(){this._controls.el.removeEventListener("touchstart",this._onTouchStart),this._controls.el.removeEventListener("touchend",this._onTouchEnd),this._controls.el.removeEventListener("click",this._onClick),this._controls.el.removeEventListener("focusin",this._onFocusIn),this._controls.el.removeEventListener("focusout",this._onFocusOut)},s._onDragging=function(t){o._onDragging.apply(this,arguments)},s._shouldIgnoreUserInteraction=function(t){return!1},s._onClick=function(t){t.target!==this._player.controls.compass.compassView&&(this._controlsVisible()?this._isActiveArea(t.target)||(this._hideControls(),this._hideCompass()):this._onUserInteraction(t))},s._onTouchStart=function(t){t.target!==this._player.controls.playButtonElement&&t.target!==this._controls.el.firstElementChild&&t.target!==this._player.controls.compass.compassView&&t.target!==this._player.controls.playButtonElement||(document.addEventListener("touchend",this._onTouchEnd),window.addEventListener("touchmove",this._onDragging),this._showCompass(),this._touchDownTime=Date.now(),this._sendMouseDown(t))},s._onTouchEnd=function(t){document.removeEventListener("touchend",this._onTouchEnd),window.removeEventListener("touchmove",this._onDragging),this._onMouseUp(t)},e.exports=r},{"./ThreeSixtyControlsInteraction":208}],210:[function(t,e,n){"use strict";var i=t("@marcom/useragent-detect"),r=i.os.ios||i.os.android,o=t("./DefaultControlsInteraction"),s=t("./ThreeSixtyControlsInteraction"),a=t("./ThreeSixtyMobileControlsInteraction"),u=function(t){return t.threesixty?r?new a(t):new s(t):new o(t)};e.exports=u},{"./DefaultControlsInteraction":207,"./ThreeSixtyControlsInteraction":208,"./ThreeSixtyMobileControlsInteraction":209,"@marcom/useragent-detect":284}],211:[function(t,e,n){"use strict";var i=t("../../dom-emitter/DOMEmitterMicro"),r=function(t){i.apply(this,arguments)};r.prototype=Object.create(i.prototype),e.exports=r},{"../../dom-emitter/DOMEmitterMicro":173}],212:[function(t,e,n){"use strict";var i=function(t){this.el=t},r=i.prototype;r.show=function(){this.el.classList.remove("hidden")},r.hide=function(){this.el.classList.add("hidden")},r.destroy=function(t){},e.exports=i},{}],213:[function(t,e,n){"use strict";var i=function(t){this.el=t},r=i.prototype;r.setText=function(t){this.el.innerHTML=t},e.exports=i},{}],214:[function(t,e,n){"use strict";var i=t("../../dom-emitter/DOMEmitterMicro"),r=t("@marcom/ac-keyboard/Keyboard"),o=t("@marcom/ac-keyboard/keyMap"),s=function(t){this.el=t,i.call(this,t),this._keyboard=new r(this.el),this._addEventListeners()},a=s.prototype=Object.create(i.prototype);a._addEventListeners=function(){this._onClick=this._onClick.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this.el.addEventListener("click",this._onClick),this._keyboard.onDown(o.ARROW_UP,this._onKeyDown),this._keyboard.onDown(o.ARROW_DOWN,this._onKeyDown)},a._removeEventListeners=function(){this.el.removeEventListener("click",this._onClick),this._keyboard.onDown(o.ARROW_UP,this._onKeyDown),this._keyboard.onDown(o.ARROW_DOWN,this._onKeyDown)},a.setItems=function(t){var e;this.el.innerHTML="",t.forEach(function(t){var n=document.createElement("li");n.setAttribute("role","radio"),"showing"===t.mode?(n.classList.add(t.mode),n.setAttribute("aria-checked","true"),n.setAttribute("tabIndex",0),e=n):(n.setAttribute("aria-checked","false"),n.setAttribute("tabIndex",-1)),n.innerText=t.label,n.acvMetadata=t,this.el.appendChild(n)}.bind(this)),e&&e.focus()},a._onKeyDown=function(t){var e=t.target,n=!1;parseInt(t.keyCode)===o.ARROW_DOWN?n=e.nextSibling:parseInt(t.keyCode)===o.ARROW_UP&&(n=e.previousSibling),n&&(this.trigger("ItemSelected",n.acvMetadata),t.preventDefault(),t.stopPropagation())},a._onClick=function(t){this.el!==t.target&&this.el.contains(t.target)&&this.trigger("ItemSelected",t.target.acvMetadata)},a.destroy=function(){this._removeEventListeners()},e.exports=s},{"../../dom-emitter/DOMEmitterMicro":173,"@marcom/ac-keyboard/Keyboard":89,"@marcom/ac-keyboard/keyMap":91}],215:[function(t,e,n){"use strict";var i=t("@marcom/ac-slider").Slider,r="ac-slider-inactive",o=function(t,e){if(this.el=t,this._min=e.min||0,this._max=e.max||1,e.mixins)for(var n=e.mixins.slice(0);n.length;)Object.assign(this,n.pop());this._slider=new i(this.el,{template:e.template,min:this._min,max:this._max,step:isNaN(+this.el.getAttribute("step"))?this.el.getAttribute("step"):+this.el.getAttribute("step"),value:void 0!==e.value?e.value:+this.el.getAttribute("value"),orientation:e.orientation,renderedPosition:!0,keyboardContext:this.el}),this._onFocusChange=this._onFocusChange.bind(this),this._setHoveringValue=this._setHoveringValue.bind(this),this._onMouseOver=this._onMouseOver.bind(this),this._onMouseLeave=this._onMouseLeave.bind(this),this._slider.el.addEventListener("blur",this._onFocusChange),this._slider.el.addEventListener("focus",this._onFocusChange),this._slider.el.addEventListener("mouseout",this._onFocusChange),this.forceCursorPointer=this.forceCursorPointer.bind(this),this.disableForcedCursorPointer=this.disableForcedCursorPointer.bind(this),this._slider.on("grab",this.forceCursorPointer),this._slider.on("release",this.disableForcedCursorPointer),this._scrubbedEl=this.el.querySelector(".ac-slider-scrubbed"),this._notchEl=this.el.querySelector(".ac-slider-hover-notch"),this._notchEl&&(this._slider.el.addEventListener("mouseover",this._onMouseOver),this._slider.el.addEventListener("mouseleave",this._onMouseLeave),this._slider.el.addEventListener("mousemove",this._setHoveringValue)),e.value&&requestAnimationFrame(function(){this._slider&&this.setValue(e.value)}.bind(this))},s=o.prototype;s.on=function(){return this._slider.on.apply(this._slider,arguments)},s.off=function(){return this._slider.off.apply(this._slider,arguments)},s.trigger=function(){return this._slider.trigger.apply(this._slider,arguments)},s.setValue=function(t){return this._slider.setValue.call(this._slider,t)},s.setAriaValueText=function(t){this._slider.el.setAttribute("aria-valuetext",t)},s.setMin=function(t){this._min=t,this._slider.setMin(t)},s.setMax=function(t){this._max=t,this._slider.setMax(t)},s._onMouseOver=function(){this._slider.el.classList.add("hover")},s._onMouseLeave=function(){this._slider.el.classList.remove("hover")},s._onFocusChange=function(){setTimeout(function(){this.trigger("focuschange")}.bind(this),0)},s.isFocused=function(){return this._slider.el===document.activeElement&&this._hasFocusOutline()},s._hasFocusOutline=function(){return"none"!==getComputedStyle(this._slider.el).getPropertyValue("outline-style")},s.getValue=function(){return this._slider.getValue.apply(this._slider,arguments)},s.getMax=function(){return this._max},s.setScrubbedValue=function(){"horizontal"===this._slider.getOrientation()?this._scrubbedEl.style.left=this._slider.thumbElement.style.left:this._scrubbedEl.style.bottom=this._slider.thumbElement.style.bottom},s._setHoveringValue=function(t){var e=this.getClientXValue(t,this._notchEl);this._notchEl.style.left=e/this.getMax()*100+"%",this._setNotchColor(e)},s._setNotchColor=function(t){t>this.getValue()?this._notchEl.style.backgroundColor="#fff":this._notchEl.style.backgroundColor="#333"},s.show=function(){this.el.classList.remove(r)},s.hide=function(){this.el.classList.add(r)},s.setState=function(t){this.el.classList.add(t)},s.clearState=function(t){this.el.classList.remove(t)},s.getClientXValue=function(t,e){return this._slider.getClientXValue(t,e)},s.destroy=function(){this._slider.el.removeEventListener("mousemove",this._setHoveringValue),this._slider.el.removeEventListener("mouseleave",this._onMouseOver),this._slider.el.removeEventListener("mouseout",this._onMouseLeave),this._slider.el.removeEventListener("blur",this._onFocusChange),this._slider.el.removeEventListener("focus",this._onFocusChange),this._slider.el.removeEventListener("mouseout",this._onFocusChange),this._slider.off("grab",this.forceCursorPointer),this._slider.off("release",this.disableForcedCursorPointer),this._slider.destroy(),this._slider=null},e.exports=o},{"@marcom/ac-slider":131}],216:[function(t,e,n){"use strict";var i=t("./Button"),r=function(t,e){i.apply(this,arguments),this._states=e.states||{},this._labels=e.labels,this._focusTarget=this.el.querySelector("button")||this.el,this._states&&this._states.initial&&this.setState("initial")},o=r.prototype=Object.create(i.prototype);o.setState=function(t){this._currentState&&this._currentState!==t&&this._states[this._currentState].length&&this.el.classList.remove(this._states[this._currentState]),this._currentState=t,this._labels&&this._labels[this._currentState]&&(this._focusTarget.value=this._labels[this._currentState],this._focusTarget.setAttribute("aria-label",this._labels[this._currentState])),this._states[t].length&&this.el.classList.add(this._states[t])},e.exports=r},{"./Button":211}],217:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function h(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:h(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},l=t("./StatefulButton"),c=function(t){function e(t,n){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return o(e,t),a(e,[{key:"setState",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setState",this).call(this,t),"on"===this._currentState?this._focusTarget.setAttribute("aria-pressed",!0):this._focusTarget.setAttribute("aria-pressed",!1)}}]),e}(l);e.exports=c},{"./StatefulButton":216}],218:[function(t,e,n){"use strict";var i="cursor-pointer";e.exports={disableForcedCursorPointer:function(){document.body.classList.remove(i),this.onSelectStartResumeDefault()},forceCursorPointer:function(){document.body.classList.add(i),this.onSelectStartPreventDefault()},onSelectStartResumeDefault:function(){document.removeEventListener("selectstart",this.preventDefault)},onSelectStartPreventDefault:function(){document.addEventListener("selectstart",this.preventDefault)},preventDefault:function(t){t.preventDefault()}}},{}],219:[function(t,e,n){"use strict";var i="hidden",r='<a class="end-state-link hidden"></a>\n',o=function(t){this.el=t.el,this.el.innerHTML=r,this._player=t.player,this._bindContent(t)},s=o.prototype;s._bindContent=function(t){if("link"===t.type||"video"===t.type){var e=this.el.querySelector(".end-state-link"),n=document.createElement("div");e.classList.remove(i),n.classList.add("end-state-text-container"),n.innerText=t.label||"",e.href=t.url||"",e.appendChild(n),"link"===t.type?e.classList.add("icon","icon-after","icon-chevronright"):"video"===t.type&&e.classList.add("icon","icon-after","icon-playcircle"),this._bindAction(this.el,t)}},s._bindAction=function(t,e){"function"==typeof e.onclick?t.onclick=function(t){t.preventDefault(),e.onclick.call(null,t)}.bind(this):"video"===e.type&&e.url&&(t.onclick=function(t){t.preventDefault(),this._player.load(e.url,null,0,{})}.bind(this))},s.destroy=function(){},e.exports=o},{}],220:[function(t,e,n){"use strict";var i=t("./EndStateItem"),r=function(t){this.el=t.el,this._player=t.player,this._addItems(t.items||[])},o=r.prototype;o._addItems=function(t){this._items=[],t.forEach(function(t){var e=document.createElement("div");e.classList.add("end-state-item");var n=new i(Object.assign({},t,{el:e,player:this._player}));this.el.appendChild(e),this._items.push(n)}.bind(this))},o.setData=function(t){for(;this._items.length;)this._items.pop().destroy();this.el.innerHTML="",t?(this.el.classList.remove("hidden"),this._addItems(t.items)):this.el.classList.add("hidden")},o.destroy=function(){for(;this._items.length;)this._items.pop().destroy()},e.exports=r},{"./EndStateItem":219}],221:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e){i(this,t),this.el=document.createElement("div"),this.el.classList.add("error-state-wrapper")}return r(t,[{key:"setText",value:function(t){this._errorStr=t,this.render(),this._container=this.el.firstElementChild}},{key:"focus",value:function(){this._container.firstElementChild.focus()}},{key:"render",value:function(){this.el.innerHTML='<div class="error-state-container" >\n\t\t\t<div tabindex="-1" role="text" class="error-state-message">'+this._errorStr+"</div>\n\t\t</div>\n\t\t"}}]),t}();e.exports=o},{}],222:[function(t,e,n){"use strict";var i=function(t,e,n){return new e.classDef(t,Object.assign(e.options||{},n||{}))},r=function(t,e,n){return function(i){t[e](i,n)}},o=function(t,e){var n=e.handlers||{},i={};for(var o in n)n.hasOwnProperty(o)&&t.on(o,i[o]=r(n,o,t));var s,a=e.observe;if(a){for(var u=a.update,l=a.source,c=l.on.bind(l)||l.addEventListener,h=l.off.bind(l)||l.removeEventListener,f=a.events,d=0,p=f.length,m=function(){u.call(a,t)};d<p;d++)o=f[d],c(o,m);s=function(){for(d=0;d<p;d++)o=f[d],h(o,m)}}var y=function(){for(var e in i)i.hasOwnProperty(e)&&t.off(e,i[e]);s&&s()};return{destroy:y}};e.exports=function(t,e,n){return e.classDef?i(t,e,n):o(t,e,n)}},{}],223:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":i(t)},o=t("./createView"),s=t("./createBehavior"),a=function(t,e){"function"==typeof e.destroy&&e.destroy(),"function"==typeof t.destroy&&t.destroy()},u=function(t){for(;t.length;)t.shift().destroy()},l=function(t){for(var e in t)t.hasOwnProperty(e)&&(u(t[e]),delete t[e])},c=function(t,e,n){var i=o(t,e.view),r=s(i,e.behavior,n);return{view:i,behavior:r,destroy:a.bind(null,i,r)}};e.exports=function(t,e,n){var i={};for(var o in e)if(e.hasOwnProperty(o)&&"object"===r(e[o])){var s=e[o],a=e.elementClassPrefix?"."+e.elementClassPrefix+"-"+s.className:"."+s.className,u=t.querySelectorAll(a);i[o]=[];for(var h=0,f=u.length;h<f;h++)i[o].push(c(u[h],s,n))}return{components:i,destroy:l.bind(null,i)}}},{"./createBehavior":222,"./createView":224}],224:[function(t,e,n){"use strict";e.exports=function(t,e){return new e.classDef(t,e.options)}},{}],225:[function(t,e,n){"use strict";var i=t("@marcom/ac-keyboard/Keyboard"),r=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,o=32,s=37,a=38,u=39,l=40,c=function(t){r.call(this),this._player=t.player,this._target=t.keyboardTarget||this._player.el,this._keyboard=new i(this._target),this._bindMethods(),this._addEventListeners()},h=r.prototype,f=c.prototype=Object.create(h);f._bindMethods=function(){this._onLeftArrowDown=this._onLeftArrowDown.bind(this),this._onRightArrowDown=this._onRightArrowDown.bind(this),this._onUpArrowDown=this._onUpArrowDown.bind(this),this._onDownArrowDown=this._onDownArrowDown.bind(this),this._onSpaceBarUp=this._onSpaceBarUp.bind(this),this._onSpaceBarDown=this._onSpaceBarDown.bind(this),this._onKeyboardInteraction=this._onKeyboardInteraction.bind(this),this._onDurationChange=this._onDurationChange.bind(this),this._boundKeyboardInteraction={},[o,s,u,a,l].forEach(function(t){this._boundKeyboardInteraction[t]=this._onKeyboardInteraction.bind(this,t)}.bind(this))},f._addEventListeners=function(){[o,s,u,a,l].forEach(function(t){this._keyboard.onDown(t,this._boundKeyboardInteraction[t])}.bind(this)),this._keyboard.onDown(o,this._onSpaceBarDown),this._keyboard.onDown(s,this._onLeftArrowDown),this._keyboard.onDown(u,this._onRightArrowDown),this._keyboard.onDown(a,this._onUpArrowDown),this._keyboard.onDown(l,this._onDownArrowDown),this._player.on("durationchange",this._onDurationChange)},f._removeEventListeners=function(){[o,s,u,a,l].forEach(function(t){this._keyboard.offDown(t,this._boundKeyboardInteraction[t])}.bind(this)),this._boundKeyboardInteraction=null,this._keyboard.offDown(o,this._onSpaceBarDown),this._keyboard.offUp(o,this._onSpaceBarUp),this._keyboard.offDown(s,this._onLeftArrowDown),this._keyboard.offDown(u,this._onRightArrowDown),this._keyboard.offDown(a,this._onUpArrowDownDown),this._keyboard.offDown(l,this._onDownArrowDown),this._player.off("durationchange",this._onDurationChange)},f._onKeyboardInteraction=function(){this._triggerKeyboardInteraction()},f._triggerKeyboardInteraction=function(){this.trigger("keyboardinteraction")},f._onDurationChange=function(){var t=this._player.getDuration();t>=60?this._interval=10:t>=20?this._interval=5:this._interval=1},f._onLeftArrowDown=function(t){t.originalEvent.preventDefault(),t.originalEvent.stopPropagation();var e=this._player.getCurrentTime();isNaN(e)||this._player.seek(Math.max(e-this._interval,0))},f._onRightArrowDown=function(t){t.originalEvent.preventDefault(),t.originalEvent.stopPropagation();var e=this._player.getCurrentTime();isNaN(e)||this._player.seek(Math.min(e+this._interval,this._player.getDuration()))},f._onUpArrowDown=function(t){if(!t.target.hasAttribute("aria-checked")){t.originalEvent.preventDefault(),t.originalEvent.stopPropagation();var e=this._player.getMuted()?0:this._player.getVolume(),n=Math.min(1,e+.1);this._player.setVolume(n),this._player.setMuted(!1)}},f._onDownArrowDown=function(t){if(!t.target.hasAttribute("aria-checked")){t.originalEvent.preventDefault(),t.originalEvent.stopPropagation();var e=this._player.getMuted()?0:this._player.getVolume(),n=Math.max(0,e-.1);this._player.setVolume(n),this._player.setMuted(0===Math.round(10*n))}},f._onSpaceBarDown=function(t){"BUTTON"!==t.target.tagName&&"button"!==t.target.getAttribute("role")&&(this._keyboard.offDown(o,this._onSpaceBarDown),this._keyboard.onUp(o,this._onSpaceBarUp))},f._onSpaceBarUp=function(){this._keyboard.offUp(o,this._onSpaceBarUp),this._player.getPaused()?this._player.play():this._player.pause(),this._keyboard.onDown(o,this._onSpaceBarDown)},f.destroy=function(){this._removeEventListeners(),this._keyboard.destroy(),h.destroy.call(this)},e.exports=c},{"@marcom/ac-event-emitter-micro":66,"@marcom/ac-keyboard/Keyboard":89}],226:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function _(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:_(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},l=t("./KeyboardControl"),c=["controls-toggle-mute-volume-button","controls-volume-level-indicator"],h="controls-progress-indicator",f=37,d=38,p=39,m=40,y=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),o=n._player.get360();return n._arrowControls=!o||o.arrowControls,n}return o(e,t),a(e,[{key:"_bindMethods",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_bindMethods",this).call(this),this._onLeftArrowUp=this._onLeftArrowUp.bind(this),this._onRightArrowUp=this._onRightArrowUp.bind(this),this._onDownArrowUp=this._onDownArrowUp.bind(this),this._onUpArrowUp=this._onUpArrowUp.bind(this)}},{key:"_addEventListeners",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_addEventListeners",this).call(this),this._keyboard.onUp(f,this._onLeftArrowUp),this._keyboard.onUp(p,this._onRightArrowUp),this._keyboard.onUp(d,this._onUpArrowUp),this._keyboard.onUp(m,this._onDownArrowUp)}},{key:"_removeEventListeners",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_removeEventListeners",this).call(this),this._keyboard.offUp(f,this._onLeftArrowUp),this._keyboard.offUp(p,this._onRightArrowUp),this._keyboard.offUp(d,this._onUpArrowUp),this._keyboard.offUp(m,this._onDownArrowUp)}},{key:"_onLeftArrowDown",value:function(t){return t.target.classList.contains(h)?(this._triggerKeyboardInteraction(),void u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onLeftArrowDown",this).call(this,t)):void this._arrowControls.leftArrowDown(t)}},{key:"_onRightArrowDown",value:function(t){return t.target.classList.contains(h)?(this._triggerKeyboardInteraction(),void u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onRightArrowDown",this).call(this,t)):void this._arrowControls.rightArrowDown(t)}},{key:"_onUpArrowDown",value:function(t){return t.target.classList.contains(c[0])||t.target.classList.contains(c[1])?(this._triggerKeyboardInteraction(),void u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onUpArrowDown",this).call(this,t)):(t.originalEvent.preventDefault(),void this._arrowControls.upArrowDown(t))}},{key:"_onDownArrowDown",value:function(t){return t.target.classList.contains(c[0])||t.target.classList.contains(c[1])?(this._triggerKeyboardInteraction(),void u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onDownArrowDown",this).call(this,t)):(t.originalEvent.preventDefault(),void this._arrowControls.downArrowDown(t))}},{key:"_onLeftArrowUp",value:function(t){return t.target.classList.contains(h)?void this._triggerKeyboardInteraction():(t.originalEvent.preventDefault(),void this._arrowControls.leftArrowUp(t))}},{key:"_onRightArrowUp",value:function(t){return t.target.classList.contains(h)?void this._triggerKeyboardInteraction():(t.originalEvent.preventDefault(),void this._arrowControls.rightArrowUp(t))}},{key:"_onUpArrowUp",value:function(t){return t.target.classList.contains(h)?void this._triggerKeyboardInteraction():void this._arrowControls.upArrowUp(t)}},{key:"_onDownArrowUp",value:function(t){return t.target.classList.contains(h)?void this._triggerKeyboardInteraction():void this._arrowControls.downArrowUp(t)}},{key:"_onKeyboardInteraction",value:function(t){}},{key:"destroy",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}(l);e.exports=y},{"./KeyboardControl":225}],227:[function(t,e,n){"use strict";var i,r;e.exports=function(e){return e.threesixty?(i||(i=t("./ThreeSixtyKeyboardControl")),new i(e)):(r||(r=t("./KeyboardControl")),new r(e))}},{"./KeyboardControl":225,"./ThreeSixtyKeyboardControl":226}],228:[function(t,e,n){"use strict";e.exports={backthirtyseconds:"Back 30 Seconds",playpause:"Play/Pause",play:"Play",pause:"Pause",togglemutevolume:"Toggle Mute Volume",mutevolume:"Mute Volume",minvolume:"Minimum Volume",adjustvolume:"Adjust Volume",fastreverse:"Fast Reverse",fastforward:"Fast Forward",fullvolume:"Full Volume",fullscreen:"Full Screen",exitfullscreen:"Exit Full Screen",airplay:"AirPlay",captionscontrol:"Closed Captions",captionsturnedon:"Closed Captions On",captionsturnedoff:"Closed Captions Off",subtitlescontrol:"Subtitles",subtitlesturnedon:"Subtitles On",subtitlesturnedoff:"Subtitles Off",sizescontrol:"Video Size",downloadcontrol:"Download Video",share:"Share",small:"Small",medium:"Medium",large:"Large",hd:"HD",ipod:"iPod/iPhone",mb:"MB",gb:"GB",tb:"TB",downloadquicktimetitle:"Get QuickTime.",downloadquicktimetext:"Download QuickTime to view this video. QuickTime is free for Mac + PC.",downloadquicktimebutton:"Download",downloadquicktimeurl:"https://www.apple.com/quicktime/download/",elapsed:"elapsed",remaining:"remaining",currenttimetext:"{minutes} minutes and {seconds} seconds",pictureinpicture:"Picture-in-Picture",exitpictureinpicture:"Exit Picture-in-Picture",closesharing:"Close Sharing",facebookshare:"Share to Facebook",twittershare:"Share to Twitter",copylink:"Copy Link",copyembed:"Copy Embed Code",copyarea:"Copy Link Text Area",selectlink:"Select Link Text",selectembed:"Select Embed Code",close:"Close",dismisscopy:"Dismiss Copy",replay:"Replay",livestream:"Live Streaming",newwindow:"Opens in New Window",threesixtyicon:"Return 360 Point of View to Origin",threesixtyleft:"Move 360 Point of View Left",threesixtyright:"Move 360 Point of View Right",threesixtyup:"Move 360 Point of View Up",threesixtydown:"Move 360 Point of View Down",error:"The video could not be played"}},{}],229:[function(t,e,n){"use strict";var i,r=t("./Translations"),o=t("./DefaultLabelStrings"),s=window.document.documentElement;try{i=window.top.document.documentElement}catch(a){i=s}var u=t("@marcom/ac-ajax-xhr"),l="m",c="/global/ac_"+l+"edia_player/scripts/ac_"+l+"edia_languages/",h="en-US",f={},d=function(t){var e;try{e=t||i.getAttribute("lang")}catch(n){e=s.getAttribute("lang")}var r;if(e)switch(e.toLowerCase()){case"es-418":r="es-LA";break;case"pt":r="pt-BR";break;default:r=e}else r=h;return r},p=function(t){return t=d(t),void 0!==f[t]},m=function(t){t=t||{};var e=d(t.lang);if(p(e))return t.callback?(t.callback(f[e]),null):f[e];if(!t.callback)throw new Error("To use Localization.getTranslation you must either pass a callback or ensure the translation is ready via Localization.translationReady");var n=t.basePath||c,i=r[e]?n+r[e]:n+r[h],s=o;return u.get(i,{success:function(n){s=Object.assign(s,JSON.parse(n)),f[e]=s,t.callback(s)},error:function(){f[e]=s,t.callback(s)}}),null};e.exports={getLanguage:d,getTranslation:m,translationReady:p}},{"./DefaultLabelStrings":228,"./Translations":230,"@marcom/ac-ajax-xhr":20}],230:[function(t,e,n){"use strict";e.exports={"bg-BG":"bg-BG.json","cs-CZ":"cs-CZ.json","el-GR":"el-GR.json","de-AT":"de-AT.json","de-CH":"de-CH.json","de-DE":"de-DE.json","de-LI":"de-LI.json","da-DK":"da-DK.json",en:"en.json","en-US":"en-US.json","en-AP":"en-AP.json","en-CA":"en-CA.json","en-GB":"en-GB.json","en-HK":"en-HK.json","en-IE":"en-IE.json","en-IN":"en-IN.json","en-KR":"en-KR.json","en-AU":"en-AU.json","en-NZ":"en-NZ.json","en-SG":"en-SG.json","en-ZA":"en-ZA.json",es:"es.json","es-LA":"es-LA.json","es-MX":"es-MX.json","es-ES":"es-ES.json","et-EE":"et-EE.json","fi-FI":"fi-FI.json",fr:"fr.json","fr-BE":"fr-BE.json","fr-CA":"fr-CA.json","fr-CH":"fr-CH.json","fr-FR":"fr-FR.json","hr-HR":"hr-HR.json","hu-HU":"hu-HU.json",
"it-IT":"it-IT.json",ja:"ja.json","ja-JP":"ja-JP.json","ko-KR":"ko-KR.json","lt-LT":"lt-LT.json","lv-LV":"lv-LV.json","nl-BE":"nl-BE.json","nl-NL":"nl-NL.json","no-NO":"no-NO.json","pl-PL":"pl-PL.json",pt:"pt.json","pt-BR":"pt-BR.json","pt-PT":"pt-PT.json","ro-RO":"ro-RO.json","ru-RU":"ru-RU.json","sk-SK":"sk-SK.json","sv-SE":"sv-SE.json","tr-TR":"tr-TR.json",zh:"zh.json","zh-CN":"zh-CN.json","zh-HK":"zh-HK.json","zh-TW":"zh-TW.json"}},{}],231:[function(t,e,n){"use strict";var i=t("./PopUp"),r=function(t){this.el=t.el,this._player=t.player,this._popUp=new i(t),this.el.appendChild(this._popUp.el)},o=r.prototype;o.setData=function(t){this._popUp.setData(t)},o.show=function(){this.el.classList.remove("hidden")},o.hide=function(){this.el.classList.add("hidden")},o.destroy=function(){},e.exports=r},{"./PopUp":232}],232:[function(t,e,n){"use strict";var i='<div class="ac-video-trickplay hidden" aria-hidden="true">\n    <div class="ac-video-trickplay-image">\n    </div>\n    <div class="ac-video-trickplay-time"></div>\n</div>\n',r=t("../../utils/Time"),o=t("./ThumbnailHandler"),s=t("@marcom/ac-function/throttle"),a=5,u=function(t){this._player=t.player,this.el=document.createElement("div"),this.el.style.opacity="0",this.el.innerHTML=i,this._thumbnailHandler=new o({el:this.el.querySelector(".ac-video-trickplay-image"),player:this._player,numberOfImages:t.numberOfImages}),this._timeLabel=this.el.querySelector(".ac-video-trickplay-time"),this._bindMethods(),this._addEventListeners()},l=u.prototype;l._initPointerTracking=function(){this._scrubberView=this._player.controls.scrubberView,this._scrubberView&&(this._runnableTrack=this._scrubberView.el.querySelector(".ac-slider-runnable-track"),this._calcOffsets(),this._scrubberView.el.addEventListener("mouseover",this._show),this._scrubberView.el.addEventListener("mouseout",this._hide),this._scrubberView.el.addEventListener("mousedown",this._startScrubbing),this._scrubberView.el.addEventListener("mouseup",this._endScrubbing),this._scrubberView.el.addEventListener("mousemove",this._onTrackerUpdate),this._scrubberView.el.addEventListener("mousemove",this._setThumbnail),this._player.on("resize",this._calcOffsets),window.addEventListener("resize",this._calcOffsets))},l._bindMethods=function(){this._show=this._show.bind(this),this._hide=this._hide.bind(this),this._onDurationChange=this._onDurationChange.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._startScrubbing=this._startScrubbing.bind(this),this._endScrubbing=this._endScrubbing.bind(this),this._initPointerTracking=this._initPointerTracking.bind(this),this._onTrackerUpdate=this._onTrackerUpdate.bind(this),this._setThumbnail=this._setThumbnail.bind(this),this._calcOffsets=this._calcOffsets.bind(this),this._debouncedCalcOffsets=s(this._calcOffsets,30)},l._startScrubbing=function(t){this._thumbnailHandler.el.classList.add("hidden"),this._scrubberView.el.removeEventListener("mousemove",this._setThumbnail),this._scrubberView.el.removeEventListener("mouseout",this._hide),document.addEventListener("mouseup",this._endScrubbing),document.addEventListener("mousemove",this._onTrackerUpdate)},l._endScrubbing=function(t){t.target===this._scrubberView.el&&this._hide(),this._scrubberView.el.addEventListener("mousemove",this._setThumbnail),this._scrubberView.el.addEventListener("mouseout",this._hide),document.removeEventListener("mouseup",this._endScrubbing),document.removeEventListener("mousemove",this._onTrackerUpdate),this._setThumbnail(t),this._thumbnailHandler.el.classList.remove("hidden")},l._calcOffsets=function(){this._onLoadedMetaData();var t=this._player.el.getBoundingClientRect();this._offsetLeft=t.left;var e=this._runnableTrack.getBoundingClientRect();this._leftBoundary=e.left-this._offsetLeft+a,this._rightBoundary=this._leftBoundary+e.width-a-2,this._imgWidth=this.el.firstElementChild.getBoundingClientRect().width},l._onLoadedMetaData=function(){var t=this._player.getMediaElement().videoWidth,e=this._player.getMediaElement().videoHeight,n=this._player.getMediaElement().src.indexOf("-tft-")!==-1;this.el.classList.remove("square-video"),this.el.classList.remove("vertical-video"),this.el.classList.remove("tft-video"),n?(this.el.classList.add("tft-video"),this._thumbnailHandler.setVertical(!1)):t<e?(this.el.classList.add("vertical-video"),this._thumbnailHandler.setVertical(!0)):t===e?(this.el.classList.add("square-video"),this._thumbnailHandler.setVertical(!1)):this._thumbnailHandler.setVertical(!1)},l._addEventListeners=function(){this._player.on("durationchange",this._onDurationChange),this._player.once("controlsready",this._initPointerTracking),this._player.on("loadedmetadata",this._calcOffsets)},l._removeEventListeners=function(){this._player.off("durationchange",this._onDurationChange),this._player.off("controlsready",this._initPointerTracking),this._player.off("timeupdate",this._calcOffsets),this._player.off("resize",this._debouncedCalcOffsets),window.removeEventListener("resize",this._debouncedCalcOffsets),this._scrubberView.el.removeEventListener("mouseover",this._show),this._scrubberView.el.removeEventListener("mouseout",this._hide),this._scrubberView.el.removeEventListener("mousemove",this._onTrackerUpdate),this._scrubberView.el.removeEventListener("mousemove",this._setThumbnail)},l._onTrackerUpdate=function(t){this._calcOffsets();var e=Math.min(Math.max(t.clientX-this._offsetLeft,this._leftBoundary),this._rightBoundary);this.el.firstElementChild.style.left=e-this._imgWidth/2+"px";var n=this._scrubberView.getClientXValue(t);this._player.getReadyState()<=2?this._cachedTrackerUpdate=t:this._cachedTrackerUpdate=null,this._setTime(Math.max(n,0))},l._onDurationChange=function(t){this._cachedDuration=this._player.getDuration(),this._cachedTrackerUpdate&&(this._onTrackerUpdate(this._cachedTrackerUpdate),this._setThumbnail()),this.el.style.opacity="1"},l._setThumbnail=function(t){this._thumbnailHandler.setTime(this._time,this._cachedDuration)},l._setTime=function(t){var e=t/this._scrubberView.getMax();this._time=Math.min(e*this._cachedDuration,this._cachedDuration);var n=r.formatTime(Math.round(this._time),this._cachedDuration);this._timeLabel.innerHTML=n},l.setData=function(t){this.el.style.opacity="0",this._canPlayThroughHander&&(this._player.off("canplaythrough",this._canPlayThroughHander),this._player.off("playing",this._canPlayThroughHander),this._canPlayThroughHander=null),t&&this._player.getReadyState()>2?(this.el.style.opacity="1",this._thumbnailHandler.setData(t),this._cachedTrackerUpdate&&(this._onTrackerUpdate(this._cachedTrackerUpdate),this._setThumbnail())):(this._thumbnailHandler.setData(null),t?(this._canPlayThroughHander=this.setData.bind(this,t),this._player.on("canplaythrough",this._canPlayThroughHander),this._player.on("playing",this._canPlayThroughHander)):this.el.style.opacity="1"),this._onLoadedMetaData()},l._show=function(t){this._onTrackerUpdate(t),this.el.firstElementChild.classList.remove("hidden")},l._hide=function(){this.el.firstElementChild.classList.add("hidden")},l.destroy=function(){this._canPlayThroughHander&&(this._player.off("canplaythrough",this._canPlayThroughHander),this._player.off("playing",this._canPlayThroughHander)),this._tracker.destroy()},e.exports=u},{"../../utils/Time":236,"./ThumbnailHandler":233,"@marcom/ac-function/throttle":83}],233:[function(t,e,n){"use strict";var i=120,r=144,o=81,s=function(t){this.el=t.el,this._player=t.player,this._imgWidth=t.imgWidth||r,this.el.style.backgroundSize=100*this._numberOfImages+"% 100%"},a=s.prototype;a.setVertical=function(t){this._imgWidth=t?o:r},a.getWidth=function(){return this._imgWidth},a.setData=function(t){if(!t)return this._imgUrl=null,void(this.el.style.backgroundImage="");if(t.url!==this._imgUrl){this._imgUrl=t.url,this._numberOfImages=parseInt(t.numberOfImages||i),this.el.style.backgroundSize=100*this._numberOfImages+"% 100%",this.el.style.backgroundImage="",this.el.classList.add("hidden");var e=this._loadImage(this._imgUrl).then(function(){this._imageLoadPromise===e&&(this.el.style.backgroundImage='url("'+this._imgUrl+'")',this._imageLoadPromise=null,this.el.classList.remove("hidden"))}.bind(this));this._imageLoadPromise=e}},a._loadImage=function(t){return new Promise(function(e,n){var i=new Image;i.onload=function(){e()},i.onerror=function(){n()},i.src=t})},a.setTime=function(t,e){var n=t/e,i=Math.min(Math.round(n*this._numberOfImages),this._numberOfImages-1),r=i/(this._numberOfImages-1)*100;this.el.style.backgroundPositionX=r+"%"},a.destroy=function(){this._imageLoadPromise&&this._imageLoadPromise.cancel()},e.exports=s},{}],234:[function(t,e,n){(function(n){"use strict";var i,r=n("PGRpdiBjbGFzcz0ic2hhcmluZy1zdGF0ZSI+CiAgICA8ZGl2IGNsYXNzPSJjb250YWluZXIiIGRhdGEtYWN2LWFjdGl2ZS1hcmVhPgogICAgICAgIDxkaXYgY2xhc3M9InNoYXJpbmctY29udGFpbmVyIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2hhcmluZy1idXR0b24tY29udGFpbmVyIj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImZhY2Vib29rLXNoYXJlIGFjLXZpZGVvLWljb24gaWNvbi1zaGFyZV9mYiIgYXJpYS1sYWJlbD0ie2ZhY2Vib29rc2hhcmV9LCB7bmV3d2luZG93fSI+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJ0d2l0dGVyLXNoYXJlIGFjLXZpZGVvLWljb24gaWNvbi1zaGFyZV90d2l0dGVyIiBhcmlhLWxhYmVsPSJ7dHdpdHRlcnNoYXJlfSwge25ld3dpbmRvd30iPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iY29weS1saW5rIGFjLXZpZGVvLWljb24gaWNvbi1zaGFyZV9saW5rIiBhcmlhLWxhYmVsPSJ7Y29weWxpbmt9Ij48L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImNvcHktZW1iZWQtY29kZSBhYy12aWRlby1pY29uIGljb24tc2hhcmVfZW1iZWQiIGFyaWEtbGFiZWw9Intjb3B5ZW1iZWR9Ij48L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0idGV4dGFyZWEtY29udGFpbmVyIj4KICAgICAgICAgICAgPHNwYW4+CiAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9ImNvcHktYXJlYSBmb3JtLXRleHRib3ggZm9ybS10ZXh0Ym94LXRleHQgZGlzYWJsZWQiIHR5cGU9InRleHQiIGlkPSJjb3B5LWxpbmsiIGFyaWEtbGFiZWw9Intjb3B5bGlua30iPjwvaW5wdXQ+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJ0ZXh0aW5wdXQtY2xvc2UtYnV0dG9uIGFjLXZpZGVvLWljb24gaWNvbi1zaGFyZV9jbG9zZSIgYXJpYS1sYWJlbD0ie2Rpc21pc3Njb3B5fSI+PC9idXR0b24+CiAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2Pgo8L2Rpdj4K","base64").toString(),o=n("PGlmcmFtZSBzcmM9IntlbWJlZENvZGVQYXRofXt2aWRlb2lkfXtleHRlbnNpb259IiB3aWR0aD0ie3dpZHRofSIgaGVpZ2h0PSJ7aGVpZ2h0fSIgdGl0bGU9Int0aXRsZX0iIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT4K","base64").toString(),s="https://www.apple.com/embed/",a="Video Player",u=t("@marcom/ac-console/log"),l=t("@marcom/ac-clipboard/select"),c=t("@marcom/ac-social").Dialog,h=t("@marcom/ac-string/supplant"),f=t("../localization/Localization"),d=t("@marcom/ac-accessibility/helpers/TabManager");try{i=t("@marcom/ac-analytics-share/factory/create")}catch(p){u("ac-analytics-share failed to load, are you sure you've included it?")}var m=t("@marcom/useragent-detect"),y=m.os,_=y.ios||y.android,v=735,g=function(t){this.el||this._initializeElement(t.el,t.template),this._player=t.player,this._parentView=t.parentView,this._clickedShareButton=null,this._container=this.el.querySelector(".container"),this._sharingButtonContainer=this.el.querySelector(".sharing-button-container"),this._facebookButton=this.el.querySelector(".facebook-share"),this._twitterButton=this.el.querySelector(".twitter-share"),this._copyLinkButton=this.el.querySelector(".copy-link"),this._copyEmbedCodeButton=this.el.querySelector(".copy-embed-code"),this._copyTextArea=this.el.querySelector(".copy-area"),this._copyCloseButton=this.el.querySelector(".textinput-close-button"),this._closeButton=this.el.querySelector(".close-button"),t.analytics===!1&&(i=null),_&&(this.el.firstChild.classList.add("mobile"),this._player.on("loadstart",function(){this._getClientWidth()>v&&this.el.firstChild.classList.add("mobile-large")}.bind(this))),this._bindMethods(),this._addEventListeners(),this._syncSocialShareHidden()},b=g.prototype;b._initializeElement=function(t,e){t?this.el=t:(this.el=document.createElement("div"),this._templateData=f.getTranslation(),this.el.innerHTML=h((e||r).toString(),this._templateData))},b.setData=function(t){if(!t)return void this._parentView.hide();if(this._parentView.show(),t.allowEmbed&&this.el.firstChild.classList.add("embed-enabled"),this._sharingUrl=t.originatorUrl||window.location.href,this._videoid=t.videoid,this._hideExtension=t.hideExtension,this._embedPath=t.embedpath||s,this._hideFacebook=t.hideFacebookShare||!1,this._hideTwitter=t.hideTwitterShare||!1,this._title=t.title||a,this._syncSocialShareHidden(),this._container.classList.remove("textarea-active"),i&&t.analytics!==!1&&t.videoid)try{this._initAnalyticsAttributes(t),this._analyticsObserver||(this._analyticsObserver=i({context:this.el}))}catch(e){u("ac-analytics-share failed to load, are you sure you've included it?")}},b._bindMethods=function(){this._doFacebookShare=this._doSocialShare.bind(this,c.FACEBOOK_SHARE),this._doTwitterShare=this._doSocialShare.bind(this,c.TWITTER_TWEET),this._copyUrl=this._copyUrl.bind(this),this._copyEmbedCode=this._copyEmbedCode.bind(this),this._closeCopyArea=this._showTextArea.bind(this,!1),this._closeState=this._closeState.bind(this)},b._addEventListeners=function(){this._facebookButton&&this._facebookButton.addEventListener("click",this._doFacebookShare),this._twitterButton&&this._twitterButton.addEventListener("click",this._doTwitterShare),this._copyLinkButton&&this._copyLinkButton.addEventListener("click",this._copyUrl),this._copyEmbedCodeButton&&this._copyEmbedCodeButton.addEventListener("click",this._copyEmbedCode),this._copyCloseButton&&this._copyCloseButton.addEventListener("click",this._closeCopyArea),this._closeButton&&this._closeButton.addEventListener("click",this._closeState)},b._removeEventListeners=function(){this._facebookButton&&this._facebookButton.removeEventListener("click",this._doFacebookShare),this._twitterButton&&this._twitterButton.removeEventListener("click",this._doTwitterShare),this._copyLinkButton&&this._copyLinkButton.removeEventListener("click",this._copyUrl),this._copyEmbedCodeButton&&this._copyEmbedCodeButton.removeEventListener("click",this._copyEmbedCode),this._copyCloseButton&&this._copyCloseButton.removeEventListener("click",this._closeCopyArea),this._closeButton&&this._closeButton.removeEventListener("click",this._closeState)},b._syncSocialShareHidden=function(){this._facebookButton&&(this._hideFacebook?this._facebookButton.classList.add("hide-button"):this._facebookButton.classList.remove("hide-button")),this._twitterButton&&(this._hideTwitter?this._twitterButton.classList.add("hide-button"):this._twitterButton.classList.remove("hide-button"))},b._doSocialShare=function(t){this._clickedShareButton=null,this._copyLinkButton.classList.remove("active"),this._copyEmbedCodeButton.classList.remove("active"),this._showTextArea(!1),c.create(t,{url:this._sharingUrl,title:this._title})},b._showTextArea=function(t){t?(this._container.classList.add("textarea-active"),l(this._copyTextArea),_||this._copyTextArea.setAttribute("readonly","")):(this._container.classList.remove("textarea-active"),this._copyLinkButton.classList.remove("active"),this._copyEmbedCodeButton.classList.remove("active"),this._copyTextArea.removeAttribute("readonly"),this._clickedShareButton&&this._clickedShareButton.focus(),this._copyLinkButton.setAttribute("aria-label",this._templateData.copylink),this._copyEmbedCodeButton.setAttribute("aria-label",this._templateData.copyembed))},b._copyUrl=function(){this._clearTextArea(),this._copyTextArea.value=this._sharingUrl,this._copyLinkButton.classList.add("active"),this._copyLinkButton.setAttribute("aria-label",this._templateData.selectlink),this._showTextArea(!0),this._clickedShareButton=this._copyLinkButton,this._copyTextArea.setAttribute("aria-label",this._templateData.copylink),l(this._copyTextArea)},b._clearTextArea=function(){window.getSelection().removeAllRanges(),this._copyLinkButton.classList.remove("active"),this._copyEmbedCodeButton.classList.remove("active"),this._copyTextArea.removeAttribute("readonly")},b._copyEmbedCode=function(){this._clearTextArea(),this._copyTextArea.value=h(o,{videoid:this._videoid,embedCodePath:this._embedPath,width:this._player.getMediaWidth(),height:this._player.getMediaHeight(),title:this._title,extension:this._hideExtension?"":".html"}),this._copyEmbedCodeButton.classList.add("active"),this._copyEmbedCodeButton.setAttribute("aria-label",this._templateData.selectembed),this._showTextArea(!0),this._clickedShareButton=this._copyEmbedCodeButton,this._copyTextArea.setAttribute("aria-label",this._templateData.copyembed),l(this._copyTextArea)},b._focusFirstButton=function(){this._firstButton||(this._firstButton=d.getTabbableElements(this._sharingButtonContainer)[0]),this._firstButton.focus()},b.show=function(){return new Promise(function(t,e){requestAnimationFrame(function(){var e=function(){this.el.removeEventListener("transitionend",e),focus&&this._focusFirstButton(),t()}.bind(this);this.el.addEventListener("transitionend",e),setTimeout(function(){this._container.classList.add("showing")}.bind(this))}.bind(this))}.bind(this))},b.hide=function(){return this._clickedShareButton=null,this._showTextArea(!1),new Promise(function(t,e){var n=function(){this.el.removeEventListener("transitionend",n),t()}.bind(this);this.el.addEventListener("transitionend",n),setTimeout(function(){this._container.classList.remove("showing")}.bind(this))}.bind(this))},b._getClientHeight=function(){return this.el.clientHeight},b._getClientWidth=function(){return this.el.clientWidth},b.destroy=function(){this._removeEventListeners()},b._closeState=function(){this._showTextArea(!1),0===this._player.getCurrentTime()||this._player.getEnded()?this._player.states.setState("initial"):this._player.states.setState("none")},b._getAnalyticsSource=function(){return"drawer"},b._initAnalyticsAttributes=function(t){var e=[];this._facebookButton&&e.push({button:this._facebookButton,title:"facebook",events:"event85"}),this._twitterButton&&e.push({button:this._twitterButton,title:"twitter",events:"event84"}),this._copyLinkButton&&e.push({button:this._copyLinkButton,title:"copy-link",events:"event89"}),this._copyEmbedCodeButton&&e.push({button:this._copyEmbedCodeButton,title:"copy-embed-code",events:"event101"});var n=((t.url&&t.url.indexOf(".m3u8"))!==-1?"m3u8":"mp4")+" via html5",i=this._getAnalyticsSource(),r=t.videoid,o=document.head.querySelectorAll('meta[property="analytics-track"]');o=o?o[0].getAttribute("content"):"",e.forEach(function(t){t.button.setAttribute("data-analytics-click",""),t.button.setAttribute("data-analytics-share",JSON.stringify({title:r,events:t.events,prop2:o+" - "+r+" - "+t.title,prop18:n,eVar49:document.referrer,eVar54:document.location.href,eVar55:o+" - "+r,eVar70:i}))}.bind(this))},e.exports=g}).call(this,t("buffer").Buffer)},{"../localization/Localization":229,"@marcom/ac-accessibility/helpers/TabManager":13,"@marcom/ac-analytics-share/factory/create":28,"@marcom/ac-clipboard/select":29,"@marcom/ac-console/log":31,"@marcom/ac-social":137,"@marcom/ac-string/supplant":157,"@marcom/useragent-detect":284,buffer:86}],235:[function(t,e,n){"use strict";var i=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,r=function(t){i.call(this),this.el=t.el||document.body,this.breakpoints=t.breakpoints.sort(function(t,e){return t.minWidth-e.minWidth}),this._player=t.player,this._breakPointsLength=this.breakpoints.length,this._addClasses=t.addClass,this._addEventListeners(),this._onResize()},o=i.prototype,s=r.prototype=Object.create(o);s.constructor=r,s._addEventListeners=function(){var t=this;this._boundOnResize=function(){t._onResize.apply(t,arguments)},window.addEventListener("resize",this._boundOnResize),window.addEventListener("orientationchange",this._boundOnResize),window.addEventListener("DOMContentLoaded",this._boundOnResize)},s._removeEventListeners=function(){window.removeEventListener("resize",this._boundOnResize),window.removeEventListener("orientationchange",this._boundOnResize),window.addEventListener("DOMContentLoaded",this._boundOnResize)},s._onResize=function(t){var e=this.el.clientWidth,n=this._currentBreakpoint;if(t!==!1&&this._player.refreshSize(),!n||!r.widthInBreakpoint(e,n)){var i=r.getBreakpointFromWidth(e,this.breakpoints,n,this._breakPointsLength);this._addClasses&&(this._currentBreakpoint&&this.el.classList.remove(n.name),this.el.classList.add(i.name)),this._currentBreakpoint=i,this.trigger("breakpointchange",i)}},s.getCurrentBreakpoint=function(){return this._currentBreakpoint},s.refresh=function(){this._onResize(!1)},s.destroy=function(){this._removeEventListeners(),o.destroy.call(this)},r.getBreakpointFromElement=function(t,e){return r.getBreakpointFromWidth(t.clientWidth,e)},r.getBreakpointFromWidth=function(t,e,n,i){for(var r=0,o=i||e.length;r<o;r++){var s=e[r];if(s!==n&&t>=s.minWidth&&t<=s.maxWidth)return s}return null},r.widthInBreakpoint=function(t,e){return t>=e.minWidth&&t<=e.maxWidth},e.exports=r},{"@marcom/ac-event-emitter-micro":66}],236:[function(t,e,n){"use strict";var i=t("@marcom/ac-string/supplant"),r={addLeadingZero:function(t,e){if(e=e||2,t<10||e>2)for(t=String(t);t.length<e;)t="0"+t;return t},formatTime:function(t,e,n){if(isNaN(t))return"00:00";t=this.splitTime(Math.floor(t),e,function(t){return this.addLeadingZero(t,n)}.bind(this));var r;r=e>=3600?"{PN}{hours}:{minutes}:{seconds}":"{PN}{minutes}:{seconds}";var o=i(r,{PN:t.negativeModifier,hours:t.hours,minutes:t.minutes,seconds:t.seconds});return o},splitTime:function(t,e,n){n=n||function(t){return t};var i={negativeModifier:"",hours:0,minutes:0,seconds:0};if(isNaN(t))return i;i.negativeModifier=t<0?"-":"",t=Math.abs(t),i.hours=e>=3600?Math.floor(t/3600):0,i.minutes=i.hours?Math.floor(t/60%60):Math.floor(t/60),i.seconds=t%60;for(var r in i)"number"==typeof i[r]&&"hours"!==r&&(i[r]=n(i[r]));return i},stringToNumber:function(t){for(var e=0,n=t.split(":");n.length;)e+=3===n.length?3600*parseFloat(n.shift()):2===n.length?60*parseFloat(n.shift()):parseFloat(n.shift());return e}};e.exports=r},{"@marcom/ac-string/supplant":157}],237:[function(t,e,n){"use strict";e.exports=t("../../../.versionfile")},{"../../../.versionfile":163}],238:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":i(t)},o=t("@marcom/ac-object/clone"),s=function a(){var t=Array.prototype.slice.call(arguments);if(t.length<2)return o(t[0]);var e=o(t.shift(),!0),n=t.shift();for(var i in n)n.hasOwnProperty(i)&&(e.hasOwnProperty(i)&&"object"===r(e[i])?"object"===r(e[i])&&"object"===r(n[i])&&(e[i]=a(e[i],n[i])):e[i]=n[i]);return t.length?a.apply(null,[e].concat(t)):e};e.exports=s},{"@marcom/ac-object/clone":92}],239:[function(t,e,n){"use strict";e.exports=[{width:384,height:160,type:"baseline-high",suffix:"h"},{width:384,height:160,type:"small",suffix:"h"},{width:384,height:160,type:"baseline-low",suffix:"l"},{width:384,height:160,type:"baseline-medium",suffix:"m"},{width:480,height:200,type:"medium",suffix:"h"},{width:768,height:320,type:"large",suffix:""},{width:960,height:400,type:"large",suffix:""},{width:1536,height:640,type:"large",suffix:"h"},{width:1536,height:640,type:"large",suffix:"l"},{width:1920,height:800,type:"large",suffix:"l"},{width:1920,height:800,type:"large",suffix:"h"}]},{}],240:[function(t,e,n){"use strict";e.exports=[{width:416,height:234,type:"baseline-high",suffix:"h"},{width:416,height:234,type:"small",suffix:"h"},{width:416,height:234,type:"baseline-low",suffix:"l"},{width:416,height:234,type:"baseline-medium",suffix:"m"},{width:640,height:360,type:"medium",suffix:"h"},{width:848,height:480,type:"large",suffix:""},{width:960,height:540,type:"large",suffix:""},{width:1280,height:720,type:"large",suffix:"h"},{width:1280,height:720,type:"large",suffix:"l"},{width:1920,height:1080,type:"large",suffix:"l"},{width:1920,height:1080,type:"large",suffix:"h"}]},{}],241:[function(t,e,n){"use strict";e.exports=[{width:528,height:244,type:"baseline-high",suffix:"h"},{width:528,height:244,type:"small",suffix:"h"},{width:528,height:244,type:"baseline-low",suffix:"l"},{width:528,height:244,type:"baseline-medium",suffix:"m"},{width:812,height:375,type:"medium",suffix:"h"},{width:1082,height:500,type:"large",suffix:""},{width:1218,height:563,type:"large",suffix:""},{width:1624,height:750,type:"large",suffix:"h"},{width:1624,height:750,type:"large",suffix:"l"},{width:2436,height:1126,type:"large",suffix:"l"},{width:2436,height:1126,type:"large",suffix:"h"}]},{}],242:[function(t,e,n){"use strict";e.exports=[{width:360,height:360,type:"baseline-high",suffix:"h"},{width:360,height:360,type:"small",suffix:"h"},{width:360,height:360,type:"baseline-low",suffix:"l"},{width:480,height:480,type:"medium",suffix:""},{width:540,height:540,type:"medium",suffix:""},{width:720,height:720,type:"large",suffix:"h"},{width:720,height:720,type:"large",suffix:"l"},{width:1080,height:1080,type:"large",suffix:"l"},{width:1080,height:1080,type:"large",suffix:"h"}]},{}],243:[function(t,e,n){"use strict";var i=t("@marcom/ac-string/supplant"),r=/_r[0-9].+\.mov$/,o=/_[0-9]+x[0-9].+\.mp4$/,s=/_[0-9]+x[0-9].+\.(mp4|m3u8)/,a=/_([0-9]+)x([0-9]+)/,u=/-tpl-.*-/,l=/-cc-[a-z].*-/,c=/-tft-.*-/,h="m",f="_{width}x{height}{suffix}."+h+"p4",d="_{height}x{width}{suffix}."+h+"p4",p="j",m="_thumbnails."+p+"pg",y=t("./1X1AssetSizes"),_=t("./16X9AssetSizes"),v=t("./12X5AssetSizes"),g=t("./19X9AssetSizes"),b=function(t,e){return t.find(function(t){return t.width===e.width&&(t.height=e.height)||t.width===e.height&&(t.height=e.width)})},w=function(t,e,n,s){var u,l;a.test(t);var h,p={};if(p.width=parseInt(RegExp.$1,10),p.height=parseInt(RegExp.$2,10),t.match(c))u=v,l=1536;else if(p.width===p.height)u=y,l=1080;else if(t.match(r)||b(_,p))u=_,l=1280;else{if(!b(g,p))return t;u=g,l=1624}p.width<p.height&&(h=!0);var m=u[0].width,w=s&&s.maxWidth?Math.max(s.maxWidth,m):l;if(!t)throw"Must provide an url to optimize";if(void 0===e||isNaN(e))throw"Must provide a width";0===e&&(e=p.width),n&&(u=u.filter(function(t){return t.type===n})),w<1920&&(u=u.filter(function(t){return t.width<=w}));var x;x=h?u.reduce(function(t,n){return Math.abs(n.height-e)<Math.abs(t.height-e)?n:t}):u.reduce(function(t,n){return Math.abs(n.width-e)<Math.abs(t.width-e)?n:t});var E=f;return h&&(E=d),t.match(o)?t.replace(o,i(E,x)):t.match(r)?t.replace(r,i(E,x)):t},x=function(t){return t.match(l)?t.match(o)?{src:t.replace(o,"_cc.vtt"),srclang:"en"}:t.match(r)?{src:t.replace(r,"_cc.vtt"),srclang:"en"}:null:null},E=function(t){return t.match(u)?{url:t.replace(s,m)}:null};e.exports={getVideoSource:w,getCaptionsSource:x,getThumbnailImageSource:E}},{"./12X5AssetSizes":239,"./16X9AssetSizes":240,"./19X9AssetSizes":241,"./1X1AssetSizes":242,"@marcom/ac-string/supplant":157}],244:[function(t,e,n){"use strict";var i=window.Hls,r=t("./HTML5Video"),o=function(t){this._src=null,r.apply(this,arguments),this._initialize(t)},s=r.prototype,a=o.prototype=Object.create(s);a._initialize=function(t){if("undefined"==typeof window.Hls)throw new Error("Hls.js should be included on the page in a script tag");this._debugHls=t.debugHls,this._enablePerformanceLogging=t.enablePerformanceLogging,this._onTextTrackChangeAfterLoad=this._onTextTrackChangeAfterLoad.bind(this),this._onHlsError=this._onHlsError.bind(this)},a.load=function(t,e){if(this._hls){this.getTextTracksEventEmitter().off("addtrack",this._onTextTrackChangeAfterLoad),this._cachedVisibleTracks=Array.from(this.el.textTracks).filter(function(t){return"showing"===t.mode}),this._hls.off(i.Events.ERROR,this._onHlsError),this._hls.destroy();var n=this.el.cloneNode(!1);this.el.parentElement.replaceChild(n,this.el),this.el=n,this.replaceElement(n);var r=this.getTextTracksEventEmitter();r.replaceElement(this.el.textTracks),r.on("addtrack",this._onTextTrackChangeAfterLoad)}this._hls=new i({debug:this._debugHls,enableWorker:!0,enableStreaming:!0,autoRecoverError:!0,enablePerformanceLogging:this._enablePerformanceLogging||!1}),this._hls.on(i.Events.ERROR,this._onHlsError),this._src=t[0];var o=function(){this._hls.off(i.Events.MEDIA_ATTACHED,o),this.setSrc(t[0]),this._createTextTrackTags(e)}.bind(this);this._hls.on(i.Events.MEDIA_ATTACHED,o),this._hls.attachMedia(this.el)},a.setSrc=function(t){this._src=t,this._hls.loadSource(t),this._hls.on(i.Events.MANIFEST_PARSED,this._boundManifestParsed=function(){this._hls.off(i.Events.MANIFEST_PARSED,this._boundManifestParsed),this.play()}.bind(this))},a.getCurrentSrc=function(){return this._src},a.canPlayType=function(t){return"vnd.apple.mpegURL"===t?s.canPlayType.call(this,"video/mp4"):s.canPlayType.apply(this,arguments)},a._onTextTrackChangeAfterLoad=function(){var t=this;this._cachedVisibleTracks&&this.el.textTracks.length>1&&(this._cachedVisibleTracks.forEach(function(e){var n=Array.from(t.el.textTracks).find(function(t){return e.language===t.language});n&&(n.mode="showing")}),this.getTextTracksEventEmitter().off("addtrack",this._onTextTrackChangeAfterLoad),this._cachedVisibleTracks=null)},a.getError=function(){return this.el.error||this._error},a.destroy=function(){s.destroy.apply(this,arguments),this._hls&&(this._hls.destroy(),this._hls=null)},a._onHlsError=function(t,e){e.fatal===!0&&(this._error=e.type,this.trigger("error",e))},e.exports=o},{"./HTML5Video":245}],245:[function(t,e,n){"use strict";var i=t("../dom-emitter/DOMEmitterMicro"),r=t("../texttracks/createTextTracks"),o=t("@marcom/ac-console/log"),s=window.document,a=function(t){this.el=t&&t.mediaElement?t.mediaElement:s.createElement("video"),this.options=t||{},this._textTracks=r(t),this._initElement(),i.apply(this,[this.el]),this._forwardCaptionEvent=this._forwardCaptionEvent.bind(this),this._textTracksEmitter=this.getTextTracksEventEmitter(),this._textTracksEmitter.on("addtrack",this._forwardCaptionEvent),this._textTracksEmitter.on("change",this._forwardCaptionEvent),this._textTracksEmitter.on("removetrack",this._forwardCaptionEvent)},u=a.prototype=Object.create(i.prototype);u._initElement=function(){this.el.classList.add("ac-video-media-controller"),null!==this.options.crossorigin&&this.el.setAttribute("crossorigin",this.options.crossorigin?this.options.crossorigin:"anonymous"),this.el.setAttribute("preload",this.options.preload||"auto"),this.el.setAttribute("x-webkit-airplay","")},u._forwardCaptionEvent=function(t){this.trigger(t.type)},u.load=function(t,e,n){n&&(t=t.map(function(t){return t+"#t="+n})),this._createSourceTags(t),this._createTextTrackTags(e),this.el.load()},u._createSourceTags=function(t){this.el.removeAttribute("src"),this.el.innerHTML="";var e=0,n=t.length;for(n&&this.el.setAttribute("src",t[0]);e<n;e++){var i=s.createElement("source");i.src=t[e],this.el.appendChild(i)}},u.play=function(){try{var t=this.el.play();t&&"function"==typeof t["catch"]&&(t["catch"](function(e){this._playPromise===t&&this.trigger("PlayPromiseError")}.bind(this)),t.then(function(){this.trigger("PlayPromiseResolved")}.bind(this),function(t){o(t)})),this._playPromise=t}catch(e){o(e)}},u.refreshSize=function(){},u.pause=function(){this._playPromise=null,this.el.pause()},u.addTextTrack=function(t){this._addTextTrackTag(t)},u.removeTextTrack=function(t){this._removeTextTrackTag(t)},u.getRenderElement=function(){return this.getMediaElement()},u.getMediaElement=function(){return this.el},u._createTextTrackTags=function(){return this._textTracks.create.apply(this,arguments)},u._addTextTrackTag=function(){return this._textTracks.add.apply(this,arguments)},u._removeTextTrackTag=function(){return this._textTracks.remove.apply(this,arguments)},u.getTextTracks=function(){return this._textTracks.get.apply(this,arguments)},u.getTextTracksEventEmitter=function(){return this._textTracks.getEmitter.apply(this,arguments)},u.getReadyState=function(){return this.el.readyState},u.getPreload=function(){return this.el.preload;
},u.setPreload=function(t){return this.el.preload=t},u.setPoster=function(t){t?this.el.poster=t:this.el.removeAttribute("poster")},u.getVolume=function(){return this.el.volume},u.getMuted=function(){return this.el.muted},u.getPaused=function(){return this.el.paused},u.getCurrentTime=function(){return this.el.currentTime},u.getDuration=function(){return this.el.duration},u.setCurrentTime=function(t){return this.el.currentTime=t},u.setVolume=function(t){return this.el.volume=t},u.setMuted=function(t){this.el.muted=t},u.getEnded=function(){return this.el.ended},u.getError=function(){return this.el.error},u.setSrc=function(t){this.el.childNodes.length&&t===this._getSrcNode().url||this._createSourceTags([t])},u.advanceLiveStream=function(){},u.getCurrentSrc=function(){return this.el.src},u._getSrcNode=function(){return this.el.childNodes[0]},u.setControls=function(t){t?(this.el.setAttribute("controls",""),this.el.removeAttribute("aria-hidden")):(this.el.removeAttribute("controls"),this.el.setAttribute("aria-hidden","true"))},u.isFullscreen=function(){return this.el.webkitDisplayingFullscreen},u.supportsPictureInPicture=function(){return"function"==typeof this.el.webkitSetPresentationMode},u.isPictureInPicture=function(){return"picture-in-picture"===this.el.webkitPresentationMode},u.setPictureInPicture=function(t){this.supportsPictureInPicture()&&this.el.webkitSetPresentationMode(t?"picture-in-picture":"inline")},u.supportsAirPlay=function(){return!!window.WebKitPlaybackTargetAvailabilityEvent},u.canPlayType=function(t){return this.el.canPlayType(t)},u.destroy=function(){this._textTracks&&this._textTracks.destroy(),this._textTracksEmitter&&(this._textTracksEmitter.off("addtrack",this._forwardCaptionEvent),this._textTracksEmitter.off("change",this._forwardCaptionEvent),this._textTracksEmitter.off("removetrack",this._forwardCaptionEvent)),this._textTracks=null,this._textTracksEmitter=null,this.el=null},e.exports=a},{"../dom-emitter/DOMEmitterMicro":173,"../texttracks/createTextTracks":187,"@marcom/ac-console/log":31}],246:[function(t,e,n){"use strict";var i=t("./HTML5Video"),r=t("@marcom/ac-360"),o=function(t){i.call(this,t),this._renderElement=document.createElement("div"),this._renderElement.classList.add("threesixty-video-container"),this.el.style.visibility="hidden",this.el.style.opacity=0,this._renderElement.appendChild(this.el),this._ac360=new r({el:this._renderElement,src:this.getMediaElement()}),this._ac360.on("error",function(){this._error="360_ERROR",this.trigger("error")}.bind(this)),this.sendMouseDown=this.sendMouseDown.bind(this)},s=i.prototype,a=o.prototype=Object.create(s);a.load=function(){this._ac360.setPos(0,0),s.load.apply(this,arguments)},a.play=function(){this.getEnded()&&this._ac360.setPos(0,0),s.play.apply(this,arguments)},a.sendMouseDown=function(t){this._ac360.sendMouseDown(t)},a.getRenderElement=function(){return this._renderElement},a.get360=function(){return this._ac360},a.setControls=function(t){s.setControls.call(this,!1)},a.supportsPictureInPicture=function(){return!1},a.supportsAirPlay=function(){return!1},a.refreshSize=function(){this._ac360.refreshSize()},a.getError=function(){return this._error||s.getError.apply(this,arguments)},e.exports=o},{"./HTML5Video":245,"@marcom/ac-360":2}],247:[function(t,e,n){"use strict";var i=t("@marcom/useragent-detect"),r=i.browser.safari||i.browser.edge,o="MediaSource"in window,s=function(){},a=s.prototype;a.create=function(e,n){if(e.hls&&!r&&o){var i=t("./HLSVideo");return new i(Object.assign({},e,{parentElement:n}))}if(e.threesixty){var s=t("./ThreeSixtyVideo");return new s(Object.assign({},e,{parentElement:n}))}var a=t("./HTML5Video");return new a(Object.assign({},e,{parentElement:n}))},e.exports=Object.create(s.prototype)},{"./HLSVideo":244,"./HTML5Video":245,"./ThreeSixtyVideo":246,"@marcom/useragent-detect":284}],248:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,r){"object"==("undefined"==typeof n?"undefined":i(n))&&"undefined"!=typeof e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(void 0,function(t){function e(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function n(t){return 1===t.length&&(t=function(t){return function(n,i){return e(t(n),i)}}(t)),{left:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],n)<0?i=o+1:r=o}return i},right:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],n)>0?r=o:i=o+1}return i}}}function r(t,e){return[t,e]}function o(t){return null===t?NaN:+t}function s(t,e){var n,i,r=t.length,s=0,a=-1,u=0,l=0;if(null==e)for(;++a<r;)isNaN(n=o(t[a]))||(l+=(i=n-u)*(n-(u+=i/++s)));else for(;++a<r;)isNaN(n=o(e(t[a],a,t)))||(l+=(i=n-u)*(n-(u+=i/++s)));if(s>1)return l/(s-1)}function a(t,e){var n=s(t,e);return n?Math.sqrt(n):n}function u(t,e){var n,i,r,o=t.length,s=-1;if(null==e){for(;++s<o;)if(null!=(n=t[s])&&n>=n)for(i=r=n;++s<o;)null!=(n=t[s])&&(i>n&&(i=n),r<n&&(r=n))}else for(;++s<o;)if(null!=(n=e(t[s],s,t))&&n>=n)for(i=r=n;++s<o;)null!=(n=e(t[s],s,t))&&(i>n&&(i=n),r<n&&(r=n));return[i,r]}function l(t){return function(){return t}}function c(t){return t}function h(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(r);++i<r;)o[i]=t+i*n;return o}function f(t,e,n){var i,r,o,s,a=-1;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(s=d(t,e,n))||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),o=new Array(r=Math.ceil(e-t+1));++a<r;)o[a]=(t+a)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),o=new Array(r=Math.ceil(t-e+1));++a<r;)o[a]=(t-a)/s;return i&&o.reverse(),o}function d(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),o=i/Math.pow(10,r);return r>=0?(o>=Hl?10:o>=Kl?5:o>=Yl?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(o>=Hl?10:o>=Kl?5:o>=Yl?2:1)}function p(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/r;return o>=Hl?r*=10:o>=Kl?r*=5:o>=Yl&&(r*=2),e<t?-r:r}function m(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function y(t,e,n){if(null==n&&(n=o),i=t.length){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,s=Math.floor(r),a=+n(t[s],s,t);return a+(+n(t[s+1],s+1,t)-a)*(r-s)}}function _(t){for(var e,n,i,r=t.length,o=-1,s=0;++o<r;)s+=t[o].length;for(n=new Array(s);--r>=0;)for(e=(i=t[r]).length;--e>=0;)n[--s]=i[e];return n}function v(t,e){var n,i,r=t.length,o=-1;if(null==e){for(;++o<r;)if(null!=(n=t[o])&&n>=n)for(i=n;++o<r;)null!=(n=t[o])&&i>n&&(i=n)}else for(;++o<r;)if(null!=(n=e(t[o],o,t))&&n>=n)for(i=n;++o<r;)null!=(n=e(t[o],o,t))&&i>n&&(i=n);return i}function g(t){if(!(r=t.length))return[];for(var e=-1,n=v(t,b),i=new Array(n);++e<n;)for(var r,o=-1,s=i[e]=new Array(r);++o<r;)s[o]=t[o][e];return i}function b(t){return t.length}function w(t){return t}function x(t){return"translate("+(t+.5)+",0)"}function E(t){return"translate(0,"+(t+.5)+")"}function k(){return!this.__axis}function S(t,e){function n(n){var f=null==r?e.ticks?e.ticks.apply(e,i):e.domain():r,d=null==o?e.tickFormat?e.tickFormat.apply(e,i):w:o,p=Math.max(s,0)+u,m=e.range(),y=+m[0]+.5,_=+m[m.length-1]+.5,v=(e.bandwidth?function(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}:function(t){return function(e){return+t(e)}})(e.copy()),g=n.selection?n.selection():n,b=g.selectAll(".domain").data([null]),x=g.selectAll(".tick").data(f,e).order(),E=x.exit(),S=x.enter().append("g").attr("class","tick"),C=x.select("line"),T=x.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),x=x.merge(S),C=C.merge(S.append("line").attr("stroke","#000").attr(c+"2",l*s)),T=T.merge(S.append("text").attr("fill","#000").attr(c,l*p).attr("dy",t===Gl?"0em":t===Zl?"0.71em":"0.32em")),n!==g&&(b=b.transition(n),x=x.transition(n),C=C.transition(n),T=T.transition(n),E=E.transition(n).attr("opacity",Jl).attr("transform",function(t){return isFinite(t=v(t))?h(t):this.getAttribute("transform")}),S.attr("opacity",Jl).attr("transform",function(t){var e=this.parentNode.__axis;return h(e&&isFinite(e=e(t))?e:v(t))})),E.remove(),b.attr("d",t===Ql||t==Xl?"M"+l*a+","+y+"H0.5V"+_+"H"+l*a:"M"+y+","+l*a+"V0.5H"+_+"V"+l*a),x.attr("opacity",1).attr("transform",function(t){return h(v(t))}),C.attr(c+"2",l*s),T.attr(c,l*p).text(d),g.filter(k).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Xl?"start":t===Ql?"end":"middle"),g.each(function(){this.__axis=v})}var i=[],r=null,o=null,s=6,a=6,u=3,l=t===Gl||t===Ql?-1:1,c=t===Ql||t===Xl?"x":"y",h=t===Gl||t===Zl?x:E;return n.scale=function(t){return arguments.length?(e=t,n):e},n.ticks=function(){return i=Wl.call(arguments),n},n.tickArguments=function(t){return arguments.length?(i=null==t?[]:Wl.call(t),n):i.slice()},n.tickValues=function(t){return arguments.length?(r=null==t?null:Wl.call(t),n):r&&r.slice()},n.tickFormat=function(t){return arguments.length?(o=t,n):o},n.tickSize=function(t){return arguments.length?(s=a=+t,n):s},n.tickSizeInner=function(t){return arguments.length?(s=+t,n):s},n.tickSizeOuter=function(t){return arguments.length?(a=+t,n):a},n.tickPadding=function(t){return arguments.length?(u=+t,n):u},n}function C(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i)throw new Error("illegal type: "+t);i[t]=[]}return new T(i)}function T(t){this._=t}function A(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=$l,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}function M(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),ec.hasOwnProperty(e)?{space:ec[e],local:t}:t}function P(t){var e=M(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===tc&&e.documentElement.namespaceURI===tc?e.createElement(t):e.createElementNS(n,t)}})(e)}function O(){}function I(t){return null==t?O:function(){return this.querySelector(t)}}function D(){return[]}function L(t){return null==t?D:function(){return this.querySelectorAll(t)}}function R(t){return new Array(t.length)}function F(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function N(t,e,n,i,r,o){for(var s,a=0,u=e.length,l=o.length;a<l;++a)(s=e[a])?(s.__data__=o[a],i[a]=s):n[a]=new F(t,o[a]);for(;a<u;++a)(s=e[a])&&(r[a]=s)}function U(t,e,n,i,r,o,s){var a,u,l,c={},h=e.length,f=o.length,d=new Array(h);for(a=0;a<h;++a)(u=e[a])&&(d[a]=l=sc+s.call(u,u.__data__,a,e),l in c?r[a]=u:c[l]=u);for(a=0;a<f;++a)(u=c[l=sc+s.call(t,o[a],a,o)])?(i[a]=u,u.__data__=o[a],c[l]=null):n[a]=new F(t,o[a]);for(a=0;a<h;++a)(u=e[a])&&c[d[a]]===u&&(r[a]=u)}function V(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function j(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function B(t,e){return t.style.getPropertyValue(e)||j(t).getComputedStyle(t,null).getPropertyValue(e)}function z(t){return t.trim().split(/^|\s+/)}function q(t){return t.classList||new H(t)}function H(t){this._node=t,this._names=z(t.getAttribute("class")||"")}function K(t,e){for(var n=q(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Y(t,e){for(var n=q(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function W(){this.textContent=""}function G(){this.innerHTML=""}function X(){this.nextSibling&&this.parentNode.appendChild(this)}function Z(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Q(){return null}function J(){var t=this.parentNode;t&&t.removeChild(this)}function $(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function tt(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function et(t,e,n){return t=nt(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function nt(e,n,i){return function(r){var o=t.event;t.event=r;try{e.call(this,this.__data__,n,i)}finally{t.event=o}}}function it(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,o=e.length;i<o;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?e.length=r:delete this.__on}}}function rt(t,e,n){var i=ac.hasOwnProperty(t.type)?et:nt;return function(r,o,s){var a,u=this.__on,l=i(e,o,s);if(u)for(var c=0,h=u.length;c<h;++c)if((a=u[c]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=l,a.capture=n),void(a.value=e);this.addEventListener(t.type,l,n),a={type:t.type,name:t.name,value:e,listener:l,capture:n},u?u.push(a):this.__on=[a]}}function ot(e,n,i,r){var o=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(i,r)}finally{t.event=o}}function st(t,e,n){var i=j(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function at(t,e){this._groups=t,this._parents=e}function ut(){return new at([[document.documentElement]],uc)}function lt(t){return"string"==typeof t?new at([[document.querySelector(t)]],[document.documentElement]):new at([[t]],uc)}function ct(){return new ht}function ht(){this._="@"+(++lc).toString(36)}function ft(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n}function dt(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}function pt(t){var e=ft();return e.changedTouches&&(e=e.changedTouches[0]),dt(t,e)}function mt(t,e,n){arguments.length<3&&(n=e,e=ft().changedTouches);for(var i,r=0,o=e?e.length:0;r<o;++r)if((i=e[r]).identifier===n)return dt(t,i);return null}function yt(){t.event.stopImmediatePropagation()}function _t(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function vt(t){var e=t.document.documentElement,n=lt(t).on("dragstart.drag",_t,!0);"onselectstart"in e?n.on("selectstart.drag",_t,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function gt(t,e){var n=t.document.documentElement,i=lt(t).on("dragstart.drag",null);e&&(i.on("click.drag",_t,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function bt(t){return function(){return t}}function wt(t,e,n,i,r,o,s,a,u,l){this.target=t,this.type=e,this.subject=n,this.identifier=i,this.active=r,this.x=o,this.y=s,this.dx=a,this.dy=u,this._=l}function xt(){return!t.event.button}function Et(){return this.parentNode}function kt(e){return null==e?{x:t.event.x,y:t.event.y}:e}function St(){return"ontouchstart"in this}function Ct(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Tt(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function At(){}function Mt(t){var e;return t=(t+"").trim().toLowerCase(),(e=dc.exec(t))?(e=parseInt(e[1],16),new Lt(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=pc.exec(t))?Pt(parseInt(e[1],16)):(e=mc.exec(t))?new Lt(e[1],e[2],e[3],1):(e=yc.exec(t))?new Lt(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=_c.exec(t))?Ot(e[1],e[2],e[3],e[4]):(e=vc.exec(t))?Ot(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=gc.exec(t))?Rt(e[1],e[2]/100,e[3]/100,1):(e=bc.exec(t))?Rt(e[1],e[2]/100,e[3]/100,e[4]):wc.hasOwnProperty(t)?Pt(wc[t]):"transparent"===t?new Lt(NaN,NaN,NaN,0):null}function Pt(t){return new Lt(t>>16&255,t>>8&255,255&t,1)}function Ot(t,e,n,i){return i<=0&&(t=e=n=NaN),new Lt(t,e,n,i)}function It(t){return t instanceof At||(t=Mt(t)),t?(t=t.rgb(),new Lt(t.r,t.g,t.b,t.opacity)):new Lt}function Dt(t,e,n,i){return 1===arguments.length?It(t):new Lt(t,e,n,null==i?1:i)}function Lt(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function Rt(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Nt(t,e,n,i)}function Ft(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Nt)return new Nt(t.h,t.s,t.l,t.opacity);if(t instanceof At||(t=Mt(t)),!t)return new Nt;if(t instanceof Nt)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),s=NaN,a=o-r,u=(o+r)/2;return a?(s=e===o?(n-i)/a+6*(n<i):n===o?(i-e)/a+2:(e-n)/a+4,a/=u<.5?o+r:2-o-r,s*=60):a=u>0&&u<1?0:s,new Nt(s,a,u,t.opacity)}(t):new Nt(t,e,n,null==i?1:i)}function Nt(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Ut(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Vt(t){if(t instanceof Bt)return new Bt(t.l,t.a,t.b,t.opacity);if(t instanceof Wt){var e=t.h*xc;return new Bt(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof Lt||(t=It(t));var n=Kt(t.r),i=Kt(t.g),r=Kt(t.b),o=zt((.4124564*n+.3575761*i+.1804375*r)/kc),s=zt((.2126729*n+.7151522*i+.072175*r)/Sc);return new Bt(116*s-16,500*(o-s),200*(s-zt((.0193339*n+.119192*i+.9503041*r)/Cc)),t.opacity)}function jt(t,e,n,i){return 1===arguments.length?Vt(t):new Bt(t,e,n,null==i?1:i)}function Bt(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function zt(t){return t>Pc?Math.pow(t,1/3):t/Mc+Tc}function qt(t){return t>Ac?t*t*t:Mc*(t-Tc)}function Ht(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Kt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Yt(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Wt)return new Wt(t.h,t.c,t.l,t.opacity);t instanceof Bt||(t=Vt(t));var e=Math.atan2(t.b,t.a)*Ec;return new Wt(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new Wt(t,e,n,null==i?1:i)}function Wt(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function Gt(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Xt)return new Xt(t.h,t.s,t.l,t.opacity);t instanceof Lt||(t=It(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(Fc*i+Lc*e-Rc*n)/(Fc+Lc-Rc),o=i-r,s=(Dc*(n-r)-Oc*o)/Ic,a=Math.sqrt(s*s+o*o)/(Dc*r*(1-r)),u=a?Math.atan2(s,o)*Ec-120:NaN;return new Xt(u<0?u+360:u,a,r,t.opacity)}(t):new Xt(t,e,n,null==i?1:i)}function Xt(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Zt(t,e,n,i,r){var o=t*t,s=o*t;return((1-3*t+3*o-s)*e+(4-6*o+3*s)*n+(1+3*t+3*o-3*s)*i+s*r)/6}function Qt(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],o=t[i+1],s=i>0?t[i-1]:2*r-o,a=i<e-1?t[i+2]:2*o-r;return Zt((n-i/e)*e,s,r,o,a)}}function Jt(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),r=t[(i+e-1)%e],o=t[i%e],s=t[(i+1)%e],a=t[(i+2)%e];return Zt((n-i/e)*e,r,o,s,a)}}function $t(t){return function(){return t}}function te(t,e){return function(n){return t+n*e}}function ee(t,e){var n=e-t;return n?te(t,n>180||n<-180?n-360*Math.round(n/360):n):$t(isNaN(t)?e:t)}function ne(t){return 1==(t=+t)?ie:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):$t(isNaN(e)?n:e)}}function ie(t,e){var n=e-t;return n?te(t,n):$t(isNaN(t)?e:t)}function re(t){return function(e){var n,i,r=e.length,o=new Array(r),s=new Array(r),a=new Array(r);for(n=0;n<r;++n)i=Dt(e[n]),o[n]=i.r||0,s[n]=i.g||0,a[n]=i.b||0;return o=t(o),s=t(s),a=t(a),i.opacity=1,function(t){return i.r=o(t),i.g=s(t),i.b=a(t),i+""}}}function oe(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,o=new Array(r),s=new Array(i);for(n=0;n<r;++n)o[n]=ce(t[n],e[n]);for(;n<i;++n)s[n]=e[n];return function(t){for(n=0;n<r;++n)s[n]=o[n](t);return s}}function se(t,e){var n=new Date;return t=+t,e-=t,function(i){return n.setTime(t+e*i),n}}function ae(t,e){return t=+t,e-=t,function(n){return t+e*n}}function ue(t,e){var n,r={},o={};null!==t&&"object"==("undefined"==typeof t?"undefined":i(t))||(t={}),null!==e&&"object"==("undefined"==typeof e?"undefined":i(e))||(e={});for(n in e)n in t?r[n]=ce(t[n],e[n]):o[n]=e[n];return function(t){for(n in r)o[n]=r[n](t);return o}}function le(t,e){var n,i,r,o=Yc.lastIndex=Wc.lastIndex=0,s=-1,a=[],u=[];for(t+="",e+="";(n=Yc.exec(t))&&(i=Wc.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),a[s]?a[s]+=r:a[++s]=r),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:ae(n,i)})),o=Wc.lastIndex;return o<e.length&&(r=e.slice(o),a[s]?a[s]+=r:a[++s]=r),a.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,i=0;i<e;++i)a[(n=u[i]).i]=n.x(t);return a.join("")})}function ce(t,e){var n,r="undefined"==typeof e?"undefined":i(e);return null==e||"boolean"===r?$t(e):("number"===r?ae:"string"===r?(n=Mt(e))?(e=n,qc):le:e instanceof Mt?qc:e instanceof Date?se:Array.isArray(e)?oe:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?ue:ae)(t,e)}function he(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}}function fe(t,e,n,i,r,o){var s,a,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*n+e*i)&&(n-=t*u,i-=e*u),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,u/=a),t*i<e*n&&(t=-t,e=-e,u=-u,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*Gc,skewX:Math.atan(u)*Gc,scaleX:s,scaleY:a}}function de(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(o,s){var a=[],u=[];return o=t(o),s=t(s),function(t,i,r,o,s,a){if(t!==r||i!==o){var u=s.push("translate(",null,e,null,n);a.push({i:u-4,x:ae(t,r)},{i:u-2,x:ae(i,o)})}else(r||o)&&s.push("translate("+r+e+o+n)}(o.translateX,o.translateY,s.translateX,s.translateY,a,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(r(n)+"rotate(",null,i)-2,x:ae(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}(o.rotate,s.rotate,a,u),function(t,e,n,o){t!==e?o.push({i:n.push(r(n)+"skewX(",null,i)-2,x:ae(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}(o.skewX,s.skewX,a,u),function(t,e,n,i,o,s){if(t!==n||e!==i){var a=o.push(r(o)+"scale(",null,",",null,")");s.push({i:a-4,x:ae(t,n)},{i:a-2,x:ae(e,i)})}else 1===n&&1===i||o.push(r(o)+"scale("+n+","+i+")")}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,a,u),o=s=null,function(t){for(var e,n=-1,i=u.length;++n<i;)a[(e=u[n]).i]=e.x(t);return a.join("")}}}function pe(t){return((t=Math.exp(t))+1/t)/2}function me(t,e){var n,i,r=t[0],o=t[1],s=t[2],a=e[0],u=e[1],l=e[2],c=a-r,h=u-o,f=c*c+h*h;if(f<eh)i=Math.log(l/s)/Jc,n=function(t){return[r+t*c,o+t*h,s*Math.exp(Jc*t*i)]};else{var d=Math.sqrt(f),p=(l*l-s*s+th*f)/(2*s*$c*d),m=(l*l-s*s-th*f)/(2*l*$c*d),y=Math.log(Math.sqrt(p*p+1)-p),_=Math.log(Math.sqrt(m*m+1)-m);i=(_-y)/Jc,n=function v(t){var e=t*i,v=pe(y),n=s/($c*d)*(v*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(Jc*e+y)-function(t){return((t=Math.exp(t))-1/t)/2}(y));return[r+n*c,o+n*h,s*v/pe(Jc*e+y)]}}return n.duration=1e3*i,n}function ye(t){return function(e,n){var i=t((e=Ft(e)).h,(n=Ft(n)).h),r=ie(e.s,n.s),o=ie(e.l,n.l),s=ie(e.opacity,n.opacity);return function(t){return e.h=i(t),e.s=r(t),e.l=o(t),e.opacity=s(t),e+""}}}function _e(t){return function(e,n){var i=t((e=Yt(e)).h,(n=Yt(n)).h),r=ie(e.c,n.c),o=ie(e.l,n.l),s=ie(e.opacity,n.opacity);return function(t){return e.h=i(t),e.c=r(t),e.l=o(t),e.opacity=s(t),e+""}}}function ve(t){return function e(n){function i(e,i){var r=t((e=Gt(e)).h,(i=Gt(i)).h),o=ie(e.s,i.s),s=ie(e.l,i.l),a=ie(e.opacity,i.opacity);return function(t){return e.h=r(t),e.s=o(t),e.l=s(Math.pow(t,n)),e.opacity=a(t),e+""}}return n=+n,i.gamma=e,i}(1)}function ge(){return dh||(yh(be),dh=mh.now()+ph)}function be(){dh=0}function we(){this._call=this._time=this._next=null}function xe(t,e,n){var i=new we;return i.restart(t,e,n),i}function Ee(){ge(),++uh;for(var t,e=Bc;e;)(t=dh-e._time)>=0&&e._call.call(null,t),e=e._next;--uh}function ke(){dh=(fh=mh.now())+ph,uh=lh=0;try{Ee()}finally{uh=0,function(){for(var t,e,n=Bc,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Bc=e);zc=t,Ce(i)}(),dh=0}}function Se(){var t=mh.now(),e=t-fh;e>hh&&(ph-=e,fh=t)}function Ce(t){uh||(lh&&(lh=clearTimeout(lh)),t-dh>24?(t<1/0&&(lh=setTimeout(ke,t-mh.now()-ph)),ch&&(ch=clearInterval(ch))):(ch||(fh=mh.now(),ch=setInterval(Se,hh)),uh=1,yh(ke)))}function Te(t,e,n){var i=new we;return e=null==e?0:+e,i.restart(function(n){i.stop(),t(n+e)},e,n),i}function Ae(t,e,n,i,r,o){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};!function(t,e,n){function i(u){var l,c,h,f;if(n.state!==bh)return o();for(l in a)if((f=a[l]).name===n.name){if(f.state===xh)return Te(i);f.state===Eh?(f.state=Sh,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete a[l]):+l<e&&(f.state=Sh,f.timer.stop(),delete a[l])}if(Te(function(){n.state===xh&&(n.state=Eh,n.timer.restart(r,n.delay,n.time),r(u))}),n.state=wh,n.on.call("start",t,t.__data__,n.index,n.group),n.state===wh){for(n.state=xh,s=new Array(h=n.tween.length),l=0,c=-1;l<h;++l)(f=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(s[++c]=f);s.length=c+1}}function r(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(o),n.state=kh,1),r=-1,a=s.length;++r<a;)s[r].call(null,i);n.state===kh&&(n.on.call("end",t,t.__data__,n.index,n.group),o())}function o(){n.state=Sh,n.timer.stop(),delete a[e];for(var i in a)return;delete t.__transition}var s,a=t.__transition;a[e]=n,n.timer=xe(function(t){n.state=bh,n.timer.restart(i,n.delay,n.time),n.delay<=t&&i(t-n.delay)},0,n.time)}(t,n,{name:e,index:i,group:r,on:_h,tween:vh,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:gh})}function Me(t,e){var n=Oe(t,e);if(n.state>gh)throw new Error("too late; already scheduled");return n}function Pe(t,e){var n=Oe(t,e);if(n.state>wh)throw new Error("too late; already started");return n}function Oe(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ie(t,e){var n,i,r,o=t.__transition,s=!0;if(o){e=null==e?null:e+"";for(r in o)(n=o[r]).name===e?(i=n.state>wh&&n.state<kh,n.state=Sh,n.timer.stop(),i&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete o[r]):s=!1;s&&delete t.__transition}}function De(t,e,n){var i=t._id;return t.each(function(){var t=Pe(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return Oe(t,i).value[e]}}function Le(t,e){var n;return("number"==typeof e?ae:e instanceof Mt?qc:(n=Mt(e))?(e=n,qc):le)(t,e)}function Re(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Fe(t){return ut().transition(t)}function Ne(){return++Th}function Ue(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function Ve(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function je(t){return(1-Math.cos(Ih*t))/2}function Be(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function ze(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function qe(t){return(t=+t)<Lh?qh*t*t:t<Fh?qh*(t-=Rh)*t+Nh:t<Vh?qh*(t-=Uh)*t+jh:qh*(t-=Bh)*t+zh}function He(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return Qh.time=ge(),Qh;return n}function Ke(t){return function(){return t}}function Ye(){t.event.stopImmediatePropagation()}function We(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function Ge(t){return{type:t}}function Xe(){return!t.event.button}function Ze(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Qe(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Je(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function $e(e){function n(t){var n=t.property("__brush",a).selectAll(".overlay").data([Ge("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",af.overlay).merge(n).each(function(){var t=Qe(this).extent;lt(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([Ge("selection")]).enter().append("rect").attr("class","selection").attr("cursor",af.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=t.selectAll(".handle").data(e.handles,function(t){return t.type});r.exit().remove(),r.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return af[t.type]}),t.each(i).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",s)}function i(){var t=lt(this),e=Qe(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-f/2:e[0][0]-f/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-f/2:e[0][1]-f/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+f:f}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+f:f})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function r(t,e){return t.__brush.emitter||new o(t,e)}function o(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function s(){function n(){var t=pt(x);!L||b||w||(Math.abs(t[0]-F[0])>Math.abs(t[1]-F[1])?w=!0:b=!0),F=t,g=!0,We(),o()}function o(){var t;switch(_=F[0]-R[0],v=F[1]-R[1],k){case tf:case $h:S&&(_=Math.max(P-a,Math.min(I-d,_)),l=a+_,p=d+_),C&&(v=Math.max(O-h,Math.min(D-m,v)),f=h+v,y=m+v);break;case ef:S<0?(_=Math.max(P-a,Math.min(I-a,_)),l=a+_,p=d):S>0&&(_=Math.max(P-d,Math.min(I-d,_)),l=a,p=d+_),C<0?(v=Math.max(O-h,Math.min(D-h,v)),f=h+v,y=m):C>0&&(v=Math.max(O-m,Math.min(D-m,v)),f=h,y=m+v);break;case nf:S&&(l=Math.max(P,Math.min(I,a-_*S)),p=Math.max(P,Math.min(I,d+_*S))),C&&(f=Math.max(O,Math.min(D,h-v*C)),y=Math.max(O,Math.min(D,m+v*C)))}p<l&&(S*=-1,t=a,a=d,d=t,t=l,l=p,p=t,E in uf&&V.attr("cursor",af[E=uf[E]])),y<f&&(C*=-1,t=h,h=m,m=t,t=f,f=y,y=t,E in lf&&V.attr("cursor",af[E=lf[E]])),T.selection&&(M=T.selection),b&&(l=M[0][0],p=M[1][0]),w&&(f=M[0][1],y=M[1][1]),M[0][0]===l&&M[0][1]===f&&M[1][0]===p&&M[1][1]===y||(T.selection=[[l,f],[p,y]],i.call(x),N.brush())}function s(){if(Ye(),t.event.touches){if(t.event.touches.length)return;u&&clearTimeout(u),u=setTimeout(function(){u=null},500),U.on("touchmove.brush touchend.brush touchcancel.brush",null)}else gt(t.event.view,g),j.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);U.attr("pointer-events","all"),V.attr("cursor",af.overlay),T.selection&&(M=T.selection),Je(M)&&(T.selection=null,i.call(x)),N.end()}if(t.event.touches){if(t.event.changedTouches.length<t.event.touches.length)return We()}else if(u)return;if(c.apply(this,arguments)){var a,l,h,f,d,p,m,y,_,v,g,b,w,x=this,E=t.event.target.__data__.type,k="selection"===(t.event.metaKey?E="overlay":E)?$h:t.event.altKey?nf:ef,S=e===of?null:cf[E],C=e===rf?null:hf[E],T=Qe(x),A=T.extent,M=T.selection,P=A[0][0],O=A[0][1],I=A[1][0],D=A[1][1],L=S&&C&&t.event.shiftKey,R=pt(x),F=R,N=r(x,arguments).beforestart();"overlay"===E?T.selection=M=[[a=e===of?P:R[0],h=e===rf?O:R[1]],[d=e===of?I:a,m=e===rf?D:h]]:(a=M[0][0],h=M[0][1],d=M[1][0],m=M[1][1]),l=a,f=h,p=d,y=m;var U=lt(x).attr("pointer-events","none"),V=U.selectAll(".overlay").attr("cursor",af[E]);if(t.event.touches)U.on("touchmove.brush",n,!0).on("touchend.brush touchcancel.brush",s,!0);else{var j=lt(t.event.view).on("keydown.brush",function(){switch(t.event.keyCode){case 16:L=S&&C;break;case 18:k===ef&&(S&&(d=p-_*S,a=l+_*S),C&&(m=y-v*C,h=f+v*C),k=nf,o());break;case 32:k!==ef&&k!==nf||(S<0?d=p-_:S>0&&(a=l-_),C<0?m=y-v:C>0&&(h=f-v),k=tf,V.attr("cursor",af.selection),o());break;default:return}We()},!0).on("keyup.brush",function(){switch(t.event.keyCode){
case 16:L&&(b=w=L=!1,o());break;case 18:k===nf&&(S<0?d=p:S>0&&(a=l),C<0?m=y:C>0&&(h=f),k=ef,o());break;case 32:k===tf&&(t.event.altKey?(S&&(d=p-_*S,a=l+_*S),C&&(m=y-v*C,h=f+v*C),k=nf):(S<0?d=p:S>0&&(a=l),C<0?m=y:C>0&&(h=f),k=ef),V.attr("cursor",af[E]),o());break;default:return}We()},!0).on("mousemove.brush",n,!0).on("mouseup.brush",s,!0);vt(t.event.view)}Ye(),Ie(x),i.call(x),N.start()}}function a(){var t=this.__brush||{selection:null};return t.extent=l.apply(this,arguments),t.dim=e,t}var u,l=Ze,c=Xe,h=C(n,"start","brush","end"),f=6;return n.move=function(t,n){t.selection?t.on("start.brush",function(){r(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){r(this,arguments).end()}).tween("brush",function(){function t(t){s.selection=1===t&&Je(l)?null:c(t),i.call(o),a.brush()}var o=this,s=o.__brush,a=r(o,arguments),u=s.selection,l=e.input("function"==typeof n?n.apply(this,arguments):n,s.extent),c=ce(u,l);return u&&l?t:t(1)}):t.each(function(){var t=arguments,o=this.__brush,s=e.input("function"==typeof n?n.apply(this,t):n,o.extent),a=r(this,t).beforestart();Ie(this),o.selection=null==s||Je(s)?null:s,i.call(this),a.start().brush().end()})},o.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){ot(new function(t,e,n){this.target=t,this.type=e,this.selection=n}(n,t,e.output(this.state.selection)),h.apply,h,[t,this.that,this.args])}},n.extent=function(t){return arguments.length?(l="function"==typeof t?t:Ke([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),n):l},n.filter=function(t){return arguments.length?(c="function"==typeof t?t:Ke(!!t),n):c},n.handleSize=function(t){return arguments.length?(f=+t,n):f},n.on=function(){var t=h.on.apply(h,arguments);return t===h?n:t},n}function tn(t){return function(){return t}}function en(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function nn(){return new en}function rn(t){return t.source}function on(t){return t.target}function sn(t){return t.radius}function an(t){return t.startAngle}function un(t){return t.endAngle}function ln(){}function cn(t,e){var n=new ln;if(t instanceof ln)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var i,r=-1,o=t.length;if(null==e)for(;++r<o;)n.set(r,t[r]);else for(;++r<o;)n.set(e(i=t[r],r,t),i)}else if(t)for(var s in t)n.set(s,t[s]);return n}function hn(){return{}}function fn(t,e,n){t[e]=n}function dn(){return cn()}function pn(t,e,n){t.set(e,n)}function mn(){}function yn(t,e){var n=new mn;if(t instanceof mn)t.each(function(t){n.add(t)});else if(t){var i=-1,r=t.length;if(null==e)for(;++i<r;)n.add(t[i]);else for(;++i<r;)n.add(e(t[i],i,t))}return n}function _n(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function vn(t){function e(t,e){function n(){if(l)return kf;if(c)return c=!1,Ef;var e,n,i=a;if(t.charCodeAt(i)===Sf){for(;a++<s&&t.charCodeAt(a)!==Sf||t.charCodeAt(++a)===Sf;);return(e=a)>=s?l=!0:(n=t.charCodeAt(a++))===Cf?c=!0:n===Tf&&(c=!0,t.charCodeAt(a)===Cf&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}for(;a<s;){if((n=t.charCodeAt(e=a++))===Cf)c=!0;else if(n===Tf)c=!0,t.charCodeAt(a)===Cf&&++a;else if(n!==o)continue;return t.slice(i,e)}return l=!0,t.slice(i,s)}var i,r=[],s=t.length,a=0,u=0,l=s<=0,c=!1;for(t.charCodeAt(s-1)===Cf&&--s,t.charCodeAt(s-1)===Tf&&--s;(i=n())!==kf;){for(var h=[];i!==Ef&&i!==kf;)h.push(i),i=n();e&&null==(h=e(h,u++))||r.push(h)}return r}function n(e){return e.map(i).join(t)}function i(t){return null==t?"":r.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}var r=new RegExp('["'+t+"\n\r]"),o=t.charCodeAt(0);return{parse:function(t,n){var i,r,o=e(t,function(t,e){return i?i(t,e-1):(r=t,void(i=n?function(t,e){var n=_n(t);return function(i,r){return e(n(i),r,t)}}(t,n):_n(t)))});return o.columns=r||[],o},parseRows:e,format:function(e,n){return null==n&&(n=function(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var i in t)i in e||n.push(e[i]=i)}),n}(e)),[n.map(i).join(t)].concat(e.map(function(e){return n.map(function(t){return i(e[t])}).join(t)})).join("\n")},formatRows:function(t){return t.map(n).join("\n")}}}function gn(t){return function(){return t}}function bn(){return 1e-6*(Math.random()-.5)}function wn(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,o,s,a,u,l,c,h,f,d=t._root,p={data:i},m=t._x0,y=t._y0,_=t._x1,v=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((l=e>=(o=(m+_)/2))?m=o:_=o,(c=n>=(s=(y+v)/2))?y=s:v=s,r=d,!(d=d[h=c<<1|l]))return r[h]=p,t;if(a=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===a&&n===u)return p.next=d,r?r[h]=p:t._root=p,t;do r=r?r[h]=new Array(4):t._root=new Array(4),(l=e>=(o=(m+_)/2))?m=o:_=o,(c=n>=(s=(y+v)/2))?y=s:v=s;while((h=c<<1|l)==(f=(u>=s)<<1|a>=o));return r[f]=d,r[h]=p,t}function xn(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}function En(t){return t[0]}function kn(t){return t[1]}function Sn(t,e,n){var i=new Cn(null==e?En:e,null==n?kn:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function Cn(t,e,n,i,r,o){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function Tn(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}function An(t){return t.x+t.vx}function Mn(t){return t.y+t.vy}function Pn(t){return t.index}function On(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function In(t){return t.x}function Dn(t){return t.y}function Ln(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Rn(t){return(t=Ln(Math.abs(t)))?t[1]:NaN}function Fn(t,e){var n=Ln(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array((-r)).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}function Nn(t){return new Un(t)}function Un(t){if(!(e=qf.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",i=e[2]||">",r=e[3]||"-",o=e[4]||"",s=!!e[5],a=e[6]&&+e[6],u=!!e[7],l=e[8]&&+e[8].slice(1),c=e[9]||"";"n"===c?(u=!0,c="g"):zf[c]||(c=""),(s||"0"===n&&"="===i)&&(s=!0,n="0",i="="),this.fill=n,this.align=i,this.sign=r,this.symbol=o,this.zero=s,this.width=a,this.comma=u,this.precision=l,this.type=c}function Vn(t){return t}function jn(t){function e(t){function e(t){var e,i,s,c=y,b=_;if("c"===m)b=v(t)+b,t="";else{var w=(t=+t)<0;if(t=v(Math.abs(t),p),w&&0==+t&&(w=!1),c=(w?"("===l?l:"-":"-"===l||"("===l?"":l)+c,b=("s"===m?Kf[8+Vf/3]:"")+b+(w&&"("===l?")":""),g)for(e=-1,i=t.length;++e<i;)if(48>(s=t.charCodeAt(e))||s>57){b=(46===s?r+t.slice(e+1):t.slice(e))+b,t=t.slice(0,e);break}}d&&!h&&(t=n(t,1/0));var x=c.length+t.length+b.length,E=x<f?new Array(f-x+1).join(a):"";switch(d&&h&&(t=n(E+t,E.length?f-b.length:1/0),E=""),u){case"<":t=c+t+b+E;break;case"=":t=c+E+t+b;break;case"^":t=E.slice(0,x=E.length>>1)+c+t+b+E.slice(x);break;default:t=E+c+t+b}return o(t)}var a=(t=Nn(t)).fill,u=t.align,l=t.sign,c=t.symbol,h=t.zero,f=t.width,d=t.comma,p=t.precision,m=t.type,y="$"===c?i[0]:"#"===c&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",_="$"===c?i[1]:/[%p]/.test(m)?s:"",v=zf[m],g=!m||/[defgprs%]/.test(m);return p=null==p?m?6:12:/[gprs]/.test(m)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),e.toString=function(){return t+""},e}var n=t.grouping&&t.thousands?function(t,e){return function(n,i){for(var r=n.length,o=[],s=0,a=t[0],u=0;r>0&&a>0&&(u+a+1>i&&(a=Math.max(1,i-u)),o.push(n.substring(r-=a,r+a)),!((u+=a+1)>i));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}(t.grouping,t.thousands):Vn,i=t.currency,r=t.decimal,o=t.numerals?function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(t.numerals):Vn,s=t.percent||"%";return{format:e,formatPrefix:function(t,n){var i=e((t=Nn(t),t.type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Rn(n)/3))),o=Math.pow(10,-r),s=Kf[8+r/3];return function(t){return i(o*t)+s}}}}function Bn(e){return Hf=jn(e),t.format=Hf.format,t.formatPrefix=Hf.formatPrefix,Hf}function zn(t){return Math.max(0,-Rn(Math.abs(t)))}function qn(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Rn(e)/3)))-Rn(Math.abs(t)))}function Hn(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Rn(e)-Rn(t))+1}function Kn(){return new Yn}function Yn(){this.reset()}function Wn(t,e,n){var i=t.s=e+n,r=i-e,o=i-r;t.t=e-o+(n-r)}function Gn(t){return t>1?0:t<-1?Cd:Math.acos(t)}function Xn(t){return t>1?Td:t<-1?-Td:Math.asin(t)}function Zn(t){return(t=jd(t/2))*t}function Qn(){}function Jn(t,e){t&&Kd.hasOwnProperty(t.type)&&Kd[t.type](t,e)}function $n(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function ti(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)$n(t[n],e,1);e.polygonEnd()}function ei(t,e){t&&Hd.hasOwnProperty(t.type)?Hd[t.type](t,e):Jn(t,e)}function ni(){Gd.point=ri}function ii(){oi(Yf,Wf)}function ri(t,e){Gd.point=oi,Yf=t,Wf=e,Gf=t*=Od,Xf=Rd(e=(e*=Od)/2+Ad),Zf=jd(e)}function oi(t,e){e=(e*=Od)/2+Ad;var n=(t*=Od)-Gf,i=n>=0?1:-1,r=i*n,o=Rd(e),s=jd(e),a=Zf*s,u=Xf*o+a*Rd(r),l=a*i*jd(r);Yd.add(Ld(l,u)),Gf=t,Xf=o,Zf=s}function si(t){return[Ld(t[1],t[0]),Xn(t[2])]}function ai(t){var e=t[0],n=t[1],i=Rd(n);return[i*Rd(e),i*jd(e),jd(n)]}function ui(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function li(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ci(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function hi(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function fi(t){var e=zd(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function di(t,e){od.push(sd=[Qf=t,$f=t]),e<Jf&&(Jf=e),e>td&&(td=e)}function pi(t,e){var n=ai([t*Od,e*Od]);if(rd){var i=li(rd,n),r=li([i[1],-i[0],0],i);fi(r),r=si(r);var o,s=t-ed,a=s>0?1:-1,u=r[0]*Pd*a,l=Id(s)>180;l^(a*ed<u&&u<a*t)?(o=r[1]*Pd)>td&&(td=o):(u=(u+360)%360-180,l^(a*ed<u&&u<a*t)?(o=-r[1]*Pd)<Jf&&(Jf=o):(e<Jf&&(Jf=e),e>td&&(td=e))),l?t<ed?bi(Qf,t)>bi(Qf,$f)&&($f=t):bi(t,$f)>bi(Qf,$f)&&(Qf=t):$f>=Qf?(t<Qf&&(Qf=t),t>$f&&($f=t)):t>ed?bi(Qf,t)>bi(Qf,$f)&&($f=t):bi(t,$f)>bi(Qf,$f)&&(Qf=t)}else od.push(sd=[Qf=t,$f=t]);e<Jf&&(Jf=e),e>td&&(td=e),rd=n,ed=t}function mi(){Zd.point=pi}function yi(){sd[0]=Qf,sd[1]=$f,Zd.point=di,rd=null}function _i(t,e){if(rd){var n=t-ed;Xd.add(Id(n)>180?n+(n>0?360:-360):n)}else nd=t,id=e;Gd.point(t,e),pi(t,e)}function vi(){Gd.lineStart()}function gi(){_i(nd,id),Gd.lineEnd(),Id(Xd)>kd&&(Qf=-($f=180)),sd[0]=Qf,sd[1]=$f,rd=null}function bi(t,e){return(e-=t)<0?e+360:e}function wi(t,e){return t[0]-e[0]}function xi(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function Ei(t,e){t*=Od;var n=Rd(e*=Od);ki(n*Rd(t),n*jd(t),jd(e))}function ki(t,e,n){ld+=(t-ld)/++ad,cd+=(e-cd)/ad,hd+=(n-hd)/ad}function Si(){Qd.point=Ci}function Ci(t,e){t*=Od;var n=Rd(e*=Od);bd=n*Rd(t),wd=n*jd(t),xd=jd(e),Qd.point=Ti,ki(bd,wd,xd)}function Ti(t,e){t*=Od;var n=Rd(e*=Od),i=n*Rd(t),r=n*jd(t),o=jd(e),s=Ld(zd((s=wd*o-xd*r)*s+(s=xd*i-bd*o)*s+(s=bd*r-wd*i)*s),bd*i+wd*r+xd*o);ud+=s,fd+=s*(bd+(bd=i)),dd+=s*(wd+(wd=r)),pd+=s*(xd+(xd=o)),ki(bd,wd,xd)}function Ai(){Qd.point=Ei}function Mi(){Qd.point=Oi}function Pi(){Ii(vd,gd),Qd.point=Ei}function Oi(t,e){vd=t,gd=e,t*=Od,e*=Od,Qd.point=Ii;var n=Rd(e);bd=n*Rd(t),wd=n*jd(t),xd=jd(e),ki(bd,wd,xd)}function Ii(t,e){t*=Od;var n=Rd(e*=Od),i=n*Rd(t),r=n*jd(t),o=jd(e),s=wd*o-xd*r,a=xd*i-bd*o,u=bd*r-wd*i,l=zd(s*s+a*a+u*u),c=Xn(l),h=l&&-c/l;md+=h*s,yd+=h*a,_d+=h*u,ud+=c,fd+=c*(bd+(bd=i)),dd+=c*(wd+(wd=r)),pd+=c*(xd+(xd=o)),ki(bd,wd,xd)}function Di(t){return function(){return t}}function Li(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function Ri(t,e){return[t>Cd?t-Md:t<-Cd?t+Md:t,e]}function Fi(t,e,n){return(t%=Md)?e||n?Li(Ui(t),Vi(e,n)):Ui(t):e||n?Vi(e,n):Ri}function Ni(t){return function(e,n){return e+=t,[e>Cd?e-Md:e<-Cd?e+Md:e,n]}}function Ui(t){var e=Ni(t);return e.invert=Ni(-t),e}function Vi(t,e){function n(t,e){var n=Rd(e),a=Rd(t)*n,u=jd(t)*n,l=jd(e),c=l*i+a*r;return[Ld(u*o-c*s,a*i-l*r),Xn(c*o+u*s)]}var i=Rd(t),r=jd(t),o=Rd(e),s=jd(e);return n.invert=function(t,e){var n=Rd(e),a=Rd(t)*n,u=jd(t)*n,l=jd(e),c=l*o-u*s;return[Ld(u*o+l*s,a*i+c*r),Xn(c*i-a*r)]},n}function ji(t){function e(e){return e=t(e[0]*Od,e[1]*Od),e[0]*=Pd,e[1]*=Pd,e}return t=Fi(t[0]*Od,t[1]*Od,t.length>2?t[2]*Od:0),e.invert=function(e){return e=t.invert(e[0]*Od,e[1]*Od),e[0]*=Pd,e[1]*=Pd,e},e}function Bi(t,e,n,i,r,o){if(n){var s=Rd(e),a=jd(e),u=i*n;null==r?(r=e+i*Md,o=e-u/2):(r=zi(s,r),o=zi(s,o),(i>0?r<o:r>o)&&(r+=i*Md));for(var l,c=r;i>0?c>o:c<o;c-=u)l=si([s,-a*Rd(c),-a*jd(c)]),t.point(l[0],l[1])}}function zi(t,e){(e=ai(e))[0]-=t,fi(e);var n=Gn(-e[1]);return((-e[2]<0?-n:n)+Md-kd)%Md}function qi(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Qn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Hi(t,e){return Id(t[0]-e[0])<kd&&Id(t[1]-e[1])<kd}function Ki(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Yi(t,e,n,i,r){var o,s,a=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],s=t[e];if(Hi(i,s)){for(r.lineStart(),o=0;o<e;++o)r.point((i=t[o])[0],i[1]);r.lineEnd()}else a.push(n=new Ki(i,t,null,(!0))),u.push(n.o=new Ki(i,null,n,(!1))),a.push(n=new Ki(s,t,null,(!1))),u.push(n.o=new Ki(s,null,n,(!0)))}}),a.length){for(u.sort(e),Wi(a),Wi(u),o=0,s=u.length;o<s;++o)u[o].e=n=!n;for(var l,c,h=a[0];;){for(var f=h,d=!0;f.v;)if((f=f.n)===h)return;l=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(o=0,s=l.length;o<s;++o)r.point((c=l[o])[0],c[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(d)for(l=f.p.z,o=l.length-1;o>=0;--o)r.point((c=l[o])[0],c[1]);else i(f.x,f.p.x,-1,r);f=f.p}l=(f=f.o).z,d=!d}while(!f.v);r.lineEnd()}}}function Wi(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function Gi(t,e){var n=e[0],i=e[1],r=[jd(n),-Rd(n),0],o=0,s=0;lp.reset();for(var a=0,u=t.length;a<u;++a)if(c=(l=t[a]).length)for(var l,c,h=l[c-1],f=h[0],d=h[1]/2+Ad,p=jd(d),m=Rd(d),y=0;y<c;++y,f=v,p=b,m=w,h=_){var _=l[y],v=_[0],g=_[1]/2+Ad,b=jd(g),w=Rd(g),x=v-f,E=x>=0?1:-1,k=E*x,S=k>Cd,C=p*b;if(lp.add(Ld(C*E*jd(k),m*w+C*Rd(k))),o+=S?x+E*Md:x,S^f>=n^v>=n){var T=li(ai(h),ai(_));fi(T);var A=li(r,T);fi(A);var M=(S^x>=0?-1:1)*Xn(A[2]);(i>M||i===M&&(T[0]||T[1]))&&(s+=S^x>=0?1:-1)}}return(o<-kd||o<kd&&lp<-kd)^1&s}function Xi(t,e,n,i){return function(r){function o(e,n){t(e,n)&&r.point(e,n)}function s(t,e){m.point(t,e)}function a(){b.point=s,m.lineStart()}function u(){b.point=o,m.lineEnd()}function l(t,e){p.push([t,e]),v.point(t,e)}function c(){v.lineStart(),p=[]}function h(){l(p[0][0],p[0][1]),v.lineEnd();var t,e,n,i,o=v.clean(),s=y.result(),a=s.length;if(p.pop(),f.push(p),p=null,a)if(1&o){if(n=s[0],(e=n.length-1)>0){for(g||(r.polygonStart(),g=!0),r.lineStart(),t=0;t<e;++t)r.point((i=n[t])[0],i[1]);r.lineEnd()}}else a>1&&2&o&&s.push(s.pop().concat(s.shift())),d.push(s.filter(Zi))}var f,d,p,m=e(r),y=qi(),v=e(y),g=!1,b={point:o,lineStart:a,lineEnd:u,polygonStart:function(){b.point=l,b.lineStart=c,b.lineEnd=h,d=[],f=[]},polygonEnd:function(){b.point=o,b.lineStart=a,b.lineEnd=u,d=_(d);var t=Gi(f,i);d.length?(g||(r.polygonStart(),g=!0),Yi(d,Qi,t,n,r)):t&&(g||(r.polygonStart(),g=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),g&&(r.polygonEnd(),g=!1),d=f=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};return b}}function Zi(t){return t.length>1}function Qi(t,e){return((t=t.x)[0]<0?t[1]-Td-kd:Td-t[1])-((e=e.x)[0]<0?e[1]-Td-kd:Td-e[1])}function Ji(t){function e(t,e){return Rd(t)*Rd(e)>r}function n(t,e,n){var i=[1,0,0],o=li(ai(t),ai(e)),s=ui(o,o),a=o[0],u=s-a*a;if(!u)return!n&&t;var l=r*s/u,c=-r*a/u,h=li(i,o),f=hi(i,l);ci(f,hi(o,c));var d=h,p=ui(f,d),m=ui(d,d),y=p*p-m*(ui(f,f)-1);if(!(y<0)){var _=zd(y),v=hi(d,(-p-_)/m);if(ci(v,f),v=si(v),!n)return v;var g,b=t[0],w=e[0],x=t[1],E=e[1];w<b&&(g=b,b=w,w=g);var k=w-b,S=Id(k-Cd)<kd;if(!S&&E<x&&(g=x,x=E,E=g),S||k<kd?S?x+E>0^v[1]<(Id(v[0]-b)<kd?x:E):x<=v[1]&&v[1]<=E:k>Cd^(b<=v[0]&&v[0]<=w)){var C=hi(d,(-p+_)/m);return ci(C,f),[v,si(C)]}}}function i(e,n){var i=s?t:Cd-t,r=0;return e<-i?r|=1:e>i&&(r|=2),n<-i?r|=4:n>i&&(r|=8),r}var r=Rd(t),o=6*Od,s=r>0,a=Id(r)>kd;return Xi(e,function(t){var r,o,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(h,f){var d,p=[h,f],m=e(h,f),y=s?m?0:i(h,f):m?i(h+(h<0?Cd:-Cd),f):0;if(!r&&(l=u=m)&&t.lineStart(),m!==u&&(!(d=n(r,p))||Hi(r,d)||Hi(p,d))&&(p[0]+=kd,p[1]+=kd,m=e(p[0],p[1])),m!==u)c=0,m?(t.lineStart(),d=n(p,r),t.point(d[0],d[1])):(d=n(r,p),t.point(d[0],d[1]),t.lineEnd()),r=d;else if(a&&r&&s^m){var _;y&o||!(_=n(p,r,!0))||(c=0,s?(t.lineStart(),t.point(_[0][0],_[0][1]),t.point(_[1][0],_[1][1]),t.lineEnd()):(t.point(_[1][0],_[1][1]),t.lineEnd(),t.lineStart(),t.point(_[0][0],_[0][1])))}!m||r&&Hi(r,p)||t.point(p[0],p[1]),r=p,u=m,o=y},lineEnd:function(){u&&t.lineEnd(),r=null},clean:function(){return c|(l&&u)<<1}}},function(e,n,i,r){Bi(r,t,o,i,e,n)},s?[0,-t]:[-Cd,t-Cd])}function $i(t,e,n,i){function r(r,o){return t<=r&&r<=n&&e<=o&&o<=i}function o(r,o,a,l){var c=0,h=0;if(null==r||(c=s(r,a))!==(h=s(o,a))||u(r,o)<0^a>0){do l.point(0===c||3===c?t:n,c>1?i:e);while((c=(c+a+4)%4)!==h)}else l.point(o[0],o[1])}function s(i,r){return Id(i[0]-t)<kd?r>0?0:3:Id(i[0]-n)<kd?r>0?2:1:Id(i[1]-e)<kd?r>0?1:0:r>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var n=s(t,1),i=s(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function u(t,e){r(t,e)&&x.point(t,e)}function l(o,s){var a=r(o,s);if(h&&f.push([o,s]),b)d=o,p=s,m=a,b=!1,a&&(x.lineStart(),x.point(o,s));else if(a&&g)x.point(o,s);else{var u=[y=Math.max(fp,Math.min(hp,y)),v=Math.max(fp,Math.min(hp,v))],l=[o=Math.max(fp,Math.min(hp,o)),s=Math.max(fp,Math.min(hp,s))];!function(t,e,n,i,r,o){var s,a=t[0],u=t[1],l=0,c=1,h=e[0]-a,f=e[1]-u;if(s=n-a,h||!(s>0)){if(s/=h,h<0){if(s<l)return;s<c&&(c=s)}else if(h>0){if(s>c)return;s>l&&(l=s)}if(s=r-a,h||!(s<0)){if(s/=h,h<0){if(s>c)return;s>l&&(l=s)}else if(h>0){if(s<l)return;s<c&&(c=s)}if(s=i-u,f||!(s>0)){if(s/=f,f<0){if(s<l)return;s<c&&(c=s)}else if(f>0){if(s>c)return;s>l&&(l=s)}if(s=o-u,f||!(s<0)){if(s/=f,f<0){if(s>c)return;s>l&&(l=s)}else if(f>0){if(s<l)return;s<c&&(c=s)}return l>0&&(t[0]=a+l*h,t[1]=u+l*f),c<1&&(e[0]=a+c*h,e[1]=u+c*f),!0}}}}}(u,l,t,e,n,i)?a&&(x.lineStart(),x.point(o,s),w=!1):(g||(x.lineStart(),x.point(u[0],u[1])),x.point(l[0],l[1]),a||x.lineEnd(),w=!1)}y=o,v=s,g=a}var c,h,f,d,p,m,y,v,g,b,w,x=s,E=qi(),k={point:u,lineStart:function(){k.point=l,h&&h.push(f=[]),b=!0,g=!1,y=v=NaN},lineEnd:function(){c&&(l(d,p),m&&g&&E.rejoin(),c.push(E.result())),k.point=u,g&&x.lineEnd()},polygonStart:function(){x=E,c=[],h=[],w=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=h.length;n<r;++n)for(var o,s,a=h[n],u=1,l=a.length,c=a[0],f=c[0],d=c[1];u<l;++u)o=f,s=d,f=(c=a[u])[0],d=c[1],s<=i?d>i&&(f-o)*(i-s)>(d-s)*(t-o)&&++e:d<=i&&(f-o)*(i-s)<(d-s)*(t-o)&&--e;return e}(),n=w&&e,r=(c=_(c)).length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),r&&Yi(c,a,e,o,s),s.polygonEnd()),x=s,c=h=f=null}};return k}}function tr(){pp.point=pp.lineEnd=Qn}function er(t,e){Jd=t*=Od,$d=jd(e*=Od),tp=Rd(e),pp.point=nr}function nr(t,e){t*=Od;var n=jd(e*=Od),i=Rd(e),r=Id(t-Jd),o=Rd(r),s=i*jd(r),a=tp*n-$d*i*o,u=$d*n+tp*i*o;dp.add(Ld(zd(s*s+a*a),u)),Jd=t,$d=n,tp=i}function ir(t){return dp.reset(),ei(t,pp),+dp}function rr(t,e){return mp[0]=t,mp[1]=e,ir(yp)}function or(t,e){return!(!t||!vp.hasOwnProperty(t.type))&&vp[t.type](t,e)}function sr(t,e){return 0===rr(t,e)}function ar(t,e){var n=rr(t[0],t[1]);return rr(t[0],e)+rr(e,t[1])<=n+kd}function ur(t,e){return!!Gi(t.map(lr),cr(e))}function lr(t){return(t=t.map(cr)).pop(),t}function cr(t){return[t[0]*Od,t[1]*Od]}function hr(t,e,n){var i=h(t,e-kd,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function fr(t,e,n){var i=h(t,e-kd,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function dr(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return h(Fd(o/_)*_,r,_).map(d).concat(h(Fd(l/v)*v,u,v).map(p)).concat(h(Fd(i/m)*m,n,m).filter(function(t){return Id(t%_)>kd}).map(c)).concat(h(Fd(a/y)*y,s,y).filter(function(t){return Id(t%v)>kd}).map(f))}var n,i,r,o,s,a,u,l,c,f,d,p,m=10,y=m,_=90,v=360,g=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[d(o).concat(p(u).slice(1),d(r).reverse().slice(1),p(l).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.extentMajor(e).extentMinor(e):t.extentMinor()},t.extentMajor=function(e){return arguments.length?(o=+e[0][0],r=+e[1][0],l=+e[0][1],u=+e[1][1],o>r&&(e=o,o=r,r=e),l>u&&(e=l,l=u,u=e),t.precision(g)):[[o,l],[r,u]]},t.extentMinor=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],a=+e[0][1],s=+e[1][1],i>n&&(e=i,i=n,n=e),a>s&&(e=a,a=s,s=e),t.precision(g)):[[i,a],[n,s]]},t.step=function(e){return arguments.length?t.stepMajor(e).stepMinor(e):t.stepMinor()},t.stepMajor=function(e){return arguments.length?(_=+e[0],v=+e[1],t):[_,v]},t.stepMinor=function(e){return arguments.length?(m=+e[0],y=+e[1],t):[m,y]},t.precision=function(e){return arguments.length?(g=+e,c=hr(a,s,90),f=fr(i,n,g),d=hr(l,u,90),p=fr(o,r,g),t):g},t.extentMajor([[-180,-90+kd],[180,90-kd]]).extentMinor([[-180,-80-kd],[180,80+kd]])}function pr(t){return t}function mr(){wp.point=yr}function yr(t,e){wp.point=_r,ep=ip=t,np=rp=e}function _r(t,e){bp.add(rp*t-ip*e),ip=t,rp=e}function vr(){_r(ep,np)}function gr(t,e){Tp+=t,Ap+=e,++Mp}function br(){Fp.point=wr}function wr(t,e){Fp.point=xr,gr(ap=t,up=e)}function xr(t,e){var n=t-ap,i=e-up,r=zd(n*n+i*i);Pp+=r*(ap+t)/2,Op+=r*(up+e)/2,Ip+=r,gr(ap=t,up=e)}function Er(){Fp.point=gr}function kr(){Fp.point=Cr}function Sr(){Tr(op,sp)}function Cr(t,e){Fp.point=Tr,gr(op=ap=t,sp=up=e)}function Tr(t,e){var n=t-ap,i=e-up,r=zd(n*n+i*i);Pp+=r*(ap+t)/2,Op+=r*(up+e)/2,Ip+=r,Dp+=(r=up*t-ap*e)*(ap+t),Lp+=r*(up+e),Rp+=3*r,gr(ap=t,up=e)}function Ar(t){this._context=t}function Mr(t,e){qp.point=Pr,Up=jp=t,Vp=Bp=e}function Pr(t,e){jp-=t,Bp-=e,zp.add(zd(jp*jp+Bp*Bp)),jp=t,Bp=e}function Or(){this._string=[]}function Ir(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Dr(t){return function(e){var n=new Lr;for(var i in t)n[i]=t[i];return n.stream=e,n}}function Lr(){}function Rr(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),ei(n,t.stream(Cp)),e(Cp.result()),null!=i&&t.clipExtent(i),t}function Fr(t,e,n){return Rr(t,function(n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=Math.min(i/(n[1][0]-n[0][0]),r/(n[1][1]-n[0][1])),s=+e[0][0]+(i-o*(n[1][0]+n[0][0]))/2,a=+e[0][1]+(r-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([s,a])},n)}function Nr(t,e,n){return Fr(t,[[0,0],e],n)}function Ur(t,e,n){return Rr(t,function(n){var i=+e,r=i/(n[1][0]-n[0][0]),o=(i-r*(n[1][0]+n[0][0]))/2,s=-r*n[0][1];t.scale(150*r).translate([o,s])},n)}function Vr(t,e,n){return Rr(t,function(n){var i=+e,r=i/(n[1][1]-n[0][1]),o=-r*n[0][0],s=(i-r*(n[1][1]+n[0][1]))/2;t.scale(150*r).translate([o,s])},n)}function jr(t,e){return+e?function(t,e){function n(i,r,o,s,a,u,l,c,h,f,d,p,m,y){var _=l-i,v=c-r,g=_*_+v*v;if(g>4*e&&m--){var b=s+f,w=a+d,x=u+p,E=zd(b*b+w*w+x*x),k=Xn(x/=E),S=Id(Id(x)-1)<kd||Id(o-h)<kd?(o+h)/2:Ld(w,b),C=t(S,k),T=C[0],A=C[1],M=T-i,P=A-r,O=v*M-_*P;(O*O/g>e||Id((_*M+v*P)/g-.5)>.3||s*f+a*d+u*p<Kp)&&(n(i,r,o,s,a,u,T,A,S,b/=E,w/=E,x,m,y),y.point(T,A),n(T,A,S,b,w,x,l,c,h,f,d,p,m,y))}}return function(e){function i(n,i){n=t(n,i),e.point(n[0],n[1])}function r(){_=NaN,x.point=o,e.lineStart()}function o(i,r){var o=ai([i,r]),s=t(i,r);n(_,v,y,g,b,w,_=s[0],v=s[1],y=i,g=o[0],b=o[1],w=o[2],Hp,e),e.point(_,v)}function s(){x.point=i,e.lineEnd()}function a(){r(),x.point=u,x.lineEnd=l}function u(t,e){o(c=t,e),h=_,f=v,d=g,p=b,m=w,x.point=o}function l(){n(_,v,y,g,b,w,h,f,c,d,p,m,Hp,e),x.lineEnd=s,s()}var c,h,f,d,p,m,y,_,v,g,b,w,x={point:i,lineStart:r,lineEnd:s,polygonStart:function(){e.polygonStart(),x.lineStart=a},polygonEnd:function(){e.polygonEnd(),x.lineStart=r}};return x}}(t,e):function(t){return Dr({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}function Br(t){return zr(function(){return t})()}function zr(t){function e(t){return t=l(t[0]*Od,t[1]*Od),[t[0]*m+s,a-t[1]*m]}function n(t,e){return t=o(t,e),[t[0]*m+s,a-t[1]*m]}function i(){l=Li(u=Fi(b,w,x),o);var t=o(v,g);return s=y-t[0]*m,a=_+t[1]*m,r()}function r(){return d=p=null,e}var o,s,a,u,l,c,h,f,d,p,m=150,y=480,_=250,v=0,g=0,b=0,w=0,x=0,E=null,k=cp,S=null,C=pr,T=.5,A=jr(n,T);return e.stream=function(t){return d&&p===t?d:d=Yp(function(t){return Dr({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}(u)(k(A(C(p=t)))))},e.preclip=function(t){return arguments.length?(k=t,E=void 0,r()):k},e.postclip=function(t){return arguments.length?(C=t,S=c=h=f=null,r()):C},e.clipAngle=function(t){return arguments.length?(k=+t?Ji(E=t*Od):(E=null,cp),r()):E*Pd},e.clipExtent=function(t){return arguments.length?(C=null==t?(S=c=h=f=null,pr):$i(S=+t[0][0],c=+t[0][1],h=+t[1][0],f=+t[1][1]),r()):null==S?null:[[S,c],[h,f]]},e.scale=function(t){return arguments.length?(m=+t,i()):m},e.translate=function(t){return arguments.length?(y=+t[0],_=+t[1],i()):[y,_]},e.center=function(t){return arguments.length?(v=t[0]%360*Od,g=t[1]%360*Od,i()):[v*Pd,g*Pd]},e.rotate=function(t){return arguments.length?(b=t[0]%360*Od,w=t[1]%360*Od,x=t.length>2?t[2]%360*Od:0,i()):[b*Pd,w*Pd,x*Pd]},e.precision=function(t){return arguments.length?(A=jr(n,T=t*t),r()):zd(T)},e.fitExtent=function(t,n){return Fr(e,t,n)},e.fitSize=function(t,n){return Nr(e,t,n)},e.fitWidth=function(t,n){return Ur(e,t,n)},e.fitHeight=function(t,n){return Vr(e,t,n)},function(){return o=t.apply(this,arguments),e.invert=o.invert&&function(t){return(t=l.invert((t[0]-s)/m,(a-t[1])/m))&&[t[0]*Pd,t[1]*Pd]},i()}}function qr(t){var e=0,n=Cd/3,i=zr(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*Od,n=t[1]*Od):[e*Pd,n*Pd]},r}function Hr(t,e){function n(t,e){var n=zd(o-2*r*jd(e))/r;return[n*jd(t*=r),s-n*Rd(t)]}var i=jd(t),r=(i+jd(e))/2;if(Id(r)<kd)return function(t){function e(t,e){return[t*n,jd(e)/n]}var n=Rd(t);return e.invert=function(t,e){return[t/n,Xn(e*n)]},e}(t);var o=1+i*(2*r-i),s=zd(o)/r;return n.invert=function(t,e){var n=s-e;return[Ld(t,Id(n))/r*Bd(n),Xn((o-(t*t+n*n)*r*r)/(2*r))]},n}function Kr(){return qr(Hr).scale(155.424).center([0,33.6442])}function Yr(){return Kr().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Wr(t){return function(e,n){var i=Rd(e),r=Rd(n),o=t(i*r);return[o*r*jd(e),o*jd(n)]}}function Gr(t){return function(e,n){var i=zd(e*e+n*n),r=t(i),o=jd(r),s=Rd(r);return[Ld(e*o,i*s),Xn(i&&n*o/i)]}}function Xr(t,e){return[t,Ud(qd((Td+e)/2))]}function Zr(t){function e(){var e=Cd*a(),s=o(ji(o.rotate()).invert([0,0]));return l(null==c?[[s[0]-e,s[1]-e],[s[0]+e,s[1]+e]]:t===Xr?[[Math.max(s[0]-e,c),n],[Math.min(s[0]+e,i),r]]:[[c,Math.max(s[1]-e,n)],[i,Math.min(s[1]+e,r)]])}var n,i,r,o=Br(t),s=o.center,a=o.scale,u=o.translate,l=o.clipExtent,c=null;return o.scale=function(t){return arguments.length?(a(t),e()):a()},o.translate=function(t){return arguments.length?(u(t),e()):u()},o.center=function(t){return arguments.length?(s(t),e()):s()},o.clipExtent=function(t){return arguments.length?(null==t?c=n=i=r=null:(c=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),e()):null==c?null:[[c,n],[i,r]]},e()}function Qr(t){return qd((Td+t)/2)}function Jr(t,e){function n(t,e){o>0?e<-Td+kd&&(e=-Td+kd):e>Td-kd&&(e=Td-kd);var n=o/Vd(Qr(e),r);return[n*jd(r*t),o-n*Rd(r*t)]}var i=Rd(t),r=t===e?jd(t):Ud(i/Rd(e))/Ud(Qr(e)/Qr(t)),o=i*Vd(Qr(t),r)/r;return r?(n.invert=function(t,e){var n=o-e,i=Bd(r)*zd(t*t+n*n);return[Ld(t,Id(n))/r*Bd(n),2*Dd(Vd(o/i,1/r))-Td]},n):Xr}function $r(t,e){return[t,e]}function to(t,e){function n(t,e){var n=o-e,i=r*t;return[n*jd(i),o-n*Rd(i)]}var i=Rd(t),r=t===e?jd(t):(i-Rd(e))/(e-t),o=i/r+t;return Id(r)<kd?$r:(n.invert=function(t,e){var n=o-e;return[Ld(t,Id(n))/r*Bd(n),o-Bd(r)*zd(t*t+n*n)]},n)}function eo(t,e){var n=Rd(e),i=Rd(t)*n;return[n*jd(t)/i,jd(e)/i]}function no(t,e,n,i){return 1===t&&1===e&&0===n&&0===i?pr:Dr({point:function(r,o){this.stream.point(r*t+n,o*e+i)}})}function io(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),e*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}function ro(t,e){return[Rd(e)*jd(t),jd(e)]}function oo(t,e){var n=Rd(e),i=1+Rd(t)*n;return[n*jd(t)/i,jd(e)/i]}function so(t,e){return[Ud(qd((Td+e)/2)),-t]}function ao(t,e){return t.parent===e.parent?1:2}function uo(t,e){return t+e.x}function lo(t,e){return Math.max(t,e.y)}function co(t){var e=0,n=t.children,i=n&&n.length;if(i)for(;--i>=0;)e+=n[i].value;else e=1;t.value=e}function ho(t,e){var n,i,r,o,s,a=new yo(t),u=+t.value&&(a.value=t.value),l=[a];for(null==e&&(e=fo);n=l.pop();)if(u&&(n.value=+n.data.value),(r=e(n.data))&&(s=r.length))for(n.children=new Array(s),o=s-1;o>=0;--o)l.push(i=n.children[o]=new yo(r[o])),i.parent=n,i.depth=n.depth+1;return a.eachBefore(mo)}function fo(t){return t.children}function po(t){t.data=t.data.data}function mo(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function yo(t){this.data=t,this.depth=this.height=0,this.parent=null}function _o(t){for(var e,n,i=0,r=(t=function(t){for(var e,n,i=t.length;i;)n=Math.random()*i--|0,e=t[i],t[i]=t[n],t[n]=e;return t}(Xp.call(t))).length,o=[];i<r;)e=t[i],n&&go(n,e)?++i:(n=function(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return wo(t[0],t[1]);case 3:return xo(t[0],t[1],t[2])}}(o=function(t,e){var n,i;if(bo(e,t))return[e];for(n=0;n<t.length;++n)if(vo(e,t[n])&&bo(wo(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(vo(wo(t[n],t[i]),e)&&vo(wo(t[n],e),t[i])&&vo(wo(t[i],e),t[n])&&bo(xo(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}(o,e)),i=0);return n}function vo(t,e){var n=t.r-e.r,i=e.x-t.x,r=e.y-t.y;return n<0||n*n<i*i+r*r}function go(t,e){var n=t.r-e.r+1e-6,i=e.x-t.x,r=e.y-t.y;return n>0&&n*n>i*i+r*r}function bo(t,e){for(var n=0;n<e.length;++n)if(!go(t,e[n]))return!1;return!0}function wo(t,e){var n=t.x,i=t.y,r=t.r,o=e.x,s=e.y,a=e.r,u=o-n,l=s-i,c=a-r,h=Math.sqrt(u*u+l*l);return{x:(n+o+u/h*c)/2,y:(i+s+l/h*c)/2,r:(h+r+a)/2}}function xo(t,e,n){var i=t.x,r=t.y,o=t.r,s=e.x,a=e.y,u=e.r,l=n.x,c=n.y,h=n.r,f=i-s,d=i-l,p=r-a,m=r-c,y=u-o,_=h-o,v=i*i+r*r-o*o,g=v-s*s-a*a+u*u,b=v-l*l-c*c+h*h,w=d*p-f*m,x=(p*b-m*g)/(2*w)-i,E=(m*y-p*_)/w,k=(d*g-f*b)/(2*w)-r,S=(f*_-d*y)/w,C=E*E+S*S-1,T=2*(o+x*E+k*S),A=x*x+k*k-o*o,M=-(C?(T+Math.sqrt(T*T-4*C*A))/(2*C):A/T);return{x:i+x+E*M,y:r+k+S*M,r:M}}function Eo(t,e,n){var i=t.x,r=t.y,o=e.r+n.r,s=t.r+n.r,a=e.x-i,u=e.y-r,l=a*a+u*u;if(l){var c=.5+((s*=s)-(o*=o))/(2*l),h=Math.sqrt(Math.max(0,2*o*(s+l)-(s-=l)*s-o*o))/(2*l);n.x=i+c*a+h*u,n.y=r+c*u-h*a}else n.x=i+s,n.y=r}function ko(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return r*r-1e-6>n*n+i*i}function So(t){var e=t._,n=t.next._,i=e.r+n.r,r=(e.x*n.r+n.x*e.r)/i,o=(e.y*n.r+n.y*e.r)/i;return r*r+o*o}function Co(t){this._=t,this.next=null,this.previous=null}function To(t){if(!(r=t.length))return 0;var e,n,i,r,o,s,a,u,l,c,h;if(e=t[0],e.x=0,e.y=0,!(r>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(r>2))return e.r+n.r;Eo(n,e,i=t[2]),e=new Co(e),n=new Co(n),i=new Co(i),e.next=i.previous=n,n.next=e.previous=i,i.next=n.previous=e;t:for(a=3;a<r;++a){Eo(e._,n._,i=t[a]),i=new Co(i),u=n.next,l=e.previous,c=n._.r,h=e._.r;do if(c<=h){if(ko(u._,i._)){n=u,e.next=n,n.previous=e,--a;continue t}c+=u._.r,u=u.next}else{if(ko(l._,i._)){(e=l).next=n,n.previous=e,--a;continue t}h+=l._.r,l=l.previous}while(u!==l.next);for(i.previous=e,
i.next=n,e.next=n.previous=n=i,o=So(e);(i=i.next)!==n;)(s=So(i))<o&&(e=i,o=s);n=e.next}for(e=[n._],i=n;(i=i.next)!==n;)e.push(i._);for(i=_o(e),a=0;a<r;++a)e=t[a],e.x-=i.x,e.y-=i.y;return i.r}function Ao(t){if("function"!=typeof t)throw new Error;return t}function Mo(){return 0}function Po(t){return function(){return t}}function Oo(t){return Math.sqrt(t.value)}function Io(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Do(t,e){return function(n){if(i=n.children){var i,r,o,s=i.length,a=t(n)*e||0;if(a)for(r=0;r<s;++r)i[r].r+=a;if(o=To(i),a)for(r=0;r<s;++r)i[r].r-=a;n.r=o+a}}}function Lo(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function Ro(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Fo(t,e,n,i,r){for(var o,s=t.children,a=-1,u=s.length,l=t.value&&(i-e)/t.value;++a<u;)(o=s[a]).y0=n,o.y1=r,o.x0=e,o.x1=e+=o.value*l}function No(t){return t.id}function Uo(t){return t.parentId}function Vo(t,e){return t.parent===e.parent?1:2}function jo(t){var e=t.children;return e?e[0]:t.t}function Bo(t){var e=t.children;return e?e[e.length-1]:t.t}function zo(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function qo(t,e,n){return t.a.parent===e.parent?t.a:n}function Ho(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function Ko(t,e,n,i,r){for(var o,s=t.children,a=-1,u=s.length,l=t.value&&(r-n)/t.value;++a<u;)(o=s[a]).x0=e,o.x1=i,o.y0=n,o.y1=n+=o.value*l}function Yo(t,e,n,i,r,o){for(var s,a,u,l,c,h,f,d,p,m,y,_=[],v=e.children,g=0,b=0,w=v.length,x=e.value;g<w;){u=r-n,l=o-i;do c=v[b++].value;while(!c&&b<w);for(h=f=c,y=c*c*(m=Math.max(l/u,u/l)/(x*t)),p=Math.max(f/y,y/h);b<w;++b){if(c+=a=v[b].value,a<h&&(h=a),a>f&&(f=a),y=c*c*m,(d=Math.max(f/y,y/h))>p){c-=a;break}p=d}_.push(s={value:c,dice:u<l,children:v.slice(g,b)}),s.dice?Fo(s,n,i,r,x?i+=l*c/x:o):Ko(s,n,i,x?n+=u*c/x:r,o),x-=c,g=b}return _}function Wo(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Go(t,e){return t[0]-e[0]||t[1]-e[1]}function Xo(t){for(var e=t.length,n=[0,1],i=2,r=2;r<e;++r){for(;i>1&&Wo(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function Zo(t){this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function Qo(t){if(!t._start)try{!function(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,n=t._tasks[e],i=n.length-1,r=n[i];n[i]=function(t,e){return function(n,i){t._tasks[e]&&(--t._active,++t._ended,t._tasks[e]=null,null==t._error&&(null!=n?Jo(t,n):(t._data[e]=i,t._waiting?Qo(t):$o(t))))}}(t,e),--t._waiting,++t._active,n=r.apply(null,n),t._tasks[e]&&(t._tasks[e]=n||im)}}(t)}catch(e){if(t._tasks[t._ended+t._active-1])Jo(t,e);else if(!t._data)throw e}}function Jo(t,e){var n,i=t._tasks.length;for(t._error=e,t._data=void 0,t._waiting=NaN;--i>=0;)if((n=t._tasks[i])&&(t._tasks[i]=null,n.abort))try{n.abort()}catch(e){}t._active=NaN,$o(t)}function $o(t){if(!t._active&&t._call){var e=t._data;t._data=void 0,t._call(t._error,e)}}function ts(t){if(null==t)t=1/0;else if(!((t=+t)>=1))throw new Error("invalid concurrency");return new Zo(t)}function es(){return Math.random()}function ns(t,e){function n(t){var e,n=l.status;if(!n&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(l)||n>=200&&n<300||304===n){if(o)try{e=o.call(i,l)}catch(t){return void a.call("error",i,t)}else e=l;a.call("load",i,e)}else a.call("error",i,t)}var i,r,o,s,a=C("beforesend","progress","load","error"),u=cn(),l=new XMLHttpRequest,c=null,h=null,f=0;if("undefined"==typeof XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=l.ontimeout=n:l.onreadystatechange=function(t){l.readyState>3&&n(t)},l.onprogress=function(t){a.call("progress",i,t)},i={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?u.get(t):(null==e?u.remove(t):u.set(t,e+""),i)},mimeType:function(t){return arguments.length?(r=null==t?null:t+"",i):r},responseType:function(t){return arguments.length?(s=t,i):s},timeout:function(t){return arguments.length?(f=+t,i):f},user:function(t){return arguments.length<1?c:(c=null==t?null:t+"",i)},password:function(t){return arguments.length<1?h:(h=null==t?null:t+"",i)},response:function(t){return o=t,i},get:function(t,e){return i.send("GET",t,e)},post:function(t,e){return i.send("POST",t,e)},send:function(e,n,o){return l.open(e,t,!0,c,h),null==r||u.has("accept")||u.set("accept",r+",*/*"),l.setRequestHeader&&u.each(function(t,e){l.setRequestHeader(e,t)}),null!=r&&l.overrideMimeType&&l.overrideMimeType(r),null!=s&&(l.responseType=s),f>0&&(l.timeout=f),null==o&&"function"==typeof n&&(o=n,n=null),null!=o&&1===o.length&&(o=function(t){return function(e,n){t(null==e?n:null)}}(o)),null!=o&&i.on("error",o).on("load",function(t){o(null,t)}),a.call("beforesend",i,l),l.send(null==n?null:n),i},abort:function(){return l.abort(),i},on:function(){var t=a.on.apply(a,arguments);return t===a?i:t}},null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return i.get(e)}return i}function is(t,e){return function(n,i){var r=ns(n).mimeType(t).response(e);if(null!=i){if("function"!=typeof i)throw new Error("invalid callback: "+i);return r.get(i)}return r}}function rs(t,e){return function(n,i,r){arguments.length<3&&(r=i,i=null);var o=ns(n).mimeType(t);return o.row=function(t){return arguments.length?o.response(function(t,e){return function(n){return t(n.responseText,e)}}(e,i=t)):i},o.row(i),r?o.get(r):o}}function os(t){function e(e){var o=e+"",s=n.get(o);if(!s){if(r!==gm)return r;n.set(o,s=i.push(e))}return t[(s-1)%t.length]}var n=cn(),i=[],r=gm;return t=null==t?[]:vm.call(t),e.domain=function(t){if(!arguments.length)return i.slice();i=[],n=cn();for(var r,o,s=-1,a=t.length;++s<a;)n.has(o=(r=t[s])+"")||n.set(o,i.push(r));return e},e.range=function(n){return arguments.length?(t=vm.call(n),e):t.slice()},e.unknown=function(t){return arguments.length?(r=t,e):r},e.copy=function(){return os().domain(i).range(t).unknown(r)},e}function ss(){function t(){var t=r().length,i=s[1]<s[0],f=s[i-0],d=s[1-i];e=(d-f)/Math.max(1,t-u+2*l),a&&(e=Math.floor(e)),f+=(d-f-e*(t-u))*c,n=e*(1-u),a&&(f=Math.round(f),n=Math.round(n));var p=h(t).map(function(t){return f+e*t});return o(i?p.reverse():p)}var e,n,i=os().unknown(void 0),r=i.domain,o=i.range,s=[0,1],a=!1,u=0,l=0,c=.5;return delete i.unknown,i.domain=function(e){return arguments.length?(r(e),t()):r()},i.range=function(e){return arguments.length?(s=[+e[0],+e[1]],t()):s.slice()},i.rangeRound=function(e){return s=[+e[0],+e[1]],a=!0,t()},i.bandwidth=function(){return n},i.step=function(){return e},i.round=function(e){return arguments.length?(a=!!e,t()):a},i.padding=function(e){return arguments.length?(u=l=Math.max(0,Math.min(1,e)),t()):u},i.paddingInner=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),t()):u},i.paddingOuter=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),t()):l},i.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),t()):c},i.copy=function(){return ss().domain(r()).range(s).round(a).paddingInner(u).paddingOuter(l).align(c)},t()}function as(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return as(e())},t}function us(t){return function(){return t}}function ls(t){return+t}function cs(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:us(e)}function hs(t,e,n,i){var r=t[0],o=t[1],s=e[0],a=e[1];return o<r?(r=n(o,r),s=i(a,s)):(r=n(r,o),s=i(s,a)),function(t){return s(r(t))}}function fs(t,e,n,i){var r=Math.min(t.length,e.length)-1,o=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)o[a]=n(t[a],t[a+1]),s[a]=i(e[a],e[a+1]);return function(e){var n=Vl(t,e,1,r)-1;return s[n](o[n](e))}}function ds(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function ps(t,e){function n(){return r=Math.min(a.length,u.length)>2?fs:hs,o=s=null,i}function i(e){return(o||(o=r(a,u,c?function(t){return function(e,n){var i=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:i(t)}}}(t):t,l)))(+e)}var r,o,s,a=bm,u=bm,l=ce,c=!1;return i.invert=function(t){return(s||(s=r(u,a,cs,c?function(t){return function(e,n){var i=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:i(t)}}}(e):e)))(+t)},i.domain=function(t){return arguments.length?(a=_m.call(t,ls),n()):a.slice()},i.range=function(t){return arguments.length?(u=vm.call(t),n()):u.slice()},i.rangeRound=function(t){return u=vm.call(t),l=he,n()},i.clamp=function(t){return arguments.length?(c=!!t,n()):c},i.interpolate=function(t){return arguments.length?(l=t,n()):l},n()}function ms(e){var n=e.domain;return e.ticks=function(t){var e=n();return f(e[0],e[e.length-1],null==t?10:t)},e.tickFormat=function(e,i){return function(e,n,i){var r,o=e[0],s=e[e.length-1],a=p(o,s,null==n?10:n);switch((i=Nn(null==i?",f":i)).type){case"s":var u=Math.max(Math.abs(o),Math.abs(s));return null!=i.precision||isNaN(r=qn(a,u))||(i.precision=r),t.formatPrefix(i,u);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=Hn(a,Math.max(Math.abs(o),Math.abs(s))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=zn(a))||(i.precision=r-2*("%"===i.type))}return t.format(i)}(n(),e,i)},e.nice=function(t){null==t&&(t=10);var i,r=n(),o=0,s=r.length-1,a=r[o],u=r[s];return u<a&&(i=a,a=u,u=i,i=o,o=s,s=i),(i=d(a,u,t))>0?i=d(a=Math.floor(a/i)*i,u=Math.ceil(u/i)*i,t):i<0&&(i=d(a=Math.ceil(a*i)/i,u=Math.floor(u*i)/i,t)),i>0?(r[o]=Math.floor(a/i)*i,r[s]=Math.ceil(u/i)*i,n(r)):i<0&&(r[o]=Math.ceil(a*i)/i,r[s]=Math.floor(u*i)/i,n(r)),e},e}function ys(){var t=ps(cs,ae);return t.copy=function(){return ds(t,ys())},ms(t)}function _s(){function t(t){return+t}var e=[0,1];return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=_m.call(n,ls),t):e.slice()},t.copy=function(){return _s().domain(e)},ms(t)}function vs(t,e){var n,i=0,r=(t=t.slice()).length-1,o=t[i],s=t[r];return s<o&&(n=i,i=r,r=n,n=o,o=s,s=n),t[i]=e.floor(o),t[r]=e.ceil(s),t}function gs(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:us(e)}function bs(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function ws(t){return isFinite(t)?+("1e"+t):t<0?0:t}function xs(t){return 10===t?ws:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function Es(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function ks(t){return function(e){return-t(-e)}}function Ss(){function e(){return o=Es(r),s=xs(r),i()[0]<0&&(o=ks(o),s=ks(s)),n}var n=ps(gs,bs).domain([1,10]),i=n.domain,r=10,o=Es(10),s=xs(10);return n.base=function(t){return arguments.length?(r=+t,e()):r},n.domain=function(t){return arguments.length?(i(t),e()):i()},n.ticks=function(t){var e,n=i(),a=n[0],u=n[n.length-1];(e=u<a)&&(d=a,a=u,u=d);var l,c,h,d=o(a),p=o(u),m=null==t?10:+t,y=[];if(!(r%1)&&p-d<m){if(d=Math.round(d)-1,p=Math.round(p)+1,a>0){for(;d<p;++d)for(c=1,l=s(d);c<r;++c)if(!((h=l*c)<a)){if(h>u)break;y.push(h)}}else for(;d<p;++d)for(c=r-1,l=s(d);c>=1;--c)if(!((h=l*c)<a)){if(h>u)break;y.push(h)}}else y=f(d,p,Math.min(p-d,m)).map(s);return e?y.reverse():y},n.tickFormat=function(e,i){if(null==i&&(i=10===r?".0e":","),"function"!=typeof i&&(i=t.format(i)),e===1/0)return i;null==e&&(e=10);var a=Math.max(1,r*e/n.ticks().length);return function(t){var e=t/s(Math.round(o(t)));return e*r<r-.5&&(e*=r),e<=a?i(t):""}},n.nice=function(){return i(vs(i(),{floor:function(t){return s(Math.floor(o(t)))},ceil:function(t){return s(Math.ceil(o(t)))}}))},n.copy=function(){return ds(n,Ss().base(r))},n}function Cs(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function Ts(){var t=1,e=ps(function(e,n){return(n=Cs(n,t)-(e=Cs(e,t)))?function(i){return(Cs(i,t)-e)/n}:us(n)},function(e,n){return n=Cs(n,t)-(e=Cs(e,t)),function(i){return Cs(e+n*i,1/t)}}),n=e.domain;return e.exponent=function(e){return arguments.length?(t=+e,n(n())):t},e.copy=function(){return ds(e,Ts().exponent(t))},ms(e)}function As(){function t(){var t=0,e=Math.max(1,r.length);for(o=new Array(e-1);++t<e;)o[t-1]=y(i,t/e);return n}function n(t){if(!isNaN(t=+t))return r[Vl(o,t)]}var i=[],r=[],o=[];return n.invertExtent=function(t){var e=r.indexOf(t);return e<0?[NaN,NaN]:[e>0?o[e-1]:i[0],e<o.length?o[e]:i[i.length-1]]},n.domain=function(n){if(!arguments.length)return i.slice();i=[];for(var r,o=0,s=n.length;o<s;++o)null==(r=n[o])||isNaN(r=+r)||i.push(r);return i.sort(e),t()},n.range=function(e){return arguments.length?(r=vm.call(e),t()):r.slice()},n.quantiles=function(){return o.slice()},n.copy=function(){return As().domain(i).range(r)},n}function Ms(){function t(t){if(t<=t)return s[Vl(o,t,0,r)]}function e(){var e=-1;for(o=new Array(r);++e<r;)o[e]=((e+1)*i-(e-r)*n)/(r+1);return t}var n=0,i=1,r=1,o=[.5],s=[0,1];return t.domain=function(t){return arguments.length?(n=+t[0],i=+t[1],e()):[n,i]},t.range=function(t){return arguments.length?(r=(s=vm.call(t)).length-1,e()):s.slice()},t.invertExtent=function(t){var e=s.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,o[0]]:e>=r?[o[r-1],i]:[o[e-1],o[e]]},t.copy=function(){return Ms().domain([n,i]).range(s)},ms(t)}function Ps(){function t(t){if(t<=t)return n[Vl(e,t,0,i)]}var e=[.5],n=[0,1],i=1;return t.domain=function(r){return arguments.length?(e=vm.call(r),i=Math.min(e.length,n.length-1),t):e.slice()},t.range=function(r){return arguments.length?(n=vm.call(r),i=Math.min(e.length,n.length-1),t):n.slice()},t.invertExtent=function(t){var i=n.indexOf(t);return[e[i-1],e[i]]},t.copy=function(){return Ps().domain(e).range(n)},t}function Os(t,e,n,i){function r(e){return t(e=new Date((+e))),e}return r.floor=r,r.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},r.round=function(t){var e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=function(t,n){return e(t=new Date((+t)),null==n?1:Math.floor(n)),t},r.range=function(n,i,o){var s,a=[];if(n=r.ceil(n),o=null==o?1:Math.floor(o),!(n<i&&o>0))return a;do a.push(s=new Date((+n))),e(n,o),t(n);while(s<n&&n<i);return a},r.filter=function(n){return Os(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,i){if(t>=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;--i>=0;)for(;e(t,1),!n(t););})},n&&(r.count=function(e,i){return wm.setTime(+e),xm.setTime(+i),t(wm),t(xm),Math.floor(n(wm,xm))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(i?function(e){return i(e)%t==0}:function(e){return r.count(0,e)%t==0}):r:null}),r}function Is(t){return Os(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Sm)/Cm})}function Ds(t){return Os(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Cm})}function Ls(t){if(0<=t.y&&t.y<100){var e=new Date((-1),t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Rs(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Fs(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function Ns(t){function e(t,e){return function(n){var i,r,o,s=[],a=-1,u=0,l=t.length;for(n instanceof Date||(n=new Date((+n)));++a<l;)37===t.charCodeAt(a)&&(s.push(t.slice(u,a)),null!=(r=ky[i=t.charAt(++a)])?i=t.charAt(++a):r="e"===i?" ":"0",(o=e[i])&&(i=o(n,r)),s.push(i),u=a+1);return s.push(t.slice(u,a)),s.join("")}}function n(t,e){return function(n){var r,o,s=Fs(1900);if(i(s,t,n+="",0)!=n.length)return null;if("Q"in s)return new Date(s.Q);if("p"in s&&(s.H=s.H%12+12*s.p),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(r=(o=(r=Rs(Fs(s.y))).getUTCDay())>4||0===o?sy.ceil(r):sy(r),r=iy.offset(r,7*(s.V-1)),s.y=r.getUTCFullYear(),s.m=r.getUTCMonth(),s.d=r.getUTCDate()+(s.w+6)%7):(r=(o=(r=e(Fs(s.y))).getDay())>4||0===o?Fm.ceil(r):Fm(r),r=Dm.offset(r,7*(s.V-1)),s.y=r.getFullYear(),s.m=r.getMonth(),s.d=r.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),o="Z"in s?Rs(Fs(s.y)).getUTCDay():e(Fs(s.y)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(o+5)%7:s.w+7*s.U-(o+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,Rs(s)):e(s)}}function i(t,e,n,i){for(var r,o,s=0,a=e.length,u=n.length;s<a;){if(i>=u)return-1;if(37===(r=e.charCodeAt(s++))){if(r=e.charAt(s++),!(o=k[r in ky?e.charAt(s++):r])||(i=o(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}var r=t.dateTime,o=t.date,s=t.time,a=t.periods,u=t.days,l=t.shortDays,c=t.months,h=t.shortMonths,f=js(a),d=Bs(a),p=js(u),m=Bs(u),y=js(l),_=Bs(l),v=js(c),g=Bs(c),b=js(h),w=Bs(h),x={a:function(t){return l[t.getDay()]},A:function(t){return u[t.getDay()]},b:function(t){return h[t.getMonth()]},B:function(t){return c[t.getMonth()]},c:null,d:aa,e:aa,f:fa,H:ua,I:la,j:ca,L:ha,m:da,M:pa,p:function(t){return a[+(t.getHours()>=12)]},Q:za,s:qa,S:ma,u:ya,U:_a,V:va,w:ga,W:ba,x:null,X:null,y:wa,Y:xa,Z:Ea,"%":Ba},E={a:function(t){return l[t.getUTCDay()]},A:function(t){return u[t.getUTCDay()]},b:function(t){return h[t.getUTCMonth()]},B:function(t){return c[t.getUTCMonth()]},c:null,d:ka,e:ka,f:Ma,H:Sa,I:Ca,j:Ta,L:Aa,m:Pa,M:Oa,p:function(t){return a[+(t.getUTCHours()>=12)]},Q:za,s:qa,S:Ia,u:Da,U:La,V:Ra,w:Fa,W:Na,x:null,X:null,y:Ua,Y:Va,Z:ja,"%":Ba},k={a:function(t,e,n){var i=y.exec(e.slice(n));return i?(t.w=_[i[0].toLowerCase()],n+i[0].length):-1},A:function(t,e,n){var i=p.exec(e.slice(n));return i?(t.w=m[i[0].toLowerCase()],n+i[0].length):-1},b:function(t,e,n){var i=b.exec(e.slice(n));return i?(t.m=w[i[0].toLowerCase()],n+i[0].length):-1},B:function(t,e,n){var i=v.exec(e.slice(n));return i?(t.m=g[i[0].toLowerCase()],n+i[0].length):-1},c:function(t,e,n){return i(t,r,e,n)},d:Qs,e:Qs,f:ia,H:$s,I:$s,j:Js,L:na,m:Zs,M:ta,p:function(t,e,n){var i=f.exec(e.slice(n));return i?(t.p=d[i[0].toLowerCase()],n+i[0].length):-1},Q:oa,s:sa,S:ea,u:qs,U:Hs,V:Ks,w:zs,W:Ys,x:function(t,e,n){return i(t,o,e,n)},X:function(t,e,n){return i(t,s,e,n)},y:Gs,Y:Ws,Z:Xs,"%":ra};return x.x=e(o,x),x.X=e(s,x),x.c=e(r,x),E.x=e(o,E),E.X=e(s,E),E.c=e(r,E),{format:function(t){var n=e(t+="",x);return n.toString=function(){return t},n},parse:function(t){var e=n(t+="",Ls);return e.toString=function(){return t},e},utcFormat:function(t){var n=e(t+="",E);return n.toString=function(){return t},n},utcParse:function(t){var e=n(t,Rs);return e.toString=function(){return t},e}}}function Us(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function Vs(t){return t.replace(Ty,"\\$&")}function js(t){return new RegExp("^(?:"+t.map(Vs).join("|")+")","i")}function Bs(t){for(var e={},n=-1,i=t.length;++n<i;)e[t[n].toLowerCase()]=n;return e}function zs(t,e,n){var i=Sy.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function qs(t,e,n){var i=Sy.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function Hs(t,e,n){var i=Sy.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function Ks(t,e,n){var i=Sy.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function Ys(t,e,n){var i=Sy.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function Ws(t,e,n){var i=Sy.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Gs(t,e,n){var i=Sy.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Xs(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Zs(t,e,n){var i=Sy.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Qs(t,e,n){var i=Sy.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Js(t,e,n){var i=Sy.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function $s(t,e,n){var i=Sy.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function ta(t,e,n){var i=Sy.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function ea(t,e,n){var i=Sy.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function na(t,e,n){var i=Sy.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function ia(t,e,n){var i=Sy.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function ra(t,e,n){var i=Cy.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function oa(t,e,n){var i=Sy.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function sa(t,e,n){var i=Sy.exec(e.slice(n));return i?(t.Q=1e3*+i[0],n+i[0].length):-1}function aa(t,e){return Us(t.getDate(),e,2)}function ua(t,e){return Us(t.getHours(),e,2)}function la(t,e){return Us(t.getHours()%12||12,e,2)}function ca(t,e){return Us(1+Dm.count(Qm(t),t),e,3)}function ha(t,e){return Us(t.getMilliseconds(),e,3)}function fa(t,e){return ha(t,e)+"000"}function da(t,e){return Us(t.getMonth()+1,e,2)}function pa(t,e){return Us(t.getMinutes(),e,2)}function ma(t,e){return Us(t.getSeconds(),e,2)}function ya(t){var e=t.getDay();return 0===e?7:e}function _a(t,e){return Us(Rm.count(Qm(t),t),e,2)}function va(t,e){var n=t.getDay();return t=n>=4||0===n?Vm(t):Vm.ceil(t),Us(Vm.count(Qm(t),t)+(4===Qm(t).getDay()),e,2)}function ga(t){return t.getDay()}function ba(t,e){return Us(Fm.count(Qm(t),t),e,2)}function wa(t,e){return Us(t.getFullYear()%100,e,2)}function xa(t,e){return Us(t.getFullYear()%1e4,e,4)}function Ea(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Us(e/60|0,"0",2)+Us(e%60,"0",2)}function ka(t,e){return Us(t.getUTCDate(),e,2)}function Sa(t,e){return Us(t.getUTCHours(),e,2)}function Ca(t,e){return Us(t.getUTCHours()%12||12,e,2)}function Ta(t,e){return Us(1+iy.count(wy(t),t),e,3)}function Aa(t,e){return Us(t.getUTCMilliseconds(),e,3)}function Ma(t,e){return Aa(t,e)+"000"}function Pa(t,e){return Us(t.getUTCMonth()+1,e,2)}function Oa(t,e){return Us(t.getUTCMinutes(),e,2)}function Ia(t,e){return Us(t.getUTCSeconds(),e,2)}function Da(t){var e=t.getUTCDay();return 0===e?7:e}function La(t,e){return Us(oy.count(wy(t),t),e,2)}function Ra(t,e){var n=t.getUTCDay();return t=n>=4||0===n?ly(t):ly.ceil(t),Us(ly.count(wy(t),t)+(4===wy(t).getUTCDay()),e,2)}function Fa(t){return t.getUTCDay()}function Na(t,e){return Us(sy.count(wy(t),t),e,2)}function Ua(t,e){return Us(t.getUTCFullYear()%100,e,2)}function Va(t,e){return Us(t.getUTCFullYear()%1e4,e,4)}function ja(){return"+0000"}function Ba(){return"%"}function za(t){return+t}function qa(t){return Math.floor(+t/1e3)}function Ha(e){return xy=Ns(e),t.timeFormat=xy.format,t.timeParse=xy.parse,t.utcFormat=xy.utcFormat,t.utcParse=xy.utcParse,xy}function Ka(t){return new Date(t)}function Ya(t){return t instanceof Date?+t:+new Date((+t))}function Wa(t,e,i,r,o,s,a,u,l){function c(n){return(a(n)<n?y:s(n)<n?_:o(n)<n?v:r(n)<n?g:e(n)<n?i(n)<n?b:w:t(n)<n?x:E)(n)}function h(e,i,r,o){if(null==e&&(e=10),"number"==typeof e){var s=Math.abs(r-i)/e,a=n(function(t){return t[2]}).right(k,s);a===k.length?(o=p(i/Ny,r/Ny,e),e=t):a?(o=(a=k[s/k[a-1][2]<k[a][2]/s?a-1:a])[1],e=a[0]):(o=Math.max(p(i,r,e),1),e=u)}return null==o?e:e.every(o)}var f=ps(cs,ae),d=f.invert,m=f.domain,y=l(".%L"),_=l(":%S"),v=l("%I:%M"),g=l("%I %p"),b=l("%a %d"),w=l("%b %d"),x=l("%B"),E=l("%Y"),k=[[a,1,Oy],[a,5,5*Oy],[a,15,15*Oy],[a,30,30*Oy],[s,1,Iy],[s,5,5*Iy],[s,15,15*Iy],[s,30,30*Iy],[o,1,Dy],[o,3,3*Dy],[o,6,6*Dy],[o,12,12*Dy],[r,1,Ly],[r,2,2*Ly],[i,1,Ry],[e,1,Fy],[e,3,3*Fy],[t,1,Ny]];return f.invert=function(t){return new Date(d(t))},f.domain=function(t){return arguments.length?m(_m.call(t,Ya)):m().map(Ka)},f.ticks=function(t,e){var n,i=m(),r=i[0],o=i[i.length-1],s=o<r;return s&&(n=r,r=o,o=n),n=h(t,r,o,e),n=n?n.range(r,o+1):[],s?n.reverse():n},f.tickFormat=function(t,e){return null==e?c:l(e)},f.nice=function(t,e){var n=m();return(t=h(t,n[0],n[n.length-1],e))?m(vs(n,t)):f},f.copy=function(){return ds(f,Wa(t,e,i,r,o,s,a,u,l))},f}function Ga(t){return t.match(/.{6}/g).map(function(t){return"#"+t})}function Xa(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function Za(t){function e(e){var o=(e-n)/(i-n);return t(r?Math.max(0,Math.min(1,o)):o)}var n=0,i=1,r=!1;return e.domain=function(t){return arguments.length?(n=+t[0],i=+t[1],e):[n,i]},e.clamp=function(t){return arguments.length?(r=!!t,e):r},e.interpolator=function(n){return arguments.length?(t=n,e):t},e.copy=function(){return Za(t).domain([n,i]).clamp(r)},ms(e)}function Qa(t){return function(){return t}}function Ja(t){return t>=1?o_:t<=-1?-o_:Math.asin(t)}function $a(t){return t.innerRadius}function tu(t){return t.outerRadius}function eu(t){return t.startAngle}function nu(t){return t.endAngle}function iu(t){return t&&t.padAngle}function ru(t,e,n,i,r,o,s){var a=t-n,u=e-i,l=(s?o:-o)/n_(a*a+u*u),c=l*u,h=-l*a,f=t+c,d=e+h,p=n+c,m=i+h,y=(f+p)/2,_=(d+m)/2,v=p-f,g=m-d,b=v*v+g*g,w=r-o,x=f*m-p*d,E=(g<0?-1:1)*n_($y(0,w*w*b-x*x)),k=(x*g-v*E)/b,S=(-x*v-g*E)/b,C=(x*g+v*E)/b,T=(-x*v+g*E)/b,A=k-y,M=S-_,P=C-y,O=T-_;return A*A+M*M>P*P+O*O&&(k=C,S=T),{cx:k,cy:S,x01:-c,y01:-h,x11:k*(r/w-1),y11:S*(r/w-1)}}function ou(t){this._context=t}function su(t){return new ou(t)}function au(t){return t[0]}function uu(t){return t[1]}function lu(){function t(t){var a,u,l,c=t.length,h=!1;for(null==r&&(s=o(l=nn())),a=0;a<=c;++a)!(a<c&&i(u=t[a],a,t))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(u,a,t),+n(u,a,t));if(l)return s=null,l+""||null}var e=au,n=uu,i=Qa(!0),r=null,o=su,s=null;return t.x=function(n){return arguments.length?(e="function"==typeof n?n:Qa(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:Qa(+e),t):n},t.defined=function(e){return arguments.length?(i="function"==typeof e?e:Qa(!!e),t):i},t.curve=function(e){return arguments.length?(o=e,null!=r&&(s=o(r)),t):o},t.context=function(e){return arguments.length?(null==e?r=s=null:s=o(r=e),t):r},t}function cu(){function t(t){var e,c,h,f,d,p=t.length,m=!1,y=new Array(p),_=new Array(p);for(null==a&&(l=u(d=nn())),e=0;e<=p;++e){if(!(e<p&&s(f=t[e],e,t))===m)if(m=!m)c=e,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),h=e-1;h>=c;--h)l.point(y[h],_[h]);l.lineEnd(),l.areaEnd()}m&&(y[e]=+n(f,e,t),_[e]=+r(f,e,t),l.point(i?+i(f,e,t):y[e],o?+o(f,e,t):_[e]))}if(d)return l=null,d+""||null}function e(){return lu().defined(s).curve(u).context(a)}var n=au,i=null,r=Qa(0),o=uu,s=Qa(!0),a=null,u=su,l=null;return t.x=function(e){return arguments.length?(n="function"==typeof e?e:Qa(+e),i=null,t):n},t.x0=function(e){return arguments.length?(n="function"==typeof e?e:Qa(+e),t):n},t.x1=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:Qa(+e),t):i},t.y=function(e){return arguments.length?(r="function"==typeof e?e:Qa(+e),o=null,t):r},t.y0=function(e){return arguments.length?(r="function"==typeof e?e:Qa(+e),t):r},t.y1=function(e){return arguments.length?(o=null==e?null:"function"==typeof e?e:Qa(+e),t):o},t.lineX0=t.lineY0=function(){return e().x(n).y(r)},t.lineY1=function(){return e().x(n).y(o)},t.lineX1=function(){return e().x(i).y(r)},t.defined=function(e){return arguments.length?(s="function"==typeof e?e:Qa(!!e),t):s},t.curve=function(e){return arguments.length?(u=e,null!=a&&(l=u(a)),t):u},t.context=function(e){return arguments.length?(null==e?a=l=null:l=u(a=e),t):a},t}function hu(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function fu(t){return t}function du(t){this._curve=t}function pu(t){function e(e){return new du(t(e))}return e._curve=t,e}function mu(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(pu(t)):e()._curve},t}function yu(){return mu(lu().curve(a_))}function _u(){var t=cu().curve(a_),e=t.curve,n=t.lineX0,i=t.lineX1,r=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return mu(n())},delete t.lineX0,t.lineEndAngle=function(){return mu(i())},delete t.lineX1,t.lineInnerRadius=function(){return mu(r())},delete t.lineY0,t.lineOuterRadius=function(){return mu(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(pu(t)):e()._curve},t}function vu(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}function gu(t){return t.source}function bu(t){return t.target}function wu(t){function e(){var e,a=u_.call(arguments),u=n.apply(this,a),l=i.apply(this,a);if(s||(s=e=nn()),t(s,+r.apply(this,(a[0]=u,a)),+o.apply(this,a),+r.apply(this,(a[0]=l,a)),+o.apply(this,a)),e)return s=null,e+""||null}var n=gu,i=bu,r=au,o=uu,s=null;return e.source=function(t){return arguments.length?(n=t,e):n},e.target=function(t){return arguments.length?(i=t,e):i},e.x=function(t){return arguments.length?(r="function"==typeof t?t:Qa(+t),e):r},e.y=function(t){return arguments.length?(o="function"==typeof t?t:Qa(+t),e):o},e.context=function(t){return arguments.length?(s=null==t?null:t,e):s},e}function xu(t,e,n,i,r){t.moveTo(e,n),t.bezierCurveTo(e=(e+i)/2,n,e,r,i,r)}function Eu(t,e,n,i,r){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+r)/2,i,n,i,r)}function ku(t,e,n,i,r){var o=vu(e,n),s=vu(e,n=(n+r)/2),a=vu(i,n),u=vu(i,r);t.moveTo(o[0],o[1]),t.bezierCurveTo(s[0],s[1],a[0],a[1],u[0],u[1])}function Su(){}function Cu(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Tu(t){this._context=t}function Au(t){this._context=t}function Mu(t){this._context=t}function Pu(t,e){this._basis=new Tu(t),this._beta=e}function Ou(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Iu(t,e){this._context=t,this._k=(1-e)/6}function Du(t,e){this._context=t,this._k=(1-e)/6}function Lu(t,e){this._context=t,this._k=(1-e)/6}function Ru(t,e,n){var i=t._x1,r=t._y1,o=t._x2,s=t._y2;if(t._l01_a>i_){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,r=(r*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>i_){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*l+t._x1*t._l23_2a-e*t._l12_2a)/c,s=(s*l+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(i,r,o,s,t._x2,t._y2)}function Fu(t,e){this._context=t,this._alpha=e}function Nu(t,e){this._context=t,this._alpha=e}function Uu(t,e){this._context=t,this._alpha=e}function Vu(t){this._context=t}function ju(t){return t<0?-1:1}function Bu(t,e,n){var i=t._x1-t._x0,r=e-t._x1,o=(t._y1-t._y0)/(i||r<0&&-0),s=(n-t._y1)/(r||i<0&&-0),a=(o*r+s*i)/(i+r);return(ju(o)+ju(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function zu(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function qu(t,e,n){var i=t._x0,r=t._y0,o=t._x1,s=t._y1,a=(o-i)/3;t._context.bezierCurveTo(i+a,r+a*e,o-a,s-a*n,o,s)}function Hu(t){this._context=t}function Ku(t){this._context=new Yu(t)}function Yu(t){this._context=t}function Wu(t){this._context=t}function Gu(t){var e,n,i=t.length-1,r=new Array(i),o=new Array(i),s=new Array(i);for(r[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<i-1;++e)r[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(r[i-1]=2,o[i-1]=7,s[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=r[e]/o[e-1],o[e]-=n,s[e]-=n*s[e-1];for(r[i-1]=s[i-1]/o[i-1],e=i-2;e>=0;--e)r[e]=(s[e]-r[e+1])/o[e];for(o[i-1]=(t[i]+r[i-1])/2,e=0;e<i-1;++e)o[e]=2*t[e+1]-r[e+1];return[r,o]}function Xu(t,e){this._context=t,this._t=e}function Zu(t,e){if((r=t.length)>1)for(var n,i,r,o=1,s=t[e[0]],a=s.length;o<r;++o)for(i=s,s=t[e[o]],n=0;n<a;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function Qu(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Ju(t,e){return t[e]}function $u(t){var e=t.map(tl);return Qu(t).sort(function(t,n){return e[t]-e[n]})}function tl(t){for(var e,n=0,i=-1,r=t.length;++i<r;)(e=+t[i][1])&&(n+=e);
return n}function el(t){return function(){return t}}function nl(t){return t[0]}function il(t){return t[1]}function rl(){this._=null}function ol(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function sl(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function al(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function ul(t){for(;t.L;)t=t.L;return t}function ll(t,e,n,i){var r=[null,null],o=N_.push(r)-1;return r.left=t,r.right=e,n&&hl(r,t,e,n),i&&hl(r,e,t,i),R_[t.index].halfedges.push(o),R_[e.index].halfedges.push(o),r}function cl(t,e,n){var i=[e,n];return i.left=t,i}function hl(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function fl(t,e,n,i,r){var o,s=t[0],a=t[1],u=s[0],l=s[1],c=0,h=1,f=a[0]-u,d=a[1]-l;if(o=e-u,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>c&&(c=o)}if(o=i-u,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<h&&(h=o)}if(o=n-l,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<h&&(h=o)}else if(d>0){if(o>h)return;o>c&&(c=o)}if(o=r-l,d||!(o<0)){if(o/=d,d<0){if(o>h)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<h&&(h=o)}return!(c>0||h<1)||(c>0&&(t[0]=[u+c*f,l+c*d]),h<1&&(t[1]=[u+h*f,l+h*d]),!0)}}}}}function dl(t,e,n,i,r){var o=t[1];if(o)return!0;var s,a,u=t[0],l=t.left,c=t.right,h=l[0],f=l[1],d=c[0],p=c[1],m=(h+d)/2,y=(f+p)/2;if(p===f){if(m<e||m>=i)return;if(h>d){if(u){if(u[1]>=r)return}else u=[m,n];o=[m,r]}else{if(u){if(u[1]<n)return}else u=[m,r];o=[m,n]}}else if(s=(h-d)/(p-f),a=y-s*m,s<-1||s>1)if(h>d){if(u){if(u[1]>=r)return}else u=[(n-a)/s,n];o=[(r-a)/s,r]}else{if(u){if(u[1]<n)return}else u=[(r-a)/s,r];o=[(n-a)/s,n]}else if(f<p){if(u){if(u[0]>=i)return}else u=[e,s*e+a];o=[i,s*i+a]}else{if(u){if(u[0]<e)return}else u=[i,s*i+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function pl(t,e){var n=t.site,i=e.left,r=e.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function ml(t,e){return e[+(e.left!==t.site)]}function yl(t,e){return e[+(e.left===t.site)]}function _l(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var s=r[0],a=r[1],u=i[0]-s,l=i[1]-a,c=o[0]-s,h=o[1]-a,f=2*(u*h-l*c);if(!(f>=-B_)){var d=u*u+l*l,p=c*c+h*h,m=(h*d-l*p)/f,y=(u*p-c*d)/f,_=U_.pop()||new function(){ol(this),this.x=this.y=this.arc=this.site=this.cy=null};_.arc=t,_.site=r,_.x=m+s,_.y=(_.cy=y+a)+Math.sqrt(m*m+y*y),t.circle=_;for(var v=null,g=F_._;g;)if(_.y<g.y||_.y===g.y&&_.x<=g.x){if(!g.L){v=g.P;break}g=g.L}else{if(!g.R){v=g;break}g=g.R}F_.insert(v,_),v||(D_=_)}}}}function vl(t){var e=t.circle;e&&(e.P||(D_=e.N),F_.remove(e),U_.push(e),ol(e),t.circle=null)}function gl(t){var e=V_.pop()||new function(){ol(this),this.edge=this.site=this.circle=null};return e.site=t,e}function bl(t){vl(t),L_.remove(t),V_.push(t),ol(t)}function wl(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],o=t.P,s=t.N,a=[t];bl(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<j_&&Math.abs(i-u.circle.cy)<j_;)o=u.P,a.unshift(u),bl(u),u=o;a.unshift(u),vl(u);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<j_&&Math.abs(i-l.circle.cy)<j_;)s=l.N,a.push(l),bl(l),l=s;a.push(l),vl(l);var c,h=a.length;for(c=1;c<h;++c)l=a[c],u=a[c-1],hl(l.edge,u.site,l.site,r);u=a[0],(l=a[h-1]).edge=ll(u.site,l.site,null,r),_l(u),_l(l)}function xl(t){for(var e,n,i,r,o=t[0],s=t[1],a=L_._;a;)if((i=El(a,s)-o)>j_)a=a.L;else{if(!((r=o-function(t,e){var n=t.N;if(n)return El(n,e);var i=t.site;return i[1]===e?i[0]:1/0}(a,s))>j_)){i>-j_?(e=a.P,n=a):r>-j_?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){R_[t.index]={site:t,halfedges:[]}}(t);var u=gl(t);if(L_.insert(e,u),e||n){if(e===n)return vl(e),n=gl(e.site),L_.insert(u,n),u.edge=n.edge=ll(e.site,u.site),_l(e),void _l(n);if(n){vl(e),vl(n);var l=e.site,c=l[0],h=l[1],f=t[0]-c,d=t[1]-h,p=n.site,m=p[0]-c,y=p[1]-h,_=2*(f*y-d*m),v=f*f+d*d,g=m*m+y*y,b=[(y*v-d*g)/_+c,(f*g-m*v)/_+h];hl(n.edge,l,p,b),u.edge=ll(l,t,null,b),n.edge=ll(t,p,null,b),_l(e),_l(n)}else u.edge=ll(e.site,u.site)}}function El(t,e){var n=t.site,i=n[0],r=n[1],o=r-e;if(!o)return i;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],u=n[1],l=u-e;if(!l)return a;var c=a-i,h=1/o-1/l,f=c/l;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*l)-u+l/2+r-o/2)))/h+i:(i+a)/2}function kl(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function Sl(t,e){return e[1]-t[1]||e[0]-t[0]}function Cl(t,e){var n,i,r,o=t.sort(Sl).pop();for(N_=[],R_=new Array(t.length),L_=new rl,F_=new rl;;)if(r=D_,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))o[0]===n&&o[1]===i||(xl(o),n=o[0],i=o[1]),o=t.pop();else{if(!r)break;wl(r.arc)}if(function(){for(var t,e,n,i,r=0,o=R_.length;r<o;++r)if((t=R_[r])&&(i=(e=t.halfedges).length)){var s=new Array(i),a=new Array(i);for(n=0;n<i;++n)s[n]=n,a[n]=pl(t,N_[e[n]]);for(s.sort(function(t,e){return a[e]-a[t]}),n=0;n<i;++n)a[n]=e[s[n]];for(n=0;n<i;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,n,i){for(var r,o=N_.length;o--;)dl(r=N_[o],t,e,n,i)&&fl(r,t,e,n,i)&&(Math.abs(r[0][0]-r[1][0])>j_||Math.abs(r[0][1]-r[1][1])>j_)||delete N_[o]}(s,a,u,l),function(t,e,n,i){var r,o,s,a,u,l,c,h,f,d,p,m,y=R_.length,_=!0;for(r=0;r<y;++r)if(o=R_[r]){for(s=o.site,a=(u=o.halfedges).length;a--;)N_[u[a]]||u.splice(a,1);for(a=0,l=u.length;a<l;)p=(d=yl(o,N_[u[a]]))[0],m=d[1],h=(c=ml(o,N_[u[++a%l]]))[0],f=c[1],(Math.abs(p-h)>j_||Math.abs(m-f)>j_)&&(u.splice(a,0,N_.push(cl(s,d,Math.abs(p-t)<j_&&i-m>j_?[t,Math.abs(h-t)<j_?f:i]:Math.abs(m-i)<j_&&n-p>j_?[Math.abs(f-i)<j_?h:n,i]:Math.abs(p-n)<j_&&m-e>j_?[n,Math.abs(h-n)<j_?f:e]:Math.abs(m-e)<j_&&p-t>j_?[Math.abs(f-e)<j_?h:t,e]:null))-1),++l);l&&(_=!1)}if(_){var v,g,b,w=1/0;for(r=0,_=null;r<y;++r)(o=R_[r])&&(b=(v=(s=o.site)[0]-t)*v+(g=s[1]-e)*g)<w&&(w=b,_=o);if(_){var x=[t,e],E=[t,i],k=[n,i],S=[n,e];_.halfedges.push(N_.push(cl(s=_.site,x,E))-1,N_.push(cl(s,E,k))-1,N_.push(cl(s,k,S))-1,N_.push(cl(s,S,x))-1)}}for(r=0;r<y;++r)(o=R_[r])&&(o.halfedges.length||delete R_[r])}(s,a,u,l)}this.edges=N_,this.cells=R_,L_=F_=N_=R_=null}function Tl(t){return function(){return t}}function Al(t,e,n){this.k=t,this.x=e,this.y=n}function Ml(t){return t.__zoom||z_}function Pl(){t.event.stopImmediatePropagation()}function Ol(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function Il(){return!t.event.button}function Dl(){var t,e,n=this;return n instanceof SVGElement?(t=(n=n.ownerSVGElement||n).width.baseVal.value,e=n.height.baseVal.value):(t=n.clientWidth,e=n.clientHeight),[[0,0],[t,e]]}function Ll(){return this.__zoom||z_}function Rl(){return-t.event.deltaY*(t.event.deltaMode?120:1)/500}function Fl(){return"ontouchstart"in this}function Nl(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}var Ul=n(e),Vl=Ul.right,jl=Ul.left,Bl=Array.prototype,zl=Bl.slice,ql=Bl.map,Hl=Math.sqrt(50),Kl=Math.sqrt(10),Yl=Math.sqrt(2),Wl=Array.prototype.slice,Gl=1,Xl=2,Zl=3,Ql=4,Jl=1e-6,$l={value:function(){}};T.prototype=C.prototype={constructor:T,on:function(t,e){var n,i=this._,r=function(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}(t+"",i),o=-1,s=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=r[o]).type)i[n]=A(i[n],t.name,e);else if(null==e)for(n in i)i[n]=A(i[n],t.name,null);return this}for(;++o<s;)if((n=(t=r[o]).type)&&(n=function(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new T(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(i=this._[t]).length;o<n;++o)i[o].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};var tc="http://www.w3.org/1999/xhtml",ec={svg:"http://www.w3.org/2000/svg",xhtml:tc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},nc=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var ic=document.documentElement;if(!ic.matches){var rc=ic.webkitMatchesSelector||ic.msMatchesSelector||ic.mozMatchesSelector||ic.oMatchesSelector;nc=function(t){return function(){return rc.call(this,t)}}}}var oc=nc;F.prototype={constructor:F,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var sc="$";H.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ac={};t.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(ac={mouseenter:"mouseover",mouseleave:"mouseout"}));var uc=[null];at.prototype=ut.prototype={constructor:at,select:function(t){"function"!=typeof t&&(t=I(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s,a=e[r],u=a.length,l=i[r]=new Array(u),c=0;c<u;++c)(o=a[c])&&(s=t.call(o,o.__data__,c,a))&&("__data__"in o&&(s.__data__=o.__data__),l[c]=s);return new at(i,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=L(t));for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var s,a=e[o],u=a.length,l=0;l<u;++l)(s=a[l])&&(i.push(t.call(s,s.__data__,l,a)),r.push(s));return new at(i,r)},filter:function(t){"function"!=typeof t&&(t=oc(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s=e[r],a=s.length,u=i[r]=[],l=0;l<a;++l)(o=s[l])&&t.call(o,o.__data__,l,s)&&u.push(o);return new at(i,this._parents)},data:function(t,e){if(!t)return d=new Array(this.size()),l=-1,this.each(function(t){d[++l]=t}),d;var n=e?U:N,i=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=r.length,s=new Array(o),a=new Array(o),u=new Array(o),l=0;l<o;++l){var c=i[l],h=r[l],f=h.length,d=t.call(c,c&&c.__data__,l,i),p=d.length,m=a[l]=new Array(p),y=s[l]=new Array(p);n(c,h,m,y,u[l]=new Array(f),d,e);for(var _,v,g=0,b=0;g<p;++g)if(_=m[g]){for(g>=b&&(b=g+1);!(v=y[b])&&++b<p;);_._next=v||null}}return s=new at(s,i),s._enter=a,s._exit=u,s},enter:function(){return new at(this._enter||this._groups.map(R),this._parents)},exit:function(){return new at(this._exit||this._groups.map(R),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var u,l=e[a],c=n[a],h=l.length,f=s[a]=new Array(h),d=0;d<h;++d)(u=l[d]||c[d])&&(f[d]=u);for(;a<i;++a)s[a]=e[a];return new at(s,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],o=r.length-1,s=r[o];--o>=0;)(i=r[o])&&(s&&s!==i.nextSibling&&s.parentNode.insertBefore(i,s),s=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=V);for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s,a=n[o],u=a.length,l=r[o]=new Array(u),c=0;c<u;++c)(s=a[c])&&(l[c]=s);l.sort(e)}return new at(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,o=e[n],s=0,a=o.length;s<a;++s)(r=o[s])&&t.call(r,r.__data__,s,o);return this},attr:function(t,e){var n=M(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):B(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=z(t+"");if(arguments.length<2){for(var i=q(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?K:Y)(this,t)}}:e?function(t){return function(){K(this,t)}}:function(t){return function(){Y(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?W:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?G:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(X)},lower:function(){return this.each(Z)},append:function(t){var e="function"==typeof t?t:P(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:P(t),i=null==e?Q:"function"==typeof e?e:I(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(J)},clone:function(t){return this.select(t?tt:$)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),s=o.length;if(!(arguments.length<2)){for(a=e?rt:it,null==n&&(n=!1),i=0;i<s;++i)this.each(a(o[i],e,n));return this}var a=this.node().__on;if(a)for(var u,l=0,c=a.length;l<c;++l)for(i=0,u=a[l];i<s;++i)if((r=o[i]).type===u.type&&r.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return st(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return st(this,t,e)}})(t,e))}};var lc=0;ht.prototype=ct.prototype={constructor:ht,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},wt.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var cc="\\s*([+-]?\\d+)\\s*",hc="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",fc="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dc=/^#([0-9a-f]{3})$/,pc=/^#([0-9a-f]{6})$/,mc=new RegExp("^rgb\\("+[cc,cc,cc]+"\\)$"),yc=new RegExp("^rgb\\("+[fc,fc,fc]+"\\)$"),_c=new RegExp("^rgba\\("+[cc,cc,cc,hc]+"\\)$"),vc=new RegExp("^rgba\\("+[fc,fc,fc,hc]+"\\)$"),gc=new RegExp("^hsl\\("+[hc,fc,fc]+"\\)$"),bc=new RegExp("^hsla\\("+[hc,fc,fc,hc]+"\\)$"),wc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ct(At,Mt,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),Ct(Lt,Dt,Tt(At,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Lt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Lt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Ct(Nt,Ft,Tt(At,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Nt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Nt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Lt(Ut(t>=240?t-240:t+120,r,i),Ut(t,r,i),Ut(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var xc=Math.PI/180,Ec=180/Math.PI,kc=.95047,Sc=1,Cc=1.08883,Tc=4/29,Ac=6/29,Mc=3*Ac*Ac,Pc=Ac*Ac*Ac;Ct(Bt,jt,Tt(At,{brighter:function(t){return new Bt(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Bt(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=Sc*qt(t),e=kc*qt(e),n=Cc*qt(n),new Lt(Ht(3.2404542*e-1.5371385*t-.4985314*n),Ht(-.969266*e+1.8760108*t+.041556*n),Ht(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),Ct(Wt,Yt,Tt(At,{brighter:function(t){return new Wt(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Wt(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Vt(this).rgb()}}));var Oc=-.29227,Ic=-.90649,Dc=1.97294,Lc=Dc*Ic,Rc=1.78277*Dc,Fc=1.78277*Oc- -.14861*Ic;Ct(Xt,Gt,Tt(At,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Xt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Xt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*xc,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new Lt(255*(e+n*(-.14861*i+1.78277*r)),255*(e+n*(Oc*i+Ic*r)),255*(e+n*(Dc*i)),this.opacity)}}));var Nc,Uc,Vc,jc,Bc,zc,qc=function q_(t){function e(t,e){var i=n((t=Dt(t)).r,(e=Dt(e)).r),r=n(t.g,e.g),o=n(t.b,e.b),s=ie(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=o(e),t.opacity=s(e),t+""}}var n=ne(t);return e.gamma=q_,e}(1),Hc=re(Qt),Kc=re(Jt),Yc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wc=new RegExp(Yc.source,"g"),Gc=180/Math.PI,Xc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Zc=de(function(t){return"none"===t?Xc:(Nc||(Nc=document.createElement("DIV"),Uc=document.documentElement,Vc=document.defaultView),Nc.style.transform=t,t=Vc.getComputedStyle(Uc.appendChild(Nc),null).getPropertyValue("transform"),Uc.removeChild(Nc),t=t.slice(7,-1).split(","),fe(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),Qc=de(function(t){return null==t?Xc:(jc||(jc=document.createElementNS("http://www.w3.org/2000/svg","g")),jc.setAttribute("transform",t),(t=jc.transform.baseVal.consolidate())?(t=t.matrix,fe(t.a,t.b,t.c,t.d,t.e,t.f)):Xc)},", ",")",")"),Jc=Math.SQRT2,$c=2,th=4,eh=1e-12,nh=ye(ee),ih=ye(ie),rh=_e(ee),oh=_e(ie),sh=ve(ee),ah=ve(ie),uh=0,lh=0,ch=0,hh=1e3,fh=0,dh=0,ph=0,mh="object"==("undefined"==typeof performance?"undefined":i(performance))&&performance.now?performance:Date,yh="object"==("undefined"==typeof window?"undefined":i(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};we.prototype=xe.prototype={constructor:we,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?ge():+n)+(null==e?0:+e),this._next||zc===this||(zc?zc._next=this:Bc=this,zc=this),this._call=t,this._time=n,Ce()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ce())}};var _h=C("start","end","interrupt"),vh=[],gh=0,bh=1,wh=2,xh=3,Eh=4,kh=5,Sh=6,Ch=ut.prototype.constructor,Th=0,Ah=ut.prototype;Re.prototype=Fe.prototype={constructor:Re,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=I(t));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a,u,l=i[s],c=l.length,h=o[s]=new Array(c),f=0;f<c;++f)(a=l[f])&&(u=t.call(a,a.__data__,f,l))&&("__data__"in a&&(u.__data__=a.__data__),h[f]=u,Ae(h[f],e,n,f,h,Oe(a,n)));return new Re(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=L(t));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var u,l=i[a],c=l.length,h=0;h<c;++h)if(u=l[h]){for(var f,d=t.call(u,u.__data__,h,l),p=Oe(u,n),m=0,y=d.length;m<y;++m)(f=d[m])&&Ae(f,e,n,m,d,p);o.push(d),s.push(u)}return new Re(o,s,e,n)},filter:function(t){"function"!=typeof t&&(t=oc(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s=e[r],a=s.length,u=i[r]=[],l=0;l<a;++l)(o=s[l])&&t.call(o,o.__data__,l,s)&&u.push(o);return new Re(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var u,l=e[a],c=n[a],h=l.length,f=s[a]=new Array(h),d=0;d<h;++d)(u=l[d]||c[d])&&(f[d]=u);for(;a<i;++a)s[a]=e[a];return new Re(s,this._parents,this._name,this._id)},selection:function(){return new Ch(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Ne(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s,a=i[o],u=a.length,l=0;l<u;++l)if(s=a[l]){var c=Oe(s,e);Ae(s,t,n,l,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Re(i,this._parents,t,n)},call:Ah.call,nodes:Ah.nodes,node:Ah.node,size:Ah.size,empty:Ah.empty,each:Ah.each,on:function(t,e){var n=this._id;return arguments.length<2?Oe(this.node(),n).on.on(t):this.each(function(t,e,n){var i,r,o=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}(e)?Me:Pe;return function(){var s=o(this,t),a=s.on;a!==i&&(r=(i=a).copy()).on(e,n),s.on=r}}(n,t,e))},attr:function(t,e){var n=M(t),i="transform"===n?Qc:Le;return this.attrTween(t,"function"==typeof e?(n.local?function(t,e,n){var i,r,o;return function(){var s,a=n(this);return null!=a?(s=this.getAttributeNS(t.space,t.local))===a?null:s===i&&a===r?o:o=e(i=s,r=a):void this.removeAttributeNS(t.space,t.local)}}:function(t,e,n){var i,r,o;return function(){var s,a=n(this);return null!=a?(s=this.getAttribute(t))===a?null:s===i&&a===r?o:o=e(i=s,r=a):void this.removeAttribute(t)}})(n,i,De(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(t,e,n){var i,r;return function(){var o=this.getAttributeNS(t.space,t.local);return o===n?null:o===i?r:r=e(i=o,n)}}:function(t,e,n){var i,r;return function(){var o=this.getAttribute(t);return o===n?null:o===i?r:r=e(i=o,n)}})(n,i,e+""))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=M(t);return this.tween(n,(i.local?function(t,e){function n(){var n=this,i=e.apply(n,arguments);return i&&function(e){n.setAttributeNS(t.space,t.local,i(e))}}return n._value=e,n}:function(t,e){function n(){var n=this,i=e.apply(n,arguments);return i&&function(e){n.setAttribute(t,i(e))}}return n._value=e,n})(i,e))},style:function(t,e,n){var i="transform"==(t+="")?Zc:Le;return null==e?this.styleTween(t,function(t,e){var n,i,r;return function(){var o=B(this,t),s=(this.style.removeProperty(t),B(this,t));return o===s?null:o===n&&s===i?r:r=e(n=o,i=s)}}(t,i)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof e?function(t,e,n){var i,r,o;return function(){var s=B(this,t),a=n(this);return null==a&&(this.style.removeProperty(t),a=B(this,t)),s===a?null:s===i&&a===r?o:o=e(i=s,r=a)}}(t,i,De(this,"style."+t,e)):function(t,e,n){var i,r;return function(){var o=B(this,t);return o===n?null:o===i?r:r=e(i=o,n)}}(t,i,e+""),n)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,function(t,e,n){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.style.setProperty(t,r(e),n)}}return i._value=e,i}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(De(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=Oe(this.node(),n).tween,o=0,s=r.length;o<s;++o)if((i=r[o]).name===t)return i.value;return null}return this.each((null==e?function(t,e){var n,i;return function(){var r=Pe(this,t),o=r.tween;if(o!==n)for(var s=0,a=(i=n=o).length;s<a;++s)if(i[s].name===e){(i=i.slice()).splice(s,1);break}r.tween=i}}:function(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var o=Pe(this,t),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:e,value:n},u=0,l=r.length;u<l;++u)if(r[u].name===e){r[u]=a;break}u===l&&r.push(a)}o.tween=r}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){Me(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){Me(this,t).delay=e}})(e,t)):Oe(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){Pe(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){Pe(this,t).duration=e}})(e,t)):Oe(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Pe(this,t).ease=e}}(e,t)):Oe(this.node(),e).ease}};var Mh=function H_(t){function e(e){return Math.pow(e,t)}return t=+t,e.exponent=H_,e}(3),Ph=function K_(t){function e(e){return 1-Math.pow(1-e,t)}return t=+t,e.exponent=K_,e}(3),Oh=function Y_(t){function e(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,e.exponent=Y_,e}(3),Ih=Math.PI,Dh=Ih/2,Lh=4/11,Rh=6/11,Fh=8/11,Nh=.75,Uh=9/11,Vh=10/11,jh=.9375,Bh=21/22,zh=63/64,qh=1/Lh/Lh,Hh=function W_(t){function e(e){return e*e*((t+1)*e-t)}return t=+t,e.overshoot=W_,e}(1.70158),Kh=function G_(t){function e(e){return--e*e*((t+1)*e+t)+1}return t=+t,e.overshoot=G_,e}(1.70158),Yh=function X_(t){function e(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,e.overshoot=X_,e}(1.70158),Wh=2*Math.PI,Gh=function Z_(t,e){function n(n){return t*Math.pow(2,10*--n)*Math.sin((i-n)/e)}var i=Math.asin(1/(t=Math.max(1,t)))*(e/=Wh);return n.amplitude=function(t){return Z_(t,e*Wh)},n.period=function(e){return Z_(t,e)},n}(1,.3),Xh=function Q_(t,e){function n(n){return 1-t*Math.pow(2,-10*(n=+n))*Math.sin((n+i)/e)}var i=Math.asin(1/(t=Math.max(1,t)))*(e/=Wh);return n.amplitude=function(t){return Q_(t,e*Wh)},n.period=function(e){return Q_(t,e)},n}(1,.3),Zh=function J_(t,e){function n(n){return((n=2*n-1)<0?t*Math.pow(2,10*n)*Math.sin((i-n)/e):2-t*Math.pow(2,-10*n)*Math.sin((i+n)/e))/2}var i=Math.asin(1/(t=Math.max(1,t)))*(e/=Wh);return n.amplitude=function(t){return J_(t,e*Wh)},n.period=function(e){return J_(t,e)},n}(1,.3),Qh={time:null,delay:0,duration:250,ease:Ve};ut.prototype.interrupt=function(t){return this.each(function(){Ie(this,t)})},ut.prototype.transition=function(t){var e,n;t instanceof Re?(e=t._id,t=t._name):(e=Ne(),(n=Qh).time=ge(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s,a=i[o],u=a.length,l=0;l<u;++l)(s=a[l])&&Ae(s,t,e,l,a,n||He(s,e));
return new Re(i,this._parents,t,e)};var Jh=[null],$h={name:"drag"},tf={name:"space"},ef={name:"handle"},nf={name:"center"},rf={name:"x",handles:["e","w"].map(Ge),input:function(t,e){return t&&[[t[0],e[0][1]],[t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},of={name:"y",handles:["n","s"].map(Ge),input:function(t,e){return t&&[[e[0][0],t[0]],[e[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},sf={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Ge),input:function(t){return t},output:function(t){return t}},af={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},uf={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},lf={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},cf={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},hf={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},ff=Math.cos,df=Math.sin,pf=Math.PI,mf=pf/2,yf=2*pf,_f=Math.max,vf=Array.prototype.slice,gf=Math.PI,bf=2*gf,wf=bf-1e-6;en.prototype=nn.prototype={constructor:en,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+o)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var o=this._x1,s=this._y1,a=n-t,u=i-e,l=o-t,c=s-e,h=l*l+c*c;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(c*a-u*l)>1e-6&&r){var f=n-o,d=i-s,p=a*a+u*u,m=f*f+d*d,y=Math.sqrt(p),_=Math.sqrt(h),v=r*Math.tan((gf-Math.acos((p+h-m)/(2*y*_)))/2),g=v/_,b=v/y;Math.abs(g-1)>1e-6&&(this._+="L"+(t+g*l)+","+(e+g*c)),this._+="A"+r+","+r+",0,0,"+ +(c*f>l*d)+","+(this._x1=t+b*a)+","+(this._y1=e+b*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,i,r,o){t=+t,e=+e;var s=(n=+n)*Math.cos(i),a=n*Math.sin(i),u=t+s,l=e+a,c=1^o,h=o?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-l)>1e-6)&&(this._+="L"+u+","+l),n&&(h<0&&(h=h%bf+bf),h>wf?this._+="A"+n+","+n+",0,1,"+c+","+(t-s)+","+(e-a)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=gf)+","+c+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}},ln.prototype=cn.prototype={constructor:ln,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var xf=cn.prototype;mn.prototype=yn.prototype={constructor:mn,has:xf.has,add:function(t){return t+="",this["$"+t]=t,this},remove:xf.remove,clear:xf.clear,values:xf.keys,size:xf.size,empty:xf.empty,each:xf.each};var Ef={},kf={},Sf=34,Cf=10,Tf=13,Af=vn(","),Mf=Af.parse,Pf=Af.parseRows,Of=Af.format,If=Af.formatRows,Df=vn("\t"),Lf=Df.parse,Rf=Df.parseRows,Ff=Df.format,Nf=Df.formatRows,Uf=Sn.prototype=Cn.prototype;Uf.copy=function(){var t,e,n=new Cn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=Tn(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var r=0;r<4;++r)(e=i.source[r])&&(e.length?t.push({source:e,target:i.target[r]=new Array(4)}):i.target[r]=Tn(e));return n},Uf.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return wn(this.cover(e,n),e,n,t)},Uf.addAll=function(t){var e,n,i,r,o=t.length,s=new Array(o),a=new Array(o),u=1/0,l=1/0,c=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(r=+this._y.call(null,e))||(s[n]=i,a[n]=r,i<u&&(u=i),i>c&&(c=i),r<l&&(l=r),r>h&&(h=r));for(c<u&&(u=this._x0,c=this._x1),h<l&&(l=this._y0,h=this._y1),this.cover(u,l).cover(c,h),n=0;n<o;++n)wn(this,s[n],a[n],t[n]);return this},Uf.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,o=(i=Math.floor(e))+1;else{if(!(n>t||t>r||i>e||e>o))return this;var s,a,u=r-n,l=this._root;switch(a=(e<(i+o)/2)<<1|t<(n+r)/2){case 0:do s=new Array(4),s[a]=l,l=s;while(u*=2,r=n+u,o=i+u,t>r||e>o);break;case 1:do s=new Array(4),s[a]=l,l=s;while(u*=2,n=r-u,o=i+u,n>t||e>o);break;case 2:do s=new Array(4),s[a]=l,l=s;while(u*=2,r=n+u,i=o-u,t>r||i>e);break;case 3:do s=new Array(4),s[a]=l,l=s;while(u*=2,n=r-u,i=o-u,n>t||i>e)}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=i,this._x1=r,this._y1=o,this},Uf.data=function(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t},Uf.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Uf.find=function(t,e,n){var i,r,o,s,a,u,l,c=this._x0,h=this._y0,f=this._x1,d=this._y1,p=[],m=this._root;for(m&&p.push(new xn(m,c,h,f,d)),null==n?n=1/0:(c=t-n,h=e-n,f=t+n,d=e+n,n*=n);u=p.pop();)if(!(!(m=u.node)||(r=u.x0)>f||(o=u.y0)>d||(s=u.x1)<c||(a=u.y1)<h))if(m.length){var y=(r+s)/2,_=(o+a)/2;p.push(new xn(m[3],y,_,s,a),new xn(m[2],r,_,y,a),new xn(m[1],y,o,s,_),new xn(m[0],r,o,y,_)),(l=(e>=_)<<1|t>=y)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=u)}else{var v=t-+this._x.call(null,m.data),g=e-+this._y.call(null,m.data),b=v*v+g*g;if(b<n){var w=Math.sqrt(n=b);c=t-w,h=e-w,f=t+w,d=e+w,i=m.data}}return i},Uf.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,n,i,r,o,s,a,u,l,c,h,f,d=this._root,p=this._x0,m=this._y0,y=this._x1,_=this._y1;if(!d)return this;if(d.length)for(;;){if((l=o>=(a=(p+y)/2))?p=a:y=a,(c=s>=(u=(m+_)/2))?m=u:_=u,e=d,!(d=d[h=c<<1|l]))return this;if(!d.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,f=h)}for(;d.data!==t;)if(i=d,!(d=d.next))return this;return(r=d.next)&&delete d.next,i?(r?i.next=r:delete i.next,this):e?(r?e[h]=r:delete e[h],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[f]=d:this._root=d),this):(this._root=r,this)},Uf.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Uf.root=function(){return this._root},Uf.size=function(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t},Uf.visit=function(t){var e,n,i,r,o,s,a=[],u=this._root;for(u&&a.push(new xn(u,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(u=e.node,i=e.x0,r=e.y0,o=e.x1,s=e.y1)&&u.length){var l=(i+o)/2,c=(r+s)/2;(n=u[3])&&a.push(new xn(n,l,c,o,s)),(n=u[2])&&a.push(new xn(n,i,c,l,s)),(n=u[1])&&a.push(new xn(n,l,r,o,c)),(n=u[0])&&a.push(new xn(n,i,r,l,c))}return this},Uf.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new xn(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var r=e.node;if(r.length){var o,s=e.x0,a=e.y0,u=e.x1,l=e.y1,c=(s+u)/2,h=(a+l)/2;(o=r[0])&&n.push(new xn(o,s,a,c,h)),(o=r[1])&&n.push(new xn(o,c,a,u,h)),(o=r[2])&&n.push(new xn(o,s,h,c,l)),(o=r[3])&&n.push(new xn(o,c,h,u,l))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Uf.x=function(t){return arguments.length?(this._x=t,this):this._x},Uf.y=function(t){return arguments.length?(this._y=t,this):this._y};var Vf,jf=10,Bf=Math.PI*(3-Math.sqrt(5)),zf={"":function(t,e){t:for(var n,i=(t=t.toPrecision(e)).length,r=1,o=-1;r<i;++r)switch(t[r]){case".":o=n=r;break;case"0":0===o&&(o=r),n=r;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(n+1):t},"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Fn(100*t,e)},r:Fn,s:function(t,e){var n=Ln(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(Vf=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Ln(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},qf=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;Nn.prototype=Un.prototype,Un.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var Hf,Kf=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];Bn({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),Yn.prototype={constructor:Yn,reset:function(){this.s=this.t=0},add:function(t){Wn(Ed,t,this.t),Wn(this,Ed.s,this.s),this.s?this.t+=Ed.t:this.s=Ed.t},valueOf:function(){return this.s}};var Yf,Wf,Gf,Xf,Zf,Qf,Jf,$f,td,ed,nd,id,rd,od,sd,ad,ud,ld,cd,hd,fd,dd,pd,md,yd,_d,vd,gd,bd,wd,xd,Ed=new Yn,kd=1e-6,Sd=1e-12,Cd=Math.PI,Td=Cd/2,Ad=Cd/4,Md=2*Cd,Pd=180/Cd,Od=Cd/180,Id=Math.abs,Dd=Math.atan,Ld=Math.atan2,Rd=Math.cos,Fd=Math.ceil,Nd=Math.exp,Ud=Math.log,Vd=Math.pow,jd=Math.sin,Bd=Math.sign||function(t){return t>0?1:t<0?-1:0},zd=Math.sqrt,qd=Math.tan,Hd={Feature:function(t,e){Jn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Jn(n[i].geometry,e)}},Kd={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){$n(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)$n(n[i],e,0)},Polygon:function(t,e){ti(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)ti(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Jn(n[i],e)}},Yd=Kn(),Wd=Kn(),Gd={point:Qn,lineStart:Qn,lineEnd:Qn,polygonStart:function(){Yd.reset(),Gd.lineStart=ni,Gd.lineEnd=ii},polygonEnd:function(){var t=+Yd;Wd.add(t<0?Md+t:t),this.lineStart=this.lineEnd=this.point=Qn},sphere:function(){Wd.add(Md)}},Xd=Kn(),Zd={point:di,lineStart:mi,lineEnd:yi,polygonStart:function(){Zd.point=_i,Zd.lineStart=vi,Zd.lineEnd=gi,Xd.reset(),Gd.polygonStart()},polygonEnd:function(){Gd.polygonEnd(),Zd.point=di,Zd.lineStart=mi,Zd.lineEnd=yi,Yd<0?(Qf=-($f=180),Jf=-(td=90)):Xd>kd?td=90:Xd<-kd&&(Jf=-90),sd[0]=Qf,sd[1]=$f}},Qd={sphere:Qn,point:Ei,lineStart:Si,lineEnd:Ai,polygonStart:function(){Qd.lineStart=Mi,Qd.lineEnd=Pi},polygonEnd:function(){Qd.lineStart=Si,Qd.lineEnd=Ai}};Ri.invert=Ri;var Jd,$d,tp,ep,np,ip,rp,op,sp,ap,up,lp=Kn(),cp=Xi(function(){return!0},function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?Cd:-Cd,u=Id(o-n);Id(u-Cd)<kd?(t.point(n,i=(i+s)/2>0?Td:-Td),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),t.point(o,i),e=0):r!==a&&u>=Cd&&(Id(n-r)<kd&&(n-=r*kd),Id(o-a)<kd&&(o-=a*kd),i=function(t,e,n,i){var r,o,s=jd(t-n);return Id(s)>kd?Dd((jd(e)*(o=Rd(i))*jd(n)-jd(i)*(r=Rd(e))*jd(t))/(r*o*s)):(e+i)/2}(n,i,o,s),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),e=0),t.point(n=o,i=s),r=a},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}},function(t,e,n,i){var r;if(null==t)r=n*Td,i.point(-Cd,r),i.point(0,r),i.point(Cd,r),i.point(Cd,0),i.point(Cd,-r),i.point(0,-r),i.point(-Cd,-r),i.point(-Cd,0),i.point(-Cd,r);else if(Id(t[0]-e[0])>kd){var o=t[0]<e[0]?Cd:-Cd;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])},[-Cd,-Td]),hp=1e9,fp=-hp,dp=Kn(),pp={sphere:Qn,point:Qn,lineStart:function(){pp.point=er,pp.lineEnd=tr},lineEnd:Qn,polygonStart:Qn,polygonEnd:Qn},mp=[null,null],yp={type:"LineString",coordinates:mp},_p={Feature:function(t,e){return or(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)if(or(n[i].geometry,e))return!0;return!1}},vp={Sphere:function(){return!0},Point:function(t,e){return sr(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(sr(n[i],e))return!0;return!1},LineString:function(t,e){return ar(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(ar(n[i],e))return!0;return!1},Polygon:function(t,e){return ur(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(ur(n[i],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)if(or(n[i],e))return!0;return!1}},gp=Kn(),bp=Kn(),wp={point:Qn,lineStart:Qn,lineEnd:Qn,polygonStart:function(){wp.lineStart=mr,wp.lineEnd=vr},polygonEnd:function(){wp.lineStart=wp.lineEnd=wp.point=Qn,gp.add(Id(bp)),bp.reset()},result:function(){var t=gp/2;return gp.reset(),t}},xp=1/0,Ep=xp,kp=-xp,Sp=kp,Cp={point:function(t,e){t<xp&&(xp=t),t>kp&&(kp=t),e<Ep&&(Ep=e),e>Sp&&(Sp=e)},lineStart:Qn,lineEnd:Qn,polygonStart:Qn,polygonEnd:Qn,result:function(){var t=[[xp,Ep],[kp,Sp]];return kp=Sp=-(Ep=xp=1/0),t}},Tp=0,Ap=0,Mp=0,Pp=0,Op=0,Ip=0,Dp=0,Lp=0,Rp=0,Fp={point:gr,lineStart:br,lineEnd:Er,polygonStart:function(){Fp.lineStart=kr,Fp.lineEnd=Sr},polygonEnd:function(){Fp.point=gr,Fp.lineStart=br,Fp.lineEnd=Er},result:function(){var t=Rp?[Dp/Rp,Lp/Rp]:Ip?[Pp/Ip,Op/Ip]:Mp?[Tp/Mp,Ap/Mp]:[NaN,NaN];return Tp=Ap=Mp=Pp=Op=Ip=Dp=Lp=Rp=0,t}};Ar.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Md)}},result:Qn};var Np,Up,Vp,jp,Bp,zp=Kn(),qp={point:Qn,lineStart:function(){qp.point=Mr},lineEnd:function(){Np&&Pr(Up,Vp),qp.point=Qn},polygonStart:function(){Np=!0},polygonEnd:function(){Np=null},result:function(){var t=+zp;return zp.reset(),t}};Or.prototype={_radius:4.5,_circle:Ir(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Ir(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},Lr.prototype={constructor:Lr,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Hp=16,Kp=Rd(30*Od),Yp=Dr({point:function(t,e){this.stream.point(t*Od,e*Od)}}),Wp=Wr(function(t){return zd(2/(1+t))});Wp.invert=Gr(function(t){return 2*Xn(t/2)});var Gp=Wr(function(t){return(t=Gn(t))&&t/jd(t)});Gp.invert=Gr(function(t){return t}),Xr.invert=function(t,e){return[t,2*Dd(Nd(e))-Td]},$r.invert=$r,eo.invert=Gr(Dd),io.invert=function(t,e){var n,i=e,r=25;do{var o=i*i,s=o*o;i-=n=(i*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))-e)/(1.007226+o*(.045255+s*(.259866*o-.311325-.005916*11*s)))}while(Id(n)>kd&&--r>0);return[t/(.8707+(o=i*i)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),i]},ro.invert=Gr(Xn),oo.invert=Gr(function(t){return 2*Dd(t)}),so.invert=function(t,e){return[-e,2*Dd(Nd(t))-Td]},yo.prototype=ho.prototype={constructor:yo,count:function(){return this.eachAfter(co)},each:function(t){var e,n,i,r,o=this,s=[o];do for(e=s.reverse(),s=[];o=e.pop();)if(t(o),n=o.children)for(i=0,r=n.length;i<r;++i)s.push(n[i]);while(s.length);return this},eachAfter:function(t){for(var e,n,i,r=this,o=[r],s=[];r=o.pop();)if(s.push(r),e=r.children)for(n=0,i=e.length;n<i;++n)o.push(e[n]);for(;r=s.pop();)t(r);return this},eachBefore:function(t){for(var e,n,i=this,r=[i];i=r.pop();)if(t(i),e=i.children)for(n=e.length-1;n>=0;--n)r.push(e[n]);return this},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;for(t=n.pop(),e=i.pop();t===e;)r=t,t=n.pop(),e=i.pop();return r}(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each(function(e){t.push(e)}),t},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return ho(this).eachBefore(po)}};var Xp=Array.prototype.slice,Zp="$",Qp={depth:-1},Jp={};Ho.prototype=Object.create(yo.prototype);var $p=(1+Math.sqrt(5))/2,tm=function $_(t){function e(e,n,i,r,o){Yo(t,e,n,i,r,o)}return e.ratio=function(t){return $_((t=+t)>1?t:1)},e}($p),em=function tv(t){function e(e,n,i,r,o){if((s=e._squarify)&&s.ratio===t)for(var s,a,u,l,c,h=-1,f=s.length,d=e.value;++h<f;){for(u=(a=s[h]).children,l=a.value=0,c=u.length;l<c;++l)a.value+=u[l].value;a.dice?Fo(a,n,i,r,i+=(o-i)*a.value/d):Ko(a,n,i,n+=(r-n)*a.value/d,o),d-=a.value}else e._squarify=s=Yo(t,e,n,i,r,o),s.ratio=t}return e.ratio=function(t){return tv((t=+t)>1?t:1)},e}($p),nm=[].slice,im={};Zo.prototype=ts.prototype={constructor:Zo,defer:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var e=nm.call(arguments,1);return e.push(t),++this._waiting,this._tasks.push(e),Qo(this),this},abort:function(){return null==this._error&&Jo(this,new Error("abort")),this},await:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(e,n){t.apply(null,[e].concat(n))},$o(this),this},awaitAll:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=t,$o(this),this}};var rm=function ev(t){function e(e,n){return e=null==e?0:+e,n=null==n?1:+n,1===arguments.length?(n=e,e=0):n-=e,function(){return t()*n+e}}return e.source=ev,e}(es),om=function nv(t){function e(e,n){var i,r;return e=null==e?0:+e,n=null==n?1:+n,function(){var o;if(null!=i)o=i,i=null;else do i=2*t()-1,o=2*t()-1,r=i*i+o*o;while(!r||r>1);return e+n*o*Math.sqrt(-2*Math.log(r)/r)}}return e.source=nv,e}(es),sm=function iv(t){function e(){var e=om.source(t).apply(this,arguments);return function(){return Math.exp(e())}}return e.source=iv,e}(es),am=function rv(t){function e(e){return function(){for(var n=0,i=0;i<e;++i)n+=t();return n}}return e.source=rv,e}(es),um=function ov(t){function e(e){var n=am.source(t)(e);return function(){return n()/e}}return e.source=ov,e}(es),lm=function sv(t){function e(e){return function(){return-Math.log(1-t())/e}}return e.source=sv,e}(es),cm=is("text/html",function(t){return document.createRange().createContextualFragment(t.responseText)}),hm=is("application/json",function(t){return JSON.parse(t.responseText)}),fm=is("text/plain",function(t){return t.responseText}),dm=is("application/xml",function(t){var e=t.responseXML;if(!e)throw new Error("parse error");return e}),pm=rs("text/csv",Mf),mm=rs("text/tab-separated-values",Lf),ym=Array.prototype,_m=ym.map,vm=ym.slice,gm={name:"implicit"},bm=[0,1],wm=new Date,xm=new Date,Em=Os(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Em.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Os(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):Em:null};var km=Em.range,Sm=6e4,Cm=6048e5,Tm=Os(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),Am=Tm.range,Mm=Os(function(t){t.setTime(Math.floor(t/Sm)*Sm)},function(t,e){t.setTime(+t+e*Sm)},function(t,e){return(e-t)/Sm},function(t){return t.getMinutes()}),Pm=Mm.range,Om=Os(function(t){var e=t.getTimezoneOffset()*Sm%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((+t-e)/36e5)+e)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),Im=Om.range,Dm=Os(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Sm)/864e5},function(t){return t.getDate()-1}),Lm=Dm.range,Rm=Is(0),Fm=Is(1),Nm=Is(2),Um=Is(3),Vm=Is(4),jm=Is(5),Bm=Is(6),zm=Rm.range,qm=Fm.range,Hm=Nm.range,Km=Um.range,Ym=Vm.range,Wm=jm.range,Gm=Bm.range,Xm=Os(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),Zm=Xm.range,Qm=Os(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Qm.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Os(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var Jm=Qm.range,$m=Os(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Sm)},function(t,e){return(e-t)/Sm},function(t){return t.getUTCMinutes()}),ty=$m.range,ey=Os(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),ny=ey.range,iy=Os(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}),ry=iy.range,oy=Ds(0),sy=Ds(1),ay=Ds(2),uy=Ds(3),ly=Ds(4),cy=Ds(5),hy=Ds(6),fy=oy.range,dy=sy.range,py=ay.range,my=uy.range,yy=ly.range,_y=cy.range,vy=hy.range,gy=Os(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),by=gy.range,wy=Os(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});wy.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Os(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var xy,Ey=wy.range,ky={"-":"",_:" ",0:"0"},Sy=/^\s*\d+/,Cy=/^%/,Ty=/[\\^$*+?|[\]().{}]/g;Ha({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Ay="%Y-%m-%dT%H:%M:%S.%LZ",My=Date.prototype.toISOString?function(t){return t.toISOString()}:t.utcFormat(Ay),Py=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:t.utcParse(Ay),Oy=1e3,Iy=60*Oy,Dy=60*Iy,Ly=24*Dy,Ry=7*Ly,Fy=30*Ly,Ny=365*Ly,Uy=Ga("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Vy=Ga("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),jy=Ga("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),By=Ga("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),zy=ah(Gt(300,.5,0),Gt(-240,.5,1)),qy=ah(Gt(-100,.75,.35),Gt(80,1.5,.8)),Hy=ah(Gt(260,.75,.35),Gt(80,1.5,.8)),Ky=Gt(),Yy=Xa(Ga("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Wy=Xa(Ga("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Gy=Xa(Ga("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Xy=Xa(Ga("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),Zy=Math.abs,Qy=Math.atan2,Jy=Math.cos,$y=Math.max,t_=Math.min,e_=Math.sin,n_=Math.sqrt,i_=1e-12,r_=Math.PI,o_=r_/2,s_=2*r_;ou.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){
(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var a_=pu(su);du.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var u_=Array.prototype.slice,l_={draw:function(t,e){var n=Math.sqrt(e/r_);t.moveTo(n,0),t.arc(0,0,n,0,s_)}},c_={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},h_=Math.sqrt(1/3),f_=2*h_,d_={draw:function(t,e){var n=Math.sqrt(e/f_),i=n*h_;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},p_=Math.sin(r_/10)/Math.sin(7*r_/10),m_=Math.sin(s_/10)*p_,y_=-Math.cos(s_/10)*p_,__={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),i=m_*n,r=y_*n;t.moveTo(0,-n),t.lineTo(i,r);for(var o=1;o<5;++o){var s=s_*o/5,a=Math.cos(s),u=Math.sin(s);t.lineTo(u*n,-a*n),t.lineTo(a*i-u*r,u*i+a*r)}t.closePath()}},v_={draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}},g_=Math.sqrt(3),b_={draw:function(t,e){var n=-Math.sqrt(e/(3*g_));t.moveTo(0,2*n),t.lineTo(-g_*n,-n),t.lineTo(g_*n,-n),t.closePath()}},w_=Math.sqrt(3)/2,x_=1/Math.sqrt(12),E_=3*(x_/2+1),k_={draw:function(t,e){var n=Math.sqrt(e/E_),i=n/2,r=n*x_,o=i,s=n*x_+n,a=-o,u=s;t.moveTo(i,r),t.lineTo(o,s),t.lineTo(a,u),t.lineTo(-.5*i-w_*r,w_*i+-.5*r),t.lineTo(-.5*o-w_*s,w_*o+-.5*s),t.lineTo(-.5*a-w_*u,w_*a+-.5*u),t.lineTo(-.5*i+w_*r,-.5*r-w_*i),t.lineTo(-.5*o+w_*s,-.5*s-w_*o),t.lineTo(-.5*a+w_*u,-.5*u-w_*a),t.closePath()}},S_=[l_,c_,d_,v_,__,b_,k_];Tu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Cu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Cu(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Au.prototype={areaStart:Su,areaEnd:Su,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Cu(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Mu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Cu(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Pu.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i,r=t[0],o=e[0],s=t[n]-r,a=e[n]-o,u=-1;++u<=n;)i=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(r+i*s),this._beta*e[u]+(1-this._beta)*(o+i*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var C_=function av(t){function e(e){return 1===t?new Tu(e):new Pu(e,t)}return e.beta=function(t){return av(+t)},e}(.85);Iu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ou(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Ou(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var T_=function uv(t){function e(e){return new Iu(e,t)}return e.tension=function(t){return uv(+t)},e}(0);Du.prototype={areaStart:Su,areaEnd:Su,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ou(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var A_=function lv(t){function e(e){return new Du(e,t)}return e.tension=function(t){return lv(+t)},e}(0);Lu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ou(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var M_=function cv(t){function e(e){return new Lu(e,t)}return e.tension=function(t){return cv(+t)},e}(0);Fu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Ru(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var P_=function hv(t){function e(e){return t?new Fu(e,t):new Iu(e,0)}return e.alpha=function(t){return hv(+t)},e}(.5);Nu.prototype={areaStart:Su,areaEnd:Su,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ru(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var O_=function fv(t){function e(e){return t?new Nu(e,t):new Du(e,0)}return e.alpha=function(t){return fv(+t)},e}(.5);Uu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ru(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var I_=function dv(t){function e(e){return t?new Uu(e,t):new Lu(e,0)}return e.alpha=function(t){return dv(+t)},e}(.5);Vu.prototype={areaStart:Su,areaEnd:Su,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},Hu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:qu(this,this._t0,zu(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,t!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,qu(this,zu(this,n=Bu(this,t,e)),n);break;default:qu(this,this._t0,n=Bu(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Ku.prototype=Object.create(Hu.prototype)).point=function(t,e){Hu.prototype.point.call(this,e,t)},Yu.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,o){this._context.bezierCurveTo(e,t,i,n,o,r)}},Wu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=Gu(t),r=Gu(e),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],t[s],e[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},Xu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}},rl.prototype={constructor:rl,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=ul(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(sl(this,n),n=(t=n).U),n.C=!1,i.C=!0,al(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(al(this,n),n=(t=n).U),n.C=!1,i.C=!0,sl(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,s=t.R;if(n=o?s?ul(s):o:s,r?r.L===t?r.L=n:r.R=n:this._=n,o&&s?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=s,s.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,sl(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,al(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,sl(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,al(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,sl(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,al(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}};var D_,L_,R_,F_,N_,U_=[],V_=[],j_=1e-6,B_=1e-12;Cl.prototype={constructor:Cl,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return ml(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,i){if(o=(r=n.halfedges).length)for(var r,o,s,a=n.site,u=-1,l=e[r[o-1]],c=l.left===a?l.right:l.left;++u<o;)s=c,c=(l=e[r[u]]).left===a?l.right:l.left,s&&c&&i<s.index&&i<c.index&&kl(a,s,c)<0&&t.push([a.data,s.data,c.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var i,r,o=this,s=o._found||0,a=o.cells.length;!(r=o.cells[s]);)if(++s>=a)return null;var u=t-r.site[0],l=e-r.site[1],c=u*u+l*l;do r=o.cells[i=s],s=null,r.halfedges.forEach(function(n){var i=o.edges[n],a=i.left;if(a!==r.site&&a||(a=i.right)){var u=t-a[0],l=e-a[1],h=u*u+l*l;h<c&&(c=h,s=a.index)}});while(null!==s);return o._found=i,null==n||c<=n*n?r.site:null}},Al.prototype={constructor:Al,scale:function(t){return 1===t?this:new Al(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Al(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var z_=new Al(1,0,0);Ml.prototype=Al.prototype,t.version="4.13.0",t.bisect=Vl,t.bisectRight=Vl,t.bisectLeft=jl,t.ascending=e,t.bisector=n,t.cross=function(t,e,n){var i,o,s,a,u=t.length,l=e.length,c=new Array(u*l);for(null==n&&(n=r),i=s=0;i<u;++i)for(a=t[i],o=0;o<l;++o,++s)c[s]=n(a,e[o]);return c},t.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},t.deviation=a,t.extent=u,t.histogram=function(){function t(t){var r,o,s=t.length,a=new Array(s);for(r=0;r<s;++r)a[r]=e(t[r],r,t);var u=n(a),l=u[0],c=u[1],f=i(a,l,c);Array.isArray(f)||(f=p(l,c,f),f=h(Math.ceil(l/f)*f,Math.floor(c/f)*f,f));for(var d=f.length;f[0]<=l;)f.shift(),--d;for(;f[d-1]>c;)f.pop(),--d;var m,y=new Array(d+1);for(r=0;r<=d;++r)(m=y[r]=[]).x0=r>0?f[r-1]:l,m.x1=r<d?f[r]:c;for(r=0;r<s;++r)l<=(o=a[r])&&o<=c&&y[Vl(f,o,0,d)].push(t[r]);return y}var e=c,n=u,i=m;return t.value=function(n){return arguments.length?(e="function"==typeof n?n:l(n),t):e},t.domain=function(e){return arguments.length?(n="function"==typeof e?e:l([e[0],e[1]]),t):n},t.thresholds=function(e){return arguments.length?(i="function"==typeof e?e:l(Array.isArray(e)?zl.call(e):e),t):i},t},t.thresholdFreedmanDiaconis=function(t,n,i){return t=ql.call(t,o).sort(e),Math.ceil((i-n)/(2*(y(t,.75)-y(t,.25))*Math.pow(t.length,-1/3)))},t.thresholdScott=function(t,e,n){return Math.ceil((n-e)/(3.5*a(t)*Math.pow(t.length,-1/3)))},t.thresholdSturges=m,t.max=function(t,e){var n,i,r=t.length,o=-1;if(null==e){for(;++o<r;)if(null!=(n=t[o])&&n>=n)for(i=n;++o<r;)null!=(n=t[o])&&n>i&&(i=n)}else for(;++o<r;)if(null!=(n=e(t[o],o,t))&&n>=n)for(i=n;++o<r;)null!=(n=e(t[o],o,t))&&n>i&&(i=n);return i},t.mean=function(t,e){var n,i=t.length,r=i,s=-1,a=0;if(null==e)for(;++s<i;)isNaN(n=o(t[s]))?--r:a+=n;else for(;++s<i;)isNaN(n=o(e(t[s],s,t)))?--r:a+=n;if(r)return a/r},t.median=function(t,n){var i,r=t.length,s=-1,a=[];if(null==n)for(;++s<r;)isNaN(i=o(t[s]))||a.push(i);else for(;++s<r;)isNaN(i=o(n(t[s],s,t)))||a.push(i);return y(a.sort(e),.5)},t.merge=_,t.min=v,t.pairs=function(t,e){null==e&&(e=r);for(var n=0,i=t.length-1,o=t[0],s=new Array(i<0?0:i);n<i;)s[n]=e(o,o=t[++n]);return s},t.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},t.quantile=y,t.range=h,t.scan=function(t,n){if(i=t.length){var i,r,o=0,s=0,a=t[s];for(null==n&&(n=e);++o<i;)(n(r=t[o],a)<0||0!==n(a,a))&&(a=r,s=o);return 0===n(a,a)?s:void 0}},t.shuffle=function(t,e,n){for(var i,r,o=(null==n?t.length:n)-(e=null==e?0:+e);o;)r=Math.random()*o--|0,i=t[o+e],t[o+e]=t[r+e],t[r+e]=i;return t},t.sum=function(t,e){var n,i=t.length,r=-1,o=0;if(null==e)for(;++r<i;)(n=+t[r])&&(o+=n);else for(;++r<i;)(n=+e(t[r],r,t))&&(o+=n);return o},t.ticks=f,t.tickIncrement=d,t.tickStep=p,t.transpose=g,t.variance=s,t.zip=function(){return g(arguments)},t.axisTop=function(t){return S(Gl,t)},t.axisRight=function(t){return S(Xl,t)},t.axisBottom=function(t){return S(Zl,t)},t.axisLeft=function(t){return S(Ql,t)},t.brush=function(){return $e(sf)},t.brushX=function(){return $e(rf)},t.brushY=function(){return $e(of)},t.brushSelection=function(t){var e=t.__brush;return e?e.dim.output(e.selection):null},t.chord=function(){function t(t){var o,s,a,u,l,c,f=t.length,d=[],p=h(f),m=[],y=[],_=y.groups=new Array(f),v=new Array(f*f);for(o=0,l=-1;++l<f;){for(s=0,c=-1;++c<f;)s+=t[l][c];d.push(s),m.push(h(f)),o+=s}for(n&&p.sort(function(t,e){return n(d[t],d[e])}),i&&m.forEach(function(e,n){e.sort(function(e,r){return i(t[n][e],t[n][r])})}),u=(o=_f(0,yf-e*f)/o)?e:yf/f,s=0,l=-1;++l<f;){for(a=s,c=-1;++c<f;){var g=p[l],b=m[g][c],w=t[g][b],x=s,E=s+=w*o;v[b*f+g]={index:g,subindex:b,startAngle:x,endAngle:E,value:w}}_[g]={index:g,startAngle:a,endAngle:s,value:d[g]},s+=u}for(l=-1;++l<f;)for(c=l-1;++c<f;){var k=v[c*f+l],S=v[l*f+c];(k.value||S.value)&&y.push(k.value<S.value?{source:S,target:k}:{source:k,target:S})}return r?y.sort(r):y}var e=0,n=null,i=null,r=null;return t.padAngle=function(n){return arguments.length?(e=_f(0,n),t):e},t.sortGroups=function(e){return arguments.length?(n=e,t):n},t.sortSubgroups=function(e){return arguments.length?(i=e,t):i},t.sortChords=function(e){return arguments.length?(null==e?r=null:(r=function(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}(e))._=e,t):r&&r._},t},t.ribbon=function(){function t(){var t,a=vf.call(arguments),u=e.apply(this,a),l=n.apply(this,a),c=+i.apply(this,(a[0]=u,a)),h=r.apply(this,a)-mf,f=o.apply(this,a)-mf,d=c*ff(h),p=c*df(h),m=+i.apply(this,(a[0]=l,a)),y=r.apply(this,a)-mf,_=o.apply(this,a)-mf;if(s||(s=t=nn()),s.moveTo(d,p),s.arc(0,0,c,h,f),h===y&&f===_||(s.quadraticCurveTo(0,0,m*ff(y),m*df(y)),s.arc(0,0,m,y,_)),s.quadraticCurveTo(0,0,d,p),s.closePath(),t)return s=null,t+""||null}var e=rn,n=on,i=sn,r=an,o=un,s=null;return t.radius=function(e){return arguments.length?(i="function"==typeof e?e:tn(+e),t):i},t.startAngle=function(e){return arguments.length?(r="function"==typeof e?e:tn(+e),t):r},t.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:tn(+e),t):o},t.source=function(n){return arguments.length?(e=n,t):e},t.target=function(e){return arguments.length?(n=e,t):n},t.context=function(e){return arguments.length?(s=null==e?null:e,t):s},t},t.nest=function(){function t(e,r,s,a){if(r>=o.length)return null!=n&&e.sort(n),null!=i?i(e):e;for(var u,l,c,h=-1,f=e.length,d=o[r++],p=cn(),m=s();++h<f;)(c=p.get(u=d(l=e[h])+""))?c.push(l):p.set(u,[l]);return p.each(function(e,n){a(m,n,t(e,r,s,a))}),m}function e(t,n){if(++n>o.length)return t;var r,a=s[n-1];return null!=i&&n>=o.length?r=t.entries():(r=[],t.each(function(t,i){r.push({key:i,values:e(t,n)})})),null!=a?r.sort(function(t,e){return a(t.key,e.key)}):r}var n,i,r,o=[],s=[];return r={object:function(e){return t(e,0,hn,fn)},map:function(e){return t(e,0,dn,pn)},entries:function(n){return e(t(n,0,dn,pn),0)},key:function(t){return o.push(t),r},sortKeys:function(t){return s[o.length-1]=t,r},sortValues:function(t){return n=t,r},rollup:function(t){return i=t,r}}},t.set=yn,t.map=cn,t.keys=function(t){var e=[];for(var n in t)e.push(n);return e},t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},t.color=Mt,t.rgb=Dt,t.hsl=Ft,t.lab=jt,t.hcl=Yt,t.cubehelix=Gt,t.dispatch=C,t.drag=function(){function e(t){t.on("mousedown.drag",n).filter(y).on("touchstart.drag",o).on("touchmove.drag",s).on("touchend.drag touchcancel.drag",a).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function n(){if(!f&&d.apply(this,arguments)){var e=u("mouse",p.apply(this,arguments),pt,this,arguments);e&&(lt(t.event.view).on("mousemove.drag",i,!0).on("mouseup.drag",r,!0),vt(t.event.view),yt(),h=!1,l=t.event.clientX,c=t.event.clientY,e("start"))}}function i(){if(_t(),!h){var e=t.event.clientX-l,n=t.event.clientY-c;h=e*e+n*n>b}_.mouse("drag")}function r(){lt(t.event.view).on("mousemove.drag mouseup.drag",null),gt(t.event.view,h),_t(),_.mouse("end")}function o(){if(d.apply(this,arguments)){var e,n,i=t.event.changedTouches,r=p.apply(this,arguments),o=i.length;for(e=0;e<o;++e)(n=u(i[e].identifier,r,mt,this,arguments))&&(yt(),n("start"))}}function s(){var e,n,i=t.event.changedTouches,r=i.length;for(e=0;e<r;++e)(n=_[i[e].identifier])&&(_t(),n("drag"))}function a(){var e,n,i=t.event.changedTouches,r=i.length;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),e=0;e<r;++e)(n=_[i[e].identifier])&&(yt(),n("end"))}function u(n,i,r,o,s){var a,u,l,c=r(i,n),h=v.copy();if(ot(new wt(e,"beforestart",a,n,g,c[0],c[1],0,0,h),function(){return null!=(t.event.subject=a=m.apply(o,s))&&(u=a.x-c[0]||0,l=a.y-c[1]||0,!0)}))return function f(t){var d,p=c;switch(t){case"start":_[n]=f,d=g++;break;case"end":delete _[n],--g;case"drag":c=r(i,n),d=g}ot(new wt(e,t,a,n,d,c[0]+u,c[1]+l,c[0]-p[0],c[1]-p[1],h),h.apply,h,[t,o,s])}}var l,c,h,f,d=xt,p=Et,m=kt,y=St,_={},v=C("start","drag","end"),g=0,b=0;return e.filter=function(t){return arguments.length?(d="function"==typeof t?t:bt(!!t),e):d},e.container=function(t){return arguments.length?(p="function"==typeof t?t:bt(t),e):p},e.subject=function(t){return arguments.length?(m="function"==typeof t?t:bt(t),e):m},e.touchable=function(t){return arguments.length?(y="function"==typeof t?t:bt(!!t),e):y},e.on=function(){var t=v.on.apply(v,arguments);return t===v?e:t},e.clickDistance=function(t){return arguments.length?(b=(t=+t)*t,e):Math.sqrt(b)},e},t.dragDisable=vt,t.dragEnable=gt,t.dsvFormat=vn,t.csvParse=Mf,t.csvParseRows=Pf,t.csvFormat=Of,t.csvFormatRows=If,t.tsvParse=Lf,t.tsvParseRows=Rf,t.tsvFormat=Ff,t.tsvFormatRows=Nf,t.easeLinear=function(t){return+t},t.easeQuad=Ue,t.easeQuadIn=function(t){return t*t},t.easeQuadOut=function(t){return t*(2-t)},t.easeQuadInOut=Ue,t.easeCubic=Ve,t.easeCubicIn=function(t){return t*t*t},t.easeCubicOut=function(t){return--t*t*t+1},t.easeCubicInOut=Ve,t.easePoly=Oh,t.easePolyIn=Mh,t.easePolyOut=Ph,t.easePolyInOut=Oh,t.easeSin=je,t.easeSinIn=function(t){return 1-Math.cos(t*Dh)},t.easeSinOut=function(t){return Math.sin(t*Dh)},t.easeSinInOut=je,t.easeExp=Be,t.easeExpIn=function(t){return Math.pow(2,10*t-10)},t.easeExpOut=function(t){return 1-Math.pow(2,-10*t)},t.easeExpInOut=Be,t.easeCircle=ze,t.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},t.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},t.easeCircleInOut=ze,t.easeBounce=qe,t.easeBounceIn=function(t){return 1-qe(1-t)},t.easeBounceOut=qe,t.easeBounceInOut=function(t){return((t*=2)<=1?1-qe(1-t):qe(t-1)+1)/2},t.easeBack=Yh,t.easeBackIn=Hh,t.easeBackOut=Kh,t.easeBackInOut=Yh,t.easeElastic=Xh,t.easeElasticIn=Gh,t.easeElasticOut=Xh,t.easeElasticInOut=Zh,t.forceCenter=function(t,e){function n(){var n,r,o=i.length,s=0,a=0;for(n=0;n<o;++n)s+=(r=i[n]).x,a+=r.y;for(s=s/o-t,a=a/o-e,n=0;n<o;++n)(r=i[n]).x-=s,r.y-=a}var i;return null==t&&(t=0),null==e&&(e=0),n.initialize=function(t){i=t},n.x=function(e){return arguments.length?(t=+e,n):t},n.y=function(t){return arguments.length?(e=+t,n):e},n},t.forceCollide=function(t){function e(){for(var t,e,i,u,l,c,h,f=r.length,d=0;d<a;++d)for(e=Sn(r,An,Mn).visitAfter(n),t=0;t<f;++t)i=r[t],c=o[i.index],h=c*c,u=i.x+i.vx,l=i.y+i.vy,e.visit(function(t,e,n,r,o){var a=t.data,f=t.r,d=c+f;if(!a)return e>u+d||r<u-d||n>l+d||o<l-d;if(a.index>i.index){var p=u-a.x-a.vx,m=l-a.y-a.vy,y=p*p+m*m;y<d*d&&(0===p&&(p=bn(),y+=p*p),0===m&&(m=bn(),y+=m*m),y=(d-(y=Math.sqrt(y)))/y*s,i.vx+=(p*=y)*(d=(f*=f)/(h+f)),i.vy+=(m*=y)*d,a.vx-=p*(d=1-d),a.vy-=m*d)}})}function n(t){if(t.data)return t.r=o[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function i(){if(r){var e,n,i=r.length;for(o=new Array(i),e=0;e<i;++e)n=r[e],o[n.index]=+t(n,e,r)}}var r,o,s=1,a=1;return"function"!=typeof t&&(t=gn(null==t?1:+t)),e.initialize=function(t){r=t,i()},e.iterations=function(t){return arguments.length?(a=+t,e):a},e.strength=function(t){return arguments.length?(s=+t,e):s},e.radius=function(n){return arguments.length?(t="function"==typeof n?n:gn(+n),i(),e):t},e},t.forceLink=function(t){function e(e){for(var n=0,i=t.length;n<p;++n)for(var r,o,u,l,h,f,d,m=0;m<i;++m)o=(r=t[m]).source,l=(u=r.target).x+u.vx-o.x-o.vx||bn(),h=u.y+u.vy-o.y-o.vy||bn(),l*=f=((f=Math.sqrt(l*l+h*h))-a[m])/f*e*s[m],h*=f,u.vx-=l*(d=c[m]),u.vy-=h*d,o.vx+=l*(d=1-d),o.vy+=h*d}function n(){if(u){var e,n,f=u.length,d=t.length,p=cn(u,h);for(e=0,l=new Array(f);e<d;++e)(n=t[e]).index=e,"object"!=i(n.source)&&(n.source=On(p,n.source)),"object"!=i(n.target)&&(n.target=On(p,n.target)),l[n.source.index]=(l[n.source.index]||0)+1,l[n.target.index]=(l[n.target.index]||0)+1;for(e=0,c=new Array(d);e<d;++e)n=t[e],c[e]=l[n.source.index]/(l[n.source.index]+l[n.target.index]);s=new Array(d),r(),a=new Array(d),o()}}function r(){if(u)for(var e=0,n=t.length;e<n;++e)s[e]=+f(t[e],e,t)}function o(){if(u)for(var e=0,n=t.length;e<n;++e)a[e]=+d(t[e],e,t)}var s,a,u,l,c,h=Pn,f=function(t){return 1/Math.min(l[t.source.index],l[t.target.index])},d=gn(30),p=1;return null==t&&(t=[]),e.initialize=function(t){u=t,n()},e.links=function(i){return arguments.length?(t=i,n(),e):t},e.id=function(t){return arguments.length?(h=t,e):h},e.iterations=function(t){return arguments.length?(p=+t,e):p},e.strength=function(t){return arguments.length?(f="function"==typeof t?t:gn(+t),r(),e):f},e.distance=function(t){return arguments.length?(d="function"==typeof t?t:gn(+t),o(),e):d},e},t.forceManyBody=function(){function t(t){var e,a=r.length,u=Sn(r,In,Dn).visitAfter(n);for(s=t,e=0;e<a;++e)o=r[e],u.visit(i)}function e(){if(r){var t,e,n=r.length;for(a=new Array(n),t=0;t<n;++t)e=r[t],a[e.index]=+u(e,t,r)}}function n(t){var e,n,i,r,o,s=0,u=0;if(t.length){for(i=r=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(s+=e.value,u+=n,i+=n*e.x,r+=n*e.y);t.x=i/u,t.y=r/u}else{(e=t).x=e.data.x,e.y=e.data.y;do s+=a[e.data.index];while(e=e.next)}t.value=s}function i(t,e,n,i){if(!t.value)return!0;var r=t.x-o.x,u=t.y-o.y,f=i-e,d=r*r+u*u;if(f*f/h<d)return d<c&&(0===r&&(r=bn(),d+=r*r),0===u&&(u=bn(),d+=u*u),d<l&&(d=Math.sqrt(l*d)),o.vx+=r*t.value*s/d,o.vy+=u*t.value*s/d),!0;if(!(t.length||d>=c)){(t.data!==o||t.next)&&(0===r&&(r=bn(),d+=r*r),0===u&&(u=bn(),d+=u*u),d<l&&(d=Math.sqrt(l*d)));do t.data!==o&&(f=a[t.data.index]*s/d,o.vx+=r*f,o.vy+=u*f);while(t=t.next)}}var r,o,s,a,u=gn(-30),l=1,c=1/0,h=.81;return t.initialize=function(t){r=t,e()},t.strength=function(n){return arguments.length?(u="function"==typeof n?n:gn(+n),e(),t):u},t.distanceMin=function(e){return arguments.length?(l=e*e,t):Math.sqrt(l)},t.distanceMax=function(e){return arguments.length?(c=e*e,t):Math.sqrt(c)},t.theta=function(e){return arguments.length?(h=e*e,t):Math.sqrt(h)},t},t.forceRadial=function(t,e,n){function i(t){for(var i=0,r=o.length;i<r;++i){var u=o[i],l=u.x-e||1e-6,c=u.y-n||1e-6,h=Math.sqrt(l*l+c*c),f=(a[i]-h)*s[i]*t/h;u.vx+=l*f,u.vy+=c*f}}function r(){if(o){var e,n=o.length;for(s=new Array(n),a=new Array(n),e=0;e<n;++e)a[e]=+t(o[e],e,o),s[e]=isNaN(a[e])?0:+u(o[e],e,o)}}var o,s,a,u=gn(.1);return"function"!=typeof t&&(t=gn(+t)),null==e&&(e=0),null==n&&(n=0),i.initialize=function(t){o=t,r()},i.strength=function(t){return arguments.length?(u="function"==typeof t?t:gn(+t),r(),i):u},i.radius=function(e){return arguments.length?(t="function"==typeof e?e:gn(+e),r(),i):t},i.x=function(t){return arguments.length?(e=+t,i):e},i.y=function(t){return arguments.length?(n=+t,i):n},i},t.forceSimulation=function(t){function e(){n(),d.call("tick",o),s<a&&(f.stop(),d.call("end",o))}function n(){var e,n,i=t.length;for(s+=(l-s)*u,h.each(function(t){t(s)}),e=0;e<i;++e)null==(n=t[e]).fx?n.x+=n.vx*=c:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=c:(n.y=n.fy,n.vy=0)}function i(){for(var e,n=0,i=t.length;n<i;++n){if(e=t[n],e.index=n,isNaN(e.x)||isNaN(e.y)){var r=jf*Math.sqrt(n),o=n*Bf;e.x=r*Math.cos(o),e.y=r*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function r(e){return e.initialize&&e.initialize(t),e}var o,s=1,a=.001,u=1-Math.pow(a,1/300),l=0,c=.6,h=cn(),f=xe(e),d=C("tick","end");return null==t&&(t=[]),i(),o={tick:n,restart:function(){return f.restart(e),o},stop:function(){return f.stop(),o},nodes:function(e){return arguments.length?(t=e,i(),h.each(r),o):t},alpha:function(t){return arguments.length?(s=+t,o):s},alphaMin:function(t){return arguments.length?(a=+t,o):a},alphaDecay:function(t){return arguments.length?(u=+t,o):+u},alphaTarget:function(t){return arguments.length?(l=+t,o):l},velocityDecay:function(t){return arguments.length?(c=1-t,o):1-c},force:function(t,e){return arguments.length>1?(null==e?h.remove(t):h.set(t,r(e)),o):h.get(t)},find:function(e,n,i){var r,o,s,a,u,l=0,c=t.length;for(null==i?i=1/0:i*=i,l=0;l<c;++l)(s=(r=e-(a=t[l]).x)*r+(o=n-a.y)*o)<i&&(u=a,
i=s);return u},on:function(t,e){return arguments.length>1?(d.on(t,e),o):d.on(t)}}},t.forceX=function(t){function e(t){for(var e,n=0,s=i.length;n<s;++n)(e=i[n]).vx+=(o[n]-e.x)*r[n]*t}function n(){if(i){var e,n=i.length;for(r=new Array(n),o=new Array(n),e=0;e<n;++e)r[e]=isNaN(o[e]=+t(i[e],e,i))?0:+s(i[e],e,i)}}var i,r,o,s=gn(.1);return"function"!=typeof t&&(t=gn(null==t?0:+t)),e.initialize=function(t){i=t,n()},e.strength=function(t){return arguments.length?(s="function"==typeof t?t:gn(+t),n(),e):s},e.x=function(i){return arguments.length?(t="function"==typeof i?i:gn(+i),n(),e):t},e},t.forceY=function(t){function e(t){for(var e,n=0,s=i.length;n<s;++n)(e=i[n]).vy+=(o[n]-e.y)*r[n]*t}function n(){if(i){var e,n=i.length;for(r=new Array(n),o=new Array(n),e=0;e<n;++e)r[e]=isNaN(o[e]=+t(i[e],e,i))?0:+s(i[e],e,i)}}var i,r,o,s=gn(.1);return"function"!=typeof t&&(t=gn(null==t?0:+t)),e.initialize=function(t){i=t,n()},e.strength=function(t){return arguments.length?(s="function"==typeof t?t:gn(+t),n(),e):s},e.y=function(i){return arguments.length?(t="function"==typeof i?i:gn(+i),n(),e):t},e},t.formatDefaultLocale=Bn,t.formatLocale=jn,t.formatSpecifier=Nn,t.precisionFixed=zn,t.precisionPrefix=qn,t.precisionRound=Hn,t.geoArea=function(t){return Wd.reset(),ei(t,Gd),2*Wd},t.geoBounds=function(t){var e,n,i,r,o,s,a;if(td=$f=-(Qf=Jf=1/0),od=[],ei(t,Zd),n=od.length){for(od.sort(wi),e=1,o=[i=od[0]];e<n;++e)xi(i,(r=od[e])[0])||xi(i,r[1])?(bi(i[0],r[1])>bi(i[0],i[1])&&(i[1]=r[1]),bi(r[0],i[1])>bi(i[0],i[1])&&(i[0]=r[0])):o.push(i=r);for(s=-1/0,e=0,i=o[n=o.length-1];e<=n;i=r,++e)r=o[e],(a=bi(i[1],r[0]))>s&&(s=a,Qf=r[0],$f=i[1])}return od=sd=null,Qf===1/0||Jf===1/0?[[NaN,NaN],[NaN,NaN]]:[[Qf,Jf],[$f,td]]},t.geoCentroid=function(t){ad=ud=ld=cd=hd=fd=dd=pd=md=yd=_d=0,ei(t,Qd);var e=md,n=yd,i=_d,r=e*e+n*n+i*i;return r<Sd&&(e=fd,n=dd,i=pd,ud<kd&&(e=ld,n=cd,i=hd),(r=e*e+n*n+i*i)<Sd)?[NaN,NaN]:[Ld(n,e)*Pd,Xn(i/zd(r))*Pd]},t.geoCircle=function(){function t(){var t=i.apply(this,arguments),a=r.apply(this,arguments)*Od,u=o.apply(this,arguments)*Od;return e=[],n=Fi(-t[0]*Od,-t[1]*Od,0).invert,Bi(s,a,u,1),t={type:"Polygon",coordinates:[e]},e=n=null,t}var e,n,i=Di([0,0]),r=Di(90),o=Di(6),s={point:function(t,i){e.push(t=n(t,i)),t[0]*=Pd,t[1]*=Pd}};return t.center=function(e){return arguments.length?(i="function"==typeof e?e:Di([+e[0],+e[1]]),t):i},t.radius=function(e){return arguments.length?(r="function"==typeof e?e:Di(+e),t):r},t.precision=function(e){return arguments.length?(o="function"==typeof e?e:Di(+e),t):o},t},t.geoClipAntimeridian=cp,t.geoClipCircle=Ji,t.geoClipExtent=function(){var t,e,n,i=0,r=0,o=960,s=500;return n={stream:function(n){return t&&e===n?t:t=$i(i,r,o,s)(e=n)},extent:function(a){return arguments.length?(i=+a[0][0],r=+a[0][1],o=+a[1][0],s=+a[1][1],t=e=null,n):[[i,r],[o,s]]}}},t.geoClipRectangle=$i,t.geoContains=function(t,e){return(t&&_p.hasOwnProperty(t.type)?_p[t.type]:or)(t,e)},t.geoDistance=rr,t.geoGraticule=dr,t.geoGraticule10=function(){return dr()()},t.geoInterpolate=function(t,e){var n=t[0]*Od,i=t[1]*Od,r=e[0]*Od,o=e[1]*Od,s=Rd(i),a=jd(i),u=Rd(o),l=jd(o),c=s*Rd(n),h=s*jd(n),f=u*Rd(r),d=u*jd(r),p=2*Xn(zd(Zn(o-i)+s*u*Zn(r-n))),m=jd(p),y=p?function(t){var e=jd(t*=p)/m,n=jd(p-t)/m,i=n*c+e*f,r=n*h+e*d,o=n*a+e*l;return[Ld(r,i)*Pd,Ld(o,zd(i*i+r*r))*Pd]}:function(){return[n*Pd,i*Pd]};return y.distance=p,y},t.geoLength=ir,t.geoPath=function(t,e){function n(t){return t&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),ei(t,i(r))),r.result()}var i,r,o=4.5;return n.area=function(t){return ei(t,i(wp)),wp.result()},n.measure=function(t){return ei(t,i(qp)),qp.result()},n.bounds=function(t){return ei(t,i(Cp)),Cp.result()},n.centroid=function(t){return ei(t,i(Fp)),Fp.result()},n.projection=function(e){return arguments.length?(i=null==e?(t=null,pr):(t=e).stream,n):t},n.context=function(t){return arguments.length?(r=null==t?(e=null,new Or):new Ar(e=t),"function"!=typeof o&&r.pointRadius(o),n):e},n.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(r.pointRadius(+t),+t),n):o},n.projection(t).context(e)},t.geoAlbers=Yr,t.geoAlbersUsa=function(){function t(t){var e=t[0],n=t[1];return a=null,r.point(e,n),a||(o.point(e,n),a)||(s.point(e,n),a)}function e(){return n=i=null,t}var n,i,r,o,s,a,u=Yr(),l=Kr().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=Kr().rotate([157,0]).center([-3,19.9]).parallels([8,18]),h={point:function(t,e){a=[t,e]}};return t.invert=function(t){var e=u.scale(),n=u.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?l:r>=.166&&r<.234&&i>=-.214&&i<-.115?c:u).invert(t)},t.stream=function(t){return n&&i===t?n:n=function(t){var e=t.length;return{point:function(n,i){for(var r=-1;++r<e;)t[r].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([u.stream(i=t),l.stream(t),c.stream(t)])},t.precision=function(t){return arguments.length?(u.precision(t),l.precision(t),c.precision(t),e()):u.precision()},t.scale=function(e){return arguments.length?(u.scale(e),l.scale(.35*e),c.scale(e),t.translate(u.translate())):u.scale()},t.translate=function(t){if(!arguments.length)return u.translate();var n=u.scale(),i=+t[0],a=+t[1];return r=u.translate(t).clipExtent([[i-.455*n,a-.238*n],[i+.455*n,a+.238*n]]).stream(h),o=l.translate([i-.307*n,a+.201*n]).clipExtent([[i-.425*n+kd,a+.12*n+kd],[i-.214*n-kd,a+.234*n-kd]]).stream(h),s=c.translate([i-.205*n,a+.212*n]).clipExtent([[i-.214*n+kd,a+.166*n+kd],[i-.115*n-kd,a+.234*n-kd]]).stream(h),e()},t.fitExtent=function(e,n){return Fr(t,e,n)},t.fitSize=function(e,n){return Nr(t,e,n)},t.fitWidth=function(e,n){return Ur(t,e,n)},t.fitHeight=function(e,n){return Vr(t,e,n)},t.scale(1070)},t.geoAzimuthalEqualArea=function(){return Br(Wp).scale(124.75).clipAngle(179.999)},t.geoAzimuthalEqualAreaRaw=Wp,t.geoAzimuthalEquidistant=function(){return Br(Gp).scale(79.4188).clipAngle(179.999)},t.geoAzimuthalEquidistantRaw=Gp,t.geoConicConformal=function(){return qr(Jr).scale(109.5).parallels([30,30])},t.geoConicConformalRaw=Jr,t.geoConicEqualArea=Kr,t.geoConicEqualAreaRaw=Hr,t.geoConicEquidistant=function(){return qr(to).scale(131.154).center([0,13.9389])},t.geoConicEquidistantRaw=to,t.geoEquirectangular=function(){return Br($r).scale(152.63)},t.geoEquirectangularRaw=$r,t.geoGnomonic=function(){return Br(eo).scale(144.049).clipAngle(60)},t.geoGnomonicRaw=eo,t.geoIdentity=function(){function t(){return r=o=null,s}var e,n,i,r,o,s,a=1,u=0,l=0,c=1,h=1,f=pr,d=null,p=pr;return s={stream:function(t){return r&&o===t?r:r=f(p(o=t))},postclip:function(r){return arguments.length?(p=r,d=e=n=i=null,t()):p},clipExtent:function(r){return arguments.length?(p=null==r?(d=e=n=i=null,pr):$i(d=+r[0][0],e=+r[0][1],n=+r[1][0],i=+r[1][1]),t()):null==d?null:[[d,e],[n,i]]},scale:function(e){return arguments.length?(f=no((a=+e)*c,a*h,u,l),t()):a},translate:function(e){return arguments.length?(f=no(a*c,a*h,u=+e[0],l=+e[1]),t()):[u,l]},reflectX:function(e){return arguments.length?(f=no(a*(c=e?-1:1),a*h,u,l),t()):c<0},reflectY:function(e){return arguments.length?(f=no(a*c,a*(h=e?-1:1),u,l),t()):h<0},fitExtent:function(t,e){return Fr(s,t,e)},fitSize:function(t,e){return Nr(s,t,e)},fitWidth:function(t,e){return Ur(s,t,e)},fitHeight:function(t,e){return Vr(s,t,e)}}},t.geoProjection=Br,t.geoProjectionMutator=zr,t.geoMercator=function(){return Zr(Xr).scale(961/Md)},t.geoMercatorRaw=Xr,t.geoNaturalEarth1=function(){return Br(io).scale(175.295)},t.geoNaturalEarth1Raw=io,t.geoOrthographic=function(){return Br(ro).scale(249.5).clipAngle(90+kd)},t.geoOrthographicRaw=ro,t.geoStereographic=function(){return Br(oo).scale(250).clipAngle(142)},t.geoStereographicRaw=oo,t.geoTransverseMercator=function(){var t=Zr(so),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)},t.geoTransverseMercatorRaw=so,t.geoRotation=ji,t.geoStream=ei,t.geoTransform=function(t){return{stream:Dr(t)}},t.cluster=function(){function t(t){var o,s=0;t.eachAfter(function(t){var n=t.children;n?(t.x=function(t){return t.reduce(uo,0)/t.length}(n),t.y=function(t){return 1+t.reduce(lo,0)}(n)):(t.x=o?s+=e(t,o):0,t.y=0,o=t)});var a=function(t){for(var e;e=t.children;)t=e[0];return t}(t),u=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(t),l=a.x-e(a,u)/2,c=u.x+e(u,a)/2;return t.eachAfter(r?function(e){e.x=(e.x-t.x)*n,e.y=(t.y-e.y)*i}:function(e){e.x=(e.x-l)/(c-l)*n,e.y=(1-(t.y?e.y/t.y:1))*i})}var e=ao,n=1,i=1,r=!1;return t.separation=function(n){return arguments.length?(e=n,t):e},t.size=function(e){return arguments.length?(r=!1,n=+e[0],i=+e[1],t):r?null:[n,i]},t.nodeSize=function(e){return arguments.length?(r=!0,n=+e[0],i=+e[1],t):r?[n,i]:null},t},t.hierarchy=ho,t.pack=function(){function t(t){return t.x=n/2,t.y=i/2,e?t.eachBefore(Io(e)).eachAfter(Do(r,.5)).eachBefore(Lo(1)):t.eachBefore(Io(Oo)).eachAfter(Do(Mo,1)).eachAfter(Do(r,t.r/Math.min(n,i))).eachBefore(Lo(Math.min(n,i)/(2*t.r))),t}var e=null,n=1,i=1,r=Mo;return t.radius=function(n){return arguments.length?(e=function(t){return null==t?null:Ao(t)}(n),t):e},t.size=function(e){return arguments.length?(n=+e[0],i=+e[1],t):[n,i]},t.padding=function(e){return arguments.length?(r="function"==typeof e?e:Po(+e),t):r},t},t.packSiblings=function(t){return To(t),t},t.packEnclose=_o,t.partition=function(){function t(t){var o=t.height+1;return t.x0=t.y0=i,t.x1=e,t.y1=n/o,t.eachBefore(function(t,e){return function(n){n.children&&Fo(n,n.x0,t*(n.depth+1)/e,n.x1,t*(n.depth+2)/e);var r=n.x0,o=n.y0,s=n.x1-i,a=n.y1-i;s<r&&(r=s=(r+s)/2),a<o&&(o=a=(o+a)/2),n.x0=r,n.y0=o,n.x1=s,n.y1=a}}(n,o)),r&&t.eachBefore(Ro),t}var e=1,n=1,i=0,r=!1;return t.round=function(e){return arguments.length?(r=!!e,t):r},t.size=function(i){return arguments.length?(e=+i[0],n=+i[1],t):[e,n]},t.padding=function(e){return arguments.length?(i=+e,t):i},t},t.stratify=function(){function t(t){var i,r,o,s,a,u,l,c=t.length,h=new Array(c),f={};for(r=0;r<c;++r)i=t[r],a=h[r]=new yo(i),null!=(u=e(i,r,t))&&(u+="")&&(f[l=Zp+(a.id=u)]=l in f?Jp:a);for(r=0;r<c;++r)if(a=h[r],null!=(u=n(t[r],r,t))&&(u+="")){if(!(s=f[Zp+u]))throw new Error("missing: "+u);if(s===Jp)throw new Error("ambiguous: "+u);s.children?s.children.push(a):s.children=[a],a.parent=s}else{if(o)throw new Error("multiple roots");o=a}if(!o)throw new Error("no root");if(o.parent=Qp,o.eachBefore(function(t){t.depth=t.parent.depth+1,--c}).eachBefore(mo),o.parent=null,c>0)throw new Error("cycle");return o}var e=No,n=Uo;return t.id=function(n){return arguments.length?(e=Ao(n),t):e},t.parentId=function(e){return arguments.length?(n=Ao(e),t):n},t},t.tree=function(){function t(t){var u=function(t){for(var e,n,i,r,o,s=new Ho(t,0),a=[s];e=a.pop();)if(i=e._.children)for(e.children=new Array(o=i.length),r=o-1;r>=0;--r)a.push(n=e.children[r]=new Ho(i[r],r)),n.parent=e;return(s.parent=new Ho(null,0)).children=[s],s}(t);if(u.eachAfter(e),u.parent.m=-u.z,u.eachBefore(n),a)t.eachBefore(i);else{var l=t,c=t,h=t;t.eachBefore(function(t){t.x<l.x&&(l=t),t.x>c.x&&(c=t),t.depth>h.depth&&(h=t)});var f=l===c?1:r(l,c)/2,d=f-l.x,p=o/(c.x+f+d),m=s/(h.depth||1);t.eachBefore(function(t){t.x=(t.x+d)*p,t.y=t.depth*m})}return t}function e(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e){!function(t){for(var e,n=0,i=0,r=t.children,o=r.length;--o>=0;)(e=r[o]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(t);var o=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+r(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+r(t._,i._));t.parent.A=function(t,e,n){if(e){for(var i,o=t,s=t,a=e,u=o.parent.children[0],l=o.m,c=s.m,h=a.m,f=u.m;a=Bo(a),o=jo(o),a&&o;)u=jo(u),(s=Bo(s)).a=t,(i=a.z+h-o.z-l+r(a._,o._))>0&&(zo(qo(a,t,n),t,i),l+=i,c+=i),h+=a.m,l+=o.m,f+=u.m,c+=s.m;a&&!Bo(s)&&(s.t=a,s.m+=h-c),o&&!jo(u)&&(u.t=o,u.m+=l-f,n=t)}return n}(t,i,t.parent.A||n[0])}function n(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function i(t){t.x*=o,t.y=t.depth*s}var r=Vo,o=1,s=1,a=null;return t.separation=function(e){return arguments.length?(r=e,t):r},t.size=function(e){return arguments.length?(a=!1,o=+e[0],s=+e[1],t):a?null:[o,s]},t.nodeSize=function(e){return arguments.length?(a=!0,o=+e[0],s=+e[1],t):a?[o,s]:null},t},t.treemap=function(){function t(t){return t.x0=t.y0=0,t.x1=r,t.y1=o,t.eachBefore(e),s=[0],i&&t.eachBefore(Ro),t}function e(t){var e=s[t.depth],i=t.x0+e,r=t.y0+e,o=t.x1-e,f=t.y1-e;o<i&&(i=o=(i+o)/2),f<r&&(r=f=(r+f)/2),t.x0=i,t.y0=r,t.x1=o,t.y1=f,t.children&&(e=s[t.depth+1]=a(t)/2,i+=h(t)-e,r+=u(t)-e,o-=l(t)-e,f-=c(t)-e,o<i&&(i=o=(i+o)/2),f<r&&(r=f=(r+f)/2),n(t,i,r,o,f))}var n=tm,i=!1,r=1,o=1,s=[0],a=Mo,u=Mo,l=Mo,c=Mo,h=Mo;return t.round=function(e){return arguments.length?(i=!!e,t):i},t.size=function(e){return arguments.length?(r=+e[0],o=+e[1],t):[r,o]},t.tile=function(e){return arguments.length?(n=Ao(e),t):n},t.padding=function(e){return arguments.length?t.paddingInner(e).paddingOuter(e):t.paddingInner()},t.paddingInner=function(e){return arguments.length?(a="function"==typeof e?e:Po(+e),t):a},t.paddingOuter=function(e){return arguments.length?t.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):t.paddingTop()},t.paddingTop=function(e){return arguments.length?(u="function"==typeof e?e:Po(+e),t):u},t.paddingRight=function(e){return arguments.length?(l="function"==typeof e?e:Po(+e),t):l},t.paddingBottom=function(e){return arguments.length?(c="function"==typeof e?e:Po(+e),t):c},t.paddingLeft=function(e){return arguments.length?(h="function"==typeof e?e:Po(+e),t):h},t},t.treemapBinary=function(t,e,n,i,r){function o(t,e,n,i,r,s,a){if(t>=e-1){var l=u[t];return l.x0=i,l.y0=r,l.x1=s,void(l.y1=a)}for(var h=c[t],f=n/2+h,d=t+1,p=e-1;d<p;){var m=d+p>>>1;c[m]<f?d=m+1:p=m}f-c[d-1]<c[d]-f&&t+1<d&&--d;var y=c[d]-h,_=n-y;if(s-i>a-r){var v=(i*_+s*y)/n;o(t,d,y,i,r,v,a),o(d,e,_,v,r,s,a)}else{var g=(r*_+a*y)/n;o(t,d,y,i,r,s,g),o(d,e,_,i,g,s,a)}}var s,a,u=t.children,l=u.length,c=new Array(l+1);for(c[0]=a=s=0;s<l;++s)c[s+1]=a+=u[s].value;o(0,l,t.value,e,n,i,r)},t.treemapDice=Fo,t.treemapSlice=Ko,t.treemapSliceDice=function(t,e,n,i,r){(1&t.depth?Ko:Fo)(t,e,n,i,r)},t.treemapSquarify=tm,t.treemapResquarify=em,t.interpolate=ce,t.interpolateArray=oe,t.interpolateBasis=Qt,t.interpolateBasisClosed=Jt,t.interpolateDate=se,t.interpolateNumber=ae,t.interpolateObject=ue,t.interpolateRound=he,t.interpolateString=le,t.interpolateTransformCss=Zc,t.interpolateTransformSvg=Qc,t.interpolateZoom=me,t.interpolateRgb=qc,t.interpolateRgbBasis=Hc,t.interpolateRgbBasisClosed=Kc,t.interpolateHsl=nh,t.interpolateHslLong=ih,t.interpolateLab=function(t,e){var n=ie((t=jt(t)).l,(e=jt(e)).l),i=ie(t.a,e.a),r=ie(t.b,e.b),o=ie(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=i(e),t.b=r(e),t.opacity=o(e),t+""}},t.interpolateHcl=rh,t.interpolateHclLong=oh,t.interpolateCubehelix=sh,t.interpolateCubehelixLong=ah,t.quantize=function(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n},t.path=nn,t.polygonArea=function(t){for(var e,n=-1,i=t.length,r=t[i-1],o=0;++n<i;)e=r,r=t[n],o+=e[1]*r[0]-e[0]*r[1];return o/2},t.polygonCentroid=function(t){for(var e,n,i=-1,r=t.length,o=0,s=0,a=t[r-1],u=0;++i<r;)e=a,a=t[i],u+=n=e[0]*a[1]-a[0]*e[1],o+=(e[0]+a[0])*n,s+=(e[1]+a[1])*n;return u*=3,[o/u,s/u]},t.polygonHull=function(t){if((n=t.length)<3)return null;var e,n,i=new Array(n),r=new Array(n);for(e=0;e<n;++e)i[e]=[+t[e][0],+t[e][1],e];for(i.sort(Go),e=0;e<n;++e)r[e]=[i[e][0],-i[e][1]];var o=Xo(i),s=Xo(r),a=s[0]===o[0],u=s[s.length-1]===o[o.length-1],l=[];for(e=o.length-1;e>=0;--e)l.push(t[i[o[e]][2]]);for(e=+a;e<s.length-u;++e)l.push(t[i[s[e]][2]]);return l},t.polygonContains=function(t,e){for(var n,i,r=t.length,o=t[r-1],s=e[0],a=e[1],u=o[0],l=o[1],c=!1,h=0;h<r;++h)n=(o=t[h])[0],(i=o[1])>a!=l>a&&s<(u-n)*(a-i)/(l-i)+n&&(c=!c),u=n,l=i;return c},t.polygonLength=function(t){for(var e,n,i=-1,r=t.length,o=t[r-1],s=o[0],a=o[1],u=0;++i<r;)e=s,n=a,e-=s=(o=t[i])[0],n-=a=o[1],u+=Math.sqrt(e*e+n*n);return u},t.quadtree=Sn,t.queue=ts,t.randomUniform=rm,t.randomNormal=om,t.randomLogNormal=sm,t.randomBates=um,t.randomIrwinHall=am,t.randomExponential=lm,t.request=ns,t.html=cm,t.json=hm,t.text=fm,t.xml=dm,t.csv=pm,t.tsv=mm,t.scaleBand=ss,t.scalePoint=function(){return as(ss().paddingInner(1))},t.scaleIdentity=_s,t.scaleLinear=ys,t.scaleLog=Ss,t.scaleOrdinal=os,t.scaleImplicit=gm,t.scalePow=Ts,t.scaleSqrt=function(){return Ts().exponent(.5)},t.scaleQuantile=As,t.scaleQuantize=Ms,t.scaleThreshold=Ps,t.scaleTime=function(){return Wa(Qm,Xm,Rm,Dm,Om,Mm,Tm,Em,t.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},t.scaleUtc=function(){return Wa(wy,gy,oy,iy,ey,$m,Tm,Em,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},t.schemeCategory10=Uy,t.schemeCategory20b=Vy,t.schemeCategory20c=jy,t.schemeCategory20=By,t.interpolateCubehelixDefault=zy,t.interpolateRainbow=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Ky.h=360*t-100,Ky.s=1.5-1.5*e,Ky.l=.8-.9*e,Ky+""},t.interpolateWarm=qy,t.interpolateCool=Hy,t.interpolateViridis=Yy,t.interpolateMagma=Wy,t.interpolateInferno=Gy,t.interpolatePlasma=Xy,t.scaleSequential=Za,t.create=function(t){return lt(P(t).call(document.documentElement))},t.creator=P,t.local=ct,t.matcher=oc,t.mouse=pt,t.namespace=M,t.namespaces=ec,t.clientPoint=dt,t.select=lt,t.selectAll=function(t){return"string"==typeof t?new at([document.querySelectorAll(t)],[document.documentElement]):new at([null==t?[]:t],uc)},t.selection=ut,t.selector=I,t.selectorAll=L,t.style=B,t.touch=mt,t.touches=function(t,e){null==e&&(e=ft().touches);for(var n=0,i=e?e.length:0,r=new Array(i);n<i;++n)r[n]=dt(t,e[n]);return r},t.window=j,t.customEvent=ot,t.arc=function(){function t(){var t,l,c=+e.apply(this,arguments),h=+n.apply(this,arguments),f=o.apply(this,arguments)-o_,d=s.apply(this,arguments)-o_,p=Zy(d-f),m=d>f;if(u||(u=t=nn()),h<c&&(l=h,h=c,c=l),h>i_)if(p>s_-i_)u.moveTo(h*Jy(f),h*e_(f)),u.arc(0,0,h,f,d,!m),c>i_&&(u.moveTo(c*Jy(d),c*e_(d)),u.arc(0,0,c,d,f,m));else{var y,_,v=f,g=d,b=f,w=d,x=p,E=p,k=a.apply(this,arguments)/2,S=k>i_&&(r?+r.apply(this,arguments):n_(c*c+h*h)),C=t_(Zy(h-c)/2,+i.apply(this,arguments)),T=C,A=C;if(S>i_){var M=Ja(S/c*e_(k)),P=Ja(S/h*e_(k));(x-=2*M)>i_?(M*=m?1:-1,b+=M,w-=M):(x=0,b=w=(f+d)/2),(E-=2*P)>i_?(P*=m?1:-1,v+=P,g-=P):(E=0,v=g=(f+d)/2)}var O=h*Jy(v),I=h*e_(v),D=c*Jy(w),L=c*e_(w);if(C>i_){var R=h*Jy(g),F=h*e_(g),N=c*Jy(b),U=c*e_(b);if(p<r_){var V=x>i_?function(t,e,n,i,r,o,s,a){var u=n-t,l=i-e,c=s-r,h=a-o,f=(c*(e-o)-h*(t-r))/(h*u-c*l);return[t+f*u,e+f*l]}(O,I,N,U,R,F,D,L):[D,L],j=O-V[0],B=I-V[1],z=R-V[0],q=F-V[1],H=1/e_(function(t){return t>1?0:t<-1?r_:Math.acos(t)}((j*z+B*q)/(n_(j*j+B*B)*n_(z*z+q*q)))/2),K=n_(V[0]*V[0]+V[1]*V[1]);T=t_(C,(c-K)/(H-1)),A=t_(C,(h-K)/(H+1))}}E>i_?A>i_?(y=ru(N,U,O,I,h,A,m),_=ru(R,F,D,L,h,A,m),u.moveTo(y.cx+y.x01,y.cy+y.y01),A<C?u.arc(y.cx,y.cy,A,Qy(y.y01,y.x01),Qy(_.y01,_.x01),!m):(u.arc(y.cx,y.cy,A,Qy(y.y01,y.x01),Qy(y.y11,y.x11),!m),u.arc(0,0,h,Qy(y.cy+y.y11,y.cx+y.x11),Qy(_.cy+_.y11,_.cx+_.x11),!m),u.arc(_.cx,_.cy,A,Qy(_.y11,_.x11),Qy(_.y01,_.x01),!m))):(u.moveTo(O,I),u.arc(0,0,h,v,g,!m)):u.moveTo(O,I),c>i_&&x>i_?T>i_?(y=ru(D,L,R,F,c,-T,m),_=ru(O,I,N,U,c,-T,m),u.lineTo(y.cx+y.x01,y.cy+y.y01),T<C?u.arc(y.cx,y.cy,T,Qy(y.y01,y.x01),Qy(_.y01,_.x01),!m):(u.arc(y.cx,y.cy,T,Qy(y.y01,y.x01),Qy(y.y11,y.x11),!m),u.arc(0,0,c,Qy(y.cy+y.y11,y.cx+y.x11),Qy(_.cy+_.y11,_.cx+_.x11),m),u.arc(_.cx,_.cy,T,Qy(_.y11,_.x11),Qy(_.y01,_.x01),!m))):u.arc(0,0,c,w,b,m):u.lineTo(D,L)}else u.moveTo(0,0);if(u.closePath(),t)return u=null,t+""||null}var e=$a,n=tu,i=Qa(0),r=null,o=eu,s=nu,a=iu,u=null;return t.centroid=function(){var t=(+e.apply(this,arguments)+ +n.apply(this,arguments))/2,i=(+o.apply(this,arguments)+ +s.apply(this,arguments))/2-r_/2;return[Jy(i)*t,e_(i)*t]},t.innerRadius=function(n){return arguments.length?(e="function"==typeof n?n:Qa(+n),t):e},t.outerRadius=function(e){return arguments.length?(n="function"==typeof e?e:Qa(+e),t):n},t.cornerRadius=function(e){return arguments.length?(i="function"==typeof e?e:Qa(+e),t):i},t.padRadius=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:Qa(+e),t):r},t.startAngle=function(e){return arguments.length?(o="function"==typeof e?e:Qa(+e),t):o},t.endAngle=function(e){return arguments.length?(s="function"==typeof e?e:Qa(+e),t):s},t.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:Qa(+e),t):a},t.context=function(e){return arguments.length?(u=null==e?null:e,t):u},t},t.area=cu,t.line=lu,t.pie=function(){function t(t){var a,u,l,c,h,f=t.length,d=0,p=new Array(f),m=new Array(f),y=+r.apply(this,arguments),_=Math.min(s_,Math.max(-s_,o.apply(this,arguments)-y)),v=Math.min(Math.abs(_)/f,s.apply(this,arguments)),g=v*(_<0?-1:1);for(a=0;a<f;++a)(h=m[p[a]=a]=+e(t[a],a,t))>0&&(d+=h);for(null!=n?p.sort(function(t,e){return n(m[t],m[e])}):null!=i&&p.sort(function(e,n){return i(t[e],t[n])}),a=0,l=d?(_-f*g)/d:0;a<f;++a,y=c)u=p[a],c=y+((h=m[u])>0?h*l:0)+g,m[u]={data:t[u],index:a,value:h,startAngle:y,endAngle:c,padAngle:v};return m}var e=fu,n=hu,i=null,r=Qa(0),o=Qa(s_),s=Qa(0);return t.value=function(n){return arguments.length?(e="function"==typeof n?n:Qa(+n),t):e},t.sortValues=function(e){return arguments.length?(n=e,i=null,t):n},t.sort=function(e){return arguments.length?(i=e,n=null,t):i},t.startAngle=function(e){return arguments.length?(r="function"==typeof e?e:Qa(+e),t):r},t.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:Qa(+e),t):o},t.padAngle=function(e){return arguments.length?(s="function"==typeof e?e:Qa(+e),t):s},t},t.areaRadial=_u,t.radialArea=_u,t.lineRadial=yu,t.radialLine=yu,t.pointRadial=vu,t.linkHorizontal=function(){return wu(xu)},t.linkVertical=function(){return wu(Eu)},t.linkRadial=function(){var t=wu(ku);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},t.symbol=function(){function t(){var t;if(i||(i=t=nn()),e.apply(this,arguments).draw(i,+n.apply(this,arguments)),t)return i=null,t+""||null}var e=Qa(l_),n=Qa(64),i=null;return t.type=function(n){return arguments.length?(e="function"==typeof n?n:Qa(n),t):e},t.size=function(e){return arguments.length?(n="function"==typeof e?e:Qa(+e),t):n},t.context=function(e){return arguments.length?(i=null==e?null:e,t):i},t},t.symbols=S_,t.symbolCircle=l_,t.symbolCross=c_,t.symbolDiamond=d_,t.symbolSquare=v_,t.symbolStar=__,t.symbolTriangle=b_,t.symbolWye=k_,t.curveBasisClosed=function(t){return new Au(t)},t.curveBasisOpen=function(t){return new Mu(t)},t.curveBasis=function(t){return new Tu(t)},t.curveBundle=C_,t.curveCardinalClosed=A_,t.curveCardinalOpen=M_,t.curveCardinal=T_,t.curveCatmullRomClosed=O_,t.curveCatmullRomOpen=I_,t.curveCatmullRom=P_,t.curveLinearClosed=function(t){return new Vu(t)},t.curveLinear=su,t.curveMonotoneX=function(t){return new Hu(t)},t.curveMonotoneY=function(t){return new Ku(t)},t.curveNatural=function(t){return new Wu(t)},t.curveStep=function(t){return new Xu(t,.5)},t.curveStepAfter=function(t){return new Xu(t,1)},t.curveStepBefore=function(t){return new Xu(t,0)},t.stack=function(){function t(t){var o,s,a=e.apply(this,arguments),u=t.length,l=a.length,c=new Array(l);for(o=0;o<l;++o){for(var h,f=a[o],d=c[o]=new Array(u),p=0;p<u;++p)d[p]=h=[0,+r(t[p],f,p,t)],h.data=t[p];d.key=f}for(o=0,s=n(c);o<l;++o)c[s[o]].index=o;return i(c,s),c}var e=Qa([]),n=Qu,i=Zu,r=Ju;return t.keys=function(n){return arguments.length?(e="function"==typeof n?n:Qa(u_.call(n)),t):e},t.value=function(e){return arguments.length?(r="function"==typeof e?e:Qa(+e),t):r},t.order=function(e){return arguments.length?(n=null==e?Qu:"function"==typeof e?e:Qa(u_.call(e)),t):n},t.offset=function(e){return arguments.length?(i=null==e?Zu:e,t):i},t},t.stackOffsetExpand=function(t,e){if((i=t.length)>0){for(var n,i,r,o=0,s=t[0].length;o<s;++o){for(r=n=0;n<i;++n)r+=t[n][o][1]||0;if(r)for(n=0;n<i;++n)t[n][o][1]/=r}Zu(t,e)}},t.stackOffsetDiverging=function(t,e){if((a=t.length)>1)for(var n,i,r,o,s,a,u=0,l=t[e[0]].length;u<l;++u)for(o=s=0,n=0;n<a;++n)(r=(i=t[e[n]][u])[1]-i[0])>=0?(i[0]=o,i[1]=o+=r):r<0?(i[1]=s,i[0]=s+=r):i[0]=o},t.stackOffsetNone=Zu,t.stackOffsetSilhouette=function(t,e){if((n=t.length)>0){for(var n,i=0,r=t[e[0]],o=r.length;i<o;++i){for(var s=0,a=0;s<n;++s)a+=t[s][i][1]||0;r[i][1]+=r[i][0]=-a/2}Zu(t,e)}},t.stackOffsetWiggle=function(t,e){if((r=t.length)>0&&(i=(n=t[e[0]]).length)>0){for(var n,i,r,o=0,s=1;s<i;++s){for(var a=0,u=0,l=0;a<r;++a){for(var c=t[e[a]],h=c[s][1]||0,f=(h-(c[s-1][1]||0))/2,d=0;d<a;++d){var p=t[e[d]];f+=(p[s][1]||0)-(p[s-1][1]||0)}u+=h,l+=f*h}n[s-1][1]+=n[s-1][0]=o,u&&(o-=l/u)}n[s-1][1]+=n[s-1][0]=o,Zu(t,e)}},t.stackOrderAscending=$u,t.stackOrderDescending=function(t){return $u(t).reverse()},t.stackOrderInsideOut=function(t){var e,n,i=t.length,r=t.map(tl),o=Qu(t).sort(function(t,e){return r[e]-r[t]}),s=0,a=0,u=[],l=[];for(e=0;e<i;++e)n=o[e],s<a?(s+=r[n],u.push(n)):(a+=r[n],l.push(n));return l.reverse().concat(u)},t.stackOrderNone=Qu,t.stackOrderReverse=function(t){return Qu(t).reverse()},t.timeInterval=Os,t.timeMillisecond=Em,t.timeMilliseconds=km,t.utcMillisecond=Em,t.utcMilliseconds=km,t.timeSecond=Tm,t.timeSeconds=Am,t.utcSecond=Tm,t.utcSeconds=Am,t.timeMinute=Mm,t.timeMinutes=Pm,t.timeHour=Om,t.timeHours=Im,t.timeDay=Dm,t.timeDays=Lm,t.timeWeek=Rm,t.timeWeeks=zm,t.timeSunday=Rm,t.timeSundays=zm,t.timeMonday=Fm,t.timeMondays=qm,t.timeTuesday=Nm,t.timeTuesdays=Hm,t.timeWednesday=Um,t.timeWednesdays=Km,t.timeThursday=Vm,t.timeThursdays=Ym,t.timeFriday=jm,t.timeFridays=Wm,t.timeSaturday=Bm,t.timeSaturdays=Gm,t.timeMonth=Xm,t.timeMonths=Zm,t.timeYear=Qm,t.timeYears=Jm,t.utcMinute=$m,t.utcMinutes=ty,t.utcHour=ey,t.utcHours=ny,t.utcDay=iy,t.utcDays=ry,t.utcWeek=oy,t.utcWeeks=fy,t.utcSunday=oy,t.utcSundays=fy,t.utcMonday=sy,t.utcMondays=dy,t.utcTuesday=ay,t.utcTuesdays=py,t.utcWednesday=uy,t.utcWednesdays=my,t.utcThursday=ly,t.utcThursdays=yy,t.utcFriday=cy,t.utcFridays=_y,t.utcSaturday=hy,t.utcSaturdays=vy,t.utcMonth=gy,t.utcMonths=by,t.utcYear=wy,t.utcYears=Ey,t.timeFormatDefaultLocale=Ha,t.timeFormatLocale=Ns,t.isoFormat=My,t.isoParse=Py,t.now=ge,t.timer=xe,t.timerFlush=Ee,t.timeout=Te,t.interval=function(t,e,n){var i=new we,r=e;return null==e?(i.restart(t,e,n),i):(e=+e,n=null==n?ge():+n,i.restart(function o(s){s+=r,i.restart(o,r+=e,n),t(s)},e,n),i)},t.transition=Fe,t.active=function(t,e){var n,i,r=t.__transition;if(r){e=null==e?null:e+"";for(i in r)if((n=r[i]).state>bh&&n.name===e)return new Re([[t]],Jh,e,(+i))}return null},t.interrupt=Ie,t.voronoi=function(){function t(t){return new Cl(t.map(function(i,r){var o=[Math.round(e(i,r,t)/j_)*j_,Math.round(n(i,r,t)/j_)*j_];return o.index=r,o.data=i,o}),i)}var e=nl,n=il,i=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:el(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:el(+e),t):n},t.extent=function(e){return arguments.length?(i=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):i&&[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},t.size=function(e){return arguments.length?(i=null==e?null:[[0,0],[+e[0],+e[1]]],t):i&&[i[1][0]-i[0][0],i[1][1]-i[0][1]]},t},t.zoom=function(){function e(t){t.property("__zoom",Ll).on("wheel.zoom",u).on("mousedown.zoom",l).on("dblclick.zoom",c).filter(b).on("touchstart.zoom",h).on("touchmove.zoom",f).on("touchend.zoom touchcancel.zoom",d).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function n(t,e){return(e=Math.max(w[0],Math.min(w[1],e)))===t.k?t:new Al(e,t.x,t.y)}function i(t,e,n){var i=e[0]-n[0]*t.k,r=e[1]-n[1]*t.k;return i===t.x&&r===t.y?t:new Al(t.k,i,r)}function r(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function o(t,e,n){t.on("start.zoom",function(){s(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){s(this,arguments).end()}).tween("zoom",function(){var t=arguments,i=s(this,t),o=_.apply(this,t),a=n||r(o),u=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),l=this.__zoom,c="function"==typeof e?e.apply(this,t):e,h=k(l.invert(a).concat(u/l.k),c.invert(a).concat(u/c.k));return function(t){if(1===t)t=c;else{var e=h(t),n=u/e[2];t=new Al(n,a[0]-e[0]*n,a[1]-e[1]*n)}i.zoom(null,t)}})}function s(t,e){for(var n,i=0,r=S.length;i<r;++i)if((n=S[i]).that===t)return n;return new a(t,e)}function a(t,e){this.that=t,this.args=e,this.index=-1,this.active=0,this.extent=_.apply(t,e)}function u(){if(y.apply(this,arguments)){var t=s(this,arguments),e=this.__zoom,r=Math.max(w[0],Math.min(w[1],e.k*Math.pow(2,g.apply(this,arguments)))),o=pt(this);if(t.wheel)t.mouse[0][0]===o[0]&&t.mouse[0][1]===o[1]||(t.mouse[1]=e.invert(t.mouse[0]=o)),clearTimeout(t.wheel);else{if(e.k===r)return;t.mouse=[o,e.invert(o)],Ie(this),t.start()}Ol(),t.wheel=setTimeout(function(){t.wheel=null,t.end()},M),t.zoom("mouse",v(i(n(e,r),t.mouse[0],t.mouse[1]),t.extent,x))}}function l(){if(!m&&y.apply(this,arguments)){var e=s(this,arguments),n=lt(t.event.view).on("mousemove.zoom",function(){if(Ol(),!e.moved){var n=t.event.clientX-o,r=t.event.clientY-a;e.moved=n*n+r*r>P}e.zoom("mouse",v(i(e.that.__zoom,e.mouse[0]=pt(e.that),e.mouse[1]),e.extent,x))},!0).on("mouseup.zoom",function(){n.on("mousemove.zoom mouseup.zoom",null),gt(t.event.view,e.moved),Ol(),e.end()},!0),r=pt(this),o=t.event.clientX,a=t.event.clientY;vt(t.event.view),Pl(),e.mouse=[r,this.__zoom.invert(r)],Ie(this),e.start()}}function c(){if(y.apply(this,arguments)){var r=this.__zoom,s=pt(this),a=r.invert(s),u=r.k*(t.event.shiftKey?.5:2),l=v(i(n(r,u),s,a),_.apply(this,arguments),x);Ol(),E>0?lt(this).transition().duration(E).call(o,l,s):lt(this).call(e.transform,l)}}function h(){if(y.apply(this,arguments)){var e,n,i,r,o=s(this,arguments),a=t.event.changedTouches,u=a.length;for(Pl(),n=0;n<u;++n)r=[r=mt(this,a,(i=a[n]).identifier),this.__zoom.invert(r),i.identifier],o.touch0?o.touch1||(o.touch1=r):(o.touch0=r,e=!0);if(p&&(p=clearTimeout(p),!o.touch1))return o.end(),void((r=lt(this).on("dblclick.zoom"))&&r.apply(this,arguments));e&&(p=setTimeout(function(){p=null},A),Ie(this),o.start())}}function f(){var e,r,o,a,u=s(this,arguments),l=t.event.changedTouches,c=l.length;for(Ol(),p&&(p=clearTimeout(p)),e=0;e<c;++e)o=mt(this,l,(r=l[e]).identifier),u.touch0&&u.touch0[2]===r.identifier?u.touch0[0]=o:u.touch1&&u.touch1[2]===r.identifier&&(u.touch1[0]=o);if(r=u.that.__zoom,u.touch1){var h=u.touch0[0],f=u.touch0[1],d=u.touch1[0],m=u.touch1[1],y=(y=d[0]-h[0])*y+(y=d[1]-h[1])*y,_=(_=m[0]-f[0])*_+(_=m[1]-f[1])*_;r=n(r,Math.sqrt(y/_)),o=[(h[0]+d[0])/2,(h[1]+d[1])/2],a=[(f[0]+m[0])/2,(f[1]+m[1])/2]}else{if(!u.touch0)return;o=u.touch0[0],a=u.touch0[1]}u.zoom("touch",v(i(r,o,a),u.extent,x))}function d(){var e,n,i=s(this,arguments),r=t.event.changedTouches,o=r.length;for(Pl(),m&&clearTimeout(m),m=setTimeout(function(){m=null},A),e=0;e<o;++e)n=r[e],i.touch0&&i.touch0[2]===n.identifier?delete i.touch0:i.touch1&&i.touch1[2]===n.identifier&&delete i.touch1;i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0?i.touch0[1]=this.__zoom.invert(i.touch0[0]):i.end()}var p,m,y=Il,_=Dl,v=Nl,g=Rl,b=Fl,w=[0,1/0],x=[[-1/0,-1/0],[1/0,1/0]],E=250,k=me,S=[],T=C("start","zoom","end"),A=500,M=150,P=0;return e.transform=function(t,e){var n=t.selection?t.selection():t;n.property("__zoom",Ll),t!==n?o(t,e):n.interrupt().each(function(){s(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},e.scaleBy=function(t,n){e.scaleTo(t,function(){return this.__zoom.k*("function"==typeof n?n.apply(this,arguments):n)})},e.scaleTo=function(t,o){e.transform(t,function(){var t=_.apply(this,arguments),e=this.__zoom,s=r(t),a=e.invert(s),u="function"==typeof o?o.apply(this,arguments):o;return v(i(n(e,u),s,a),t,x)})},e.translateBy=function(t,n,i){e.transform(t,function(){return v(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof i?i.apply(this,arguments):i),_.apply(this,arguments),x);
})},e.translateTo=function(t,n,i){e.transform(t,function(){var t=_.apply(this,arguments),e=this.__zoom,o=r(t);return v(z_.translate(o[0],o[1]).scale(e.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof i?-i.apply(this,arguments):-i),t,x)})},a.prototype={start:function(){return 1==++this.active&&(this.index=S.push(this)-1,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(S.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){ot(new function(t,e,n){this.target=t,this.type=e,this.transform=n}(e,t,this.that.__zoom),T.apply,T,[t,this.that,this.args])}},e.wheelDelta=function(t){return arguments.length?(g="function"==typeof t?t:Tl(+t),e):g},e.filter=function(t){return arguments.length?(y="function"==typeof t?t:Tl(!!t),e):y},e.touchable=function(t){return arguments.length?(b="function"==typeof t?t:Tl(!!t),e):b},e.extent=function(t){return arguments.length?(_="function"==typeof t?t:Tl([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),e):_},e.scaleExtent=function(t){return arguments.length?(w[0]=+t[0],w[1]=+t[1],e):[w[0],w[1]]},e.translateExtent=function(t){return arguments.length?(x[0][0]=+t[0][0],x[1][0]=+t[1][0],x[0][1]=+t[0][1],x[1][1]=+t[1][1],e):[[x[0][0],x[0][1]],[x[1][0],x[1][1]]]},e.constrain=function(t){return arguments.length?(v=t,e):v},e.duration=function(t){return arguments.length?(E=+t,e):E},e.interpolate=function(t){return arguments.length?(k=t,e):k},e.on=function(){var t=T.on.apply(T,arguments);return t===T?e:t},e.clickDistance=function(t){return arguments.length?(P=(t=+t)*t,e):Math.sqrt(P)},e},t.zoomTransform=Ml,t.zoomIdentity=z_,Object.defineProperty(t,"__esModule",{value:!0})})},{}],249:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,u=t("./Model/AnimSystemModel"),l=t("./Keyframes/Keyframe"),c=t("./Keyframes/KeyframeCSSClass"),h=t("./Keyframes/KeyframeDiscreteEvent"),f=t("./ScrollGroup"),d=t("./TimeGroup"),p=t("./utils/arrayToObject"),m={create:t("@marcom/ac-raf-emitter/RAFEmitter"),update:t("@marcom/ac-raf-emitter/update"),cancelUpdate:t("@marcom/ac-raf-emitter/cancelUpdate"),external:t("@marcom/ac-raf-emitter/external"),draw:t("@marcom/ac-raf-emitter/draw")},y=null,_=function(t){function e(){i(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(y)throw"You cannot create multiple AnimSystems. You probably want to create multiple groups instead. You can have unlimited groups on a page";return y=t,t.groups=[],t.scrollSystems=[],t.timeSystems=[],t._forceUpdateRAFId=-1,t.setupEvents(),t}return o(e,t),s(e,[{key:"initialize",value:function(){var t=this;this.initializeModel(),this.createDOMGroups(),m.external(function(){t.setupAnimatedContent()})}},{key:"destroy",value:function(){this.groups.forEach(function(t){return t.destroy()}),this.groups=null,this.scrollSystems=null,this.timeSystems=null,window.clearTimeout(u.RESIZE_TIMEOUT),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResizeImmediate)}},{key:"createTimeGroup",value:function(t){var e=new d(t,this);return this.groups.push(e),this.timeSystems.push(e),this.trigger(u.EVENTS.ON_GROUP_CREATED,e),e}},{key:"createScrollGroup",value:function(t){if(!t)throw"AnimSystem scroll based groups must supply an HTMLElement";var e=new f(t,this);return this.groups.push(e),this.scrollSystems.push(e),this.trigger(u.EVENTS.ON_GROUP_CREATED,e),e}},{key:"removeGroup",value:function(t){var e=this;t.keyframeControllers.forEach(function(e){return t.removeKeyframeController(e)}),m.update(function(){t.destroy();var n=e.groups.indexOf(t);n!==-1&&e.groups.splice(n,1),n=e.scrollSystems.indexOf(t),n!==-1&&e.scrollSystems.splice(n,1),n=e.timeSystems.indexOf(t),n!==-1&&e.timeSystems.splice(n,1)})}},{key:"createDOMGroups",value:function(){var t=this;document.body.setAttribute("data-anim-scroll-group","body"),document.querySelectorAll("[data-anim-scroll-group]").forEach(function(e){return t.createScrollGroup(e)}),document.querySelectorAll("[data-anim-time-group]").forEach(function(e){return t.createTimeGroup(e)}),this.trigger(u.EVENTS.ON_DOM_GROUPS_CREATED,this.groups)}},{key:"setupAnimatedContent",value:function(){var t=this,e=[];[l.DATA_ATTRIBUTE,c.DATA_ATTRIBUTE,h.DATA_ATTRIBUTE].forEach(function(t){for(var n=0;n<12;n++)e.push(t+(0===n?"":"-"+(n-1)))});for(var n=0;n<e.length;n++)for(var i=e[n],r=document.querySelectorAll("["+i+"]"),o=0;o<r.length;o++){var s=r[o],a=JSON.parse(s.getAttribute(i));this.addKeyframe(s,a)}m.update(function(){return t.groups.forEach(function(t){return t.onKeyframesDirty({preventOnScroll:!0})})},!0),m.update(function(){t.groups.forEach(function(t){return t.trigger(u.EVENTS.ON_DOM_KEYFRAMES_CREATED,t)}),t.trigger(u.EVENTS.ON_DOM_KEYFRAMES_CREATED,t),t.groups.forEach(function(t){return t.reconcile()}),t.onScroll()},!0)}},{key:"initializeModel",value:function(){u.pageMetrics.windowHeight=window.innerHeight,u.pageMetrics.windowWidth=window.innerWidth,u.pageMetrics.scrollY=window.scrollY||window.pageYOffset,u.pageMetrics.scrollX=window.scrollX||window.pageXOffset,u.pageMetrics.breakpoint=u.getBreakpoint();var t=document.documentElement.getBoundingClientRect();u.pageMetrics.documentOffsetX=t.left+u.pageMetrics.scrollX,u.pageMetrics.documentOffsetY=t.top+u.pageMetrics.scrollY}},{key:"setupEvents",value:function(){this.onScroll=this.onScroll.bind(this),this.onResizedDebounced=this.onResizedDebounced.bind(this),this.onResizeImmediate=this.onResizeImmediate.bind(this),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.onResizeImmediate)}},{key:"determineActiveKeyframes",value:function(){for(var t=p(Array.from(document.documentElement.classList)),e=0,n=this.groups.length;e<n;e++)this.groups[e].determineActiveKeyframes(t)}},{key:"onScroll",value:function(){u.pageMetrics.scrollY=window.scrollY||window.pageYOffset,u.pageMetrics.scrollX=window.scrollX||window.pageXOffset;for(var t=0,e=this.scrollSystems.length;t<e;t++)this.scrollSystems[t]._onScroll();this.trigger(u.PageEvents.ON_SCROLL,u.pageMetrics)}},{key:"onResizeImmediate",value:function(){u.pageMetrics.windowHeight=window.innerHeight,u.pageMetrics.windowWidth=window.innerWidth,u.pageMetrics.scrollY=window.scrollY||window.pageYOffset,u.pageMetrics.scrollX=window.scrollX||window.pageXOffset;var t=document.documentElement.getBoundingClientRect();u.pageMetrics.documentOffsetX=t.left+u.pageMetrics.scrollX,u.pageMetrics.documentOffsetY=t.top+u.pageMetrics.scrollY,window.clearTimeout(u.RESIZE_TIMEOUT),u.RESIZE_TIMEOUT=window.setTimeout(this.onResizedDebounced,250),this.trigger(u.PageEvents.ON_RESIZE_IMMEDIATE,u.pageMetrics)}},{key:"onResizedDebounced",value:function(){var t=this;m.update(function(){var e=u.pageMetrics.breakpoint,n=u.getBreakpoint(),i=n!==e;if(i){u.pageMetrics.previousBreakpoint=e,u.pageMetrics.breakpoint=n;for(var r=0,o=t.groups.length;r<o;r++)t.groups[r]._onBreakpointChange();t.trigger(u.PageEvents.ON_BREAKPOINT_CHANGE,u.pageMetrics)}for(var s=0,a=t.groups.length;s<a;s++)t.groups[s].forceUpdate({recalculateActiveKeyframes:i,waitForNextUpdate:!1});t.trigger(u.PageEvents.ON_RESIZE_DEBOUNCED,u.pageMetrics)},!0)}},{key:"forceUpdate",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.recalculateActiveKeyframes,i=void 0!==n&&n,r=e.waitForNextUpdate,o=void 0===r||r;this._forceUpdateRAFId!==-1&&m.cancelUpdate(this._forceUpdateRAFId);var s=function(){for(var e=0,n=t.groups.length;e<n;e++){var r=t.groups[e];r.forceUpdate({recalculateActiveKeyframes:i,waitForNextUpdate:!1})}return-1};this._forceUpdateRAFId=o?m.update(s,!0):s()}},{key:"addKeyframe",value:function(t,e){var n=this.getGroupForTarget(t);return n.addKeyframe(t,e)}},{key:"getGroupForTarget",value:function(t){if(t._animInfo&&t._animInfo.group)return t._animInfo.group;for(var e=t;e;){if(e._animInfo&&e._animInfo.isGroup)return e._animInfo.group;e=e.parentElement}}},{key:"getControllerForTarget",value:function(t){return t._animInfo&&t._animInfo.controller?t._animInfo.controller:null}}]),e}(a);e.exports=new _},{"./Keyframes/Keyframe":260,"./Keyframes/KeyframeCSSClass":261,"./Keyframes/KeyframeDiscreteEvent":262,"./Model/AnimSystemModel":263,"./ScrollGroup":272,"./TimeGroup":273,"./utils/arrayToObject":274,"@marcom/ac-event-emitter-micro":66,"@marcom/ac-raf-emitter/RAFEmitter":115,"@marcom/ac-raf-emitter/cancelUpdate":120,"@marcom/ac-raf-emitter/draw":121,"@marcom/ac-raf-emitter/external":122,"@marcom/ac-raf-emitter/update":125}],250:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/sm-math-utils"),u=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,l=t("./Model/AnimSystemModel"),c=t("d3/build/d3.min"),h=t("./AnimSystemGUI/Guides"),f=t("./AnimSystemGUI/InfoPanel"),d=t("./AnimSystemGUI/Styles"),p=0,m=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.group=t,void 0===n.group.viewableRange&&Object.defineProperty(n.group,"viewableRange",{get:function(){return this.keyFrames}}),n.uuid=p++,n.tlEdgePadding=1,n.rowStart=70,n.nameLabelSize=200,n.labelHeight=20,n.playheadWidth=50,n.keyframeDiamond=c.symbol().type(c.symbolDiamond).size(75),n.keyframeForward=c.symbol().type(c.symbolTriangle).size(35),n.triggerCircle=c.symbol().type(c.symbolCircle).size(35),n.eventCross=c.symbol().type(c.symbolCross).size(45),n.playhead={background:null,wire:null,group:null,label:null},n.pendingUpdateRAF=-1,n}return o(e,t),s(e,[{key:"destroy",value:function(){this.group=null,cancelAnimationFrame(this.pendingUpdateRAF),e.popup.removeEventListener("scroll",this.onScroll);var t=e.systems.indexOf(this);t!==-1&&e.systems.splice(t,1),this.svg.selectAll("g.playhead").remove(),this.svg.remove(),this.svgElement.remove(),this.eventCross=null,this.keyframeDiamond=null,this.keyframeForward=null,this.triggerCircle=null}},{key:"setupEvents",value:function(){var t=this;this.onScrollUpdate=this.onScrollUpdate.bind(this),this.onScroll=this.onScroll.bind(this),this.onParentDocumentClicked=this.onParentDocumentClicked.bind(this),this.create=this.create.bind(this),this.onAnimationUpdate=this.onAnimationUpdated.bind(this),this.toggleCollapse=this.toggleCollapse.bind(this),e.popup.addEventListener("scroll",this.onScroll),this.group.on(l.EVENTS.ON_KEYFRAME_UPDATED,function(){cancelAnimationFrame(t.pendingUpdateRAF),t.pendingUpdateRAF=requestAnimationFrame(function(){return t.onAnimationUpdate()})})}},{key:"toggleCollapse",value:function(t){void 0===t&&(t=parseInt(this.svgElement.attr("height"))===this.svgHeight);var e=t?this.labelHeight:this.svgHeight;this.svgElement.attr("height",e)}},{key:"onAnimationUpdated",value:function(t){this.createAnimatedControllerEntries(),e.guides.update(t)}},{key:"create",value:function(){var t=this;cancelAnimationFrame(this.pendingUpdateRAF),this.pendingUpdateRAF=requestAnimationFrame(function(){t.svgHeight=50,t.createXScale(),t.createSVG(),t.createHeader(),t.createAxis(),t.createAnimatedControllerEntries(),t.createPlayhead(),cancelAnimationFrame(t.pendingUpdateRAF),t.pendingUpdateRAF=requestAnimationFrame(function(){e.guides.update(),t.setSVGSize()})})}},{key:"createSVG",value:function(){return this.svgElement?void this.svgElement.attr("width",e.workAreaWidth):(this.svgElement=c.select(e.popup.document.body).selectAll(".svg_"+this.uuid+" g").data([this.group]).enter().append("svg").classed("sm-ac-gui-main-canvas",!0).classed("svg_"+this.uuid,!0),this.svg=this.svgElement.append("g").attr("transform",this.translate(0,this.labelHeight)),void this.svgElement.attr("width",e.workAreaWidth))}},{key:"setSVGSize",value:function(){var t=this;this.group.hasDuration()&&0!==this.svg.selectAll("g.controller").size()?(this.svgElement.transition().duration(500).attr("height",this.svgHeight+"px"),requestAnimationFrame(function(){return t.updatePlayhead()})):this.toggleCollapse(!0)}},{key:"createPlayhead",value:function(){var t=this,n=5,i=this.svg.selectAll("g.playhead").data(function(t){return[t]},function(t){return t.name}),r=i.enter().append("g").classed("playhead",!0).attr("transform",this.translate(this.x(0),n));r.append("rect").attr("x",-this.playheadWidth/2).attr("width",this.playheadWidth).attr("rx",2).attr("height",this.labelHeight),r.append("text").attr("x",0).attr("y",this.labelHeight/2).classed("label",!0).classed("unselectable",!0).text("0.00"),r.append("line").attr("x1",0).attr("x2",0).attr("y1",this.labelHeight),this.playhead.group=this.svg.select("g.playhead"),this.playhead.label=this.svg.select("g.playhead text");var o=this.playhead.group.node().parentElement;o.insertBefore(this.playhead.group.node(),o.children[o.children.length-1]),this.svg.select("g.playhead line").attr("y2",function(){return Math.min(t.svgHeight,e.bounds.height)+t.labelHeight}),r.call(c.drag().on("start",function(){t.isDraggingPlayhead=!0,t.playhead.group.node().style.cursor="-webkit-grab",t.playhead.group.node().style.cursor="grab"}).on("drag",function(){t.playhead.group.node().style.cursor="-webkit-grabbing",t.playhead.group.node().style.cursor="grabbing";var e=t.x(t.group.boundsMin),n=t.x(t.group.boundsMax),i=c.event.x,r=a.norm(i,e,n),o=t.svgElement.node(),s=Math.max(-o.getBoundingClientRect().top-19,1);if(t.playhead.group.attr("transform",t.translate(i,s)),void 0!==t.group.duration)t.group.progress(r);else{var u=t.group.convertTValueToScrollPosition(r);window.scrollTo(window.scrollX,u)}t.playhead.label.text(t.group.timelines.localUnclamped.toPrecision(2))}).on("end",function(){t.isDraggingPlayhead=!1,t.playhead.group.node().style.cursor="-webkit-grab"}))}},{key:"createXScale",value:function(){var t=Math.min(this.group.boundsMin,0),n=Math.max(this.group.boundsMax,1);this.x=c.scaleLinear().domain([t,n]).range([this.nameLabelSize+this.tlEdgePadding,e.workAreaWidth-this.tlEdgePadding])}},{key:"createAxis",value:function(){var t=c.axisBottom(this.x);t.tickSize(this.labelHeight-2,0);var n=c.scaleLinear().domain([0,1980]).range([0,20]),i=this.svg.selectAll("g.axis.unselectable").data(function(t){return[t.viewableRange]});i.enter().append("g").attr("sm-gui-label","axis").classed("axis",!0).classed("unselectable",!0).merge(i).call(t.ticks(n(e.workAreaWidth),"s"))}},{key:"createHeader",value:function(){var t=this,n=this.svg.selectAll("g.header").data(function(t){return[t.name]}),i=n.enter().append("g").attr("class",function(){return"header "+(t.uuid%2===0?"even":"odd")}).on("click",function(){c.event.shiftKey&&e.systems.forEach(function(t){t.toggleCollapse(!0)}),t.toggleCollapse()});i.append("rect").attr("x",0).attr("width",e.workAreaWidth).attr("height",this.labelHeight),i.append("text").attr("x",10).attr("y",this.labelHeight/2).attr("text-anchor","middle").text(function(e){var n=""===t.group.name,i="[Unnamed Group] on "+t.group.element.className,r=n?i:t.group.name;return r}),n.enter().merge(n).selectAll("rect").attr("width",e.workAreaWidth)}},{key:"createAnimatedControllerEntries",value:function(){var t=this,e=this.group,n=this.rowStart,i=this.svg.selectAll("g.controller").data(function(t){return t.keyframeControllers.filter(function(t){return t._activeKeyframes.length>0}).sort(function(t,e){return t.boundsMin<e.boundsMin?-1:t.boundsMin>e.boundsMin?1:0})},function(t){return t.uuid});i.exit().transition().duration(500).ease(c.easeSinInOut).style("opacity",0).remove(),i=i.enter().append("g").attr("class","controller").merge(i).attr("data-prev-y",function(t){return this.dataset.y}).attr("data-y",function(e){var i=n;return n+=t.labelHeight*(e.attributes.length+2),t.translate(0,i)}).attr("data-index",function(t,e){return e+1}),this.svgHeight=n;var r=i.filter(function(){return this.dataset.prevY===this.dataset.y||void 0===this.dataset.prevY});r.attr("transform",function(){return this.dataset.y});var o=i.filter(function(){return this.dataset.prevY!==this.dataset.y&&void 0!==this.dataset.prevY});o.transition().ease(c.easeSinInOut).duration(500).attr("transform",function(){return this.dataset.y});var s=i.selectAll("g.controller-text-container").data(function(t){return[t.friendlyName]});s.exit().remove(),s=s.enter().append("g").classed("controller-text-container",!0).merge(s).on("click",function(){var t=this.parentElement.__data__.element,n=e.metrics.get(t);if(!n)return void console.log("AnimSystemGUI - No metrics for",t);var i=n.top-(.5*l.pageMetrics.windowHeight-.5*n.height);c.transition().duration(500).tween("scroll",function(){var t=c.interpolateNumber(pageYOffset,i);return function(e){scrollTo(0,t(e))}})});var a=s.selectAll("text.sm-ac-gui-controller-label").data(function(t){return[t]});a.exit().remove(),a.enter().append("text").attr("x",10).attr("y",-8).attr("class","sm-ac-gui-controller-label").merge(a).text(function(t){return t});var u=i.selectAll("g.attribute").data(function(t){return t.attributes},function(t){return t});u.exit().remove(),u=u.enter().append("g").attr("class",function(t,e){return"timeline-backgrounds attribute "+t.key+(e%2===0?" even":" odd")}).merge(u).attr("transform",function(e,n){return t.translate(0,n*t.labelHeight)}),this.createAttributeBackgroundBars(u),this.createAnimations(u)}},{key:"createAnimations",value:function(t){var e=this,n=c.transition().duration(250),i=function(t,n){var i=t.keyframe[t.key],r=1,o=1,s=0;switch(t.keyframe.keyframeType){case l.KeyframeTypes.Interpolation:o=1,r=.75,s=0;break;case l.KeyframeTypes.InterpolationForward:o=.75,r=1,s=90;break;case l.KeyframeTypes.CSSClass:o=1,r=1,s=0;break;case l.KeyframeTypes.Event:o=1,r=1,s=0}return e.translate(e.x(i),0)+" scale("+o+", "+r+") rotate("+s+")"},r=function(t){switch(t.keyframe.keyframeType){case l.KeyframeTypes.Interpolation:return e.keyframeDiamond();case l.KeyframeTypes.InterpolationForward:return e.keyframeForward();case l.KeyframeTypes.CSSClass:return e.triggerCircle();case l.KeyframeTypes.Event:return e.eventCross()}},o=t.selectAll("g.animation").data(function(t,e){return this.parentElement.__data__.keyframes[t]},function(t){return t.id});o.exit().transition().duration(500).ease(c.easeSinInOut).style("opacity",0).remove(),o=o.enter().append("g").attr("transform",function(t){return e.translate(0,.5*e.labelHeight)}).classed("animation",!0).merge(o).classed("trigger",function(t){return t.keyframeType===l.KeyframeTypes.CSSClass});var s=o.selectAll("line").data(function(t){return[t]});s.exit().remove(),s=s.enter().append("line").attr("stroke",function(t){return d.KeyframeColor(t.id)}).attr("x1",function(t){return e.x(t.start)}).attr("x2",function(t){return e.x(t.end)}).merge(s),s.transition(n).attr("x1",function(t){return e.x(t.start)}).attr("x2",function(t){return e.x(t.end)});var a=o.selectAll("path").data(function(t){return[{key:"start",keyframe:t},{key:"end",keyframe:t}]});a.exit().remove(),a.transition(n).attr("fill",function(t){return d.KeyframeColor(t.keyframe.id)}).attr("transform",i).attr("d",r),a.enter().append("path").attr("transform",i).attr("d",r).attr("fill",function(t){return d.KeyframeColor(t.keyframe.id)})}},{key:"createAttributeBackgroundBars",value:function(t){var n=this,i=t.selectAll("rect").data(function(t){return[t]});i=i.enter().append("rect").merge(i).attr("x",0).attr("width",function(){return n.x(Math.max(1,n.group.boundsMax))}).attr("height",this.labelHeight);var r=t.selectAll("text").data(function(t){return[t]});r.exit().remove(),r=r.enter().append("text").attr("class","attribute-label").attr("x",15).attr("y",10).merge(r).text(function(t){return t});var o=this;i.on("click",function(t){var n=c.select(this.parentNode.parentNode).datum(),i=o.x.invert(c.event.x),r=n.getNearestKeyframeForAttribute(i,t);if(r){var s=c.select(this.parentNode).selectAll("g.animation").filter(function(t){return t===r}).node();e.guides.update(r),e.panel.update(s,r)}}),this.createTimelineMarkers(t)}},{key:"createTimelineMarkers",value:function(t){var e=this,n=t.selectAll("line.timeline-marker").data(function(t){return[e.group.viewableRange.a,e.group.viewableRange.b,e.group.viewableRange.c].map(function(t){return e.group.convertScrollPositionToTValue(t)})},function(t,e){return e});n.exit().remove(),n.enter().append("line").classed("timeline-marker",!0).attr("y2",0).attr("y2",this.labelHeight).merge(n).transition(c.transition().duration(250)).attr("x1",function(t){return e.x(t)}).attr("x2",function(t){return e.x(t)})}},{key:"onParentDocumentClicked",value:function(t){t.metaKey===!0&&this.findKeyframeControllerForElementAt(t.clientX,t.clientY)}},{key:"onScrollUpdate",value:function(t){this.updatePlayhead()}},{key:"onScroll",value:function(){this.updatePlayhead()}},{key:"updatePlayhead",value:function(){if(this.playhead.group&&!this.isDraggingPlayhead){var t=this.svgElement.node(),e=Math.max(-t.getBoundingClientRect().top-19,1),n=this.group.timelines;this.playhead.label.text(n.localUnclamped.toPrecision(2)),this.playhead.group.attr("transform",this.translate(this.x(n.localUnclamped),e))}}},{key:"findKeyframeControllerForElementAt",value:function(t,n){var i=document.elementsFromPoint(t,n),r=this.group.anim,o=null,s=!0,a=!1,u=void 0;try{for(var l,h=i[Symbol.iterator]();!(s=(l=h.next()).done);s=!0){var f=l.value;if(null!==r.getControllerForTarget(f)){o=r.getControllerForTarget(f);break}}}catch(d){a=!0,u=d}finally{try{!s&&h["return"]&&h["return"]()}finally{if(a)throw u}}if(null!==o){var p=this.svg.selectAll("g.controller").data(function(t){return t.keyframeControllers.filter(function(t){return t===o})},function(t){return t.uuid}),m=p.node();if(null!==m){var y=e.popup.window,_=y.scrollY,v=m.getBoundingClientRect(),g=v.top<0||v.bottom>y.scrollY+y.innerHeight;g&&c.transition().duration(500).tween("scroll",function(){var t=c.interpolateNumber(_,_+v.top-(y.innerHeight-v.height)/2);return function(e){return y.scrollTo(y.scrollX,t(e))}}),p.select("g.controller-text-container text.sm-ac-gui-controller-label").transition().duration(500).style("fill","white").transition().delay(500).duration(1500).style("fill",null)}}}},{key:"translate",value:function(t,e){return t!==t?(console.log("AnimSystemGUI isNaN(x):",isNaN(t),"isNaN(y):",isNaN(e)),"translate("+t+","+e+")"):"translate("+t+","+e+")"}},{key:"onResizeDebounced",value:function(){var t=this;setTimeout(function(){t.group.hasDuration()&&(t.create(),e.guides._update())},250)}}]),e}(u);m.popup=null,m.SaveWindowPosition=function(){m.bounds={top:m.popup.screenTop,left:m.popup.screenLeft,windowWidth:m.popup.innerWidth,height:m.popup.innerHeight},localStorage.setItem(l.LOCAL_STORAGE_KEYS.GuiPosition,JSON.stringify(m.bounds))},m.GetWindowPosition=function(){var t=localStorage.getItem(l.LOCAL_STORAGE_KEYS.GuiPosition);if(m.bounds={top:0,left:0,windowWidth:.55*window.screen.width,height:.5*window.screen.width},null!==t){var e=JSON.parse(t);m.bounds.top=e.top,m.bounds.left=e.left,m.bounds.windowWidth=e.windowWidth,m.bounds.height=e.height}m.workAreaWidth=m.bounds.windowWidth-m.panelWidth},m.panel=null,m.panelWidth=250,m.guides=null,m.IS_ENABLED=!1,m.HAS_LOADED=!1,m.pending=[],m.systems=[],m.Enable=function(){return console.log("%c AnimSystem GUI - Version "+y+" ","background: #282828; color: #66cdff"),m.GetWindowPosition(),m.CreatePopup(),m.popup?(m.IS_ENABLED=!0,m.LoadingComplete(),void m.InitializeKeyframeControllerLocator()):void(m.IS_ENABLED=!1)},m._resizeTimeout=-1,m.LoadingComplete=function(){m.popup.document.querySelectorAll("style").forEach(function(t){t.parentNode.removeChild(t)}),m.popup.document.querySelectorAll("svg").forEach(function(t){t.parentNode.removeChild(t)}),m.panel=new f(m.popup.document),m.guides=new h(m.panel.clearGuidesButton),d.Inject(m.popup.document),m.popup.addEventListener("resize",m.ON_RESIZE),d.KeyframeColor=c.scaleLinear().domain([0,10]).interpolate(c.interpolateHslLong).range([c.rgb("#66faff"),c.rgb("#ff6669")]),m.HAS_LOADED=!0;var t=function e(){var t=Array.from(document.querySelectorAll("[data-anim-group],[data-anim-scroll-group],[data-anim-time-group]")).map(function(t){return t._animInfo?t._animInfo.group:null}).filter(function(t){return null!==t});if(t.length>0){var n=t[0].anim;n.groups.forEach(function(t){return m.REGISTER(t)}),n.on(l.EVENTS.ON_GROUP_CREATED,function(t){return m.REGISTER(t)})}else requestAnimationFrame(e)};t()},m.InitializeKeyframeControllerLocator=function(){document.addEventListener("click",function(t){m.systems.forEach(function(e){e.onParentDocumentClicked(t)})})},m.REGISTER=function(t){m.HAS_LOADED?m.ADD_GUI_FOR_SYSTEM(t):m.pending.push(t)},m.ON_RESIZE_DEBOUNCED=function(){m.SaveWindowPosition(),m.workAreaWidth=m.bounds.windowWidth-m.panelWidth,m.systems.forEach(function(t){t.create()})},m.ADD_GUI_FOR_SYSTEM=function(t){var e=0!==m.systems.filter(function(e){return e.group===t}).length;if(!e){var n=new m(t);n.setupEvents(),n.create(),m.systems.push(n),t.gui=n}},m.ON_RESIZE=function(){window.clearTimeout(m._resizeTimeout),m._resizeTimeout=window.setTimeout(m.ON_RESIZE_DEBOUNCED,500)},m.CreatePopup=function(){if(!m.popup){if(m.popup=window.open("","AnimSystemGUI","top="+m.bounds.top+",left="+m.bounds.left+",width="+m.bounds.windowWidth+",height="+m.bounds.height+",location=no"),null===m.popup)return void console.error("AnimSystemGUI could not open create window");m.popup.document.title=document.title+" AnimSystemGUI",m.popup.blur(),m.popup.AnimSystemGUI=m}},e.exports=m;var y="2.2.4"},{"./AnimSystemGUI/Guides":252,"./AnimSystemGUI/InfoPanel":253,"./AnimSystemGUI/Styles":258,"./Model/AnimSystemModel":263,"@marcom/ac-event-emitter-micro":66,"@marcom/sm-math-utils":280,"d3/build/d3.min":248}],251:[function(t,e,n){"use strict";var i={hasInitialized:!1,init:function(t){i.hasInitialized||(i.hasInitialized=!0,this.parentDocument=t,this.element=this.parentDocument.querySelector("textarea"),this.element||(this.element=this.parentDocument.createElement("textarea"),this.element.style.opacity=0,this.element.style.fontSize="12pt",this.element.style.border="0",this.element.style.padding="0",this.element.style.margin="0",this.element.style.zIndex=-1,this.element.style.position="absolute",this.element.setAttribute("readonly",""),this.element.style.top=0,this.parentDocument.body.appendChild(this.element)))},copyToClipboard:function(t){this.element.value=t,this.element.innerHTML=t,this.element.select();try{return this.parentDocument.execCommand("copy")}catch(e){return!1}}};e.exports=i},{}],252:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e){i(this,t),this.setupHTML(),this.keyframe=null,this.clearButton=e,this.clearButton.on("click",this.clearGuides.bind(this))}return r(t,[{key:"update",value:function(t){t&&(this.keyframe=t),this._update()}},{key:"_update",value:function(){if(this.keyframe){var t=this.keyframe.controller.group.convertTValueToScrollPosition(this.keyframe.start),e=this.keyframe.controller.group.convertTValueToScrollPosition(this.keyframe.end);this.element.style.display="block",this.start.style.transform=this.translate(t),this.end.style.transform=this.translate(e)}}},{key:"clearGuides",value:function(){this.keyframe=null,this.element.style.display="none"}},{key:"translate",value:function(t){return"translate(0,"+t+"px)"}},{key:"setupHTML",value:function(){var t='\n<style>\n.anim-system-gui-marker-container {\n    position: absolute;\n    top: 0;\n    width: 100%;\n    z-index: 100001;\n    display: none;\n}\n.anim-system-gui-marker-container .marker {\n    position: absolute;\n    top: 0;\n    width: 100%;\n    height: 5px;\n    background-color: red;\n    transition: transform 0.5s;\n}\n.anim-system-gui-marker-container .start { background-color: #1CE2B2; }\n.anim-system-gui-marker-container .end { background-color: #FF1461; }\n</style>\n            <div class="marker start"></div>\n            <div class="marker end"></div>\n        ',e=document.createElement("div");e.classList.add("anim-system-gui-marker-container"),e.innerHTML=t,this.element=document.body.appendChild(e),this.start=this.element.querySelector(".start"),this.end=this.element.querySelector(".end")}}]),t}();e.exports=o},{}],253:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("./KeyframeModel"),s=t("./ClipboardHelper"),a=t("d3/build/d3.min"),u=function(){function t(e){i(this,t),this.document=e,s.init(e),this.gui=null,this.keyframe=null,this.keyframeGroup=null,this.keyframeModel=new o;var n=this.document.body.querySelector(".panel-container");n&&this.document.body.removeChild(n),this.container=a.select(this.document.body).append("div").classed("panel-container",!0).append("div").classed("panel",!0),this.createPanelBackground(),this.documentSelection=a.select(this.document),this.update=this.update.bind(this),this._update()}return r(t,[{key:"createPanelBackground",value:function(){this.container.append("div").classed("header",!0).text("Properties"),this.buttonContainer=this.container.append("div").classed("button-container",!0),this.clearGuidesButton=this.buttonContainer.append("div").classed("button",!0).text("CLEAR GUIDES"),this.exportButton=this.buttonContainer.append("div").classed("button",!0).classed("export",!0).text("EXPORT KEYFRAME").on("click",this.exportKeyframe.bind(this))}},{key:"exportKeyframe",value:function(){if(this.keyframe){var t=this.keyframeModel.exportKeyframe(this.keyframe),e="";a.event.shiftKey?(e=Object.keys(t).map(function(e){return e+":"+JSON.stringify(t[e])}).join(","),e="{"+e+"}"):e="'"+JSON.stringify(t)+"'",s.copyToClipboard(e)}}},{key:"updateHighlight",value:function(t){var e=this,n=this.keyframe;if(t!==this.keyframeGroup){this.keyframeGroup&&this.keyframeGroup.parentElement.parentElement&&a.select(this.keyframeGroup.parentElement.parentElement).selectAll("g.animation").filter(function(t){return t===e.keyframeGroup.__data__;
}).selectAll("line,path").transition().duration(200).style("fill","").style("stroke","");var i=this.documentSelection.selectAll("g.controller").filter(function(e){return e===t.__data__.controller}).selectAll("g.animation").filter(function(t){return t===n});i.selectAll("line,path").transition().duration(200).style("fill","red").style("stroke","red")}}},{key:"update",value:function(t,e){this.keyframe=e,this.updateHighlight(t),this.keyframeGroup=t,this.keyframeModel.updateModel(e),this._update()}},{key:"_update",value:function(){var t=this,e=this,n=[{categoryName:"Timing",keys:["start","end"]},{categoryName:"Easing",keys:["ease","easeFunction"]},{categoryName:"",keys:["relativeTo"]},{categoryName:"",keys:["event"]},{categoryName:"",keys:["cssClass"]},{categoryName:"",keys:["breakpointMask"]},{categoryName:"",keys:["disabledWhen"]},{categoryName:"",keys:["hold"]},{categoryName:"",keys:["snapAtCreation"]},{categoryName:"",keys:["toggle"]}];n.forEach(function(e,i){n[i].keys=e.keys.map(function(e){return t.keyframeModel.data.find(function(t){return t.path===e})}).filter(function(t){return void 0!==t})}),n=n.filter(function(t){return 0!==t.keys.length}),n.forEach(function(t,e){""===n[e].categoryName&&(n[e].categoryName=n[e].keys[0].friendlyName)});var i=this.keyframeModel.data.filter(function(t){return t.isAnimValue}),r=[];if(i.forEach(function(t){var e=r.find(function(e){return e.categoryName===t.friendlyName});e||(e={categoryName:t.friendlyName,keys:[]},r.push(e)),e.keys.push(t)}),r.length>0){r.unshift({categoryName:"Animated Values",keys:[]});var o=[1,0].concat(r);Array.prototype.splice.apply(n,o)}var s=this.container.selectAll(".category").data(n,function(t){return t.categoryName}),u=function(t,e){return 40*e+300};s.exit().transition(a.easeSinInOut).duration(u).style("opacity",0).style("transform",this.scale(1.2)).transition().duration(u).style("height",0).style("padding-top",0).style("padding-bottom",0).style("margin-top",0).remove();var l=s.enter().append("div").attr("class",function(t){var e=t.keys.filter(function(t){return"boolean"==typeof t.value}).length>0,n=t.keys.filter(function(t){return t.isAnimValue}).length>0;return"category has-"+t.keys.length+"-inputs "+(e?"radio-button-container":"")+" "+(n?"anim-value-container":"")});l.style("visibility","hidden").style("transform","scale(0)").style("height",0).style("margin-top",0).each(function(){var t=this;requestAnimationFrame(function(){return t.dataset.height=t.clientHeight})}),l.append("h2"),requestAnimationFrame(function(){l.style("visibility","visible").transition(a.easeCubicInOut).duration(u).style("transform","scale(1)").style("margin-top",10).style("height",function(){this.dataset.height})}),s=s.enter().merge(s),s.selectAll("h2").text(function(t){return t.categoryName});var c=this.container.selectAll(".category").selectAll("input").data(function(t){return t.keys}),h=c.enter().append("input").attr("spellcheck",!1).merge(c).style("background-color",null).attr("class",function(t){return t.path}).attr("type",function(t){return"boolean"==typeof t.value?"checkbox":"input"}).property("checked",function(t){return t.value===!0||"true"===t.value}).property("value",function(t,e){return void 0===t.value?"":String(t.value)});h.filter(function(t){return"input"===this.getAttribute("type")}).on("keydown",function(t){"Enter"===a.event.code&&e.onInputChanged()}),h.filter(function(t){return"checkbox"===this.getAttribute("type")}).on("click",function(t){this.value=this.checked,e.onInputChanged()})}},{key:"capitalize",value:function(t){return t[0].toUpperCase()+t.slice(1,t.length)}},{key:"onInputChanged",value:function(){if(this.keyframe){var t=this.keyframe;this.container.selectAll(".category input").style("background-color",null).filter(function(e){return!e.validator(t,e.path,this.value)}).style("background-color","rgba(255,0,0,0.1)"),this.container.selectAll(".category input").filter(function(e){return e.validator(t,e.path,this.value)}).each(function(e){e.value=this.value,e.updateKeyframe(t)});var e=this.keyframeModel.exportKeyframe(this.keyframe);this.keyframe.overwriteProps(e)}}},{key:"translate",value:function(t,e){return"translate("+t+"px,"+e+"px)"}},{key:"scale",value:function(t){return"scale("+t+","+t+")"}},{key:"flash",value:function(t){a.select(t).transition().duration(100).style("background-color","#FF9C95").transition().duration(500).style("background-color","white")}}]),t}();e.exports=u},{"./ClipboardHelper":251,"./KeyframeModel":257,"d3/build/d3.min":248}],254:[function(t,e,n){"use strict";var i=t("../Model/AnimSystemModel"),r={noop:function(t,e){return e},propertyValue:function(t,e){return"null"===e&&(e=null),e},bool:function(t,e){return"true"===e?e=!0:"false"===e&&(e=!1),e},disabledWhen:function(t,e){return Array.isArray(e)?e:("string"==typeof e&&(e=""===e||""===e.trim()?i.KeyframeDefaults.disabledWhen:e.split(",")),0===e.length?i.KeyframeDefaults.disabledWhen:e)}};e.exports=r},{"../Model/AnimSystemModel":263}],255:[function(t,e,n){"use strict";var i=t("../Model/EasingFunctions"),r=t("../Model/UnitBezier"),o={noop:function(){return!0},timingValue:function(t,e,n){try{var i=t.controller.group.expressionParser.parseExpression(t,n);return"number"==typeof i}catch(r){return!1}},propertyValue:function(t,e,n){n="null"===n?null:n;var i=o.timingValue(t,e,n);if(!i)return!1;if(null!==n)return!0;var r=/(.*)\[([0-9.]+)\]/g.exec(e);if(!r)return!1;var s=r[1],a=Number(r[2]),u=t.controller.keyframes[s],l=u.indexOf(t);if(l===-1)return!1;var c=0===a?u[l-1]:u[l+1];if(!c)return!1;var h=0===a?1:0,f=null!==c.jsonProps[s][h];return f},ease:function(t,e,n){var i=parseFloat(n),r="number"==typeof i&&!isNaN(i);return!!r&&(i>=0&&i<=1)},easeFunction:function(t,e,n){var o=i.hasOwnProperty(n);if(o)return!0;try{return void 0!==r.fromCSSString(n)}catch(s){return!1}},breakpointMask:function(t,e,n){n=n.toLowerCase();var i=["smlx","smxl","slmx","slxm","sxml","sxlm","msxl","mslx","mlxs","mlsx","mxls","mxsl","lsmx","lsxm","lmsx","lmxs","lxsm","lxms","xslm","xsml","xmls","xmsl","xlms","xlsm"];return i.filter(function(t){return t.indexOf(n)!==-1}).length>0},disabledWhen:function(t,e,n){return Array.isArray(n),!0},relativeTo:function(t,e,n){if(""===n)return!0;try{return t.controller.group.element.querySelector(n)||document.querySelector(n)}catch(i){return!1}},isBoolean:function(t,e,n){return"true"===n||"false"===n}};e.exports=o},{"../Model/EasingFunctions":264,"../Model/UnitBezier":268}],256:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e,n,r,o,s){i(this,t),this.friendlyName=e,this.path=n,this.value=r,this.validator=o,this.sanitizer=s,this.isAnimValue=n.indexOf("[")!==-1}return r(t,[{key:"updateModel",value:function(t){var e=this.parsePath(t),n=e.ref,i=e.key;this.value=n[i]}},{key:"updateKeyframe",value:function(t){t.controller.group.expressionParser.isUnitlessNumber(this.value)&&(this.value=parseFloat(this.value)),this.value=this.sanitizer(this,this.value);var e=this.parsePath(t),n=e.ref,i=e.key;n[i]=this.value}},{key:"parsePath",value:function(t){for(var e=this.path.split(/\.|(\[\d+\])/g).filter(function(t){return void 0!==t&&""!==t}),n=t.jsonProps,i=e[0],r=0;r<e.length;r++)i=e[r],i.indexOf("[")!==-1&&(i=parseInt(/\d+/g.exec(i)[0])),r!==e.length-1&&(n=n[i]);return{ref:n,key:i}}},{key:"clone",value:function(){return new t(this.friendlyName,this.path,this.value,this.validator)}}]),t}();e.exports=o},{}],257:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("../Model/AnimSystemModel.js"),s=t("./InputValidators"),a=t("./InputSanitizers"),u=t("./KeyValueStore"),l=function(){function t(){i(this,t),this.data=[new u("Start","start","",s.timingValue,a.noop),new u("End","end","",s.timingValue,a.noop),new u("Ease","ease",1,s.ease,a.noop),new u("Ease Function","easeFunction","linear",s.easeFunction,a.noop),new u("Hold","hold",(!1),s.isBoolean,a.bool),new u("Snap At Creation","snapAtCreation",(!1),s.isBoolean,a.bool),new u("Event","event","",s.noop,a.noop),new u("Breakpoint Mask","breakpointMask","",s.breakpointMask,a.noop),new u("Relative To","relativeTo","",s.noop,a.noop),new u("CSS Class","cssClass","",s.noop,a.noop),new u("Toggle Class","toggle",(!1),s.isBoolean,a.bool),new u("Disabled When","disabledWhen","",s.noop,a.disabledWhen)],this.defaultData=this.data.map(function(t){return t.clone()})}return r(t,[{key:"deleteKey",value:function(t){var e=this.data.findIndex(function(e){return e.path===t});e!==-1&&this.data.splice(e,1)}},{key:"addKeyIfNotExist",value:function(t){var e=this.data.find(function(e){return e.path===t});if(!e){var n=this.defaultData.find(function(e){return e.path===t});this.data.push(n.clone())}}},{key:"addAnimValues",value:function(t){for(var e in t.jsonProps)if(o.KeyframeJSONReservedWords.indexOf(e)===-1){var n=t.jsonProps[e];Array.isArray(n)&&(this.data.push(new u(e,e+"[0]",0,s.propertyValue,a.propertyValue)),this.data.push(new u(e,e+"[1]",0,s.propertyValue,a.propertyValue)))}}},{key:"updateModel",value:function(t){t.keyframeType===o.KeyframeTypes.CSSClass?(this.deleteKey("ease"),this.deleteKey("easeFunction"),this.deleteKey("snapAtCreation"),this.deleteKey("hold"),this.deleteKey("event"),this.addKeyIfNotExist("cssClass"),this.addKeyIfNotExist("toggle"),this.data=this.data.filter(function(t){return!t.isAnimValue})):t.keyframeType===o.KeyframeTypes.Event?(this.deleteKey("ease"),this.deleteKey("easeFunction"),this.deleteKey("snapAtCreation"),this.deleteKey("cssClass"),this.deleteKey("toggle"),this.deleteKey("hold"),this.data=this.data.filter(function(t){return!t.isAnimValue}),this.addKeyIfNotExist("event")):(this.addKeyIfNotExist("ease"),this.addKeyIfNotExist("snapAtCreation"),this.addKeyIfNotExist("easeFunction"),this.addKeyIfNotExist("hold"),this.addKeyIfNotExist("event"),this.deleteKey("cssClass"),this.deleteKey("toggle"),this.data=this.data.filter(function(t){return!t.isAnimValue}),this.addAnimValues(t)),this.data.forEach(function(e){return e.updateModel(t)})}},{key:"exportKeyframe",value:function(t){this.data.forEach(function(e){return e.updateKeyframe(t)});var e={};for(var n in t.jsonProps)void 0===t.jsonProps[n]||""===t.jsonProps[n]||t.jsonProps[n]===o.KeyframeDefaults[n]&&t[n]===t.jsonProps[n]||"disabledWhen"===n&&0===t.jsonProps[n].length||(e[n]=t.jsonProps[n]);return e.end===e.start&&delete e.end,e}}]),t}();e.exports=l},{"../Model/AnimSystemModel.js":263,"./InputSanitizers":254,"./InputValidators":255,"./KeyValueStore":256}],258:[function(t,e,n){"use strict";var i={timelineMarkerStrokeColor:"#000000",containerBackgroundColor:"#E6E6E5",leftBorderColor:"#808080",headerColor:"#505C6A",headerBackgroundColor:"#D3D3D3"},r="\nhtml {\n  box-sizing: border-box; \n}\n*, *:before, *:after {\n  box-sizing: inherit;\n}\n::-webkit-scrollbar {\n    width: 0px;\n    background: transparent; /* make scrollbar transparent */\n}\n\nbody {\n\tmargin : 0;\n\tbackground-color : black;\n}\ntext {\n\tfont-family : menlo, monospace;\n\tfont-size : 12px;\n\tfill : #4e4e4e;\n\tdominant-baseline : central;\n}\n\nsvg .header {\n    transform: translate(0, -20px);\n}\n\n.header rect {\n\tcursor : pointer;\n\tfill : #2f4256;\n}\n.header.odd rect {\n\tfill : #29313a;\n}\n.header text {\n\tdominant-baseline : central;\n\ttext-anchor : start;\n\tfont-size : 15px;\n\tfill : #8ea8a8;\n  user-select: none;\n}\n.header.odd text {\n\tfill : #9fb0b3;\n}\nsvg:last-child {\n}\n.sm-ac-gui-main-canvas {\n\tbottom : 0px;\n\tbackground-color : #111111;\n\tz-index : 12;\n}\n.sm-ac-gui-controller-label {\n}\n.tick line {\n\tstroke : #3b526b;\n}\n.tick text {\n\tdominant-baseline : central;\n}\n.timeline-backgrounds rect {\n    cursor : pointer;\n}\n.even.timeline-backgrounds rect {\n\tfill : #282828;\n}\n.odd.timeline-backgrounds rect {\n\tfill : #222222;\n}\n.timeline-backgrounds .attribute-label {\n\tdominant-baseline : central;\n}\n.animation {\n\tpointer-events : none;\n}\n.animation .keyframe {\n\tstroke : none;\n}\n.animation line {\n\tstroke-width : 3;\n}\n.animation.trigger line {\n\tstroke-width : 7;\n}\n.timeline-backgrounds, .playhead {\n    cursor: -webkit-grab;\n}\n.playhead .label {\n\tdominant-baseline : central;\n\ttext-anchor : middle;\n}\n.playhead rect {\n\tfill : #8c8c8c;\n}\n.playhead line {\n\tstroke-width : 1;\n\tstroke : #8c8c8c;\n}\n\n.timeline-marker {\n    stroke: "+i.timelineMarkerStrokeColor+";\n}\n.panel-container {\n    right: 0;\n    height: 100%;\n    background-color: "+i.containerBackgroundColor+";\n    border-left: 2px solid "+i.leftBorderColor+";\n    overflow-y: scroll;\n    position: fixed;\n}\n.panel {\n    top: 0;\n    right: 0;\n    width: 250px;\n    padding-bottom: 20px;\n}\n.controller-text-container {\n    cursor: pointer;\n}\n\n.panel .button-container {\n    padding-left: 5px;\n    padding-top: 15px;\n}\n\n.panel .button {\n    text-align: right;\n    padding-left: 10px;\n    font-family: SF Pro Display, Helvetica Neue, Myriad Pro;\n    font-weight: 200;\n    font-size: 12px;\n    cursor: pointer;\n    display: inline-block;\n    color: #8c8c8c;\n}\n.panel .button.export {\n    padding-left: 40px;\n}\n\n.panel .header {\n    background-color: "+i.headerBackgroundColor+";\n    height: 40px;\n    text-align: center;\n    padding: 2%;\n    box-sizing: border-box;\n    font-family: SF Pro Display, Helvetica Neue, Myriad Pro;\n    font-size: 24px;\n    font-weight: 700;\n    color: "+i.headerColor+";\n}\n.category {\n    padding-left: 10px;\n    // display: flex;\n    // justify-content: flex-end;\n    // align-items: center;\n}\n\n.category input {\n    display: inline-block;\n    height: 25px;\n    background: #FFFFFF;\n    color: #4e4e4e;\n    border: transparent;\n    font-size: 12px;\n    font-family: menlo;\n    text-align: center;\n    \n}\n\n\n.category.has-2-inputs input {\n    width: calc(50% - 12px);\n    margin-left: 3px;\n    margin-right: 6px;\n}\n\n.category.has-2-inputs input.ease { width: 20%; }\n.category.has-2-inputs input.easeFunction { width: 70%; }\n\n.category h2 {\n    font-family: SF Pro Display, Helvetica Neue, Myriad Pro;\n    font-size: 18px;\n    font-weight: 700;\n    -webkit-margin-before: 0;\n    -webkit-margin-after: 0;\n    padding-right: 15px;\n    \n}\n\n.category.has-1-inputs input {\n    padding-left: 10px;\n    text-align:left;\n    width: 100%;\n}\n\n.category.has-1-inputs {\n    width: calc(100% - 10px);\n    margin-right: 10px;\n}\n.category.has-0-inputs {\n    // padding-top: 10px;\n}\n\n.category.anim-value-container h2 {\n    font-size: 14px;\n    font-weight: 600;\n    padding-left: 5%;\n}\n\n.category.radio-button-container h2 {\n    margin-top: 0;\n}\n.category.radio-button-container input {\n    width: auto;\n}\n.category.radio-button-container {\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    flex-direction: row-reverse;\n}\n.category h3 {\n    font-family: SF Pro Display, Helvetica Neue, Myriad Pro;;\n    font-size: 14px;\n    font-weight: 600;\n    padding-left: 5%;\n    margin-bottom: 5px;\n    margin-top: 5px;\n}\n.relativeTo input {\n    padding-left: 10px;\n    font-size: 10px;\n}\n.unselectable {\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n    -khtml-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    pointer-events:none;\n}\n",o=function(t){var e=t.createElement("style");return e.innerHTML=r,t.head.appendChild(e),e};e.exports={Inject:o,KeyframeColor:{}}},{}],259:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function _(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:_(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=t("./Model/AnimSystemModel"),l=(t("./Keyframes/Keyframe"),t("./Keyframes/KeyframeCSSClass")),c=t("./Model/InferKeyframeFromProps"),h=t("./utils/arrayToObject"),f=t("./Model/UUID"),d=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,p=t("@marcom/decompose-css-transform"),m={update:t("@marcom/ac-raf-emitter/update"),external:t("@marcom/ac-raf-emitter/external"),draw:t("@marcom/ac-raf-emitter/draw")},y=function(t){function e(t,n){i(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.uuid=f(),o.group=t,o.element=n,o._ownerIsElement=o.element instanceof Element,o._ownerIsElement?o.friendlyName=o.element.tagName+"."+Array.from(o.element.classList).join("."):o.friendlyName=o.element.friendlyName||o.uuid,o.element._animInfo=o.element._animInfo||new u.AnimInfo(t,o),o.element._animInfo.controller=o,o.tweenProps={},o.eventObject=new u.EventObject(o),o.needsStyleUpdate=!1,o.needsClassUpdate=!1,o.elementMetrics=o.group.metrics.add(o.element),o._parentElementMetrics=null,o.attributes=[],o.keyframes={},o._allKeyframes=[],o._activeKeyframes=[],o.keyframesRequiringDispatch=[],o.updateCachedValuesFromElement(),o.boundsMin=0,o.boundsMax=0,o}return o(e,t),s(e,[{key:"destroy",value:function(){this.element._animInfo&&this.element._animInfo.controller===this&&(this.element._animInfo.controller=null,this.element._animInfo=null),this._parentElementMetrics=null,this.eventObject.controller=null,this.eventObject.element=null,this.eventObject.keyframe=null,this.eventObject.tweenProps=null,this.eventObject=null,this.elementMetrics=null,this.group=null,this.keyframesRequiringDispatch=null;for(var t=0;t<this._allKeyframes.length;t++)this._allKeyframes[t].destroy();this._allKeyframes=null,this._activeKeyframes=null,this.attributes=null,this.keyframes=null,this.element=null,this.tweenProps=null,a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"remove",value:function(){this.group.removeKeyframeController(this)}},{key:"updateCachedValuesFromElement",value:function(){if(this._ownerIsElement){var t=getComputedStyle(this.element),e=p(this.element,!0),n=u.KeyframeDefaults.epsilon,i=!1;this.tweenProps.x=new u.TargetValue(e.translation[0],n,i),this.tweenProps.y=new u.TargetValue(e.translation[1],n,i),this.tweenProps.z=new u.TargetValue(e.translation[2],n,i),this.tweenProps.rotation=new u.TargetValue(e.eulerRotation[2],n,i),this.tweenProps.scale=new u.TargetValue(e.scale[0],n,i),this.tweenProps.scaleX=new u.TargetValue(e.scale[0],n,i),this.tweenProps.scaleY=new u.TargetValue(e.scale[1],n,i),this.tweenProps.opacity=new u.TargetValue(parseFloat(t.opacity),n,i)}}},{key:"addKeyframe",value:function(t){var e=c(t);if(!e)throw new Error("AnimSystem Cannot create keyframe for from options `"+t+"`");var n=new e(this,t);return n.parseOptions(t),n.id=this._allKeyframes.length,this._allKeyframes.push(n),n}},{key:"needsUpdate",value:function(){for(var t=0,e=this.attributes.length;t<e;t++){var n=this.attributes[t],i=this.tweenProps[n],r=Math.abs(i.current-i.target);if(r>i.epsilon)return!0}return!1}},{key:"updateLocalProgress",value:function(t){for(var e=0,n=this.attributes.length;e<n;e++){var i=this.attributes[e],r=this.keyframes[this.attributes[e]];if(1!==r.length){var o=this.getNearestKeyframeForAttribute(t,i);o&&o.updateLocalProgress(t)}else r[0].updateLocalProgress(t)}}},{key:"reconcile",value:function(){for(var t=0,e=this.attributes.length;t<e;t++){var n=this.attributes[t],i=this.getNearestKeyframeForAttribute(this.group.timelines.local,n);i.updateLocalProgress(this.group.timelines.local),i.snapAtCreation&&i.reconcile(n)}}},{key:"determineActiveKeyframes",value:function(t){var e=this;t=t||h(Array.from(document.documentElement.classList));var n=this._activeKeyframes,i=this.attributes;this._activeKeyframes=[],this.attributes=[],this.keyframes={};for(var r=0;r<this._allKeyframes.length;r++){var o=this._allKeyframes[r];if(o.setEnabled(t)){this._activeKeyframes.push(o);for(var s in o.animValues)this.keyframes[s]=this.keyframes[s]||[],this.keyframes[s].push(o),this.attributes.indexOf(s)===-1&&this.attributes.push(s)}}var a=n.filter(function(t){return e._activeKeyframes.indexOf(t)===-1});if(0!==a.length){var u=i.filter(function(t){return e.attributes.indexOf(t)===-1});0!==u.length&&this._ownerIsElement&&m.external(function(){var t=["x","y","z","scale","scaleX","scaleY","rotation","rotationX","rotationY","rotationZ"],n=u.filter(function(e){return t.indexOf(e)!==-1});n.length!==-1&&e.element.style.removeProperty("transform");for(var i=0,r=u.length;i<r;++i){var o=u[i],s=e.tweenProps[o];s.current=s.target=s.initialValue,"opacity"===o&&e.element.style.removeProperty("opacity")}for(var c=0,h=a.length;c<h;++c){var f=a[c];f instanceof l&&f._unapply()}},!0)}}},{key:"onDOMRead",value:function(t){for(var e=0,n=this.attributes.length;e<n;e++){var i=this.attributes[e],r=this.getNearestKeyframeForAttribute(t.local,i);r&&r.onDOMRead(i)}}},{key:"onDOMWrite",value:function(){this._ownerIsElement?this.onDOMWriteForElement():this.onDOMWriteForObject(),this.handleEventDispatch()}},{key:"onDOMWriteForObject",value:function(){for(var t=0,e=this.attributes.length;t<e;t++){var n=this.attributes[t];this.element[n]=this.tweenProps[n].current}}},{key:"onDOMWriteForElement",value:function(){var t=this.tweenProps,e="";if("undefined"!=typeof this.keyframes.z?e+="translate3d("+t.x.current+"px,"+t.y.current+"px, "+t.z.current+"px)":"undefined"==typeof this.keyframes.x&&"undefined"==typeof this.keyframes.y||(e+="translate("+t.x.current+"px,"+t.y.current+"px)"),"undefined"!=typeof this.keyframes.rotation?e+="rotate("+t.rotation.current+"deg) ":("undefined"!=typeof this.keyframes.rotationX&&(e+="rotateX("+t.rotationX.current+"deg) "),"undefined"!=typeof this.keyframes.rotationY&&(e+="rotateY("+t.rotationY.current+"deg) "),"undefined"!=typeof this.keyframes.rotationZ&&(e+="rotateZ("+t.rotationZ.current+"deg) ")),"undefined"!=typeof this.keyframes.scale)e+="scale("+t.scale.current+","+t.scale.current+") ";else{var n="undefined"!=typeof this.keyframes.scaleX,i="undefined"!=typeof this.keyframes.scaleY;(n||i)&&(e+="scale("+t.scaleX.current+","+t.scaleY.current+") ")}if(""!==e&&(this.element.style.transform=e),"undefined"!=typeof this.keyframes.opacity&&(this.element.style.opacity=t.opacity.current),this.needsStyleUpdate){for(var r in this.tweenProps.targetStyles)null!==this.tweenProps.targetStyles[r]&&(this.element.style[r]=this.tweenProps.targetStyles[r]),this.tweenProps.targetStyles[r]=null;this.needsStyleUpdate=!1}this.needsClassUpdate&&(this.tweenProps.targetClasses.add.length>0&&this.element.classList.add.apply(this.element.classList,this.tweenProps.targetClasses.add),this.tweenProps.targetClasses.remove.length>0&&this.element.classList.remove.apply(this.element.classList,this.tweenProps.targetClasses.remove),this.tweenProps.targetClasses.add.length=0,this.tweenProps.targetClasses.remove.length=0,this.needsClassUpdate=!1)}},{key:"handleEventDispatch",value:function(){if(0!==this.keyframesRequiringDispatch.length){for(var t=0,e=this.keyframesRequiringDispatch.length;t<e;t++){var n=this.keyframesRequiringDispatch[t];n.needsEventDispatch=!1,this.eventObject.keyframe=n,this.eventObject.pageMetrics=u.pageMetrics,this.eventObject.event=n.event,this.trigger(n.event,this.eventObject)}this.keyframesRequiringDispatch.length=0}}},{key:"updateAnimationConstraints",value:function(){for(var t=this,e=0,n=this._activeKeyframes.length;e<n;e++)this._activeKeyframes[e].updateAnimationConstraints();this.attributes.forEach(function(e){1!==t.keyframes[e].length&&t.keyframes[e].sort(u.KeyframeComparison)}),this.updateDeferredPropertyValues()}},{key:"refreshMetrics",value:function(){var t=this,e=this._activeKeyframes.map(function(t){return t.relativeTo}),n=new Set(e);n.add(this.element),n.forEach(function(e){return t.group.metrics.refreshMetrics(e)}),this.group.keyframesDirty=!0}},{key:"updateDeferredPropertyValues",value:function(){for(var t=0,e=this.attributes.length;t<e;t++){var n=this.attributes[t],i=this.keyframes[n],r=i[0];if(!(r.keyframeType>u.KeyframeTypes.InterpolationForward))for(var o=0,s=i.length;o<s;o++){var a=i[o];if(null===a.jsonProps[n][0]){if(0===o)throw new RangeError("AnimSystem - earliest keyframe cannot defer it's beginning value! "+n+":[null,"+a.jsonProps[n][1]+"]");a.animValues[n][0]=i[o-1].animValues[n][1]}if(null===a.jsonProps[n][1]){if(o===s-1)throw new RangeError("AnimSystem - last keyframe cannot defer it's end value! "+n+":["+a.jsonProps[n][0]+",null]");a.animValues[n][1]=i[o+1].animValues[n][0]}}}}},{key:"getBounds",value:function(t){this.boundsMin=Number.MAX_VALUE,this.boundsMax=-Number.MAX_VALUE;for(var e=0,n=this.attributes.length;e<n;e++)for(var i=this.keyframes[this.attributes[e]],r=0;r<i.length;r++){var o=i[r];this.boundsMin=Math.min(o.start,this.boundsMin),this.boundsMax=Math.max(o.end,this.boundsMax),t.min=Math.min(o.start,t.min),t.max=Math.max(o.end,t.max)}}},{key:"getNearestKeyframeForAttribute",value:function(t,e){var n=null,i=Number.POSITIVE_INFINITY,r=this.keyframes[e];if(void 0===r)return null;var o=r.length;if(0===o)return null;if(1===o)return r[0];for(var s=0;s<o;s++){var a=r[s];if(a.isInRange(t)){n=a;break}var u=Math.min(Math.abs(t-a.start),Math.abs(t-a.end));u<i&&(i=u,n=a)}return n}},{key:"getAllKeyframesForAttribute",value:function(t){return this.keyframes[t]}},{key:"updateKeyframe",value:function(t,e){var n=this;t.parseOptions(e),t.updateAnimationConstraints(),this.group.keyframesDirty=!0,m.update(function(){return n.group.trigger(u.EVENTS.ON_KEYFRAME_UPDATED,t)},!0)}},{key:"removeKeyframe",value:function(t){var e=this._allKeyframes.indexOf(t);e!==-1&&(this._allKeyframes.splice(e,1),this.group.keyframesDirty=!0)}},{key:"updateAnimation",value:function(t,e){return this.group.gui&&console.warn("KeyframeController.updateAnimation(keyframe,props) has been deprecated. Please use updateKeyframe(keyframe,props)"),this.updateKeyframe(t,e)}}]),e}(d);Object.defineProperty(y.prototype,"parentElementMetrics",{get:function(){return null===this._parentElementMetrics&&(this._parentElementMetrics=this.group.metrics.add(this.element.parentElement)),this._parentElementMetrics}}),e.exports=y},{"./Keyframes/Keyframe":260,"./Keyframes/KeyframeCSSClass":261,"./Model/AnimSystemModel":263,"./Model/InferKeyframeFromProps":266,"./Model/UUID":267,"./utils/arrayToObject":274,"@marcom/ac-event-emitter-micro":66,"@marcom/ac-raf-emitter/draw":121,"@marcom/ac-raf-emitter/external":122,"@marcom/ac-raf-emitter/update":125,"@marcom/decompose-css-transform":278}],260:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("../Model/AnimSystemModel"),s=t("@marcom/sm-math-utils"),a=t("../Model/EasingFunctions"),u=t("../Model/UnitBezier"),l=t("../utils/arrayToObject"),c=function(){function t(e,n){i(this,t),this.controller=e,this.relativeTo=e.element,this.jsonProps=n,this.ease=o.KeyframeDefaults.ease,this.easeFunctionString=o.KeyframeDefaults.easeFunctionString,this.easeFunction=a[this.easeFunctionString],this.start=0,this.end=0,this.localT=0,this.curvedT=0,this.id=0,this.event="",this.needsEventDispatch=!1,this.snapAtCreation=!1,this.isEnabled=!1,this.animValues={},this.breakpointMask="SMLX",this.disabledWhen=[],this.keyframeType=o.KeyframeTypes.Interpolation,this.hold=!1}return r(t,[{key:"destroy",value:function(){this.controller=null,this.relativeTo=null,this.jsonProps=null,this.easeFunction=null,this.animValues=null}},{key:"remove",value:function(){return this.controller.removeKeyframe(this)}},{key:"parseOptions",value:function(t){if(this.jsonProps=t,""!==t.relativeTo&&t.relativeTo?t.relativeTo&&(this.relativeTo=this.controller.group.element.querySelector(t.relativeTo)||document.querySelector(t.relativeTo),null===this.relativeTo&&(console.warn("Keyframe for",this.controller.element.className," .relativeTo failed to find "+t.relativeTo+"' via querySelector"),this.relativeTo=this.controller.element),this.controller.group.metrics.add(this.relativeTo)):this.relativeTo=this.controller.element,t.ease?this.ease=parseFloat(t.ease):t.ease=this.ease,t.hasOwnProperty("snapAtCreation")?this.snapAtCreation=t.snapAtCreation:t.snapAtCreation=this.snapAtCreation,t.easeFunction?this.easeFunction=t.easeFunction:t.easeFunction=this.easeFunctionString,t.breakpointMask?this.breakpointMask=t.breakpointMask:t.breakpointMask=this.breakpointMask,t.disabledWhen?this.disabledWhen=Array.isArray(t.disabledWhen)?t.disabledWhen:[t.disabledWhen]:t.disabledWhen=this.disabledWhen,t.hasOwnProperty("hold")?this.hold=t.hold:t.hold=this.hold,this.easeFunction=a[t.easeFunction],!a.hasOwnProperty(t.easeFunction)){var e=u.fromCSSString(t.easeFunction);e?this.easeFunction=e:console.error("Keyframe parseOptions cannot find EasingFunction named '"+t.easingFunction+"'")}for(var n in t)if(o.KeyframeJSONReservedWords.indexOf(n)===-1){var i=t[n];if(Array.isArray(i)){if(this.animValues[n]=this.controller.group.expressionParser.parse(this,i),void 0===this.controller.tweenProps[n]||!this.controller._ownerIsElement){var r=0;this.controller._ownerIsElement||(r=this.controller.element[n]);var s=new o.TargetValue(r,o.KeyframeDefaults.epsilon,this.snapAtCreation);this.controller.tweenProps[n]=s}var l=this.controller.tweenProps[n];if(t.epsilon)l.epsilon=t.epsilon;else{var c=Math.abs(this.animValues[n][0]-this.animValues[n][1]),h=Math.min(.001*c,l.epsilon,o.KeyframeDefaults.epsilon);l.epsilon=Math.max(h,1e-4)}}}this.keyframeType=this.hold?o.KeyframeTypes.InterpolationForward:o.KeyframeTypes.Interpolation,t.event&&(this.event=t.event)}},{key:"overwriteProps",value:function(t){this.animValues={};var e=Object.assign({},this.jsonProps,t);this.controller.updateKeyframe(this,e)}},{key:"updateLocalProgress",value:function(t){if(this.start===this.end||t>this.end)return this.localT=1,void(this.curvedT=this.easeFunction(this.localT));var e=(t-this.start)/(this.end-this.start),n=this.hold?this.localT:0;this.localT=s.clamp(e,n,1),this.curvedT=this.easeFunction(this.localT)}},{key:"reconcile",value:function(t){var e=this.animValues[t],n=this.controller.tweenProps[t];n.initialValue=e[0],n.target=e[0]+this.curvedT*(e[1]-e[0]),n.current!==n.target&&(n.current=n.target,this.needsEventDispatch||(this.needsEventDispatch=!0,this.controller.keyframesRequiringDispatch.push(this)))}},{key:"reset",value:function(t){this.localT=t||0;var e=this.ease;this.ease=1;for(var n in this.animValues)this.reconcile(n);this.ease=e}},{key:"onDOMRead",value:function(t){var e=this.animValues[t],n=this.controller.tweenProps[t];n.target=e[0]+this.curvedT*(e[1]-e[0]);var i=n.current;n.current+=(n.target-n.current)*this.ease;
var r=n.current-n.target;r<n.epsilon&&r>-n.epsilon&&(n.current=n.target,r=0),""===this.event||this.needsEventDispatch||(r>n.epsilon||r<-n.epsilon||0===r&&i!==n.current)&&(this.needsEventDispatch=!0,this.controller.keyframesRequiringDispatch.push(this))}},{key:"isInRange",value:function(t){return t>=this.start&&t<=this.end}},{key:"setEnabled",value:function(t){t=t||l(Array.from(document.documentElement.classList));var e=this.breakpointMask.indexOf(o.pageMetrics.breakpoint)!==-1,n=!1;return this.disabledWhen.length>0&&(n=this.disabledWhen.some(function(e){return"undefined"!=typeof t[e]})),this.isEnabled=e&&!n,this.isEnabled}},{key:"updateAnimationConstraints",value:function(){this.start=this.controller.group.timeParser.parse(this,this.jsonProps.start),this.end=this.controller.group.timeParser.parse(this,this.jsonProps.end),this.updateAnimatedValueConstraints()}},{key:"updateAnimatedValueConstraints",value:function(){for(var t in this.animValues){var e=this.jsonProps[t];this.animValues[t]=this.controller.group.expressionParser.parse(this,e)}}}]),t}();c.DATA_ATTRIBUTE="data-anim-tween",e.exports=c},{"../Model/AnimSystemModel":263,"../Model/EasingFunctions":264,"../Model/UnitBezier":268,"../utils/arrayToObject":274,"@marcom/sm-math-utils":280}],261:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("./Keyframe"),l=t("../Model/AnimSystemModel.js"),c=function(t){function e(t,n){i(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return o.keyframeType=l.KeyframeTypes.CSSClass,o._triggerType=e.TRIGGER_TYPE_CSS_CLASS,o.cssClass="",o.friendlyName="",o.style={on:null,off:null},o.toggle=!1,o.isApplied=!1,o}return o(e,t),a(e,[{key:"parseOptions",value:function(t){if(!this.controller._ownerIsElement)throw new TypeError("CSS Keyframes cannot be applied to JS Objects");if(t.x=void 0,t.y=void 0,t.scale=void 0,t.scaleX=void 0,t.scaleY=void 0,t.rotation=void 0,t.opacity=void 0,t.hold=void 0,void 0!==t.toggle&&(this.toggle=t.toggle),void 0!==t.cssClass)this._triggerType=e.TRIGGER_TYPE_CSS_CLASS,this.cssClass=t.cssClass,this.friendlyName="."+this.cssClass,void 0===this.controller.tweenProps.targetClasses&&(this.controller.tweenProps.targetClasses={add:[],remove:[]});else{if(void 0===t.style||!this.isValidStyleProperty(t.style))throw new TypeError("KeyframeCSSClass no 'cssClass` property found. If using `style` property its also missing or invalid");if(this._triggerType=e.TRIGGER_TYPE_STYLE_PROPERTY,this.style=t.style,this.friendlyName="style",this.toggle=void 0!==this.style.off||this.toggle,this.toggle&&void 0===this.style.off){this.style.off={};for(var n in this.style.on)this.style.off[n]=""}void 0===this.controller.tweenProps.targetStyles&&(this.controller.tweenProps.targetStyles={})}if(void 0===t.end&&(t.end=t.start),t.toggle=this.toggle,this._triggerType===e.TRIGGER_TYPE_CSS_CLASS)this.isApplied=this.controller.element.classList.contains(this.cssClass);else{var i=getComputedStyle(this.controller.element);this.isApplied=!0;for(var r in this.style.on)if(i[r]!==this.style.on[r]){this.isApplied=!1;break}}u.prototype.parseOptions.call(this,t),this.animValues[this.friendlyName]=[0,0],void 0===this.controller.tweenProps[this.friendlyName]&&(this.controller.tweenProps[this.friendlyName]=new l.TargetValue(0,1,(!1))),this.keyframeType=l.KeyframeTypes.CSSClass}},{key:"updateLocalProgress",value:function(t){this.isApplied&&!this.toggle||(this.start!==this.end?!this.isApplied&&t>=this.start&&t<=this.end?this._apply():this.isApplied&&this.toggle&&(t<this.start||t>this.end)&&this._unapply():!this.isApplied&&t>=this.start?this._apply():this.isApplied&&this.toggle&&t<this.start&&this._unapply())}},{key:"_apply",value:function(){if(this._triggerType===e.TRIGGER_TYPE_CSS_CLASS)this.controller.tweenProps.targetClasses.add.push(this.cssClass),this.controller.needsClassUpdate=!0;else{for(var t in this.style.on)this.controller.tweenProps.targetStyles[t]=this.style.on[t];this.controller.needsStyleUpdate=!0}this.isApplied=!0}},{key:"_unapply",value:function(){if(this._triggerType===e.TRIGGER_TYPE_CSS_CLASS)this.controller.tweenProps.targetClasses.remove.push(this.cssClass),this.controller.needsClassUpdate=!0;else{for(var t in this.style.off)this.controller.tweenProps.targetStyles[t]=this.style.off[t];this.controller.needsStyleUpdate=!0}this.isApplied=!1}},{key:"isValidStyleProperty",value:function(t){if(!t.hasOwnProperty("on"))return!1;if("object"!==s(t.on))throw new TypeError("KeyframeCSSClass `style` property should be in the form of: {on:{visibility:hidden, otherProperty: value}}");if(this.toggle&&t.hasOwnProperty("off")&&"object"!==s(t.off))throw new TypeError("KeyframeCSSClass `style` property should be in the form of: {on:{visibility:hidden, otherProperty: value}}");return!0}},{key:"reconcile",value:function(t,e){}},{key:"onDOMRead",value:function(t,e){}},{key:"updateAnimatedValueConstraints",value:function(){}}]),e}(u);c.TRIGGER_TYPE_CSS_CLASS=0,c.TRIGGER_TYPE_STYLE_PROPERTY=1,c.DATA_ATTRIBUTE="data-anim-classname",e.exports=c},{"../Model/AnimSystemModel.js":263,"./Keyframe":260}],262:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function h(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:h(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=t("./Keyframe"),l=t("../Model/AnimSystemModel.js"),c=function(t){function e(t,n){i(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return o.keyframeType=l.KeyframeTypes.Event,o.isApplied=!1,o.hasDuration=!1,o.isCurrentlyInRange=!1,o}return o(e,t),s(e,[{key:"parseOptions",value:function(t){t.x=void 0,t.y=void 0,t.scale=void 0,t.scaleX=void 0,t.scaleY=void 0,t.rotation=void 0,t.style=void 0,t.cssClass=void 0,t.rotation=void 0,t.opacity=void 0,t.hold=void 0,void 0===t.end&&(t.end=t.start),this.event=t.event,this.animValues[this.event]=[0,0],"undefined"==typeof this.controller.tweenProps[this.event]&&(this.controller.tweenProps[this.event]=new l.TargetValue(0,1,(!1))),a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"parseOptions",this).call(this,t),this.keyframeType=l.KeyframeTypes.Event}},{key:"updateLocalProgress",value:function(t){if(this.hasDuration){var e=this.isCurrentlyInRange,n=t>=this.start&&t<=this.end;if(e===n)return;return n&&!e?this._trigger(this.event+":enter"):e&&!n&&this._trigger(this.event+":exit"),void(this.isCurrentlyInRange=n)}!this.isApplied&&t>=this.start?(this._trigger(this.event),this.isApplied=!0):this.isApplied&&t<this.start&&(this._trigger(this.event+":reverse"),this.isApplied=!1)}},{key:"_trigger",value:function(t){this.controller.eventObject.event=t,this.controller.eventObject.keyframe=this,this.controller.trigger(t,this.controller.eventObject)}},{key:"updateAnimationConstraints",value:function(){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateAnimationConstraints",this).call(this),this.hasDuration=this.start!==this.end}},{key:"onDOMRead",value:function(t,e){}},{key:"reconcile",value:function(t,e){}},{key:"updateAnimatedValueConstraints",value:function(){}}]),e}(u);c.DATA_ATTRIBUTE="data-anim-event",e.exports=c},{"../Model/AnimSystemModel.js":263,"./Keyframe":260}],263:[function(t,e,n){"use strict";var i={GUI_INSTANCE:null,ANIM_INSTANCE:null,VIEWPORT_EMITTER_ELEMENT:void 0,LOCAL_STORAGE_KEYS:{GuiPosition:"GuiPosition-0"},RESIZE_TIMEOUT:-1,BREAKPOINTS:[{name:"S",longName:"small",mediaQuery:"only screen and (max-width: 735px)"},{name:"M",longName:"medium",mediaQuery:"only screen and (max-width: 1068px)"},{name:"L",longName:"xlarge",mediaQuery:"only screen and (min-width: 1442px)"},{name:"L",longName:"large",mediaQuery:"only screen and (min-width: 1069px)"}],getBreakpoint:function(){for(var t=0;t<i.BREAKPOINTS.length;t++){var e=i.BREAKPOINTS[t],n=window.matchMedia(e.mediaQuery);if(n.matches)return e.name}},KeyframeDefaults:{ease:.1,epsilon:.05,easeFunctionString:"linear",easeFunction:"linear",hold:!1,snapAtCreation:!1,toggle:!1,breakpointMask:"SMLX",event:"",disabledWhen:[],cssClass:""},KeyframeTypes:{Interpolation:0,InterpolationForward:1,CSSClass:2,Event:3},EVENTS:{ON_DOM_KEYFRAMES_CREATED:"ON_DOM_KEYFRAMES_CREATED",ON_DOM_GROUPS_CREATED:"ON_DOM_GROUPS_CREATED",ON_GROUP_CREATED:"ON_GROUP_CREATED",ON_KEYFRAME_UPDATED:"ON_KEYFRAME_UPDATED",ON_TIMELINE_START:"ON_TIMELINE_START",ON_TIMELINE_UPDATE:"ON_TIMELINE_UPDATE",ON_TIMELINE_COMPLETE:"ON_TIMELINE_COMPLETE"},PageEvents:{ON_SCROLL:"ON_SCROLL",ON_RESIZE_IMMEDIATE:"ON_RESIZE_IMMEDIATE",ON_RESIZE_DEBOUNCED:"ON_RESIZE_DEBOUNCED",ON_BREAKPOINT_CHANGE:"ON_BREAKPOINT_CHANGE"},KeyframeJSONReservedWords:["event","cssClass","style","relativeTo","start","end","epsilon","easeFunction","ease","breakpointMask","disabledWhen"],TargetValue:function(t,e,n){this.epsilon=parseFloat(e),this.snapAtCreation=n,this.initialValue=t,this.target=t,this.current=t},Timeline:function(){this.local=0,this.localUnclamped=0},ViewableRange:function(t,e){this.a=t.top-e,this.a<0&&(this.a=t.top),this.b=t.top,this.d=t.bottom,this.c=Math.max(this.d-e,this.b)},pageMetrics:new function(){this.scrollX=0,this.scrollY=0,this.windowWidth=0,this.windowHeight=0,this.documentOffsetX=0,this.documentOffsetY=0,this.previousBreakpoint="",this.breakpoint=""},EventObject:function(t){this.controller=t,this.element=this.controller.element,this.keyframe=null,this.event="",this.tweenProps=this.controller.tweenProps},KeyframeComparison:function(t,e){return t.start<e.start?-1:t.start>e.start?1:0},AnimInfo:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.isGroup=n,this.group=t,this.controller=e}};e.exports=i},{}],264:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function o(){i(this,o),this.linear=function(t){return t},this.easeInQuad=function(t){return t*t},this.easeOutQuad=function(t){return t*(2-t)},this.easeInOutQuad=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},this.easeInSin=function(t){return 1+Math.sin(Math.PI/2*t-Math.PI/2)},this.easeOutSin=function(t){return Math.sin(Math.PI/2*t)},this.easeInOutSin=function(t){return(1+Math.sin(Math.PI*t-Math.PI/2))/2},this.easeInElastic=function(t){return 0===t?t:(.04-.04/t)*Math.sin(25*t)+1},this.easeOutElastic=function(t){return.04*t/--t*Math.sin(25*t)},this.easeInOutElastic=function(t){return(t-=.5)<0?(.02+.01/t)*Math.sin(50*t):(.02-.01/t)*Math.sin(50*t)+1},this.easeOutBack=function(t){return t-=1,t*t*(2.70158*t+1.70158)+1},this.easeInCubic=function(t){return t*t*t},this.easeOutCubic=function(t){return--t*t*t+1},this.easeInOutCubic=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},this.easeInQuart=function(t){return t*t*t*t},this.easeOutQuart=function(t){return 1- --t*t*t*t},this.easeInOutQuart=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},this.easeInQuint=function(t){return t*t*t*t*t},this.easeOutQuint=function(t){return 1+--t*t*t*t*t},this.easeInOutQuint=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};e.exports=new r},{}],265:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("./AnimSystemModel"),s=function(t,e){return void 0===t||null===t?e:t},a=window.Symbol||function(){var t=0;return function(){return++t+""}}(),u=function(){function t(){i(this,t),this._symbols=[],this._lut={}}return r(t,[{key:"destroy",value:function(){for(var t=0,e=this._symbols.length;t<e;t++){var n=this._lut[this._symbols[t]];n.el=null}this._lut=null}},{key:"add",value:function(t){if(void 0===t._animSymbol&&(t._animSymbol=a()),void 0===this._lut[t._animSymbol]){var e=new l(t);this._refreshMetrics(e),this._lut[t._animSymbol]=e,this._symbols.push(t._animSymbol)}return this._lut[t._animSymbol]}},{key:"get",value:function(t){if(void 0===t._animSymbol)throw"ElementMetricsLookup Attempting to retrieve info on element which is not being tracked.";return this._lut[t._animSymbol]}},{key:"refreshAll",value:function(){for(var t=0,e=this._symbols.length;t<e;t++){var n=this._lut[this._symbols[t]];this._refreshMetrics(n)}}},{key:"refreshMetrics",value:function(t){var e=this.get(t);return e?this._refreshMetrics(e):null}},{key:"_refreshMetrics",value:function(t){var e=t.el;if(!(e instanceof Element))return t.width=s(e.width,0),t.height=s(e.height,0),t.top=s(e.top,0),t.left=s(e.left,0),t.right=t.left+t.width,void(t.bottom=t.top+t.height);if(void 0===e.offsetWidth){var n=e.getBoundingClientRect();return t.width=n.width,t.height=n.height,t.top=o.pageMetrics.scrollY+n.top,t.left=o.pageMetrics.scrollX+n.left,t.right=t.left+t.width,t.bottom=t.top+t.height,t}t.width=e.offsetWidth,t.height=e.offsetHeight,t.top=o.pageMetrics.documentOffsetY,t.left=o.pageMetrics.documentOffsetX;for(var i=e;i;)t.top+=i.offsetTop,t.left+=i.offsetLeft,i=i.offsetParent;return t.right=t.left+t.width,t.bottom=t.top+t.height,t}}]),t}(),l=function(){function t(e){i(this,t),this.el=e,this.top=0,this.bottom=0,this.left=0,this.right=0,this.height=0,this.width=0}return r(t,[{key:"toString",value:function(){return"top:"+this.top+", bottom:"+this.bottom+", left:"+this.left+", right:"+this.right+", height:"+this.height+", width:"+this.width}},{key:"toObject",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right,height:this.height,width:this.width}}},{key:"destroy",value:function(){this.el=null}}]),t}();e.exports=u},{"./AnimSystemModel":263}],266:[function(t,e,n){"use strict";var i=t("./AnimSystemModel"),r=t("../Keyframes/Keyframe"),o=t("../Keyframes/KeyframeDiscreteEvent"),s=t("../Keyframes/KeyframeCSSClass"),a=function(t){for(var e in t){var n=t[e];if(i.KeyframeJSONReservedWords.indexOf(e)===-1&&Array.isArray(n))return!0}return!1};e.exports=function(t){if(void 0!==t.cssClass||void 0!==t.style){if(a(t))throw"CSS Keyframes cannot tween values, please use multiple keyframes instead";return s}if(a(t))return r;if(t.event)return o;throw"Could not determine tween type based on "+JSON.stringify(t)}},{"../Keyframes/Keyframe":260,"../Keyframes/KeyframeCSSClass":261,"../Keyframes/KeyframeDiscreteEvent":262,"./AnimSystemModel":263}],267:[function(t,e,n){"use strict";e.exports=function(){for(var t="",e=0;e<8;e++){var n=16*Math.random()|0;8!==e&&12!==e&&16!==e&&20!==e||(t+="-"),t+=(12===e?4:16===e?3&n|8:n).toString(16)}return t}},{}],268:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=1e-5,s=Math.abs,a=5,u=function(){function t(e,n,r,o){i(this,t),this.cp=new Float32Array(6),this.cp[0]=3*e,this.cp[1]=3*(r-e)-this.cp[0],this.cp[2]=1-this.cp[0]-this.cp[1],this.cp[3]=3*n,this.cp[4]=3*(o-n)-this.cp[3],this.cp[5]=1-this.cp[3]-this.cp[4]}return r(t,[{key:"sampleCurveX",value:function(t){return((this.cp[2]*t+this.cp[1])*t+this.cp[0])*t}},{key:"sampleCurveY",value:function(t){return((this.cp[5]*t+this.cp[4])*t+this.cp[3])*t}},{key:"sampleCurveDerivativeX",value:function(t){return(3*this.cp[2]*t+2*this.cp[1])*t+this.cp[0]}},{key:"solveCurveX",value:function(t){var e,n,i,r,u,l;for(i=t,l=0;l<a;l++){if(r=this.sampleCurveX(i)-t,s(r)<o)return i;if(u=this.sampleCurveDerivativeX(i),s(u)<o)break;i-=r/u}if(e=0,n=1,i=t,i<e)return e;if(i>n)return n;for(;e<n;){if(r=this.sampleCurveX(i),s(r-t)<o)return i;t>r?e=i:n=i,i=.5*(n-e)+e}return i}},{key:"solve",value:function(t){return this.sampleCurveY(this.solveCurveX(t))}}]),t}(),l=/\d*\.?\d+/g;u.fromCSSString=function(t){var e=t.match(l);if(4!==e.length)throw"UnitBezier could not convert "+t+" to cubic-bezier";var n=e.map(Number),i=new u(n[0],n[1],n[2],n[3]);return i.solve.bind(i)},e.exports=u},{}],269:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=t("../Model/AnimSystemModel"),s=t("./Operations"),a=/([-|\+])?(\d+\.?\d*)(px|vh|vw|pw|ph|\%w|\%h|rw|rh|\%)?|(-|\+|\*|\/)/g,u=/^[-+]?(?:[0-9]{0,30}\.)?[0-9]{1,30}(?:[Ee][-+]?[1-2]?[0-9])?$/g,l=function(){function t(e){i(this,t),this.group=e}return r(t,[{key:"parse",value:function(t,e){if(Array.isArray(e))return this.parseArray(t,e);throw new Error("Keyframe value `"+e+"` is not supported. Only arrays in the form of [start,end] are currently supported")}},{key:"parseArray",value:function(t,e){var n=this.parseExpression(t,e[0]),i=this.parseExpression(t,e[1]);return[n,i]}},{key:"parseExpression",value:function(t,e){if(null===e)return 0;if("number"==typeof e)return e;for(var n=5,i=void 0;(i=e.indexOf("("))!==-1&&--n>0;){var r=this.captureParenthesis(e,i),o=this.parseExpression(t,r);e=e.replace("("+r+")",o)}for(var u=void 0,l=[];null!==(u=a.exec(e));)if(u.index===a.lastIndex&&a.lastIndex++,u[4])l.push(s.GetOpCode(u[4]));else{var c=u[1],h=parseFloat(u[2]),f=u[3];"-"===c&&(h*=-1);var d=this.parseSplitUnit(t,h,f);l.push(d)}var p=l.length;if(3===p&&"function"==typeof l[1])return l[1](l[0],l[2]);for(var m=0;m<p;m++)if("function"==typeof l[m]&&1===l[m].priority){var y=l[m-1],_=l[m+1],v=l[m](y,_);l[m-1]=null,l[m+0]=null,l[m+1]=v,m+=1}for(var g=0;null==l[g]&&g<p;)g+=1;var b=l[g],w=null,x=null;for(g+=1;g<p;g++)null!==l[g]?l[g]instanceof Function?w=l[g]:(null===x&&(x=l[g]),null!==x&&(w=w||s.add,b=w(b,x),w=null,x=null)):g+=1;return b}},{key:"parseSplitUnit",value:function(t,e,n){if("undefined"==typeof n)return parseFloat(e);switch(n){case"vh":return.01*e*o.pageMetrics.windowHeight;case"%":return.01*e*t.controller.elementMetrics.height;case"px":return e;case"rh":return.01*e*this.group.metrics.get(t.relativeTo).height;case"vw":return.01*e*o.pageMetrics.windowWidth;case"rw":return.01*e*this.group.metrics.get(t.relativeTo).width;case"%w":return.01*e*t.controller.elementMetrics.width;case"%h":return.01*e*t.controller.elementMetrics.height;case"pw":return.01*e*t.controller.parentElementMetrics.width;case"ph":return.01*e*t.controller.parentElementMetrics.height;default:throw new Error("ExpressionParser: no strategy found for unit `"+n+"` only `vh, vw, %, ph, pw` are supported")}}},{key:"captureParenthesis",value:function(t,e){for(var n="",i=0,r=!1,o=t.length,s=e;s<o;s++)if("("===t[s]?(i+=1,r&&(n+=t[s]),r=!0):")"===t[s]?(i-=1,0!==i&&(n+=t[s])):r&&(n+=t[s]),r&&0===i)return n}},{key:"isUnitlessNumber",value:function(t){return String(t).match(u)}},{key:"destroy",value:function(){this.group=null}},{key:"logParts",value:function(t){console.log(t.reduce(function(t,e){return"function"==typeof e?t+e.friendlyName+" ":t+(e+" ")},""))}}]),t}();e.exports=l},{"../Model/AnimSystemModel":263,"./Operations":270}],270:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function o(){i(this,o),this.add=function(t,e){return t+e},this.sub=function(t,e){return t-e},this.mul=function(t,e){return t*e},this.div=function(t,e){return t/e},this.add.friendlyName="add",this.sub.friendlyName="sub",this.mul.friendlyName="mul",this.div.friendlyName="div",this.add.priority=0,this.sub.priority=0,this.mul.priority=1,this.div.priority=1,this.GetOpCode=function(t){switch(t){case"-":return this.sub;case"+":return this.add;case"*":return this.mul;case"/":return this.div;default:throw new Error('AnimSystem.parsing.Operations - op code "'+t+"\" was found. Only '+ - * /' are supported. Check expression for typos/spacing issues")}}};e.exports=new r},{}],271:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i(this,t),this.group=e,this.groupIsTimeBased=n}return r(t,[{key:"parse",value:function(t,e){if("number"==typeof e)return e;var n=this.groupIsTimeBased?0:this.group.metrics.get(t.relativeTo).top,i=this.group.expressionParser.parseExpression(t,e),r=i+n;return this.group.convertScrollPositionToTValue(r)}},{key:"destroy",value:function(){this.group=null}}]),t}();e.exports=o},{}],272:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function v(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:v(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,l=t("@marcom/sm-math-utils"),c=t("./utils/arrayToObject"),h=t("./Model/AnimSystemModel"),f=t("./Model/ElementMetricsLookup"),d=t("./Parsing/ExpressionParser"),p=t("./Parsing/TimeParser"),m=t("./KeyframeController"),y={create:t("@marcom/ac-raf-emitter/RAFEmitter"),update:t("@marcom/ac-raf-emitter/update"),draw:t("@marcom/ac-raf-emitter/draw")},_=function(t){function e(t,n){i(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.anim=n,o.element=t,o.name=o.name||t.getAttribute("data-anim-scroll-group"),o.isEnabled=!0,o.timelines=new h.Timeline,o.metrics=new f,o.metrics.add(o.element),o.expressionParser=new d(o),o.timeParser=new p(o),o.boundsMin=0,o.boundsMax=0,o.lastPosition=0,o.timelineUpdateRequired=!1,o._keyframesDirty=!1,o.viewableRange=o.createViewableRange(),o.keyframeControllers=[],o.updateProgress(o.getPosition()),o.onDOMRead=o.onDOMRead.bind(o),o.onDOMWrite=o.onDOMWrite.bind(o),o.gui=null,o.finalizeInit(),o}return o(e,t),s(e,[{key:"finalizeInit",value:function(){this.element._animInfo=new h.AnimInfo(this,null,(!0)),this.setupRAFEmitter()}},{key:"destroy",value:function(){this.expressionParser.destroy(),this.expressionParser=null,this.timeParser.destroy(),this.timeParser=null;for(var t=0,n=this.keyframeControllers.length;t<n;t++)this.keyframeControllers[t].destroy();this.timelines=null,this.viewableRange=null,this.gui&&(this.gui.destroy(),this.gui=null),this.metrics.destroy(),this.metrics=null,this.rafEmitter.destroy(),this.rafEmitter=null,this.anim=null,this.element=null,this.isEnabled=!1,a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"removeKeyframeController",value:function(t){var e=this;this.keyframeControllers.includes(t)&&(t._allKeyframes=[],this.keyframesDirty=!0,y.update(function(){var n=e.keyframeControllers.indexOf(t);n!==-1&&(e.keyframeControllers.splice(n,1),t.destroy(),e.gui&&e.gui.create())}))}},{key:"remove",value:function(){this.anim.removeGroup(this)}},{key:"setupRAFEmitter",value:function(t){this.rafEmitter&&this.rafEmitter.destroy(),this.rafEmitter=t||new y.create,this.rafEmitter.on("update",this.onDOMRead),this.rafEmitter.on("draw",this.onDOMWrite)}},{key:"requestDOMChange",value:function(){return!!this.isEnabled&&this.rafEmitter.run()}},{key:"onDOMRead",value:function(){this.keyframesDirty&&this.onKeyframesDirty();for(var t=0,e=this.keyframeControllers.length;t<e;t++)this.keyframeControllers[t].onDOMRead(this.timelines)}},{key:"onDOMWrite",value:function(){for(var t=0,e=this.keyframeControllers.length;t<e;t++)this.keyframeControllers[t].onDOMWrite(this.timelines);this.needsUpdate()&&this.requestDOMChange()}},{key:"needsUpdate",value:function(){if(this._keyframesDirty)return!0;for(var t=0,e=this.keyframeControllers.length;t<e;t++)if(this.keyframeControllers[t].needsUpdate())return!0;return!1}},{key:"addKeyframe",value:function(t,e){var n=this.anim.getControllerForTarget(t);return null===n&&(n=new m(this,t),this.keyframeControllers.push(n)),this.keyframesDirty=!0,n.addKeyframe(e)}},{key:"forceUpdate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.recalculateActiveKeyframes,n=void 0!==e&&e,i=t.waitForNextUpdate,r=void 0===i||i;this.isEnabled&&(n&&this.determineActiveKeyframes(),this.metrics.refreshAll(),this.viewableRange=this.createViewableRange(),this.hasDuration()&&(this.timelineUpdateRequired=!0,r?this.keyframesDirty=!0:this.onKeyframesDirty()))}},{key:"onKeyframesDirty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.preventOnScroll,n=void 0!==e&&e;this.determineActiveKeyframes(),this.keyframesDirty=!1;for(var i=0,r=this.keyframeControllers.length;i<r;i++)this.keyframeControllers[i].updateAnimationConstraints();this.updateProgress(this.getPosition()),this.updateBounds(),n||this._onScroll(),this.gui&&this.gui.create()}},{key:"reconcile",value:function(){for(var t=0,e=this.keyframeControllers.length;t<e;t++)this.keyframeControllers[t].reconcile()}},{key:"determineActiveKeyframes",value:function(t){t=t||c(Array.from(document.documentElement.classList));for(var e=0,n=this.keyframeControllers.length;e<n;e++)this.keyframeControllers[e].determineActiveKeyframes(t)}},{key:"updateBounds",value:function(){if(0===this.keyframeControllers.length)return this.boundsMin=0,void(this.boundsMax=0);for(var t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},e=0,n=this.keyframeControllers.length;e<n;e++)this.keyframeControllers[e].getBounds(t);var i=this.convertTValueToScrollPosition(t.min),r=this.convertTValueToScrollPosition(t.max);r-i<h.pageMetrics.windowHeight?(t.min=this.convertScrollPositionToTValue(i-.5*h.pageMetrics.windowHeight),t.max=this.convertScrollPositionToTValue(r+.5*h.pageMetrics.windowHeight)):(t.min-=.001,t.max+=.001),this.boundsMin=t.min,this.boundsMax=t.max,this.timelineUpdateRequired=!0}},{key:"_onBreakpointChange",value:function(t,e){this.keyframesDirty=!0,this.determineActiveKeyframes()}},{key:"updateProgress",value:function(t){return this.hasDuration()?void(this.timelines.localUnclamped=(t-this.viewableRange.a)/(this.viewableRange.d-this.viewableRange.a)):void(this.timelines.local=this.timelines.localUnclamped=0)}},{key:"performTimelineDispatch",value:function(){for(var t=0,e=this.keyframeControllers.length;t<e;t++)this.keyframeControllers[t].updateLocalProgress(this.timelines.local);this.trigger(h.EVENTS.ON_TIMELINE_UPDATE,this.timelines.local),this.timelineUpdateRequired=!1,this.lastPosition!==this.timelines.local&&(this.lastPosition<=this.boundsMin&&this.timelines.localUnclamped>this.boundsMin?this.trigger(h.EVENTS.ON_TIMELINE_START,this):this.lastPosition>=this.boundsMin&&this.timelines.localUnclamped<this.boundsMin?this.trigger(h.EVENTS.ON_TIMELINE_START+":reverse",this):this.lastPosition<=this.boundsMax&&this.timelines.localUnclamped>this.boundsMax?this.trigger(h.EVENTS.ON_TIMELINE_COMPLETE,this):this.lastPosition>=this.boundsMax&&this.timelines.localUnclamped<this.boundsMax&&this.trigger(h.EVENTS.ON_TIMELINE_COMPLETE+":reverse",this)),null!==this.gui&&this.gui.onScrollUpdate(this.timelines)}},{key:"_onScroll",value:function(t){if(!this.isEnabled)return!1;void 0===t&&(t=this.getPosition()),this.updateProgress(t);var e=this.lastPosition===this.boundsMin||this.lastPosition===this.boundsMax,n=this.timelines.localUnclamped===this.boundsMin||this.timelines.localUnclamped===this.boundsMax;if(!this.timelineUpdateRequired&&e&&n)return void(this.timelines.local=this.timelines.localUnclamped);if(this.timelineUpdateRequired||this.timelines.localUnclamped>this.boundsMin&&this.timelines.localUnclamped<this.boundsMax)return this.timelines.local=l.clamp(this.timelines.localUnclamped,this.boundsMin,this.boundsMax),this.performTimelineDispatch(),this.requestDOMChange(),void(this.lastPosition=this.timelines.localUnclamped);var i=this.lastPosition>this.boundsMin&&this.lastPosition<this.boundsMax,r=this.timelines.localUnclamped<=this.boundsMin||this.timelines.localUnclamped>=this.boundsMax;return i&&r?(this.timelines.local=l.clamp(this.timelines.localUnclamped,this.boundsMin,this.boundsMax),this.performTimelineDispatch(),this.requestDOMChange(),void(this.lastPosition=this.timelines.localUnclamped)):void(null!==this.gui&&this.gui.onScrollUpdate(this.timelines))}},{key:"convertScrollPositionToTValue",value:function(t){return this.hasDuration()?l.map(t,this.viewableRange.a,this.viewableRange.d,0,1):0}},{key:"convertTValueToScrollPosition",value:function(t){return this.hasDuration()?l.map(t,0,1,this.viewableRange.a,this.viewableRange.d):0}},{key:"hasDuration",value:function(){return this.viewableRange.a!==this.viewableRange.d}},{key:"getPosition",value:function(){return h.pageMetrics.scrollY}},{key:"createViewableRange",value:function(){return new h.ViewableRange(this.metrics.get(this.element),h.pageMetrics.windowHeight)}},{key:"getControllerForTarget",value:function(t){return this.anim.getControllerForTarget(t)}},{key:"trigger",value:function(t,e){if("undefined"!=typeof this._events[t])for(var n=this._events[t].length-1;n>=0;n--)void 0!==e?this._events[t][n](e):this._events[t][n]()}},{key:"keyframesDirty",set:function(t){this._keyframesDirty=t,
this._keyframesDirty&&this.requestDOMChange()},get:function(){return this._keyframesDirty}},{key:"keyFrames",get:function(){return this.viewableRange}}]),e}(u);e.exports=_},{"./KeyframeController":259,"./Model/AnimSystemModel":263,"./Model/ElementMetricsLookup":265,"./Parsing/ExpressionParser":269,"./Parsing/TimeParser":271,"./utils/arrayToObject":274,"@marcom/ac-event-emitter-micro":66,"@marcom/ac-raf-emitter/RAFEmitter":115,"@marcom/ac-raf-emitter/draw":121,"@marcom/ac-raf-emitter/update":125,"@marcom/sm-math-utils":280}],273:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function d(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:d(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=t("./ScrollGroup"),l=t("@marcom/sm-math-utils"),c=0,h={create:t("@marcom/ac-raf-emitter/RAFEmitter")},f=function(t){function e(t,n){i(this,e),t||(t=document.createElement("div"),t.className="TimeGroup-"+c++);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return o.name=o.name||t.getAttribute("data-anim-time-group"),o.timeParser.groupIsTimeBased=!0,o._isPaused=!0,o._repeats=0,o._isReversed=!1,o._timeScale=1,o}return o(e,t),s(e,[{key:"finalizeInit",value:function(){if(!this.anim)throw"TimeGroup not instantiated correctly. Please use `AnimSystem.createTimeGroup(el)`";this.onPlayTimeUpdate=this.onPlayTimeUpdate.bind(this),a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"finalizeInit",this).call(this)}},{key:"progress",value:function(t){if(void 0===t)return 0===this.boundsMax?0:this.timelines.local/this.boundsMax;var e=t*this.boundsMax;this._onScroll(e)}},{key:"time",value:function(t){return void 0===t?this.timelines.local:(t=l.clamp(t,this.boundsMin,this.boundsMax),void this._onScroll(t))}},{key:"play",value:function(t){this.reversed(!1),this.isEnabled=!0,this._isPaused=!1,this.time(t),this._playheadEmitter.run()}},{key:"reverse",value:function(t){this.reversed(!0),this.isEnabled=!0,this._isPaused=!1,this.time(t),this._playheadEmitter.run()}},{key:"restart",value:function(){this._isReversed?(this.progress(1),this.reverse()):(this.progress(0),this.play())}},{key:"pause",value:function(t){this.time(t),this._isPaused=!0}},{key:"paused",value:function(t){return void 0===t?this._isPaused:(this._isPaused=t,this._isPaused||this.play(),this)}},{key:"onPlayTimeUpdate",value:function(t){if(!this._isPaused){var n=l.clamp(t.delta/1e3,0,.5);this._isReversed&&(n=-n);var i=this.time(),r=i+n*this._timeScale;if(this._repeats===e.REPEAT_FOREVER||this._repeats>0){var o=!1;!this._isReversed&&r>this.boundsMax?(r-=this.boundsMax,o=!0):this._isReversed&&r<0&&(r=this.boundsMax+r,o=!0),o&&(this._repeats=this._repeats===e.REPEAT_FOREVER?e.REPEAT_FOREVER:this._repeats-1)}this.time(r),this._playheadEmitter.run()}}},{key:"updateProgress",value:function(t){return this.hasDuration()?void(this.timelines.localUnclamped=t):void(this.timelines.local=this.timelines.localUnclamped=0)}},{key:"updateBounds",value:function(){if(0===this.keyframeControllers.length)return this.boundsMin=0,void(this.boundsMax=0);for(var t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},e=0,n=this.keyframeControllers.length;e<n;e++)this.keyframeControllers[e].getBounds(t);this.boundsMin=0,this.boundsMax=t.max,this.viewableRange.a=this.viewableRange.b=0,this.viewableRange.c=this.viewableRange.d=this.boundsMax,this.timelineUpdateRequired=!0}},{key:"setupRAFEmitter",value:function(t){this._playheadEmitter=new h.create,this._playheadEmitter.on("update",this.onPlayTimeUpdate),a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setupRAFEmitter",this).call(this,t)}},{key:"timeScale",value:function(t){return void 0===t?this._timeScale:(this._timeScale=t,this)}},{key:"repeats",value:function(t){return void 0===t?this._repeats:(this._repeats=t,this)}},{key:"reversed",value:function(t){return void 0===t?this._isReversed:(this._isReversed=t,this)}},{key:"getPosition",value:function(){return this.timelines.local}},{key:"convertScrollPositionToTValue",value:function(t){return t}},{key:"convertTValueToScrollPosition",value:function(t){return t}},{key:"hasDuration",value:function(){return this.boundsMax>0}},{key:"destroy",value:function(){this._playheadEmitter.destroy(),this._playheadEmitter=null,a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"duration",get:function(){return this.boundsMax}}]),e}(u);f.REPEAT_FOREVER=-1,e.exports=f},{"./ScrollGroup":272,"@marcom/ac-raf-emitter/RAFEmitter":115,"@marcom/sm-math-utils":280}],274:[function(t,e,n){"use strict";var i=function(t){return t.reduce(function(t,e){return t[e]=e,t},{})};e.exports=i},{}],275:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function d(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:d(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,l={create:t("@marcom/ac-raf-emitter/RAFEmitter"),update:t("@marcom/ac-raf-emitter/update"),draw:t("@marcom/ac-raf-emitter/draw")},c=function(){},h=0,f=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.el=t.el,n.gum=t.gum,n._keyframeController=null,n}return o(e,t),s(e,[{key:"destroy",value:function(){this.el=null,this.gum=null,this._keyframeController=null,a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"addKeyframe",value:function(t){var e=t.el||this.el;return this.anim.addKeyframe(e,t)}},{key:"addDiscreteEvent",value:function(t){t.event=t.event||"Generic-Event-Name-"+h++;var e=void 0!==t.end&&t.end!==t.start,n=this.addKeyframe(t);return e?(this._addCallbackIfNotNull(n,t.event+":enter",t.onEnter),this._addCallbackIfNotNull(n,t.event+":exit",t.onExit)):(this._addCallbackIfNotNull(n,t.event,t.onEvent),this._addCallbackIfNotNull(n,t.event+":reverse",t.onEventReverse)),n}},{key:"addRAFLoop",value:function(t){var e=["start","end"];if(!e.every(function(e){return t.hasOwnProperty(e)}))return void console.log("BubbleGum.BaseComponent::addRAFLoop required options are missing: "+e.join(" "));var n=new l.create;n.on("update",t.onUpdate||c),n.on("draw",t.onDraw||c),n.on("draw",function(){return n.run()});var i=t.onEnter,r=t.onExit;return t.onEnter=function(){n.run(),i?i():0},t.onExit=function(){n.cancel(),r?r():0},this.addDiscreteEvent(t)}},{key:"addContinuousEvent",value:function(t){t.onDraw||console.log("BubbleGum.BaseComponent::addContinuousEvent required option `onDraw` is missing. Consider using a regular keyframe if you do not need a callback"),t.event=t.event||"Generic-Event-Name-"+h++;var e=this.addKeyframe(t);return e.controller.on(t.event,t.onDraw),e}},{key:"mounted",value:function(){if(this.onComponentWillAppear||this.onComponentWillDisappear){this.onComponentWillAppear=this.onComponentWillAppear?this.onComponentWillAppear.bind(this):void 0,this.onComponentWillDisappear=this.onComponentWillDisappear?this.onComponentWillDisappear.bind(this):void 0;var t={start:"-100vh - 1px",end:"100% + 1px",event:"_appear"+h++};t.onEnter=this.onComponentWillAppear,t.onExit=this.onComponentWillDisappear,this.addDiscreteEvent(t)}}},{key:"_addCallbackIfNotNull",value:function(t,e,n){return!!n&&(t.controller.on(e,n),!0)}},{key:"onResizeImmediate",value:function(t){}},{key:"onResizeDebounced",value:function(t){}},{key:"onBreakpointChange",value:function(t){}},{key:"anim",get:function(){return this.gum.anim}},{key:"keyframeController",get:function(){return this._keyframeController||(this._keyframeController=this.anim.getControllerForTarget(this.el))}}]),e}(u);e.exports=f},{"@marcom/ac-event-emitter-micro":66,"@marcom/ac-raf-emitter/RAFEmitter":115,"@marcom/ac-raf-emitter/draw":121,"@marcom/ac-raf-emitter/update":125}],276:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("@marcom/ac-event-emitter-micro").EventEmitterMicro,u=t("@marcom/delayed-initializer"),l=t("@marcom/anim-system"),c=t("@marcom/anim-system/Model/AnimSystemModel"),h=t("./ComponentMap"),f={},d=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.el=t,n.anim=l,n.components=[],n.el.getAttribute("data-anim-scroll-group")||n.el.setAttribute("data-anim-scroll-group","bubble-gum-group"),l.on(c.EVENTS.ON_DOM_GROUPS_CREATED,function(t){n.componentsInitialized=!1,n.initComponents(),n.setupEvents()}),l.on(c.EVENTS.ON_DOM_KEYFRAMES_CREATED,function(){n.components.forEach(function(t){return t.mounted()}),n.trigger(e.EVENTS.DOM_COMPONENTS_MOUNTED)}),u.add(function(){return l.initialize()}),n}return o(e,t),s(e,[{key:"initComponents",value:function(){var t=Array.prototype.slice.call(this.el.querySelectorAll("[data-component-list]"));this.el.hasAttribute("[data-component-list]")&&t.push(this.el);for(var e=0;e<t.length;e++)for(var n=t[e],i=n.getAttribute("data-component-list"),r=i.split(" "),o=0,s=r.length;o<s;o++){var a=r[o];""!==a&&" "!==a&&this.addComponent({el:n,componentName:a})}this.componentsInitialized=!0}},{key:"setupEvents",value:function(){this.onResizeDebounced=this.onResizeDebounced.bind(this),this.onResizeImmediate=this.onResizeImmediate.bind(this),this.onBreakpointChange=this.onBreakpointChange.bind(this),l.on(c.PageEvents.ON_RESIZE_IMMEDIATE,this.onResizeImmediate),l.on(c.PageEvents.ON_RESIZE_DEBOUNCED,this.onResizeDebounced),l.on(c.PageEvents.ON_BREAKPOINT_CHANGE,this.onBreakpointChange)}},{key:"addComponent",value:function(t){var n=t.el,i=t.componentName,r=t.data;if(!h.hasOwnProperty(i))throw"BubbleGum::addComponent could not add component to"+n.className+" no component type '"+i+"'found!";var o=h[i];if(!e.componentIsSupported(o,i))return void 0===f[i]&&(console.log("BubbleGum::addComponent unsupported component '"+i+"'. Reason: '"+i+".IS_SUPPORTED' returned false"),f[i]=!0),null;var s=n.dataset.componentList||"";s.includes(i)||(n.dataset.componentList=s.split(" ").concat(i).join(" "));var a=new o({el:n,data:r,gum:this,pageMetrics:c.pageMetrics});return this.components.push(a),this.componentsInitialized&&a.mounted(),a}},{key:"removeComponent",value:function(t){var e=this.components.indexOf(t);e!==-1&&(this.components.splice(e,1),t.el.dataset.componentList=t.el.dataset.componentList.replace(t.constructor.name,""),t.destroy())}},{key:"getComponentOfType",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement,n="[data-component-list*="+t+"]",i=e.matches(n)?e:e.querySelector(n);return i?this.components.find(function(e){return e instanceof h[t]&&e.el===i}):null}},{key:"getComponentsOfType",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement,n="[data-component-list*="+t+"]",i=e.matches(n)?[e]:Array.from(e.querySelectorAll(n));return this.components.filter(function(e){return e instanceof h[t]&&i.includes(e.el)})}},{key:"getComponentsForElement",value:function(t){return this.components.filter(function(e){return e.el===t})}},{key:"onResizeImmediate",value:function(){this.components.forEach(function(t){return t.onResizeImmediate(c.pageMetrics)})}},{key:"onResizeDebounced",value:function(){this.components.forEach(function(t){return t.onResizeDebounced(c.pageMetrics)})}},{key:"onBreakpointChange",value:function(){this.components.forEach(function(t){return t.onBreakpointChange(c.pageMetrics)})}}],[{key:"componentIsSupported",value:function(t,e){var n=t.IS_SUPPORTED;if(void 0===n)return!0;if("function"!=typeof n)return console.error('BubbleGum::addComponent error in "'+e+'".IS_SUPPORTED - it should be a function which returns true/false'),!0;var i=t.IS_SUPPORTED();return void 0===i?(console.error('BubbleGum::addComponent error in "'+e+'".IS_SUPPORTED - it should be a function which returns true/false'),!0):i}}]),e}(a);d.EVENTS={DOM_COMPONENTS_MOUNTED:"DOM_COMPONENTS_MOUNTED"},e.exports=d},{"./ComponentMap":277,"@marcom/ac-event-emitter-micro":66,"@marcom/anim-system":249,"@marcom/anim-system/Model/AnimSystemModel":263,"@marcom/delayed-initializer":279}],277:[function(t,e,n){"use strict";e.exports={BaseComponent:t("./BaseComponent")}},{"./BaseComponent":275}],278:[function(t,e,n){"use strict";var i={create:t("gl-mat4/create"),invert:t("gl-mat4/invert"),clone:t("gl-mat4/clone"),transpose:t("gl-mat4/transpose")},r={create:t("gl-vec3/create"),dot:t("gl-vec3/dot"),normalize:t("gl-vec3/normalize"),length:t("gl-vec3/length"),cross:t("gl-vec3/cross"),fromValues:t("gl-vec3/fromValues")},o={create:t("gl-vec4/create"),transformMat4:t("gl-vec4/transformMat4"),fromValues:t("gl-vec4/fromValues")},s=(Math.PI/180,180/Math.PI),a=0,u=1,l=3,c=4,h=5,f=7,d=11,p=12,m=13,y=15,_=function(t,e){e=e||!1;for(var n=i.clone(t),a=r.create(),u=r.create(),c=r.create(),h=o.create(),p=o.create(),m=(r.create(),0);m<16;m++)n[m]/=n[y];var _=i.clone(n);_[l]=0,_[f]=0,_[d]=0,_[y]=1;var w=(n[3],n[7],n[11],n[12]),x=n[13],E=n[14],k=(n[15],o.create());if(b(n[l])&&b(n[f])&&b(n[d]))h=o.fromValues(0,0,0,1);else{k[0]=n[l],k[1]=n[f],k[2]=n[d],k[3]=n[y];var S=i.invert(i.create(),_),C=i.transpose(i.create(),S);h=o.transformMat4(h,k,C)}a[0]=w,a[1]=x,a[2]=E;var T=[r.create(),r.create(),r.create()];T[0][0]=n[0],T[0][1]=n[1],T[0][2]=n[2],T[1][0]=n[4],T[1][1]=n[5],T[1][2]=n[6],T[2][0]=n[8],T[2][1]=n[9],T[2][2]=n[10],u[0]=r.length(T[0]),r.normalize(T[0],T[0]),c[0]=r.dot(T[0],T[1]),T[1]=v(T[1],T[0],1,-c[0]),u[1]=r.length(T[1]),r.normalize(T[1],T[1]),c[0]/=u[1],c[1]=r.dot(T[0],T[2]),T[2]=v(T[2],T[0],1,-c[1]),c[2]=r.dot(T[1],T[2]),T[2]=v(T[2],T[1],1,-c[2]),u[2]=r.length(T[2]),r.normalize(T[2],T[2]),c[1]/=u[2],c[2]/=u[2];var A=r.cross(r.create(),T[1],T[2]);if(r.dot(T[0],A)<0)for(m=0;m<3;m++)u[m]*=-1,T[m][0]*=-1,T[m][1]*=-1,T[m][2]*=-1;p[0]=.5*Math.sqrt(Math.max(1+T[0][0]-T[1][1]-T[2][2],0)),p[1]=.5*Math.sqrt(Math.max(1-T[0][0]+T[1][1]-T[2][2],0)),p[2]=.5*Math.sqrt(Math.max(1-T[0][0]-T[1][1]+T[2][2],0)),p[3]=.5*Math.sqrt(Math.max(1+T[0][0]+T[1][1]+T[2][2],0)),T[2][1]>T[1][2]&&(p[0]=-p[0]),T[0][2]>T[2][0]&&(p[1]=-p[1]),T[1][0]>T[0][1]&&(p[2]=-p[2]);var M=o.fromValues(p[0],p[1],p[2],2*Math.acos(p[3])),P=g(p);return e&&(c[0]=Math.round(c[0]*s*100)/100,c[1]=Math.round(c[1]*s*100)/100,c[2]=Math.round(c[2]*s*100)/100,P[0]=Math.round(P[0]*s*100)/100,P[1]=Math.round(P[1]*s*100)/100,P[2]=Math.round(P[2]*s*100)/100,M[3]=Math.round(M[3]*s*100)/100),{translation:a,scale:u,skew:c,perspective:h,quaternion:p,eulerRotation:P,axisAngle:M}},v=function(t,e,n,i){var o=r.create();return o[0]=n*t[0]+i*e[0],o[1]=n*t[1]+i*e[1],o[2]=n*t[2]+i*e[2],o},g=function(t){var e,n,i,o=t[3]*t[3],s=t[0]*t[0],a=t[1]*t[1],u=t[2]*t[2],l=s+a+u+o,c=t[0]*t[1]+t[2]*t[3];return c>.499*l?(n=2*Math.atan2(t[0],t[3]),i=Math.PI/2,e=0,r.fromValues(e,n,i)):c<-.499*l?(n=-2*Math.atan2(t[0],t[3]),i=-Math.PI/2,e=0,r.fromValues(e,n,i)):(n=Math.atan2(2*t[1]*t[3]-2*t[0]*t[2],s-a-u+o),i=Math.asin(2*c/l),e=Math.atan2(2*t[0]*t[3]-2*t[1]*t[2],-s+a-u+o),r.fromValues(e,n,i))},b=function(t){return Math.abs(t)<1e-4},w=function(t){var e=String(getComputedStyle(t).transform).trim(),n=i.create();if("none"===e||""===e)return n;var r,o,s=e.slice(0,e.indexOf("("));if("matrix3d"===s)for(r=e.slice(9,-1).split(","),o=0;o<r.length;o++)n[o]=parseFloat(r[o]);else{if("matrix"!==s)throw new TypeError("Invalid Matrix Value");for(r=e.slice(7,-1).split(","),o=r.length;o--;)r[o]=parseFloat(r[o]);n[a]=r[0],n[u]=r[1],n[p]=r[4],n[c]=r[2],n[h]=r[3],n[m]=r[5]}return n};e.exports=function(t,e){var n=w(t);return _(n,e)}},{"gl-mat4/clone":285,"gl-mat4/create":286,"gl-mat4/invert":287,"gl-mat4/transpose":288,"gl-vec3/create":289,"gl-vec3/cross":290,"gl-vec3/dot":291,"gl-vec3/fromValues":292,"gl-vec3/length":293,"gl-vec3/normalize":294,"gl-vec4/create":295,"gl-vec4/fromValues":296,"gl-vec4/transformMat4":297}],279:[function(t,e,n){"use strict";var i=!1,r=!1,o=[];e.exports={NUMBER_OF_FRAMES_TO_WAIT:30,add:function(t){var e=this;if(r&&t(),o.push(t),!i){i=!0;var n=document.documentElement.scrollHeight,s=0,a=function u(){var t=document.documentElement.scrollHeight;if(n!==t)s=0;else if(s++,s>=e.NUMBER_OF_FRAMES_TO_WAIT)return void o.forEach(function(t){return t()});n=t,requestAnimationFrame(u)};requestAnimationFrame(a)}}}},{}],280:[function(t,e,n){"use strict";e.exports={lerp:function(t,e,n){return e+(n-e)*t},map:function(t,e,n,i,r){return i+(r-i)*(t-e)/(n-e)},mapClamp:function(t,e,n,i,r){var o=i+(r-i)*(t-e)/(n-e);return Math.max(i,Math.min(r,o))},norm:function(t,e,n){return(t-e)/(n-e)},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},randFloat:function(t,e){return Math.random()*(e-t)+t},randInt:function(t,e){return Math.floor(Math.random()*(e-t)+t)}}},{}],281:[function(t,e,n){"use strict";e.exports={browser:{safari:!1,chrome:!1,firefox:!1,ie:!1,opera:!1,android:!1,edge:!1,version:{string:"",major:0,minor:0,patch:0,documentMode:!1}},os:{osx:!1,ios:!1,android:!1,windows:!1,linux:!1,fireos:!1,chromeos:!1,version:{string:"",major:0,minor:0,patch:0}}}},{}],282:[function(t,e,n){"use strict";e.exports={browser:[{name:"edge",userAgent:"Edge",version:["rv","Edge"],test:function(t){return t.ua.indexOf("Edge")>-1||"Mozilla/5.0 (Windows NT 10.0; Win64; x64)"===t.ua}},{name:"chrome",userAgent:"Chrome"},{name:"firefox",test:function(t){return t.ua.indexOf("Firefox")>-1&&t.ua.indexOf("Opera")===-1},version:"Firefox"},{name:"android",userAgent:"Android"},{name:"safari",test:function(t){return t.ua.indexOf("Safari")>-1&&t.vendor.indexOf("Apple")>-1},version:"Version"},{name:"ie",test:function(t){return t.ua.indexOf("IE")>-1||t.ua.indexOf("Trident")>-1},version:["MSIE","rv"],parseDocumentMode:function(){var t=!1;return document.documentMode&&(t=parseInt(document.documentMode,10)),t}},{name:"opera",userAgent:"Opera",version:["Version","Opera"]}],os:[{name:"windows",test:function(t){return t.ua.indexOf("Windows")>-1},version:"Windows NT"},{name:"osx",userAgent:"Mac",test:function(t){return t.ua.indexOf("Macintosh")>-1}},{name:"ios",test:function(t){return t.ua.indexOf("iPhone")>-1||t.ua.indexOf("iPad")>-1},version:["iPhone OS","CPU OS"]},{name:"linux",userAgent:"Linux",test:function(t){return(t.ua.indexOf("Linux")>-1||t.platform.indexOf("Linux")>-1)&&t.ua.indexOf("Android")===-1}},{name:"fireos",test:function(t){return t.ua.indexOf("Firefox")>-1&&t.ua.indexOf("Mobile")>-1},version:"rv"},{name:"android",userAgent:"Android",test:function(t){return t.ua.indexOf("Android")>-1}},{name:"chromeos",userAgent:"CrOS"}]}},{}],283:[function(t,e,n){"use strict";function i(t){return new RegExp(t+"[a-zA-Z\\s/\\:]+([0-9_/\\.]+)","i")}function r(t,e){if("function"==typeof t.parseVersion)return t.parseVersion(e);var n=t.version||t.userAgent;"string"==typeof n&&(n=[n]);for(var r,o=n.length,s=0;s<o;s++)if(r=e.match(i(n[s])),r&&r.length>1)return r[1].replace(/_/g,".");return!1}function o(t,e,n){for(var i,o,s=t.length,a=0;a<s;a++)if("function"==typeof t[a].test?t[a].test(n)===!0&&(i=t[a].name):n.ua.indexOf(t[a].userAgent)>-1&&(i=t[a].name),i){if(e[i]=!0,o=r(t[a],n.ua),"string"==typeof o){var u=o.split(".");e.version.string=o,u&&u.length>0&&(e.version.major=parseInt(u[0]||0),e.version.minor=parseInt(u[1]||0),e.version.patch=parseInt(u[2]||0))}else"edge"===i&&(e.version.string="12.0.0",e.version.major="12",e.version.minor="0",e.version.patch="0");return"function"==typeof t[a].parseDocumentMode&&(e.version.documentMode=t[a].parseDocumentMode()),e}return e}function s(t){var e={};return e.browser=o(u.browser,a.browser,t),e.os=o(u.os,a.os,t),e}var a=t("./defaults"),u=t("./dictionary");e.exports=s},{"./defaults":281,"./dictionary":282}],284:[function(t,e,n){"use strict";var i={ua:window.navigator.userAgent,platform:window.navigator.platform,vendor:window.navigator.vendor};e.exports=t("./parseUserAgent")(i)},{"./parseUserAgent":283}],285:[function(t,e,n){function i(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}e.exports=i},{}],286:[function(t,e,n){function i(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}e.exports=i},{}],287:[function(t,e,n){function i(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],d=e[11],p=e[12],m=e[13],y=e[14],_=e[15],v=n*a-i*s,g=n*u-r*s,b=n*l-o*s,w=i*u-r*a,x=i*l-o*a,E=r*l-o*u,k=c*m-h*p,S=c*y-f*p,C=c*_-d*p,T=h*y-f*m,A=h*_-d*m,M=f*_-d*y,P=v*M-g*A+b*T+w*C-x*S+E*k;return P?(P=1/P,t[0]=(a*M-u*A+l*T)*P,t[1]=(r*A-i*M-o*T)*P,t[2]=(m*E-y*x+_*w)*P,t[3]=(f*x-h*E-d*w)*P,t[4]=(u*C-s*M-l*S)*P,t[5]=(n*M-r*C+o*S)*P,t[6]=(y*b-p*E-_*g)*P,t[7]=(c*E-f*b+d*g)*P,t[8]=(s*A-a*C+l*k)*P,t[9]=(i*C-n*A-o*k)*P,t[10]=(p*x-m*b+_*v)*P,t[11]=(h*b-c*x-d*v)*P,t[12]=(a*S-s*T-u*k)*P,t[13]=(n*T-i*S+r*k)*P,t[14]=(m*g-p*w-y*v)*P,t[15]=(c*w-h*g+f*v)*P,t):null}e.exports=i},{}],288:[function(t,e,n){function i(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=o,t[11]=e[14],t[12]=r,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}e.exports=i},{}],289:[function(t,e,n){function i(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t}e.exports=i},{}],290:[function(t,e,n){function i(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],u=n[2];return t[0]=r*u-o*a,t[1]=o*s-i*u,t[2]=i*a-r*s,t}e.exports=i},{}],291:[function(t,e,n){function i(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}e.exports=i},{}],292:[function(t,e,n){function i(t,e,n){var i=new Float32Array(3);return i[0]=t,i[1]=e,i[2]=n,i}e.exports=i},{}],293:[function(t,e,n){function i(t){var e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)}e.exports=i},{}],294:[function(t,e,n){function i(t,e){var n=e[0],i=e[1],r=e[2],o=n*n+i*i+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}e.exports=i},{}],295:[function(t,e,n){function i(){var t=new Float32Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}e.exports=i},{}],296:[function(t,e,n){function i(t,e,n,i){var r=new Float32Array(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r}e.exports=i},{}],297:[function(t,e,n){function i(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*s,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*s,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*s,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*s,t}e.exports=i},{}],298:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("@marcom/bubble-gum/BaseComponent"),l=i(u),c=t("@marcom/anim-system/Model/AnimSystemModel"),h=i(c),f=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.video=n.el.querySelector("video"),n.videoIsReady=!1,n.keyframes=[],n.onVideoIsReady=n.onVideoIsReady.bind(n),n}return s(e,t),a(e,[{key:"mounted",value:function(){return this.disableSectionVideoComponent(),this.videoIsReady=this.video.readyState>=3,this.videoIsReady?void this.onVideoIsReady():(this.video.src=this.getVideoSrc(),this.video.addEventListener("canplay",this.onVideoIsReady),void this.video.addEventListener("canplaythrough",this.onVideoIsReady))}},{key:"onVideoIsReady",value:function(t){var e=this;this.videoIsReady=!0,this.video.removeEventListener("canplay",this.onVideoIsReady),this.video.removeEventListener("canplaythrough",this.onVideoIsReady);var n={event:"ScrubVideo",ease:1,ScrubVideoProgress:[0,this.video.duration],onDraw:function(t){e.video.currentTime=t.tweenProps.ScrubVideoProgress.current}},i=JSON.parse(this.el.getAttribute("data-options-L")),r=this.addContinuousEvent(Object.assign(i,n));this.keyframes.push(r),i=JSON.parse(this.el.getAttribute("data-options-M")),r=this.addContinuousEvent(Object.assign(i,n)),this.keyframes.push(r),i=JSON.parse(this.el.getAttribute("data-options-S")),r=this.addContinuousEvent(Object.assign(i,n)),this.keyframes.push(r)}},{key:"disableSectionVideoComponent",value:function(){var t=this.gum.getComponentOfType("SectionVideoComponent",this.el);t.mediaController={}}},{key:"getVideoSrc",value:function(){var t=this.video.getAttribute("data-src-"+h["default"].pageMetrics.breakpoint),e=window.devicePixelRatio>1?"_2x":"";return t.replace("_2x",e)}},{key:"initiateFallbackState",value:function(){document.documentElement.classList.remove("scrubbable-video"),document.documentElement.classList.add("no-scrubbable-video"),this.destroy()}},{key:"onBreakpointChange",value:function(){this.initiateFallbackState()}},{key:"onOrientationChange",value:function(){this.initiateFallbackState()}},{key:"destroy",value:function(){null!==this.video&&(this.keyframes.forEach(function(t){t.remove()}),this.video.removeEventListener("canplay",this.onVideoIsReady),this.video.removeEventListener("canplaythrough",this.onVideoIsReady),this.video=null)}}],[{key:"IS_SUPPORTED",value:function(){return"S"===h["default"].pageMetrics.breakpoint&&(document.documentElement.classList.remove("scrubbable-video"),document.documentElement.classList.add("no-scrubbable-video")),document.documentElement.classList.contains("scrubbable-video")}}]),e}(l["default"]);n["default"]=f},{"@marcom/anim-system/Model/AnimSystemModel":263,"@marcom/bubble-gum/BaseComponent":275}],299:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("@marcom/bubble-gum/BaseComponent"),l=i(u),c=t("@marcom/ac-raf-emitter/draw"),h=i(c),f={OPACITY_TRANSFORM_IN:"js-opacity-transform-animation-in",TRANSLATE:"js-hero-hardware-translate",REMOVE_TRANSITION:"js-remove-transition",FULL_SCALE:"js-full-scale"},d={START:"10rh",END:"100rh"},p=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.documentTokenList=document.documentElement.classList,n.heroAnimationComplete=!1,n.heroAnimationContainer=n.el.querySelector(".hero-animation-container"),n.airTextImage=n.el.querySelector(".image-hero-air-text"),n.resolvedImage=n.el.querySelector(".image-hero-resolved"),n.airText=n.el.querySelector(".air-text"),n.headlineContainer=n.el.querySelector(".hero-headline-container"),n.copyContainer=n.el.querySelector(".hero-copy-container"),n.heroHardware=n.el.querySelectorAll(".hero-hardware-top-bottom"),n.heroHardwareReflection=n.el.querySelectorAll(".image-hero-reflect"),n.heroHardwareReflections=n.el.querySelectorAll(".image-hero-reflection"),n}return s(e,t),a(e,[{key:"mounted",value:function(){var t=this;(0,h["default"])(function(){(0,h["default"])(function(){(0,h["default"])(function(){t.startAnimation()})})})}},{key:"startAnimation",value:function(){this.mediaFallback||(this.createKeyframes(),this.createScrollEvent())}},{key:"createKeyframes",value:function(){var t=this;this.hardwareMovementAnimation(),setTimeout(function(){t.airSequence(),t.heroAnimationComplete=!0},700)}},{key:"createScrollEvent",value:function(){var t=this;this.scrollKeyframes=this.addDiscreteEvent({start:d.START,end:d.END,event:"scroll",onEnter:function(e){t.textSequence()},onExit:function(e){t.resolveComponent()}})}},{key:"hardwareMovementAnimation",value:function(){this.resolvedImage.classList.add(f.TRANSLATE)}},{key:"airSequence",value:function(){var t=this;this.shouldFallback()||(this.airTextImage.classList.add(f.TRANSLATE),setTimeout(function(){t.reflectionSequence()},500))}},{key:"reflectionSequence",value:function(){if(!this.shouldFallback())for(var t=0;t<this.heroHardwareReflections.length;t++)this.heroHardwareReflections[t].classList.add(f.FULL_SCALE)}},{key:"textSequence",value:function(){var t=this;this.headlineContainer.classList.add(f.OPACITY_TRANSFORM_IN),this.copyContainer.classList.add(f.OPACITY_TRANSFORM_IN),this.textAnimated=!0,setTimeout(function(){t.resolveComponent();
},5e3)}},{key:"shouldFallback",value:function(){return this.documentTokenList.contains("ie")||this.documentTokenList.contains("edge")||this.documentTokenList.contains("reduced-motion")}},{key:"resolveComponent",value:function(){this.resolvedImage.classList.add(f.REMOVE_TRANSITION)}},{key:"onBreakpointChange",value:function(t){this.resolveComponent()}},{key:"onResizeImmediate",value:function(){this.resolveComponent()}}],[{key:"IS_SUPPORTED",value:function(){return!0}}]),e}(l["default"]);n["default"]=p},{"@marcom/ac-raf-emitter/draw":121,"@marcom/bubble-gum/BaseComponent":275}],300:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function g(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:g(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},l=t("@marcom/bubble-gum/BaseComponent"),c=i(l),h=t("@marcom/ac-progressive-image-loader/ProgressiveImageLoader"),f=i(h),d={imageAnimate:!1},p={SETTINGS:"data-progressive-image-options"},m={EVENT_NAME:"progressive-image-loading",START:"-170vh",END:"100vh + 100%"},y="progressive-image",_={IMAGE_COMPLETE:"complete"},v=function(t){function e(){r(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));return t.imagesLoaded=!1,t.settings=new Object,t.customComponentSettings=t.el.getAttribute(p.SETTINGS),t.loaderSettings={container:t.el,includeContainer:!0},t.documentTokenList=document.documentElement.classList,t.isProgressiveImageAvailable=t.documentTokenList.contains(y),t.componentHasCustomSettings=t.el.hasAttribute(p.SETTINGS),t._onProgressiveImageComplete=t._onProgressiveImageComplete.bind(t),t._onComponentInViewHandler=t._onComponentInViewHandler.bind(t),t._initialize(),t}return s(e,t),a(e,[{key:"name",value:function(){return"ProgressiveImageComponent"}},{key:"_initialize",value:function(){this.progressiveImageLoader=new f["default"](this.loaderSettings),this.componentHasCustomSettings&&this._overwriteDefaultOptions(),this._setComponentEventHandlers()}},{key:"_setComponentEventHandlers",value:function(){this.progressiveImageLoader.on(_.IMAGE_COMPLETE,this._onProgressiveImageComplete)}},{key:"mounted",value:function(){this.engagementKeyframe=this.addDiscreteEvent({event:m.EVENT_NAME,start:m.START,end:m.END,onEnter:this._onComponentInViewHandler})}},{key:"_onComponentInViewHandler",value:function(){this.isProgressiveImageAvailable&&!this.imagesLoaded&&this.progressiveImageLoader.load(Object.assign({},d,this.settings))}},{key:"_onProgressiveImageComplete",value:function(){this.imagesLoaded=!0}},{key:"_overwriteDefaultOptions",value:function(){try{var t=JSON.parse(this.customComponentSettings);Object.assign(this.settings,d,t)}catch(e){throw new Error("ProgressiveImageComponent::overwriteDefaultOptions. Invalid custom options.")}}},{key:"destroy",value:function(){this.progressiveImageLoader.destroy(),this.progressiveImageLoader=null,this.imagesLoaded=!1,u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}(c["default"]);n["default"]=v},{"@marcom/ac-progressive-image-loader/ProgressiveImageLoader":108,"@marcom/bubble-gum/BaseComponent":275}],301:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("@marcom/bubble-gum/BaseComponent"),l=i(u),c=t("@marcom/ac-video"),h=t("@marcom/anim-system/Model/AnimSystemModel"),f=i(h),d=t("@marcom/ac-raf-emitter/draw"),p=(i(d),{ENDFRAME:"image-endframe",HIDECHILDREN:"hide-children",PLAYED:"has-played",ENDED:"has-ended"}),m=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.documentTokenList=document.documentElement.classList,n.videoElm=n.el.querySelector(".video-elm"),n.dynamicEngagement=n.el.getAttribute("data-engage-threshhold")||"-100vh",n.sectionVideoRemoved=!1,n.addVideoEvents=n.addVideoEvents.bind(n),n.determineViewport(),n}return s(e,t),a(e,[{key:"mounted",value:function(){var t=this;return this.documentTokenList.contains("no-inline-video")?void this.removeVideo(0):void this.addDiscreteEvent({start:"-200vh",end:"0",event:"video",onEnter:function(e){t.setUpVideo()}})}},{key:"determineViewport",value:function(){switch(this.endExt=window.devicePixelRatio>1?"_2x.mp4":".mp4",f["default"].pageMetrics.breakpoint){case"L":this.videoPath=this.videoElm.getAttribute("data-video-path")+"large"+this.endExt;break;case"M":this.videoPath=this.videoElm.getAttribute("data-video-path")+"medium"+this.endExt;break;case"S":this.videoPath=this.videoElm.getAttribute("data-video-path")+"small"+this.endExt}}},{key:"setUpVideo",value:function(){this.mediaController||(this.videoPlayer=c.Player.create({src:this.videoPath,autoplay:!1,sharing:!1,controls:!0}),this.videoPlayer._videoImpl.el.removeAttribute("controls"),this.videoPlayer.appendTo(this.videoElm),this.mediaController=this.videoPlayer.el.querySelector(".ac-video-media-controller"),this.videoPlayer.on("canplaythrough",this.addVideoEvents))}},{key:"addVideoEvents",value:function(){this.mediaController&&(this.createKeyframes(),this.playedEvent(),this.endedEvent())}},{key:"createKeyframes",value:function(){var t=this;this.triggerKeyframe=this.addDiscreteEvent({start:this.dynamicEngagement,end:"50vh",event:"range",onEnter:function(e){t.handlePlay()}})}},{key:"playedEvent",value:function(){var t=this;this.videoPlayer.on("playing",function(){t.el.classList.add(p.PLAYED)})}},{key:"endedEvent",value:function(){var t=this;this.videoPlayer.on("ended",function(){t.removeVideo(2e3),t.el.classList.add(p.ENDED)})}},{key:"removeVideo",value:function(t){var e=this;this.videoElm.removeAttribute("style"),this.videoElm.classList.add(p.ENDFRAME);var n=this.el.querySelector(".ac-video-media-controller");n&&(setTimeout(function(){e.sectionVideoRemoved||void 0===e.videoPlayer||(e.videoPlayer.el.removeChild(n),e.sectionVideoRemoved=!0)},t),this.triggerKeyframe&&this.triggerKeyframe.remove())}},{key:"handlePlay",value:function(){this.hasPlayed||(this.videoElm.style.backgroundImage="none",this.mediaController.muted=!0,this.mediaController.setAttribute("playsinline",!0),this.videoPlayer.play(),this.hasPlayed=!0)}},{key:"resizeFallback",value:function(){this.videoElm.removeAttribute("style"),this.videoElm.classList.add(p.ENDFRAME),this.videoElm.classList.add(p.HIDECHILDREN),this.removeVideo(0),this.hasPlayed=!0,this.el.classList.add(p.PLAYED),this.el.classList.add(p.ENDED),this.mediaController=!0}},{key:"onBreakpointChange",value:function(t){this.resizeFallback()}}]),e}(l["default"]);n["default"]=m},{"@marcom/ac-raf-emitter/draw":121,"@marcom/ac-video":172,"@marcom/anim-system/Model/AnimSystemModel":263,"@marcom/bubble-gum/BaseComponent":275}],302:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("@marcom/bubble-gum/BaseComponent"),l=i(u),c={HEADLINE_TRANSFORM_UP:"js-text-animation-item-animate",REMOVE_CHANGE:"js-remove-changes",REVEAL_BADGE:"js-show-badge"},h={START:"-90vh",END:"30vh",DELAY:200},f=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.textAnimationItem=n.el.querySelectorAll(".text-animation-item"),n.badgeCaptions=n.el.querySelectorAll(".badge-caption"),n.figCaptions=n.el.querySelectorAll(".hide-figcaption"),n}return s(e,t),a(e,[{key:"mounted",value:function(){this.addKeyframes()}},{key:"addKeyframes",value:function(){var t=this;this.addDiscreteEvent({start:h.START,end:h.END,event:"text",onEnter:function(){t.addAnimateClasses()},onExit:function(){t.removeAnimations()}})}},{key:"addAnimateClasses",value:function(){for(var t=this,e=function(e){setTimeout(function(){t.textAnimationItem[e].classList.add(c.HEADLINE_TRANSFORM_UP)},e*h.DELAY)},n=0;n<this.textAnimationItem.length;n++)e(n);for(var i=function(e){setTimeout(function(){t.badgeCaptions[e].classList.add(c.REVEAL_BADGE)},500)},n=0;n<this.badgeCaptions.length;n++)i(n);for(var r=function(e){return t.figCaptions.length?void setTimeout(function(){t.figCaptions[e].classList.add(c.REVEAL_BADGE)},500):"break"},n=0;n<this.figCaptions.length;n++){var o=r(n);if("break"===o)break}}},{key:"onComponentWillDisappear",value:function(){this.removeAnimations()}},{key:"removeAnimations",value:function(){for(var t=0;t<this.textAnimationItem.length;t++)this.textAnimationItem[t].classList.add(c.REMOVE_CHANGE)}}],[{key:"IS_SUPPORTED",value:function(){return!0}}]),e}(l["default"]);n["default"]=f},{"@marcom/bubble-gum/BaseComponent":275}],303:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}var r=t("@marcom/anim-system"),o=i(r),s=t("@marcom/anim-system/Model/AnimSystemModel"),a=i(s),u=t("@marcom/bubble-gum/BubbleGum"),l=i(u),c=t("@marcom/bubble-gum/src/ComponentMap"),h=i(c),f=t("./components/HeroComponent"),d=i(f),p=t("./components/SectionVideoComponent"),m=i(p),y=t("./components/TextAnimationComponent"),_=i(y),v=t("./components/ProgressiveImageComponent"),g=i(v),b=t("./components/BarebonesScrubbableVideoComponent"),w=i(b),x=t("@marcom/ac-get-param"),E=function(){return{initialize:function(){if(Object.assign(h["default"],{HeroComponent:d["default"],SectionVideoComponent:m["default"],TextAnimationComponent:_["default"],ProgressiveImageComponent:g["default"],BarebonesScrubbableVideoComponent:w["default"]}),x("anim-gui",!1)){var e=t("@marcom/anim-system/AnimSystemGUI");e.Enable()}E.filterResizeEvents();var n=document.querySelector(".main");new l["default"](n)},filterResizeEvents:function(){var t=document.createElement("div");t.setAttribute("windowDimensionsTracker","true"),t.setAttribute("class","winDimensionsTrackerEl"),t.style.position="absolute",t.style.top="0",t.style.width="100%",t.style.height="100vh",t.style.pointerEvents="none",t.style.visibility="hidden",t.style.zIndex="-1",document.body.appendChild(t);var e=t.clientWidth,n=t.clientHeight;o["default"].on("ON_DOM_GROUPS_CREATED",function(){return a["default"].pageMetrics.windowHeight=n}),o["default"].on("ON_RESIZE_IMMEDIATE",function(){return a["default"].pageMetrics.windowHeight=n}),window.removeEventListener("resize",o["default"].onResizeImmediate),window.addEventListener("resize",function(i){var r=t.clientWidth,s=t.clientHeight;r===e&&s===n||(e=r,n=s,o["default"].onResizeImmediate(i))})}}}();e.exports=E.initialize()},{"./components/BarebonesScrubbableVideoComponent":298,"./components/HeroComponent":299,"./components/ProgressiveImageComponent":300,"./components/SectionVideoComponent":301,"./components/TextAnimationComponent":302,"@marcom/ac-get-param":84,"@marcom/anim-system":249,"@marcom/anim-system/AnimSystemGUI":250,"@marcom/anim-system/Model/AnimSystemModel":263,"@marcom/bubble-gum/BubbleGum":276,"@marcom/bubble-gum/src/ComponentMap":277}]},{},[303]);